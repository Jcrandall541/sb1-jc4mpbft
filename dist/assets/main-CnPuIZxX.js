var un=Object.defineProperty;var ln=(r,e,t)=>e in r?un(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var it=(r,e,t)=>ln(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();class BrowserLogger{constructor(){this.logs=[],this.connectionStatus={rpc:!1,ws:!1}}info(e,t={}){this.log("info",e,t)}error(e,t={}){this.log("error",e,t)}warn(e,t={}){this.log("warn",e,t)}debug(e,t={}){this.log("debug",e,t)}connection(e,t,n={}){this.connectionStatus[e]=t,this.log("connection",`${e.toUpperCase()} Connection ${t?"established":"lost"}`,{type:e,status:t,...n})}transaction(e,t={}){this.log("transaction",`Transaction ${e}`,{timestamp:new Date().toISOString(),...t})}log(e,t,n){const o={level:e,message:t,data:n,timestamp:new Date().toISOString(),connections:{...this.connectionStatus}};this.logs.push(o);const s=new Date().toLocaleTimeString(),a=`[RPC:${this.connectionStatus.rpc?"✓":"✗"}|WS:${this.connectionStatus.ws?"✓":"✗"}]`;let c=console.log,d="color: white";switch(e){case"error":c=console.error,d="color: #ff4444; font-weight: bold";break;case"warn":c=console.warn,d="color: #ffbb33; font-weight: bold";break;case"connection":d="color: #00C851; font-weight: bold";break;case"transaction":d="color: #33b5e5; font-weight: bold";break}c(`%c${s} ${a} ${t}`,d,n)}getLogs(){return this.logs}}const logger=new BrowserLogger;var define_global_default={},commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof define_global_default<"u"?define_global_default:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function getAugmentedNamespace(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var o=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return r[n]}})}),t}var buffer={},base64Js={};base64Js.byteLength=byteLength;var toByteArray_1=base64Js.toByteArray=toByteArray,fromByteArray_1=base64Js.fromByteArray=fromByteArray,lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$1=0,len=code.length;i$1<len;++i$1)lookup[i$1]=code[i$1],revLookup[code.charCodeAt(i$1)]=i$1;revLookup[45]=62;revLookup[95]=63;function getLens(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function byteLength(r){var e=getLens(r),t=e[0],n=e[1];return(t+n)*3/4-n}function _byteLength(r,e,t){return(e+t)*3/4-t}function toByteArray(r){var e,t=getLens(r),n=t[0],o=t[1],s=new Arr(_byteLength(r,n,o)),a=0,c=o>0?n-4:n,d;for(d=0;d<c;d+=4)e=revLookup[r.charCodeAt(d)]<<18|revLookup[r.charCodeAt(d+1)]<<12|revLookup[r.charCodeAt(d+2)]<<6|revLookup[r.charCodeAt(d+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return o===2&&(e=revLookup[r.charCodeAt(d)]<<2|revLookup[r.charCodeAt(d+1)]>>4,s[a++]=e&255),o===1&&(e=revLookup[r.charCodeAt(d)]<<10|revLookup[r.charCodeAt(d+1)]<<4|revLookup[r.charCodeAt(d+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function tripletToBase64(r){return lookup[r>>18&63]+lookup[r>>12&63]+lookup[r>>6&63]+lookup[r&63]}function encodeChunk(r,e,t){for(var n,o=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),o.push(tripletToBase64(n));return o.join("")}function fromByteArray(r){for(var e,t=r.length,n=t%3,o=[],s=16383,a=0,c=t-n;a<c;a+=s)o.push(encodeChunk(r,a,a+s>c?c:a+s));return n===1?(e=r[t-1],o.push(lookup[e>>2]+lookup[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],o.push(lookup[e>>10]+lookup[e>>4&63]+lookup[e<<2&63]+"=")),o.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(r,e,t,n,o){var s,a,c=o*8-n-1,d=(1<<c)-1,u=d>>1,y=-7,v=t?o-1:0,I=t?-1:1,S=r[e+v];for(v+=I,s=S&(1<<-y)-1,S>>=-y,y+=c;y>0;s=s*256+r[e+v],v+=I,y-=8);for(a=s&(1<<-y)-1,s>>=-y,y+=n;y>0;a=a*256+r[e+v],v+=I,y-=8);if(s===0)s=1-u;else{if(s===d)return a?NaN:(S?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-u}return(S?-1:1)*a*Math.pow(2,s-n)};ieee754.write=function(r,e,t,n,o,s){var a,c,d,u=s*8-o-1,y=(1<<u)-1,v=y>>1,I=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=n?0:s-1,P=n?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,a=y):(a=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-a))<1&&(a--,d*=2),a+v>=1?e+=I/d:e+=I*Math.pow(2,1-v),e*d>=2&&(a++,d/=2),a+v>=y?(c=0,a=y):a+v>=1?(c=(e*d-1)*Math.pow(2,o),a=a+v):(c=e*Math.pow(2,v-1)*Math.pow(2,o),a=0));o>=8;r[t+S]=c&255,S+=P,c/=256,o-=8);for(a=a<<o|c,u+=o;u>0;r[t+S]=a&255,S+=P,a/=256,u-=8);r[t+S-P]|=x*128};(function(r){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const e=base64Js,t=ieee754,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=c,r.SlowBuffer=z,r.INSPECT_MAX_BYTES=50;const o=2147483647;r.kMaxLength=o,c.TYPED_ARRAY_SUPPORT=s(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const R=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(R,g),R.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function a(R){if(R>o)throw new RangeError('The value "'+R+'" is invalid for option "size"');const g=new Uint8Array(R);return Object.setPrototypeOf(g,c.prototype),g}function c(R,g,_){if(typeof R=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(R)}return d(R,g,_)}c.poolSize=8192;function d(R,g,_){if(typeof R=="string")return I(R,g);if(ArrayBuffer.isView(R))return P(R);if(R==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R);if(nt(R,ArrayBuffer)||R&&nt(R.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(nt(R,SharedArrayBuffer)||R&&nt(R.buffer,SharedArrayBuffer)))return x(R,g,_);if(typeof R=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const $=R.valueOf&&R.valueOf();if($!=null&&$!==R)return c.from($,g,_);const X=A(R);if(X)return X;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof R[Symbol.toPrimitive]=="function")return c.from(R[Symbol.toPrimitive]("string"),g,_);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R)}c.from=function(R,g,_){return d(R,g,_)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function u(R){if(typeof R!="number")throw new TypeError('"size" argument must be of type number');if(R<0)throw new RangeError('The value "'+R+'" is invalid for option "size"')}function y(R,g,_){return u(R),R<=0?a(R):g!==void 0?typeof _=="string"?a(R).fill(g,_):a(R).fill(g):a(R)}c.alloc=function(R,g,_){return y(R,g,_)};function v(R){return u(R),a(R<0?0:O(R)|0)}c.allocUnsafe=function(R){return v(R)},c.allocUnsafeSlow=function(R){return v(R)};function I(R,g){if((typeof g!="string"||g==="")&&(g="utf8"),!c.isEncoding(g))throw new TypeError("Unknown encoding: "+g);const _=M(R,g)|0;let $=a(_);const X=$.write(R,g);return X!==_&&($=$.slice(0,X)),$}function S(R){const g=R.length<0?0:O(R.length)|0,_=a(g);for(let $=0;$<g;$+=1)_[$]=R[$]&255;return _}function P(R){if(nt(R,Uint8Array)){const g=new Uint8Array(R);return x(g.buffer,g.byteOffset,g.byteLength)}return S(R)}function x(R,g,_){if(g<0||R.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(R.byteLength<g+(_||0))throw new RangeError('"length" is outside of buffer bounds');let $;return g===void 0&&_===void 0?$=new Uint8Array(R):_===void 0?$=new Uint8Array(R,g):$=new Uint8Array(R,g,_),Object.setPrototypeOf($,c.prototype),$}function A(R){if(c.isBuffer(R)){const g=O(R.length)|0,_=a(g);return _.length===0||R.copy(_,0,0,g),_}if(R.length!==void 0)return typeof R.length!="number"||Ce(R.length)?a(0):S(R);if(R.type==="Buffer"&&Array.isArray(R.data))return S(R.data)}function O(R){if(R>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return R|0}function z(R){return+R!=R&&(R=0),c.alloc(+R)}c.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==c.prototype},c.compare=function(g,_){if(nt(g,Uint8Array)&&(g=c.from(g,g.offset,g.byteLength)),nt(_,Uint8Array)&&(_=c.from(_,_.offset,_.byteLength)),!c.isBuffer(g)||!c.isBuffer(_))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===_)return 0;let $=g.length,X=_.length;for(let ee=0,re=Math.min($,X);ee<re;++ee)if(g[ee]!==_[ee]){$=g[ee],X=_[ee];break}return $<X?-1:X<$?1:0},c.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(g,_){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return c.alloc(0);let $;if(_===void 0)for(_=0,$=0;$<g.length;++$)_+=g[$].length;const X=c.allocUnsafe(_);let ee=0;for($=0;$<g.length;++$){let re=g[$];if(nt(re,Uint8Array))ee+re.length>X.length?(c.isBuffer(re)||(re=c.from(re)),re.copy(X,ee)):Uint8Array.prototype.set.call(X,re,ee);else if(c.isBuffer(re))re.copy(X,ee);else throw new TypeError('"list" argument must be an Array of Buffers');ee+=re.length}return X};function M(R,g){if(c.isBuffer(R))return R.length;if(ArrayBuffer.isView(R)||nt(R,ArrayBuffer))return R.byteLength;if(typeof R!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof R);const _=R.length,$=arguments.length>2&&arguments[2]===!0;if(!$&&_===0)return 0;let X=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return _;case"utf8":case"utf-8":return Pe(R).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _*2;case"hex":return _>>>1;case"base64":return Ue(R).length;default:if(X)return $?-1:Pe(R).length;g=(""+g).toLowerCase(),X=!0}}c.byteLength=M;function H(R,g,_){let $=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((_===void 0||_>this.length)&&(_=this.length),_<=0)||(_>>>=0,g>>>=0,_<=g))return"";for(R||(R="utf8");;)switch(R){case"hex":return W(this,g,_);case"utf8":case"utf-8":return l(this,g,_);case"ascii":return T(this,g,_);case"latin1":case"binary":return C(this,g,_);case"base64":return L(this,g,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,g,_);default:if($)throw new TypeError("Unknown encoding: "+R);R=(R+"").toLowerCase(),$=!0}}c.prototype._isBuffer=!0;function q(R,g,_){const $=R[g];R[g]=R[_],R[_]=$}c.prototype.swap16=function(){const g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let _=0;_<g;_+=2)q(this,_,_+1);return this},c.prototype.swap32=function(){const g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let _=0;_<g;_+=4)q(this,_,_+3),q(this,_+1,_+2);return this},c.prototype.swap64=function(){const g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let _=0;_<g;_+=8)q(this,_,_+7),q(this,_+1,_+6),q(this,_+2,_+5),q(this,_+3,_+4);return this},c.prototype.toString=function(){const g=this.length;return g===0?"":arguments.length===0?l(this,0,g):H.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(g){if(!c.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:c.compare(this,g)===0},c.prototype.inspect=function(){let g="";const _=r.INSPECT_MAX_BYTES;return g=this.toString("hex",0,_).replace(/(.{2})/g,"$1 ").trim(),this.length>_&&(g+=" ... "),"<Buffer "+g+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(g,_,$,X,ee){if(nt(g,Uint8Array)&&(g=c.from(g,g.offset,g.byteLength)),!c.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(_===void 0&&(_=0),$===void 0&&($=g?g.length:0),X===void 0&&(X=0),ee===void 0&&(ee=this.length),_<0||$>g.length||X<0||ee>this.length)throw new RangeError("out of range index");if(X>=ee&&_>=$)return 0;if(X>=ee)return-1;if(_>=$)return 1;if(_>>>=0,$>>>=0,X>>>=0,ee>>>=0,this===g)return 0;let re=ee-X,Ee=$-_;const we=Math.min(re,Ee),be=this.slice(X,ee),Ne=g.slice(_,$);for(let ye=0;ye<we;++ye)if(be[ye]!==Ne[ye]){re=be[ye],Ee=Ne[ye];break}return re<Ee?-1:Ee<re?1:0};function Y(R,g,_,$,X){if(R.length===0)return-1;if(typeof _=="string"?($=_,_=0):_>2147483647?_=2147483647:_<-2147483648&&(_=-2147483648),_=+_,Ce(_)&&(_=X?0:R.length-1),_<0&&(_=R.length+_),_>=R.length){if(X)return-1;_=R.length-1}else if(_<0)if(X)_=0;else return-1;if(typeof g=="string"&&(g=c.from(g,$)),c.isBuffer(g))return g.length===0?-1:B(R,g,_,$,X);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?X?Uint8Array.prototype.indexOf.call(R,g,_):Uint8Array.prototype.lastIndexOf.call(R,g,_):B(R,[g],_,$,X);throw new TypeError("val must be string, number or Buffer")}function B(R,g,_,$,X){let ee=1,re=R.length,Ee=g.length;if($!==void 0&&($=String($).toLowerCase(),$==="ucs2"||$==="ucs-2"||$==="utf16le"||$==="utf-16le")){if(R.length<2||g.length<2)return-1;ee=2,re/=2,Ee/=2,_/=2}function we(Ne,ye){return ee===1?Ne[ye]:Ne.readUInt16BE(ye*ee)}let be;if(X){let Ne=-1;for(be=_;be<re;be++)if(we(R,be)===we(g,Ne===-1?0:be-Ne)){if(Ne===-1&&(Ne=be),be-Ne+1===Ee)return Ne*ee}else Ne!==-1&&(be-=be-Ne),Ne=-1}else for(_+Ee>re&&(_=re-Ee),be=_;be>=0;be--){let Ne=!0;for(let ye=0;ye<Ee;ye++)if(we(R,be+ye)!==we(g,ye)){Ne=!1;break}if(Ne)return be}return-1}c.prototype.includes=function(g,_,$){return this.indexOf(g,_,$)!==-1},c.prototype.indexOf=function(g,_,$){return Y(this,g,_,$,!0)},c.prototype.lastIndexOf=function(g,_,$){return Y(this,g,_,$,!1)};function N(R,g,_,$){_=Number(_)||0;const X=R.length-_;$?($=Number($),$>X&&($=X)):$=X;const ee=g.length;$>ee/2&&($=ee/2);let re;for(re=0;re<$;++re){const Ee=parseInt(g.substr(re*2,2),16);if(Ce(Ee))return re;R[_+re]=Ee}return re}function V(R,g,_,$){return Be(Pe(g,R.length-_),R,_,$)}function Q(R,g,_,$){return Be(Re(g),R,_,$)}function Z(R,g,_,$){return Be(Ue(g),R,_,$)}function J(R,g,_,$){return Be(ft(g,R.length-_),R,_,$)}c.prototype.write=function(g,_,$,X){if(_===void 0)X="utf8",$=this.length,_=0;else if($===void 0&&typeof _=="string")X=_,$=this.length,_=0;else if(isFinite(_))_=_>>>0,isFinite($)?($=$>>>0,X===void 0&&(X="utf8")):(X=$,$=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ee=this.length-_;if(($===void 0||$>ee)&&($=ee),g.length>0&&($<0||_<0)||_>this.length)throw new RangeError("Attempt to write outside buffer bounds");X||(X="utf8");let re=!1;for(;;)switch(X){case"hex":return N(this,g,_,$);case"utf8":case"utf-8":return V(this,g,_,$);case"ascii":case"latin1":case"binary":return Q(this,g,_,$);case"base64":return Z(this,g,_,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,g,_,$);default:if(re)throw new TypeError("Unknown encoding: "+X);X=(""+X).toLowerCase(),re=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(R,g,_){return g===0&&_===R.length?e.fromByteArray(R):e.fromByteArray(R.slice(g,_))}function l(R,g,_){_=Math.min(R.length,_);const $=[];let X=g;for(;X<_;){const ee=R[X];let re=null,Ee=ee>239?4:ee>223?3:ee>191?2:1;if(X+Ee<=_){let we,be,Ne,ye;switch(Ee){case 1:ee<128&&(re=ee);break;case 2:we=R[X+1],(we&192)===128&&(ye=(ee&31)<<6|we&63,ye>127&&(re=ye));break;case 3:we=R[X+1],be=R[X+2],(we&192)===128&&(be&192)===128&&(ye=(ee&15)<<12|(we&63)<<6|be&63,ye>2047&&(ye<55296||ye>57343)&&(re=ye));break;case 4:we=R[X+1],be=R[X+2],Ne=R[X+3],(we&192)===128&&(be&192)===128&&(Ne&192)===128&&(ye=(ee&15)<<18|(we&63)<<12|(be&63)<<6|Ne&63,ye>65535&&ye<1114112&&(re=ye))}}re===null?(re=65533,Ee=1):re>65535&&(re-=65536,$.push(re>>>10&1023|55296),re=56320|re&1023),$.push(re),X+=Ee}return E($)}const b=4096;function E(R){const g=R.length;if(g<=b)return String.fromCharCode.apply(String,R);let _="",$=0;for(;$<g;)_+=String.fromCharCode.apply(String,R.slice($,$+=b));return _}function T(R,g,_){let $="";_=Math.min(R.length,_);for(let X=g;X<_;++X)$+=String.fromCharCode(R[X]&127);return $}function C(R,g,_){let $="";_=Math.min(R.length,_);for(let X=g;X<_;++X)$+=String.fromCharCode(R[X]);return $}function W(R,g,_){const $=R.length;(!g||g<0)&&(g=0),(!_||_<0||_>$)&&(_=$);let X="";for(let ee=g;ee<_;++ee)X+=Oe[R[ee]];return X}function G(R,g,_){const $=R.slice(g,_);let X="";for(let ee=0;ee<$.length-1;ee+=2)X+=String.fromCharCode($[ee]+$[ee+1]*256);return X}c.prototype.slice=function(g,_){const $=this.length;g=~~g,_=_===void 0?$:~~_,g<0?(g+=$,g<0&&(g=0)):g>$&&(g=$),_<0?(_+=$,_<0&&(_=0)):_>$&&(_=$),_<g&&(_=g);const X=this.subarray(g,_);return Object.setPrototypeOf(X,c.prototype),X};function U(R,g,_){if(R%1!==0||R<0)throw new RangeError("offset is not uint");if(R+g>_)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(g,_,$){g=g>>>0,_=_>>>0,$||U(g,_,this.length);let X=this[g],ee=1,re=0;for(;++re<_&&(ee*=256);)X+=this[g+re]*ee;return X},c.prototype.readUintBE=c.prototype.readUIntBE=function(g,_,$){g=g>>>0,_=_>>>0,$||U(g,_,this.length);let X=this[g+--_],ee=1;for(;_>0&&(ee*=256);)X+=this[g+--_]*ee;return X},c.prototype.readUint8=c.prototype.readUInt8=function(g,_){return g=g>>>0,_||U(g,1,this.length),this[g]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(g,_){return g=g>>>0,_||U(g,2,this.length),this[g]|this[g+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(g,_){return g=g>>>0,_||U(g,2,this.length),this[g]<<8|this[g+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(g,_){return g=g>>>0,_||U(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(g,_){return g=g>>>0,_||U(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},c.prototype.readBigUInt64LE=st(function(g){g=g>>>0,Ae(g,"offset");const _=this[g],$=this[g+7];(_===void 0||$===void 0)&&ve(g,this.length-8);const X=_+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,ee=this[++g]+this[++g]*2**8+this[++g]*2**16+$*2**24;return BigInt(X)+(BigInt(ee)<<BigInt(32))}),c.prototype.readBigUInt64BE=st(function(g){g=g>>>0,Ae(g,"offset");const _=this[g],$=this[g+7];(_===void 0||$===void 0)&&ve(g,this.length-8);const X=_*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],ee=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+$;return(BigInt(X)<<BigInt(32))+BigInt(ee)}),c.prototype.readIntLE=function(g,_,$){g=g>>>0,_=_>>>0,$||U(g,_,this.length);let X=this[g],ee=1,re=0;for(;++re<_&&(ee*=256);)X+=this[g+re]*ee;return ee*=128,X>=ee&&(X-=Math.pow(2,8*_)),X},c.prototype.readIntBE=function(g,_,$){g=g>>>0,_=_>>>0,$||U(g,_,this.length);let X=_,ee=1,re=this[g+--X];for(;X>0&&(ee*=256);)re+=this[g+--X]*ee;return ee*=128,re>=ee&&(re-=Math.pow(2,8*_)),re},c.prototype.readInt8=function(g,_){return g=g>>>0,_||U(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},c.prototype.readInt16LE=function(g,_){g=g>>>0,_||U(g,2,this.length);const $=this[g]|this[g+1]<<8;return $&32768?$|4294901760:$},c.prototype.readInt16BE=function(g,_){g=g>>>0,_||U(g,2,this.length);const $=this[g+1]|this[g]<<8;return $&32768?$|4294901760:$},c.prototype.readInt32LE=function(g,_){return g=g>>>0,_||U(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},c.prototype.readInt32BE=function(g,_){return g=g>>>0,_||U(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},c.prototype.readBigInt64LE=st(function(g){g=g>>>0,Ae(g,"offset");const _=this[g],$=this[g+7];(_===void 0||$===void 0)&&ve(g,this.length-8);const X=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+($<<24);return(BigInt(X)<<BigInt(32))+BigInt(_+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)}),c.prototype.readBigInt64BE=st(function(g){g=g>>>0,Ae(g,"offset");const _=this[g],$=this[g+7];(_===void 0||$===void 0)&&ve(g,this.length-8);const X=(_<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(X)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+$)}),c.prototype.readFloatLE=function(g,_){return g=g>>>0,_||U(g,4,this.length),t.read(this,g,!0,23,4)},c.prototype.readFloatBE=function(g,_){return g=g>>>0,_||U(g,4,this.length),t.read(this,g,!1,23,4)},c.prototype.readDoubleLE=function(g,_){return g=g>>>0,_||U(g,8,this.length),t.read(this,g,!0,52,8)},c.prototype.readDoubleBE=function(g,_){return g=g>>>0,_||U(g,8,this.length),t.read(this,g,!1,52,8)};function m(R,g,_,$,X,ee){if(!c.isBuffer(R))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>X||g<ee)throw new RangeError('"value" argument is out of bounds');if(_+$>R.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(g,_,$,X){if(g=+g,_=_>>>0,$=$>>>0,!X){const Ee=Math.pow(2,8*$)-1;m(this,g,_,$,Ee,0)}let ee=1,re=0;for(this[_]=g&255;++re<$&&(ee*=256);)this[_+re]=g/ee&255;return _+$},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(g,_,$,X){if(g=+g,_=_>>>0,$=$>>>0,!X){const Ee=Math.pow(2,8*$)-1;m(this,g,_,$,Ee,0)}let ee=$-1,re=1;for(this[_+ee]=g&255;--ee>=0&&(re*=256);)this[_+ee]=g/re&255;return _+$},c.prototype.writeUint8=c.prototype.writeUInt8=function(g,_,$){return g=+g,_=_>>>0,$||m(this,g,_,1,255,0),this[_]=g&255,_+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(g,_,$){return g=+g,_=_>>>0,$||m(this,g,_,2,65535,0),this[_]=g&255,this[_+1]=g>>>8,_+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(g,_,$){return g=+g,_=_>>>0,$||m(this,g,_,2,65535,0),this[_]=g>>>8,this[_+1]=g&255,_+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(g,_,$){return g=+g,_=_>>>0,$||m(this,g,_,4,4294967295,0),this[_+3]=g>>>24,this[_+2]=g>>>16,this[_+1]=g>>>8,this[_]=g&255,_+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(g,_,$){return g=+g,_=_>>>0,$||m(this,g,_,4,4294967295,0),this[_]=g>>>24,this[_+1]=g>>>16,this[_+2]=g>>>8,this[_+3]=g&255,_+4};function F(R,g,_,$,X){Se(g,$,X,R,_,7);let ee=Number(g&BigInt(4294967295));R[_++]=ee,ee=ee>>8,R[_++]=ee,ee=ee>>8,R[_++]=ee,ee=ee>>8,R[_++]=ee;let re=Number(g>>BigInt(32)&BigInt(4294967295));return R[_++]=re,re=re>>8,R[_++]=re,re=re>>8,R[_++]=re,re=re>>8,R[_++]=re,_}function se(R,g,_,$,X){Se(g,$,X,R,_,7);let ee=Number(g&BigInt(4294967295));R[_+7]=ee,ee=ee>>8,R[_+6]=ee,ee=ee>>8,R[_+5]=ee,ee=ee>>8,R[_+4]=ee;let re=Number(g>>BigInt(32)&BigInt(4294967295));return R[_+3]=re,re=re>>8,R[_+2]=re,re=re>>8,R[_+1]=re,re=re>>8,R[_]=re,_+8}c.prototype.writeBigUInt64LE=st(function(g,_=0){return F(this,g,_,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=st(function(g,_=0){return se(this,g,_,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(g,_,$,X){if(g=+g,_=_>>>0,!X){const we=Math.pow(2,8*$-1);m(this,g,_,$,we-1,-we)}let ee=0,re=1,Ee=0;for(this[_]=g&255;++ee<$&&(re*=256);)g<0&&Ee===0&&this[_+ee-1]!==0&&(Ee=1),this[_+ee]=(g/re>>0)-Ee&255;return _+$},c.prototype.writeIntBE=function(g,_,$,X){if(g=+g,_=_>>>0,!X){const we=Math.pow(2,8*$-1);m(this,g,_,$,we-1,-we)}let ee=$-1,re=1,Ee=0;for(this[_+ee]=g&255;--ee>=0&&(re*=256);)g<0&&Ee===0&&this[_+ee+1]!==0&&(Ee=1),this[_+ee]=(g/re>>0)-Ee&255;return _+$},c.prototype.writeInt8=function(g,_,$){return g=+g,_=_>>>0,$||m(this,g,_,1,127,-128),g<0&&(g=255+g+1),this[_]=g&255,_+1},c.prototype.writeInt16LE=function(g,_,$){return g=+g,_=_>>>0,$||m(this,g,_,2,32767,-32768),this[_]=g&255,this[_+1]=g>>>8,_+2},c.prototype.writeInt16BE=function(g,_,$){return g=+g,_=_>>>0,$||m(this,g,_,2,32767,-32768),this[_]=g>>>8,this[_+1]=g&255,_+2},c.prototype.writeInt32LE=function(g,_,$){return g=+g,_=_>>>0,$||m(this,g,_,4,2147483647,-2147483648),this[_]=g&255,this[_+1]=g>>>8,this[_+2]=g>>>16,this[_+3]=g>>>24,_+4},c.prototype.writeInt32BE=function(g,_,$){return g=+g,_=_>>>0,$||m(this,g,_,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[_]=g>>>24,this[_+1]=g>>>16,this[_+2]=g>>>8,this[_+3]=g&255,_+4},c.prototype.writeBigInt64LE=st(function(g,_=0){return F(this,g,_,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=st(function(g,_=0){return se(this,g,_,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ae(R,g,_,$,X,ee){if(_+$>R.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("Index out of range")}function ue(R,g,_,$,X){return g=+g,_=_>>>0,X||ae(R,g,_,4),t.write(R,g,_,$,23,4),_+4}c.prototype.writeFloatLE=function(g,_,$){return ue(this,g,_,!0,$)},c.prototype.writeFloatBE=function(g,_,$){return ue(this,g,_,!1,$)};function me(R,g,_,$,X){return g=+g,_=_>>>0,X||ae(R,g,_,8),t.write(R,g,_,$,52,8),_+8}c.prototype.writeDoubleLE=function(g,_,$){return me(this,g,_,!0,$)},c.prototype.writeDoubleBE=function(g,_,$){return me(this,g,_,!1,$)},c.prototype.copy=function(g,_,$,X){if(!c.isBuffer(g))throw new TypeError("argument should be a Buffer");if($||($=0),!X&&X!==0&&(X=this.length),_>=g.length&&(_=g.length),_||(_=0),X>0&&X<$&&(X=$),X===$||g.length===0||this.length===0)return 0;if(_<0)throw new RangeError("targetStart out of bounds");if($<0||$>=this.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("sourceEnd out of bounds");X>this.length&&(X=this.length),g.length-_<X-$&&(X=g.length-_+$);const ee=X-$;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(_,$,X):Uint8Array.prototype.set.call(g,this.subarray($,X),_),ee},c.prototype.fill=function(g,_,$,X){if(typeof g=="string"){if(typeof _=="string"?(X=_,_=0,$=this.length):typeof $=="string"&&(X=$,$=this.length),X!==void 0&&typeof X!="string")throw new TypeError("encoding must be a string");if(typeof X=="string"&&!c.isEncoding(X))throw new TypeError("Unknown encoding: "+X);if(g.length===1){const re=g.charCodeAt(0);(X==="utf8"&&re<128||X==="latin1")&&(g=re)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(_<0||this.length<_||this.length<$)throw new RangeError("Out of range index");if($<=_)return this;_=_>>>0,$=$===void 0?this.length:$>>>0,g||(g=0);let ee;if(typeof g=="number")for(ee=_;ee<$;++ee)this[ee]=g;else{const re=c.isBuffer(g)?g:c.from(g,X),Ee=re.length;if(Ee===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(ee=0;ee<$-_;++ee)this[ee+_]=re[ee%Ee]}return this};const he={};function pe(R,g,_){he[R]=class extends _{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${R}]`,this.stack,delete this.name}get code(){return R}set code(X){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:X,writable:!0})}toString(){return`${this.name} [${R}]: ${this.message}`}}}pe("ERR_BUFFER_OUT_OF_BOUNDS",function(R){return R?`${R} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),pe("ERR_INVALID_ARG_TYPE",function(R,g){return`The "${R}" argument must be of type number. Received type ${typeof g}`},TypeError),pe("ERR_OUT_OF_RANGE",function(R,g,_){let $=`The value of "${R}" is out of range.`,X=_;return Number.isInteger(_)&&Math.abs(_)>2**32?X=ke(String(_)):typeof _=="bigint"&&(X=String(_),(_>BigInt(2)**BigInt(32)||_<-(BigInt(2)**BigInt(32)))&&(X=ke(X)),X+="n"),$+=` It must be ${g}. Received ${X}`,$},RangeError);function ke(R){let g="",_=R.length;const $=R[0]==="-"?1:0;for(;_>=$+4;_-=3)g=`_${R.slice(_-3,_)}${g}`;return`${R.slice(0,_)}${g}`}function ge(R,g,_){Ae(g,"offset"),(R[g]===void 0||R[g+_]===void 0)&&ve(g,R.length-(_+1))}function Se(R,g,_,$,X,ee){if(R>_||R<g){const re=typeof g=="bigint"?"n":"";let Ee;throw g===0||g===BigInt(0)?Ee=`>= 0${re} and < 2${re} ** ${(ee+1)*8}${re}`:Ee=`>= -(2${re} ** ${(ee+1)*8-1}${re}) and < 2 ** ${(ee+1)*8-1}${re}`,new he.ERR_OUT_OF_RANGE("value",Ee,R)}ge($,X,ee)}function Ae(R,g){if(typeof R!="number")throw new he.ERR_INVALID_ARG_TYPE(g,"number",R)}function ve(R,g,_){throw Math.floor(R)!==R?(Ae(R,_),new he.ERR_OUT_OF_RANGE("offset","an integer",R)):g<0?new he.ERR_BUFFER_OUT_OF_BOUNDS:new he.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${g}`,R)}const Te=/[^+/0-9A-Za-z-_]/g;function gt(R){if(R=R.split("=")[0],R=R.trim().replace(Te,""),R.length<2)return"";for(;R.length%4!==0;)R=R+"=";return R}function Pe(R,g){g=g||1/0;let _;const $=R.length;let X=null;const ee=[];for(let re=0;re<$;++re){if(_=R.charCodeAt(re),_>55295&&_<57344){if(!X){if(_>56319){(g-=3)>-1&&ee.push(239,191,189);continue}else if(re+1===$){(g-=3)>-1&&ee.push(239,191,189);continue}X=_;continue}if(_<56320){(g-=3)>-1&&ee.push(239,191,189),X=_;continue}_=(X-55296<<10|_-56320)+65536}else X&&(g-=3)>-1&&ee.push(239,191,189);if(X=null,_<128){if((g-=1)<0)break;ee.push(_)}else if(_<2048){if((g-=2)<0)break;ee.push(_>>6|192,_&63|128)}else if(_<65536){if((g-=3)<0)break;ee.push(_>>12|224,_>>6&63|128,_&63|128)}else if(_<1114112){if((g-=4)<0)break;ee.push(_>>18|240,_>>12&63|128,_>>6&63|128,_&63|128)}else throw new Error("Invalid code point")}return ee}function Re(R){const g=[];for(let _=0;_<R.length;++_)g.push(R.charCodeAt(_)&255);return g}function ft(R,g){let _,$,X;const ee=[];for(let re=0;re<R.length&&!((g-=2)<0);++re)_=R.charCodeAt(re),$=_>>8,X=_%256,ee.push(X),ee.push($);return ee}function Ue(R){return e.toByteArray(gt(R))}function Be(R,g,_,$){let X;for(X=0;X<$&&!(X+_>=g.length||X>=R.length);++X)g[X+_]=R[X];return X}function nt(R,g){return R instanceof g||R!=null&&R.constructor!=null&&R.constructor.name!=null&&R.constructor.name===g.name}function Ce(R){return R!==R}const Oe=function(){const R="0123456789abcdef",g=new Array(256);for(let _=0;_<16;++_){const $=_*16;for(let X=0;X<16;++X)g[$+X]=R[_]+R[X]}return g}();function st(R){return typeof BigInt>"u"?Me:R}function Me(){throw new Error("BigInt not supported")}})(buffer);function anumber$1(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function isBytes$2(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function abytes$2(r,...e){if(!isBytes$2(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function ahash(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");anumber$1(r.outputLen),anumber$1(r.blockLen)}function aexists$1(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function aoutput$1(r,e){abytes$2(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const crypto$1=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const createView$1=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),rotr$1=(r,e)=>r<<32-e|r>>>e;function utf8ToBytes$2(r){if(typeof r!="string")throw new Error("utf8ToBytes expected string, got "+typeof r);return new Uint8Array(new TextEncoder().encode(r))}function toBytes$1(r){return typeof r=="string"&&(r=utf8ToBytes$2(r)),abytes$2(r),r}function concatBytes$1(...r){let e=0;for(let n=0;n<r.length;n++){const o=r[n];abytes$2(o),e+=o.length}const t=new Uint8Array(e);for(let n=0,o=0;n<r.length;n++){const s=r[n];t.set(s,o),o+=s.length}return t}let Hash$1=class{clone(){return this._cloneInto()}};function wrapConstructor$1(r){const e=n=>r().update(toBytes$1(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function randomBytes(r=32){if(crypto$1&&typeof crypto$1.getRandomValues=="function")return crypto$1.getRandomValues(new Uint8Array(r));if(crypto$1&&typeof crypto$1.randomBytes=="function")return crypto$1.randomBytes(r);throw new Error("crypto.getRandomValues must be defined")}function setBigUint64$1(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const o=BigInt(32),s=BigInt(4294967295),a=Number(t>>o&s),c=Number(t&s),d=n?4:0,u=n?0:4;r.setUint32(e+d,a,n),r.setUint32(e+u,c,n)}const Chi$1=(r,e,t)=>r&e^~r&t,Maj$1=(r,e,t)=>r&e^r&t^e&t;let HashMD$1=class extends Hash$1{constructor(e,t,n,o){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=createView$1(this.buffer)}update(e){aexists$1(this);const{view:t,buffer:n,blockLen:o}=this;e=toBytes$1(e);const s=e.length;for(let a=0;a<s;){const c=Math.min(o-this.pos,s-a);if(c===o){const d=createView$1(e);for(;o<=s-a;a+=o)this.process(d,a);continue}n.set(e.subarray(a,a+c),this.pos),this.pos+=c,a+=c,this.pos===o&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){aexists$1(this),aoutput$1(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:o,isLE:s}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(n,0),a=0);for(let v=a;v<o;v++)t[v]=0;setBigUint64$1(n,o-8,BigInt(this.length*8),s),this.process(n,0);const c=createView$1(e),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=d/4,y=this.get();if(u>y.length)throw new Error("_sha2: outputLen bigger than state");for(let v=0;v<u;v++)c.setUint32(4*v,y[v],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:o,finished:s,destroyed:a,pos:c}=this;return e.length=o,e.pos=c,e.finished=s,e.destroyed=a,o%t&&e.buffer.set(n),e}};const U32_MASK64$1=BigInt(2**32-1),_32n$1=BigInt(32);function fromBig$1(r,e=!1){return e?{h:Number(r&U32_MASK64$1),l:Number(r>>_32n$1&U32_MASK64$1)}:{h:Number(r>>_32n$1&U32_MASK64$1)|0,l:Number(r&U32_MASK64$1)|0}}function split$1(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let o=0;o<r.length;o++){const{h:s,l:a}=fromBig$1(r[o],e);[t[o],n[o]]=[s,a]}return[t,n]}const toBig=(r,e)=>BigInt(r>>>0)<<_32n$1|BigInt(e>>>0),shrSH=(r,e,t)=>r>>>t,shrSL=(r,e,t)=>r<<32-t|e>>>t,rotrSH=(r,e,t)=>r>>>t|e<<32-t,rotrSL=(r,e,t)=>r<<32-t|e>>>t,rotrBH=(r,e,t)=>r<<64-t|e>>>t-32,rotrBL=(r,e,t)=>r>>>t-32|e<<64-t,rotr32H=(r,e)=>e,rotr32L=(r,e)=>r,rotlSH$1=(r,e,t)=>r<<t|e>>>32-t,rotlSL$1=(r,e,t)=>e<<t|r>>>32-t,rotlBH$1=(r,e,t)=>e<<t-32|r>>>64-t,rotlBL$1=(r,e,t)=>r<<t-32|e>>>64-t;function add(r,e,t,n){const o=(e>>>0)+(n>>>0);return{h:r+t+(o/2**32|0)|0,l:o|0}}const add3L=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),add3H=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,add4L=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),add4H=(r,e,t,n,o)=>e+t+n+o+(r/2**32|0)|0,add5L=(r,e,t,n,o)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(o>>>0),add5H=(r,e,t,n,o,s)=>e+t+n+o+s+(r/2**32|0)|0,u64$2={fromBig:fromBig$1,split:split$1,toBig,shrSH,shrSL,rotrSH,rotrSL,rotrBH,rotrBL,rotr32H,rotr32L,rotlSH:rotlSH$1,rotlSL:rotlSL$1,rotlBH:rotlBH$1,rotlBL:rotlBL$1,add,add3L,add3H,add4L,add4H,add5H,add5L},[SHA512_Kh,SHA512_Kl]=u64$2.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),SHA512_W_H=new Uint32Array(80),SHA512_W_L=new Uint32Array(80);class SHA512 extends HashMD$1{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:o,Ch:s,Cl:a,Dh:c,Dl:d,Eh:u,El:y,Fh:v,Fl:I,Gh:S,Gl:P,Hh:x,Hl:A}=this;return[e,t,n,o,s,a,c,d,u,y,v,I,S,P,x,A]}set(e,t,n,o,s,a,c,d,u,y,v,I,S,P,x,A){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=o|0,this.Ch=s|0,this.Cl=a|0,this.Dh=c|0,this.Dl=d|0,this.Eh=u|0,this.El=y|0,this.Fh=v|0,this.Fl=I|0,this.Gh=S|0,this.Gl=P|0,this.Hh=x|0,this.Hl=A|0}process(e,t){for(let M=0;M<16;M++,t+=4)SHA512_W_H[M]=e.getUint32(t),SHA512_W_L[M]=e.getUint32(t+=4);for(let M=16;M<80;M++){const H=SHA512_W_H[M-15]|0,q=SHA512_W_L[M-15]|0,Y=u64$2.rotrSH(H,q,1)^u64$2.rotrSH(H,q,8)^u64$2.shrSH(H,q,7),B=u64$2.rotrSL(H,q,1)^u64$2.rotrSL(H,q,8)^u64$2.shrSL(H,q,7),N=SHA512_W_H[M-2]|0,V=SHA512_W_L[M-2]|0,Q=u64$2.rotrSH(N,V,19)^u64$2.rotrBH(N,V,61)^u64$2.shrSH(N,V,6),Z=u64$2.rotrSL(N,V,19)^u64$2.rotrBL(N,V,61)^u64$2.shrSL(N,V,6),J=u64$2.add4L(B,Z,SHA512_W_L[M-7],SHA512_W_L[M-16]),L=u64$2.add4H(J,Y,Q,SHA512_W_H[M-7],SHA512_W_H[M-16]);SHA512_W_H[M]=L|0,SHA512_W_L[M]=J|0}let{Ah:n,Al:o,Bh:s,Bl:a,Ch:c,Cl:d,Dh:u,Dl:y,Eh:v,El:I,Fh:S,Fl:P,Gh:x,Gl:A,Hh:O,Hl:z}=this;for(let M=0;M<80;M++){const H=u64$2.rotrSH(v,I,14)^u64$2.rotrSH(v,I,18)^u64$2.rotrBH(v,I,41),q=u64$2.rotrSL(v,I,14)^u64$2.rotrSL(v,I,18)^u64$2.rotrBL(v,I,41),Y=v&S^~v&x,B=I&P^~I&A,N=u64$2.add5L(z,q,B,SHA512_Kl[M],SHA512_W_L[M]),V=u64$2.add5H(N,O,H,Y,SHA512_Kh[M],SHA512_W_H[M]),Q=N|0,Z=u64$2.rotrSH(n,o,28)^u64$2.rotrBH(n,o,34)^u64$2.rotrBH(n,o,39),J=u64$2.rotrSL(n,o,28)^u64$2.rotrBL(n,o,34)^u64$2.rotrBL(n,o,39),L=n&s^n&c^s&c,l=o&a^o&d^a&d;O=x|0,z=A|0,x=S|0,A=P|0,S=v|0,P=I|0,{h:v,l:I}=u64$2.add(u|0,y|0,V|0,Q|0),u=c|0,y=d|0,c=s|0,d=a|0,s=n|0,a=o|0;const b=u64$2.add3L(Q,J,l);n=u64$2.add3H(b,V,Z,L),o=b|0}({h:n,l:o}=u64$2.add(this.Ah|0,this.Al|0,n|0,o|0)),{h:s,l:a}=u64$2.add(this.Bh|0,this.Bl|0,s|0,a|0),{h:c,l:d}=u64$2.add(this.Ch|0,this.Cl|0,c|0,d|0),{h:u,l:y}=u64$2.add(this.Dh|0,this.Dl|0,u|0,y|0),{h:v,l:I}=u64$2.add(this.Eh|0,this.El|0,v|0,I|0),{h:S,l:P}=u64$2.add(this.Fh|0,this.Fl|0,S|0,P|0),{h:x,l:A}=u64$2.add(this.Gh|0,this.Gl|0,x|0,A|0),{h:O,l:z}=u64$2.add(this.Hh|0,this.Hl|0,O|0,z|0),this.set(n,o,s,a,c,d,u,y,v,I,S,P,x,A,O,z)}roundClean(){SHA512_W_H.fill(0),SHA512_W_L.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const sha512=wrapConstructor$1(()=>new SHA512);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$5=BigInt(0),_1n$7=BigInt(1),_2n$5=BigInt(2);function isBytes$1(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function abytes$1(r){if(!isBytes$1(r))throw new Error("Uint8Array expected")}function abool(r,e){if(typeof e!="boolean")throw new Error(r+" boolean expected, got "+e)}const hexes=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function bytesToHex(r){abytes$1(r);let e="";for(let t=0;t<r.length;t++)e+=hexes[r[t]];return e}function numberToHexUnpadded(r){const e=r.toString(16);return e.length&1?"0"+e:e}function hexToNumber(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?_0n$5:BigInt("0x"+r)}const asciis={_0:48,_9:57,A:65,F:70,a:97,f:102};function asciiToBase16(r){if(r>=asciis._0&&r<=asciis._9)return r-asciis._0;if(r>=asciis.A&&r<=asciis.F)return r-(asciis.A-10);if(r>=asciis.a&&r<=asciis.f)return r-(asciis.a-10)}function hexToBytes(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let o=0,s=0;o<t;o++,s+=2){const a=asciiToBase16(r.charCodeAt(s)),c=asciiToBase16(r.charCodeAt(s+1));if(a===void 0||c===void 0){const d=r[s]+r[s+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+s)}n[o]=a*16+c}return n}function bytesToNumberBE(r){return hexToNumber(bytesToHex(r))}function bytesToNumberLE(r){return abytes$1(r),hexToNumber(bytesToHex(Uint8Array.from(r).reverse()))}function numberToBytesBE(r,e){return hexToBytes(r.toString(16).padStart(e*2,"0"))}function numberToBytesLE(r,e){return numberToBytesBE(r,e).reverse()}function numberToVarBytesBE(r){return hexToBytes(numberToHexUnpadded(r))}function ensureBytes(r,e,t){let n;if(typeof e=="string")try{n=hexToBytes(e)}catch(s){throw new Error(r+" must be hex string or Uint8Array, cause: "+s)}else if(isBytes$1(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const o=n.length;if(typeof t=="number"&&o!==t)throw new Error(r+" of length "+t+" expected, got "+o);return n}function concatBytes(...r){let e=0;for(let n=0;n<r.length;n++){const o=r[n];abytes$1(o),e+=o.length}const t=new Uint8Array(e);for(let n=0,o=0;n<r.length;n++){const s=r[n];t.set(s,o),o+=s.length}return t}function equalBytes(r,e){if(r.length!==e.length)return!1;let t=0;for(let n=0;n<r.length;n++)t|=r[n]^e[n];return t===0}function utf8ToBytes$1(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}const isPosBig=r=>typeof r=="bigint"&&_0n$5<=r;function inRange$1(r,e,t){return isPosBig(r)&&isPosBig(e)&&isPosBig(t)&&e<=r&&r<t}function aInRange(r,e,t,n){if(!inRange$1(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function bitLen(r){let e;for(e=0;r>_0n$5;r>>=_1n$7,e+=1);return e}function bitGet(r,e){return r>>BigInt(e)&_1n$7}function bitSet(r,e,t){return r|(t?_1n$7:_0n$5)<<BigInt(e)}const bitMask=r=>(_2n$5<<BigInt(r-1))-_1n$7,u8n=r=>new Uint8Array(r),u8fr=r=>Uint8Array.from(r);function createHmacDrbg(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=u8n(r),o=u8n(r),s=0;const a=()=>{n.fill(1),o.fill(0),s=0},c=(...v)=>t(o,n,...v),d=(v=u8n())=>{o=c(u8fr([0]),v),n=c(),v.length!==0&&(o=c(u8fr([1]),v),n=c())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let v=0;const I=[];for(;v<e;){n=c();const S=n.slice();I.push(S),v+=n.length}return concatBytes(...I)};return(v,I)=>{a(),d(v);let S;for(;!(S=I(u()));)d();return a(),S}}const validatorFns={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||isBytes$1(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function validateObject(r,e,t={}){const n=(o,s,a)=>{const c=validatorFns[s];if(typeof c!="function")throw new Error("invalid validator function");const d=r[o];if(!(a&&d===void 0)&&!c(d,r))throw new Error("param "+String(o)+" is invalid. Expected "+s+", got "+d)};for(const[o,s]of Object.entries(e))n(o,s,!1);for(const[o,s]of Object.entries(t))n(o,s,!0);return r}const notImplemented=()=>{throw new Error("not implemented")};function memoized(r){const e=new WeakMap;return(t,...n)=>{const o=e.get(t);if(o!==void 0)return o;const s=r(t,...n);return e.set(t,s),s}}const ut=Object.freeze(Object.defineProperty({__proto__:null,aInRange,abool,abytes:abytes$1,bitGet,bitLen,bitMask,bitSet,bytesToHex,bytesToNumberBE,bytesToNumberLE,concatBytes,createHmacDrbg,ensureBytes,equalBytes,hexToBytes,hexToNumber,inRange:inRange$1,isBytes:isBytes$1,memoized,notImplemented,numberToBytesBE,numberToBytesLE,numberToHexUnpadded,numberToVarBytesBE,utf8ToBytes:utf8ToBytes$1,validateObject},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$4=BigInt(0),_1n$6=BigInt(1),_2n$4=BigInt(2),_3n$1=BigInt(3),_4n=BigInt(4),_5n$1=BigInt(5),_8n$2=BigInt(8);function mod(r,e){const t=r%e;return t>=_0n$4?t:e+t}function pow(r,e,t){if(e<_0n$4)throw new Error("invalid exponent, negatives unsupported");if(t<=_0n$4)throw new Error("invalid modulus");if(t===_1n$6)return _0n$4;let n=_1n$6;for(;e>_0n$4;)e&_1n$6&&(n=n*r%t),r=r*r%t,e>>=_1n$6;return n}function pow2(r,e,t){let n=r;for(;e-- >_0n$4;)n*=n,n%=t;return n}function invert(r,e){if(r===_0n$4)throw new Error("invert: expected non-zero number");if(e<=_0n$4)throw new Error("invert: expected positive modulus, got "+e);let t=mod(r,e),n=e,o=_0n$4,s=_1n$6;for(;t!==_0n$4;){const c=n/t,d=n%t,u=o-s*c;n=t,t=d,o=s,s=u}if(n!==_1n$6)throw new Error("invert: does not exist");return mod(o,e)}function tonelliShanks(r){const e=(r-_1n$6)/_2n$4;let t,n,o;for(t=r-_1n$6,n=0;t%_2n$4===_0n$4;t/=_2n$4,n++);for(o=_2n$4;o<r&&pow(o,e,r)!==r-_1n$6;o++)if(o>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const a=(r+_1n$6)/_4n;return function(d,u){const y=d.pow(u,a);if(!d.eql(d.sqr(y),u))throw new Error("Cannot find square root");return y}}const s=(t+_1n$6)/_2n$4;return function(c,d){if(c.pow(d,e)===c.neg(c.ONE))throw new Error("Cannot find square root");let u=n,y=c.pow(c.mul(c.ONE,o),t),v=c.pow(d,s),I=c.pow(d,t);for(;!c.eql(I,c.ONE);){if(c.eql(I,c.ZERO))return c.ZERO;let S=1;for(let x=c.sqr(I);S<u&&!c.eql(x,c.ONE);S++)x=c.sqr(x);const P=c.pow(y,_1n$6<<BigInt(u-S-1));y=c.sqr(P),v=c.mul(v,P),I=c.mul(I,y),u=S}return v}}function FpSqrt(r){if(r%_4n===_3n$1){const e=(r+_1n$6)/_4n;return function(n,o){const s=n.pow(o,e);if(!n.eql(n.sqr(s),o))throw new Error("Cannot find square root");return s}}if(r%_8n$2===_5n$1){const e=(r-_5n$1)/_8n$2;return function(n,o){const s=n.mul(o,_2n$4),a=n.pow(s,e),c=n.mul(o,a),d=n.mul(n.mul(c,_2n$4),a),u=n.mul(c,n.sub(d,n.ONE));if(!n.eql(n.sqr(u),o))throw new Error("Cannot find square root");return u}}return tonelliShanks(r)}const isNegativeLE=(r,e)=>(mod(r,e)&_1n$6)===_1n$6,FIELD_FIELDS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=FIELD_FIELDS.reduce((n,o)=>(n[o]="function",n),e);return validateObject(r,t)}function FpPow(r,e,t){if(t<_0n$4)throw new Error("invalid exponent, negatives unsupported");if(t===_0n$4)return r.ONE;if(t===_1n$6)return e;let n=r.ONE,o=e;for(;t>_0n$4;)t&_1n$6&&(n=r.mul(n,o)),o=r.sqr(o),t>>=_1n$6;return n}function FpInvertBatch(r,e){const t=new Array(e.length),n=e.reduce((s,a,c)=>r.is0(a)?s:(t[c]=s,r.mul(s,a)),r.ONE),o=r.inv(n);return e.reduceRight((s,a,c)=>r.is0(a)?s:(t[c]=r.mul(s,t[c]),r.mul(s,a)),o),t}function nLength(r,e){const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Field(r,e,t=!1,n={}){if(r<=_0n$4)throw new Error("invalid field: expected ORDER > 0, got "+r);const{nBitLength:o,nByteLength:s}=nLength(r,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let a;const c=Object.freeze({ORDER:r,BITS:o,BYTES:s,MASK:bitMask(o),ZERO:_0n$4,ONE:_1n$6,create:d=>mod(d,r),isValid:d=>{if(typeof d!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof d);return _0n$4<=d&&d<r},is0:d=>d===_0n$4,isOdd:d=>(d&_1n$6)===_1n$6,neg:d=>mod(-d,r),eql:(d,u)=>d===u,sqr:d=>mod(d*d,r),add:(d,u)=>mod(d+u,r),sub:(d,u)=>mod(d-u,r),mul:(d,u)=>mod(d*u,r),pow:(d,u)=>FpPow(c,d,u),div:(d,u)=>mod(d*invert(u,r),r),sqrN:d=>d*d,addN:(d,u)=>d+u,subN:(d,u)=>d-u,mulN:(d,u)=>d*u,inv:d=>invert(d,r),sqrt:n.sqrt||(d=>(a||(a=FpSqrt(r)),a(c,d))),invertBatch:d=>FpInvertBatch(c,d),cmov:(d,u,y)=>y?u:d,toBytes:d=>t?numberToBytesLE(d,s):numberToBytesBE(d,s),fromBytes:d=>{if(d.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+d.length);return t?bytesToNumberLE(d):bytesToNumberBE(d)}});return Object.freeze(c)}function getFieldBytesLength(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function getMinHashLength(r){const e=getFieldBytesLength(r);return e+Math.ceil(e/2)}function mapHashToField(r,e,t=!1){const n=r.length,o=getFieldBytesLength(e),s=getMinHashLength(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const a=t?bytesToNumberBE(r):bytesToNumberLE(r),c=mod(a,e-_1n$6)+_1n$6;return t?numberToBytesLE(c,o):numberToBytesBE(c,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$3=BigInt(0),_1n$5=BigInt(1);function constTimeNegate(r,e){const t=e.negate();return r?t:e}function validateW(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function calcWOpts(r,e){validateW(r,e);const t=Math.ceil(e/r)+1,n=2**(r-1);return{windows:t,windowSize:n}}function validateMSMPoints(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function validateMSMScalars(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const pointPrecomputes=new WeakMap,pointWindowSizes=new WeakMap;function getW(r){return pointWindowSizes.get(r)||1}function wNAF(r,e){return{constTimeNegate,hasPrecomputes(t){return getW(t)!==1},unsafeLadder(t,n,o=r.ZERO){let s=t;for(;n>_0n$3;)n&_1n$5&&(o=o.add(s)),s=s.double(),n>>=_1n$5;return o},precomputeWindow(t,n){const{windows:o,windowSize:s}=calcWOpts(n,e),a=[];let c=t,d=c;for(let u=0;u<o;u++){d=c,a.push(d);for(let y=1;y<s;y++)d=d.add(c),a.push(d);c=d.double()}return a},wNAF(t,n,o){const{windows:s,windowSize:a}=calcWOpts(t,e);let c=r.ZERO,d=r.BASE;const u=BigInt(2**t-1),y=2**t,v=BigInt(t);for(let I=0;I<s;I++){const S=I*a;let P=Number(o&u);o>>=v,P>a&&(P-=y,o+=_1n$5);const x=S,A=S+Math.abs(P)-1,O=I%2!==0,z=P<0;P===0?d=d.add(constTimeNegate(O,n[x])):c=c.add(constTimeNegate(z,n[A]))}return{p:c,f:d}},wNAFUnsafe(t,n,o,s=r.ZERO){const{windows:a,windowSize:c}=calcWOpts(t,e),d=BigInt(2**t-1),u=2**t,y=BigInt(t);for(let v=0;v<a;v++){const I=v*c;if(o===_0n$3)break;let S=Number(o&d);if(o>>=y,S>c&&(S-=u,o+=_1n$5),S===0)continue;let P=n[I+Math.abs(S)-1];S<0&&(P=P.negate()),s=s.add(P)}return s},getPrecomputes(t,n,o){let s=pointPrecomputes.get(n);return s||(s=this.precomputeWindow(n,t),t!==1&&pointPrecomputes.set(n,o(s))),s},wNAFCached(t,n,o){const s=getW(t);return this.wNAF(s,this.getPrecomputes(s,t,o),n)},wNAFCachedUnsafe(t,n,o,s){const a=getW(t);return a===1?this.unsafeLadder(t,n,s):this.wNAFUnsafe(a,this.getPrecomputes(a,t,o),n,s)},setWindowSize(t,n){validateW(n,e),pointWindowSizes.set(t,n),pointPrecomputes.delete(t)}}}function pippenger(r,e,t,n){if(validateMSMPoints(t,r),validateMSMScalars(n,e),t.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const o=r.ZERO,s=bitLen(BigInt(t.length)),a=s>12?s-3:s>4?s-2:s?2:1,c=(1<<a)-1,d=new Array(c+1).fill(o),u=Math.floor((e.BITS-1)/a)*a;let y=o;for(let v=u;v>=0;v-=a){d.fill(o);for(let S=0;S<n.length;S++){const P=n[S],x=Number(P>>BigInt(v)&BigInt(c));d[x]=d[x].add(t[S])}let I=o;for(let S=d.length-1,P=o;S>0;S--)P=P.add(d[S]),I=I.add(P);if(y=y.add(I),v!==0)for(let S=0;S<a;S++)y=y.double()}return y}function validateBasic(r){return validateField(r.Fp),validateObject(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$2=BigInt(0),_1n$4=BigInt(1),_2n$3=BigInt(2),_8n$1=BigInt(8),VERIFY_DEFAULT={zip215:!0};function validateOpts$1(r){const e=validateBasic(r);return validateObject(r,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function twistedEdwards(r){const e=validateOpts$1(r),{Fp:t,n,prehash:o,hash:s,randomBytes:a,nByteLength:c,h:d}=e,u=_2n$3<<BigInt(c*8)-_1n$4,y=t.create,v=Field(e.n,e.nBitLength),I=e.uvRatio||((E,T)=>{try{return{isValid:!0,value:t.sqrt(E*t.inv(T))}}catch{return{isValid:!1,value:_0n$2}}}),S=e.adjustScalarBytes||(E=>E),P=e.domain||((E,T,C)=>{if(abool("phflag",C),T.length||C)throw new Error("Contexts/pre-hash are not supported");return E});function x(E,T){aInRange("coordinate "+E,T,_0n$2,u)}function A(E){if(!(E instanceof M))throw new Error("ExtendedPoint expected")}const O=memoized((E,T)=>{const{ex:C,ey:W,ez:G}=E,U=E.is0();T==null&&(T=U?_8n$1:t.inv(G));const m=y(C*T),F=y(W*T),se=y(G*T);if(U)return{x:_0n$2,y:_1n$4};if(se!==_1n$4)throw new Error("invZ was invalid");return{x:m,y:F}}),z=memoized(E=>{const{a:T,d:C}=e;if(E.is0())throw new Error("bad point: ZERO");const{ex:W,ey:G,ez:U,et:m}=E,F=y(W*W),se=y(G*G),ae=y(U*U),ue=y(ae*ae),me=y(F*T),he=y(ae*y(me+se)),pe=y(ue+y(C*y(F*se)));if(he!==pe)throw new Error("bad point: equation left != right (1)");const ke=y(W*G),ge=y(U*m);if(ke!==ge)throw new Error("bad point: equation left != right (2)");return!0});class M{constructor(T,C,W,G){this.ex=T,this.ey=C,this.ez=W,this.et=G,x("x",T),x("y",C),x("z",W),x("t",G),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(T){if(T instanceof M)throw new Error("extended point not allowed");const{x:C,y:W}=T||{};return x("x",C),x("y",W),new M(C,W,_1n$4,y(C*W))}static normalizeZ(T){const C=t.invertBatch(T.map(W=>W.ez));return T.map((W,G)=>W.toAffine(C[G])).map(M.fromAffine)}static msm(T,C){return pippenger(M,v,T,C)}_setWindowSize(T){Y.setWindowSize(this,T)}assertValidity(){z(this)}equals(T){A(T);const{ex:C,ey:W,ez:G}=this,{ex:U,ey:m,ez:F}=T,se=y(C*F),ae=y(U*G),ue=y(W*F),me=y(m*G);return se===ae&&ue===me}is0(){return this.equals(M.ZERO)}negate(){return new M(y(-this.ex),this.ey,this.ez,y(-this.et))}double(){const{a:T}=e,{ex:C,ey:W,ez:G}=this,U=y(C*C),m=y(W*W),F=y(_2n$3*y(G*G)),se=y(T*U),ae=C+W,ue=y(y(ae*ae)-U-m),me=se+m,he=me-F,pe=se-m,ke=y(ue*he),ge=y(me*pe),Se=y(ue*pe),Ae=y(he*me);return new M(ke,ge,Ae,Se)}add(T){A(T);const{a:C,d:W}=e,{ex:G,ey:U,ez:m,et:F}=this,{ex:se,ey:ae,ez:ue,et:me}=T;if(C===BigInt(-1)){const Ue=y((U-G)*(ae+se)),Be=y((U+G)*(ae-se)),nt=y(Be-Ue);if(nt===_0n$2)return this.double();const Ce=y(m*_2n$3*me),Oe=y(F*_2n$3*ue),st=Oe+Ce,Me=Be+Ue,R=Oe-Ce,g=y(st*nt),_=y(Me*R),$=y(st*R),X=y(nt*Me);return new M(g,_,X,$)}const he=y(G*se),pe=y(U*ae),ke=y(F*W*me),ge=y(m*ue),Se=y((G+U)*(se+ae)-he-pe),Ae=ge-ke,ve=ge+ke,Te=y(pe-C*he),gt=y(Se*Ae),Pe=y(ve*Te),Re=y(Se*Te),ft=y(Ae*ve);return new M(gt,Pe,ft,Re)}subtract(T){return this.add(T.negate())}wNAF(T){return Y.wNAFCached(this,T,M.normalizeZ)}multiply(T){const C=T;aInRange("scalar",C,_1n$4,n);const{p:W,f:G}=this.wNAF(C);return M.normalizeZ([W,G])[0]}multiplyUnsafe(T,C=M.ZERO){const W=T;return aInRange("scalar",W,_0n$2,n),W===_0n$2?q:this.is0()||W===_1n$4?this:Y.wNAFCachedUnsafe(this,W,M.normalizeZ,C)}isSmallOrder(){return this.multiplyUnsafe(d).is0()}isTorsionFree(){return Y.unsafeLadder(this,n).is0()}toAffine(T){return O(this,T)}clearCofactor(){const{h:T}=e;return T===_1n$4?this:this.multiplyUnsafe(T)}static fromHex(T,C=!1){const{d:W,a:G}=e,U=t.BYTES;T=ensureBytes("pointHex",T,U),abool("zip215",C);const m=T.slice(),F=T[U-1];m[U-1]=F&-129;const se=bytesToNumberLE(m),ae=C?u:t.ORDER;aInRange("pointHex.y",se,_0n$2,ae);const ue=y(se*se),me=y(ue-_1n$4),he=y(W*ue-G);let{isValid:pe,value:ke}=I(me,he);if(!pe)throw new Error("Point.fromHex: invalid y coordinate");const ge=(ke&_1n$4)===_1n$4,Se=(F&128)!==0;if(!C&&ke===_0n$2&&Se)throw new Error("Point.fromHex: x=0 and x_0=1");return Se!==ge&&(ke=y(-ke)),M.fromAffine({x:ke,y:se})}static fromPrivateKey(T){return V(T).point}toRawBytes(){const{x:T,y:C}=this.toAffine(),W=numberToBytesLE(C,t.BYTES);return W[W.length-1]|=T&_1n$4?128:0,W}toHex(){return bytesToHex(this.toRawBytes())}}M.BASE=new M(e.Gx,e.Gy,_1n$4,y(e.Gx*e.Gy)),M.ZERO=new M(_0n$2,_1n$4,_1n$4,_0n$2);const{BASE:H,ZERO:q}=M,Y=wNAF(M,c*8);function B(E){return mod(E,n)}function N(E){return B(bytesToNumberLE(E))}function V(E){const T=t.BYTES;E=ensureBytes("private key",E,T);const C=ensureBytes("hashed private key",s(E),2*T),W=S(C.slice(0,T)),G=C.slice(T,2*T),U=N(W),m=H.multiply(U),F=m.toRawBytes();return{head:W,prefix:G,scalar:U,point:m,pointBytes:F}}function Q(E){return V(E).pointBytes}function Z(E=new Uint8Array,...T){const C=concatBytes(...T);return N(s(P(C,ensureBytes("context",E),!!o)))}function J(E,T,C={}){E=ensureBytes("message",E),o&&(E=o(E));const{prefix:W,scalar:G,pointBytes:U}=V(T),m=Z(C.context,W,E),F=H.multiply(m).toRawBytes(),se=Z(C.context,F,U,E),ae=B(m+se*G);aInRange("signature.s",ae,_0n$2,n);const ue=concatBytes(F,numberToBytesLE(ae,t.BYTES));return ensureBytes("result",ue,t.BYTES*2)}const L=VERIFY_DEFAULT;function l(E,T,C,W=L){const{context:G,zip215:U}=W,m=t.BYTES;E=ensureBytes("signature",E,2*m),T=ensureBytes("message",T),C=ensureBytes("publicKey",C,m),U!==void 0&&abool("zip215",U),o&&(T=o(T));const F=bytesToNumberLE(E.slice(m,2*m));let se,ae,ue;try{se=M.fromHex(C,U),ae=M.fromHex(E.slice(0,m),U),ue=H.multiplyUnsafe(F)}catch{return!1}if(!U&&se.isSmallOrder())return!1;const me=Z(G,ae.toRawBytes(),se.toRawBytes(),T);return ae.add(se.multiplyUnsafe(me)).subtract(ue).clearCofactor().equals(M.ZERO)}return H._setWindowSize(8),{CURVE:e,getPublicKey:Q,sign:J,verify:l,ExtendedPoint:M,utils:{getExtendedPublicKey:V,randomPrivateKey:()=>a(t.BYTES),precompute(E=8,T=M.BASE){return T._setWindowSize(E),T.multiply(BigInt(3)),T}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ED25519_P=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ED25519_SQRT_M1=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const _1n$3=BigInt(1),_2n$2=BigInt(2);BigInt(3);const _5n=BigInt(5),_8n=BigInt(8);function ed25519_pow_2_252_3(r){const e=BigInt(10),t=BigInt(20),n=BigInt(40),o=BigInt(80),s=ED25519_P,c=r*r%s*r%s,d=pow2(c,_2n$2,s)*c%s,u=pow2(d,_1n$3,s)*r%s,y=pow2(u,_5n,s)*u%s,v=pow2(y,e,s)*y%s,I=pow2(v,t,s)*v%s,S=pow2(I,n,s)*I%s,P=pow2(S,o,s)*S%s,x=pow2(P,o,s)*S%s,A=pow2(x,e,s)*y%s;return{pow_p_5_8:pow2(A,_2n$2,s)*r%s,b2:c}}function adjustScalarBytes(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function uvRatio(r,e){const t=ED25519_P,n=mod(e*e*e,t),o=mod(n*n*e,t),s=ed25519_pow_2_252_3(r*o).pow_p_5_8;let a=mod(r*n*s,t);const c=mod(e*a*a,t),d=a,u=mod(a*ED25519_SQRT_M1,t),y=c===r,v=c===mod(-r,t),I=c===mod(-r*ED25519_SQRT_M1,t);return y&&(a=d),(v||I)&&(a=u),isNegativeLE(a,t)&&(a=mod(-a,t)),{isValid:y||v,value:a}}const Fp=Field(ED25519_P,void 0,!0),ed25519Defaults={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:_8n,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:sha512,randomBytes,adjustScalarBytes,uvRatio},ed25519=twistedEdwards(ed25519Defaults);var bn={exports:{}};bn.exports;(function(r){(function(e,t){function n(L,l){if(!L)throw new Error(l||"Assertion failed")}function o(L,l){L.super_=l;var b=function(){};b.prototype=l.prototype,L.prototype=new b,L.prototype.constructor=L}function s(L,l,b){if(s.isBN(L))return L;this.negative=0,this.words=null,this.length=0,this.red=null,L!==null&&((l==="le"||l==="be")&&(b=l,l=10),this._init(L||0,l||10,b||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=buffer.Buffer}catch{}s.isBN=function(l){return l instanceof s?!0:l!==null&&typeof l=="object"&&l.constructor.wordSize===s.wordSize&&Array.isArray(l.words)},s.max=function(l,b){return l.cmp(b)>0?l:b},s.min=function(l,b){return l.cmp(b)<0?l:b},s.prototype._init=function(l,b,E){if(typeof l=="number")return this._initNumber(l,b,E);if(typeof l=="object")return this._initArray(l,b,E);b==="hex"&&(b=16),n(b===(b|0)&&b>=2&&b<=36),l=l.toString().replace(/\s+/g,"");var T=0;l[0]==="-"&&(T++,this.negative=1),T<l.length&&(b===16?this._parseHex(l,T,E):(this._parseBase(l,b,T),E==="le"&&this._initArray(this.toArray(),b,E)))},s.prototype._initNumber=function(l,b,E){l<0&&(this.negative=1,l=-l),l<67108864?(this.words=[l&67108863],this.length=1):l<4503599627370496?(this.words=[l&67108863,l/67108864&67108863],this.length=2):(n(l<9007199254740992),this.words=[l&67108863,l/67108864&67108863,1],this.length=3),E==="le"&&this._initArray(this.toArray(),b,E)},s.prototype._initArray=function(l,b,E){if(n(typeof l.length=="number"),l.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(l.length/3),this.words=new Array(this.length);for(var T=0;T<this.length;T++)this.words[T]=0;var C,W,G=0;if(E==="be")for(T=l.length-1,C=0;T>=0;T-=3)W=l[T]|l[T-1]<<8|l[T-2]<<16,this.words[C]|=W<<G&67108863,this.words[C+1]=W>>>26-G&67108863,G+=24,G>=26&&(G-=26,C++);else if(E==="le")for(T=0,C=0;T<l.length;T+=3)W=l[T]|l[T+1]<<8|l[T+2]<<16,this.words[C]|=W<<G&67108863,this.words[C+1]=W>>>26-G&67108863,G+=24,G>=26&&(G-=26,C++);return this._strip()};function c(L,l){var b=L.charCodeAt(l);if(b>=48&&b<=57)return b-48;if(b>=65&&b<=70)return b-55;if(b>=97&&b<=102)return b-87;n(!1,"Invalid character in "+L)}function d(L,l,b){var E=c(L,b);return b-1>=l&&(E|=c(L,b-1)<<4),E}s.prototype._parseHex=function(l,b,E){this.length=Math.ceil((l.length-b)/6),this.words=new Array(this.length);for(var T=0;T<this.length;T++)this.words[T]=0;var C=0,W=0,G;if(E==="be")for(T=l.length-1;T>=b;T-=2)G=d(l,b,T)<<C,this.words[W]|=G&67108863,C>=18?(C-=18,W+=1,this.words[W]|=G>>>26):C+=8;else{var U=l.length-b;for(T=U%2===0?b+1:b;T<l.length;T+=2)G=d(l,b,T)<<C,this.words[W]|=G&67108863,C>=18?(C-=18,W+=1,this.words[W]|=G>>>26):C+=8}this._strip()};function u(L,l,b,E){for(var T=0,C=0,W=Math.min(L.length,b),G=l;G<W;G++){var U=L.charCodeAt(G)-48;T*=E,U>=49?C=U-49+10:U>=17?C=U-17+10:C=U,n(U>=0&&C<E,"Invalid character"),T+=C}return T}s.prototype._parseBase=function(l,b,E){this.words=[0],this.length=1;for(var T=0,C=1;C<=67108863;C*=b)T++;T--,C=C/b|0;for(var W=l.length-E,G=W%T,U=Math.min(W,W-G)+E,m=0,F=E;F<U;F+=T)m=u(l,F,F+T,b),this.imuln(C),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m);if(G!==0){var se=1;for(m=u(l,F,l.length,b),F=0;F<G;F++)se*=b;this.imuln(se),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m)}this._strip()},s.prototype.copy=function(l){l.words=new Array(this.length);for(var b=0;b<this.length;b++)l.words[b]=this.words[b];l.length=this.length,l.negative=this.negative,l.red=this.red};function y(L,l){L.words=l.words,L.length=l.length,L.negative=l.negative,L.red=l.red}if(s.prototype._move=function(l){y(l,this)},s.prototype.clone=function(){var l=new s(null);return this.copy(l),l},s.prototype._expand=function(l){for(;this.length<l;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=v}catch{s.prototype.inspect=v}else s.prototype.inspect=v;function v(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var I=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],P=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(l,b){l=l||10,b=b|0||1;var E;if(l===16||l==="hex"){E="";for(var T=0,C=0,W=0;W<this.length;W++){var G=this.words[W],U=((G<<T|C)&16777215).toString(16);C=G>>>24-T&16777215,T+=2,T>=26&&(T-=26,W--),C!==0||W!==this.length-1?E=I[6-U.length]+U+E:E=U+E}for(C!==0&&(E=C.toString(16)+E);E.length%b!==0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}if(l===(l|0)&&l>=2&&l<=36){var m=S[l],F=P[l];E="";var se=this.clone();for(se.negative=0;!se.isZero();){var ae=se.modrn(F).toString(l);se=se.idivn(F),se.isZero()?E=ae+E:E=I[m-ae.length]+ae+E}for(this.isZero()&&(E="0"+E);E.length%b!==0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var l=this.words[0];return this.length===2?l+=this.words[1]*67108864:this.length===3&&this.words[2]===1?l+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-l:l},s.prototype.toJSON=function(){return this.toString(16,2)},a&&(s.prototype.toBuffer=function(l,b){return this.toArrayLike(a,l,b)}),s.prototype.toArray=function(l,b){return this.toArrayLike(Array,l,b)};var x=function(l,b){return l.allocUnsafe?l.allocUnsafe(b):new l(b)};s.prototype.toArrayLike=function(l,b,E){this._strip();var T=this.byteLength(),C=E||Math.max(1,T);n(T<=C,"byte array longer than desired length"),n(C>0,"Requested array length <= 0");var W=x(l,C),G=b==="le"?"LE":"BE";return this["_toArrayLike"+G](W,T),W},s.prototype._toArrayLikeLE=function(l,b){for(var E=0,T=0,C=0,W=0;C<this.length;C++){var G=this.words[C]<<W|T;l[E++]=G&255,E<l.length&&(l[E++]=G>>8&255),E<l.length&&(l[E++]=G>>16&255),W===6?(E<l.length&&(l[E++]=G>>24&255),T=0,W=0):(T=G>>>24,W+=2)}if(E<l.length)for(l[E++]=T;E<l.length;)l[E++]=0},s.prototype._toArrayLikeBE=function(l,b){for(var E=l.length-1,T=0,C=0,W=0;C<this.length;C++){var G=this.words[C]<<W|T;l[E--]=G&255,E>=0&&(l[E--]=G>>8&255),E>=0&&(l[E--]=G>>16&255),W===6?(E>=0&&(l[E--]=G>>24&255),T=0,W=0):(T=G>>>24,W+=2)}if(E>=0)for(l[E--]=T;E>=0;)l[E--]=0},Math.clz32?s.prototype._countBits=function(l){return 32-Math.clz32(l)}:s.prototype._countBits=function(l){var b=l,E=0;return b>=4096&&(E+=13,b>>>=13),b>=64&&(E+=7,b>>>=7),b>=8&&(E+=4,b>>>=4),b>=2&&(E+=2,b>>>=2),E+b},s.prototype._zeroBits=function(l){if(l===0)return 26;var b=l,E=0;return b&8191||(E+=13,b>>>=13),b&127||(E+=7,b>>>=7),b&15||(E+=4,b>>>=4),b&3||(E+=2,b>>>=2),b&1||E++,E},s.prototype.bitLength=function(){var l=this.words[this.length-1],b=this._countBits(l);return(this.length-1)*26+b};function A(L){for(var l=new Array(L.bitLength()),b=0;b<l.length;b++){var E=b/26|0,T=b%26;l[b]=L.words[E]>>>T&1}return l}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var l=0,b=0;b<this.length;b++){var E=this._zeroBits(this.words[b]);if(l+=E,E!==26)break}return l},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(l){return this.negative!==0?this.abs().inotn(l).iaddn(1):this.clone()},s.prototype.fromTwos=function(l){return this.testn(l-1)?this.notn(l).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(l){for(;this.length<l.length;)this.words[this.length++]=0;for(var b=0;b<l.length;b++)this.words[b]=this.words[b]|l.words[b];return this._strip()},s.prototype.ior=function(l){return n((this.negative|l.negative)===0),this.iuor(l)},s.prototype.or=function(l){return this.length>l.length?this.clone().ior(l):l.clone().ior(this)},s.prototype.uor=function(l){return this.length>l.length?this.clone().iuor(l):l.clone().iuor(this)},s.prototype.iuand=function(l){var b;this.length>l.length?b=l:b=this;for(var E=0;E<b.length;E++)this.words[E]=this.words[E]&l.words[E];return this.length=b.length,this._strip()},s.prototype.iand=function(l){return n((this.negative|l.negative)===0),this.iuand(l)},s.prototype.and=function(l){return this.length>l.length?this.clone().iand(l):l.clone().iand(this)},s.prototype.uand=function(l){return this.length>l.length?this.clone().iuand(l):l.clone().iuand(this)},s.prototype.iuxor=function(l){var b,E;this.length>l.length?(b=this,E=l):(b=l,E=this);for(var T=0;T<E.length;T++)this.words[T]=b.words[T]^E.words[T];if(this!==b)for(;T<b.length;T++)this.words[T]=b.words[T];return this.length=b.length,this._strip()},s.prototype.ixor=function(l){return n((this.negative|l.negative)===0),this.iuxor(l)},s.prototype.xor=function(l){return this.length>l.length?this.clone().ixor(l):l.clone().ixor(this)},s.prototype.uxor=function(l){return this.length>l.length?this.clone().iuxor(l):l.clone().iuxor(this)},s.prototype.inotn=function(l){n(typeof l=="number"&&l>=0);var b=Math.ceil(l/26)|0,E=l%26;this._expand(b),E>0&&b--;for(var T=0;T<b;T++)this.words[T]=~this.words[T]&67108863;return E>0&&(this.words[T]=~this.words[T]&67108863>>26-E),this._strip()},s.prototype.notn=function(l){return this.clone().inotn(l)},s.prototype.setn=function(l,b){n(typeof l=="number"&&l>=0);var E=l/26|0,T=l%26;return this._expand(E+1),b?this.words[E]=this.words[E]|1<<T:this.words[E]=this.words[E]&~(1<<T),this._strip()},s.prototype.iadd=function(l){var b;if(this.negative!==0&&l.negative===0)return this.negative=0,b=this.isub(l),this.negative^=1,this._normSign();if(this.negative===0&&l.negative!==0)return l.negative=0,b=this.isub(l),l.negative=1,b._normSign();var E,T;this.length>l.length?(E=this,T=l):(E=l,T=this);for(var C=0,W=0;W<T.length;W++)b=(E.words[W]|0)+(T.words[W]|0)+C,this.words[W]=b&67108863,C=b>>>26;for(;C!==0&&W<E.length;W++)b=(E.words[W]|0)+C,this.words[W]=b&67108863,C=b>>>26;if(this.length=E.length,C!==0)this.words[this.length]=C,this.length++;else if(E!==this)for(;W<E.length;W++)this.words[W]=E.words[W];return this},s.prototype.add=function(l){var b;return l.negative!==0&&this.negative===0?(l.negative=0,b=this.sub(l),l.negative^=1,b):l.negative===0&&this.negative!==0?(this.negative=0,b=l.sub(this),this.negative=1,b):this.length>l.length?this.clone().iadd(l):l.clone().iadd(this)},s.prototype.isub=function(l){if(l.negative!==0){l.negative=0;var b=this.iadd(l);return l.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(l),this.negative=1,this._normSign();var E=this.cmp(l);if(E===0)return this.negative=0,this.length=1,this.words[0]=0,this;var T,C;E>0?(T=this,C=l):(T=l,C=this);for(var W=0,G=0;G<C.length;G++)b=(T.words[G]|0)-(C.words[G]|0)+W,W=b>>26,this.words[G]=b&67108863;for(;W!==0&&G<T.length;G++)b=(T.words[G]|0)+W,W=b>>26,this.words[G]=b&67108863;if(W===0&&G<T.length&&T!==this)for(;G<T.length;G++)this.words[G]=T.words[G];return this.length=Math.max(this.length,G),T!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(l){return this.clone().isub(l)};function O(L,l,b){b.negative=l.negative^L.negative;var E=L.length+l.length|0;b.length=E,E=E-1|0;var T=L.words[0]|0,C=l.words[0]|0,W=T*C,G=W&67108863,U=W/67108864|0;b.words[0]=G;for(var m=1;m<E;m++){for(var F=U>>>26,se=U&67108863,ae=Math.min(m,l.length-1),ue=Math.max(0,m-L.length+1);ue<=ae;ue++){var me=m-ue|0;T=L.words[me]|0,C=l.words[ue]|0,W=T*C+se,F+=W/67108864|0,se=W&67108863}b.words[m]=se|0,U=F|0}return U!==0?b.words[m]=U|0:b.length--,b._strip()}var z=function(l,b,E){var T=l.words,C=b.words,W=E.words,G=0,U,m,F,se=T[0]|0,ae=se&8191,ue=se>>>13,me=T[1]|0,he=me&8191,pe=me>>>13,ke=T[2]|0,ge=ke&8191,Se=ke>>>13,Ae=T[3]|0,ve=Ae&8191,Te=Ae>>>13,gt=T[4]|0,Pe=gt&8191,Re=gt>>>13,ft=T[5]|0,Ue=ft&8191,Be=ft>>>13,nt=T[6]|0,Ce=nt&8191,Oe=nt>>>13,st=T[7]|0,Me=st&8191,R=st>>>13,g=T[8]|0,_=g&8191,$=g>>>13,X=T[9]|0,ee=X&8191,re=X>>>13,Ee=C[0]|0,we=Ee&8191,be=Ee>>>13,Ne=C[1]|0,ye=Ne&8191,ze=Ne>>>13,kt=C[2]|0,Ke=kt&8191,Ve=kt>>>13,mt=C[3]|0,$e=mt&8191,De=mt>>>13,Rt=C[4]|0,Fe=Rt&8191,Ze=Rt>>>13,jt=C[5]|0,je=jt&8191,Ge=jt>>>13,Gt=C[6]|0,qe=Gt&8191,He=Gt>>>13,Bt=C[7]|0,Ye=Bt&8191,Qe=Bt>>>13,qt=C[8]|0,Xe=qt&8191,Je=qt>>>13,Yt=C[9]|0,et=Yt&8191,tt=Yt>>>13;E.negative=l.negative^b.negative,E.length=19,U=Math.imul(ae,we),m=Math.imul(ae,be),m=m+Math.imul(ue,we)|0,F=Math.imul(ue,be);var Lt=(G+U|0)+((m&8191)<<13)|0;G=(F+(m>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,U=Math.imul(he,we),m=Math.imul(he,be),m=m+Math.imul(pe,we)|0,F=Math.imul(pe,be),U=U+Math.imul(ae,ye)|0,m=m+Math.imul(ae,ze)|0,m=m+Math.imul(ue,ye)|0,F=F+Math.imul(ue,ze)|0;var Pt=(G+U|0)+((m&8191)<<13)|0;G=(F+(m>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,U=Math.imul(ge,we),m=Math.imul(ge,be),m=m+Math.imul(Se,we)|0,F=Math.imul(Se,be),U=U+Math.imul(he,ye)|0,m=m+Math.imul(he,ze)|0,m=m+Math.imul(pe,ye)|0,F=F+Math.imul(pe,ze)|0,U=U+Math.imul(ae,Ke)|0,m=m+Math.imul(ae,Ve)|0,m=m+Math.imul(ue,Ke)|0,F=F+Math.imul(ue,Ve)|0;var Ut=(G+U|0)+((m&8191)<<13)|0;G=(F+(m>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,U=Math.imul(ve,we),m=Math.imul(ve,be),m=m+Math.imul(Te,we)|0,F=Math.imul(Te,be),U=U+Math.imul(ge,ye)|0,m=m+Math.imul(ge,ze)|0,m=m+Math.imul(Se,ye)|0,F=F+Math.imul(Se,ze)|0,U=U+Math.imul(he,Ke)|0,m=m+Math.imul(he,Ve)|0,m=m+Math.imul(pe,Ke)|0,F=F+Math.imul(pe,Ve)|0,U=U+Math.imul(ae,$e)|0,m=m+Math.imul(ae,De)|0,m=m+Math.imul(ue,$e)|0,F=F+Math.imul(ue,De)|0;var Ct=(G+U|0)+((m&8191)<<13)|0;G=(F+(m>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,U=Math.imul(Pe,we),m=Math.imul(Pe,be),m=m+Math.imul(Re,we)|0,F=Math.imul(Re,be),U=U+Math.imul(ve,ye)|0,m=m+Math.imul(ve,ze)|0,m=m+Math.imul(Te,ye)|0,F=F+Math.imul(Te,ze)|0,U=U+Math.imul(ge,Ke)|0,m=m+Math.imul(ge,Ve)|0,m=m+Math.imul(Se,Ke)|0,F=F+Math.imul(Se,Ve)|0,U=U+Math.imul(he,$e)|0,m=m+Math.imul(he,De)|0,m=m+Math.imul(pe,$e)|0,F=F+Math.imul(pe,De)|0,U=U+Math.imul(ae,Fe)|0,m=m+Math.imul(ae,Ze)|0,m=m+Math.imul(ue,Fe)|0,F=F+Math.imul(ue,Ze)|0;var _t=(G+U|0)+((m&8191)<<13)|0;G=(F+(m>>>13)|0)+(_t>>>26)|0,_t&=67108863,U=Math.imul(Ue,we),m=Math.imul(Ue,be),m=m+Math.imul(Be,we)|0,F=Math.imul(Be,be),U=U+Math.imul(Pe,ye)|0,m=m+Math.imul(Pe,ze)|0,m=m+Math.imul(Re,ye)|0,F=F+Math.imul(Re,ze)|0,U=U+Math.imul(ve,Ke)|0,m=m+Math.imul(ve,Ve)|0,m=m+Math.imul(Te,Ke)|0,F=F+Math.imul(Te,Ve)|0,U=U+Math.imul(ge,$e)|0,m=m+Math.imul(ge,De)|0,m=m+Math.imul(Se,$e)|0,F=F+Math.imul(Se,De)|0,U=U+Math.imul(he,Fe)|0,m=m+Math.imul(he,Ze)|0,m=m+Math.imul(pe,Fe)|0,F=F+Math.imul(pe,Ze)|0,U=U+Math.imul(ae,je)|0,m=m+Math.imul(ae,Ge)|0,m=m+Math.imul(ue,je)|0,F=F+Math.imul(ue,Ge)|0;var xt=(G+U|0)+((m&8191)<<13)|0;G=(F+(m>>>13)|0)+(xt>>>26)|0,xt&=67108863,U=Math.imul(Ce,we),m=Math.imul(Ce,be),m=m+Math.imul(Oe,we)|0,F=Math.imul(Oe,be),U=U+Math.imul(Ue,ye)|0,m=m+Math.imul(Ue,ze)|0,m=m+Math.imul(Be,ye)|0,F=F+Math.imul(Be,ze)|0,U=U+Math.imul(Pe,Ke)|0,m=m+Math.imul(Pe,Ve)|0,m=m+Math.imul(Re,Ke)|0,F=F+Math.imul(Re,Ve)|0,U=U+Math.imul(ve,$e)|0,m=m+Math.imul(ve,De)|0,m=m+Math.imul(Te,$e)|0,F=F+Math.imul(Te,De)|0,U=U+Math.imul(ge,Fe)|0,m=m+Math.imul(ge,Ze)|0,m=m+Math.imul(Se,Fe)|0,F=F+Math.imul(Se,Ze)|0,U=U+Math.imul(he,je)|0,m=m+Math.imul(he,Ge)|0,m=m+Math.imul(pe,je)|0,F=F+Math.imul(pe,Ge)|0,U=U+Math.imul(ae,qe)|0,m=m+Math.imul(ae,He)|0,m=m+Math.imul(ue,qe)|0,F=F+Math.imul(ue,He)|0;var Ot=(G+U|0)+((m&8191)<<13)|0;G=(F+(m>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,U=Math.imul(Me,we),m=Math.imul(Me,be),m=m+Math.imul(R,we)|0,F=Math.imul(R,be),U=U+Math.imul(Ce,ye)|0,m=m+Math.imul(Ce,ze)|0,m=m+Math.imul(Oe,ye)|0,F=F+Math.imul(Oe,ze)|0,U=U+Math.imul(Ue,Ke)|0,m=m+Math.imul(Ue,Ve)|0,m=m+Math.imul(Be,Ke)|0,F=F+Math.imul(Be,Ve)|0,U=U+Math.imul(Pe,$e)|0,m=m+Math.imul(Pe,De)|0,m=m+Math.imul(Re,$e)|0,F=F+Math.imul(Re,De)|0,U=U+Math.imul(ve,Fe)|0,m=m+Math.imul(ve,Ze)|0,m=m+Math.imul(Te,Fe)|0,F=F+Math.imul(Te,Ze)|0,U=U+Math.imul(ge,je)|0,m=m+Math.imul(ge,Ge)|0,m=m+Math.imul(Se,je)|0,F=F+Math.imul(Se,Ge)|0,U=U+Math.imul(he,qe)|0,m=m+Math.imul(he,He)|0,m=m+Math.imul(pe,qe)|0,F=F+Math.imul(pe,He)|0,U=U+Math.imul(ae,Ye)|0,m=m+Math.imul(ae,Qe)|0,m=m+Math.imul(ue,Ye)|0,F=F+Math.imul(ue,Qe)|0;var wt=(G+U|0)+((m&8191)<<13)|0;G=(F+(m>>>13)|0)+(wt>>>26)|0,wt&=67108863,U=Math.imul(_,we),m=Math.imul(_,be),m=m+Math.imul($,we)|0,F=Math.imul($,be),U=U+Math.imul(Me,ye)|0,m=m+Math.imul(Me,ze)|0,m=m+Math.imul(R,ye)|0,F=F+Math.imul(R,ze)|0,U=U+Math.imul(Ce,Ke)|0,m=m+Math.imul(Ce,Ve)|0,m=m+Math.imul(Oe,Ke)|0,F=F+Math.imul(Oe,Ve)|0,U=U+Math.imul(Ue,$e)|0,m=m+Math.imul(Ue,De)|0,m=m+Math.imul(Be,$e)|0,F=F+Math.imul(Be,De)|0,U=U+Math.imul(Pe,Fe)|0,m=m+Math.imul(Pe,Ze)|0,m=m+Math.imul(Re,Fe)|0,F=F+Math.imul(Re,Ze)|0,U=U+Math.imul(ve,je)|0,m=m+Math.imul(ve,Ge)|0,m=m+Math.imul(Te,je)|0,F=F+Math.imul(Te,Ge)|0,U=U+Math.imul(ge,qe)|0,m=m+Math.imul(ge,He)|0,m=m+Math.imul(Se,qe)|0,F=F+Math.imul(Se,He)|0,U=U+Math.imul(he,Ye)|0,m=m+Math.imul(he,Qe)|0,m=m+Math.imul(pe,Ye)|0,F=F+Math.imul(pe,Qe)|0,U=U+Math.imul(ae,Xe)|0,m=m+Math.imul(ae,Je)|0,m=m+Math.imul(ue,Xe)|0,F=F+Math.imul(ue,Je)|0;var Mt=(G+U|0)+((m&8191)<<13)|0;G=(F+(m>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,U=Math.imul(ee,we),m=Math.imul(ee,be),m=m+Math.imul(re,we)|0,F=Math.imul(re,be),U=U+Math.imul(_,ye)|0,m=m+Math.imul(_,ze)|0,m=m+Math.imul($,ye)|0,F=F+Math.imul($,ze)|0,U=U+Math.imul(Me,Ke)|0,m=m+Math.imul(Me,Ve)|0,m=m+Math.imul(R,Ke)|0,F=F+Math.imul(R,Ve)|0,U=U+Math.imul(Ce,$e)|0,m=m+Math.imul(Ce,De)|0,m=m+Math.imul(Oe,$e)|0,F=F+Math.imul(Oe,De)|0,U=U+Math.imul(Ue,Fe)|0,m=m+Math.imul(Ue,Ze)|0,m=m+Math.imul(Be,Fe)|0,F=F+Math.imul(Be,Ze)|0,U=U+Math.imul(Pe,je)|0,m=m+Math.imul(Pe,Ge)|0,m=m+Math.imul(Re,je)|0,F=F+Math.imul(Re,Ge)|0,U=U+Math.imul(ve,qe)|0,m=m+Math.imul(ve,He)|0,m=m+Math.imul(Te,qe)|0,F=F+Math.imul(Te,He)|0,U=U+Math.imul(ge,Ye)|0,m=m+Math.imul(ge,Qe)|0,m=m+Math.imul(Se,Ye)|0,F=F+Math.imul(Se,Qe)|0,U=U+Math.imul(he,Xe)|0,m=m+Math.imul(he,Je)|0,m=m+Math.imul(pe,Xe)|0,F=F+Math.imul(pe,Je)|0,U=U+Math.imul(ae,et)|0,m=m+Math.imul(ae,tt)|0,m=m+Math.imul(ue,et)|0,F=F+Math.imul(ue,tt)|0;var Nt=(G+U|0)+((m&8191)<<13)|0;G=(F+(m>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,U=Math.imul(ee,ye),m=Math.imul(ee,ze),m=m+Math.imul(re,ye)|0,F=Math.imul(re,ze),U=U+Math.imul(_,Ke)|0,m=m+Math.imul(_,Ve)|0,m=m+Math.imul($,Ke)|0,F=F+Math.imul($,Ve)|0,U=U+Math.imul(Me,$e)|0,m=m+Math.imul(Me,De)|0,m=m+Math.imul(R,$e)|0,F=F+Math.imul(R,De)|0,U=U+Math.imul(Ce,Fe)|0,m=m+Math.imul(Ce,Ze)|0,m=m+Math.imul(Oe,Fe)|0,F=F+Math.imul(Oe,Ze)|0,U=U+Math.imul(Ue,je)|0,m=m+Math.imul(Ue,Ge)|0,m=m+Math.imul(Be,je)|0,F=F+Math.imul(Be,Ge)|0,U=U+Math.imul(Pe,qe)|0,m=m+Math.imul(Pe,He)|0,m=m+Math.imul(Re,qe)|0,F=F+Math.imul(Re,He)|0,U=U+Math.imul(ve,Ye)|0,m=m+Math.imul(ve,Qe)|0,m=m+Math.imul(Te,Ye)|0,F=F+Math.imul(Te,Qe)|0,U=U+Math.imul(ge,Xe)|0,m=m+Math.imul(ge,Je)|0,m=m+Math.imul(Se,Xe)|0,F=F+Math.imul(Se,Je)|0,U=U+Math.imul(he,et)|0,m=m+Math.imul(he,tt)|0,m=m+Math.imul(pe,et)|0,F=F+Math.imul(pe,tt)|0;var St=(G+U|0)+((m&8191)<<13)|0;G=(F+(m>>>13)|0)+(St>>>26)|0,St&=67108863,U=Math.imul(ee,Ke),m=Math.imul(ee,Ve),m=m+Math.imul(re,Ke)|0,F=Math.imul(re,Ve),U=U+Math.imul(_,$e)|0,m=m+Math.imul(_,De)|0,m=m+Math.imul($,$e)|0,F=F+Math.imul($,De)|0,U=U+Math.imul(Me,Fe)|0,m=m+Math.imul(Me,Ze)|0,m=m+Math.imul(R,Fe)|0,F=F+Math.imul(R,Ze)|0,U=U+Math.imul(Ce,je)|0,m=m+Math.imul(Ce,Ge)|0,m=m+Math.imul(Oe,je)|0,F=F+Math.imul(Oe,Ge)|0,U=U+Math.imul(Ue,qe)|0,m=m+Math.imul(Ue,He)|0,m=m+Math.imul(Be,qe)|0,F=F+Math.imul(Be,He)|0,U=U+Math.imul(Pe,Ye)|0,m=m+Math.imul(Pe,Qe)|0,m=m+Math.imul(Re,Ye)|0,F=F+Math.imul(Re,Qe)|0,U=U+Math.imul(ve,Xe)|0,m=m+Math.imul(ve,Je)|0,m=m+Math.imul(Te,Xe)|0,F=F+Math.imul(Te,Je)|0,U=U+Math.imul(ge,et)|0,m=m+Math.imul(ge,tt)|0,m=m+Math.imul(Se,et)|0,F=F+Math.imul(Se,tt)|0;var $t=(G+U|0)+((m&8191)<<13)|0;G=(F+(m>>>13)|0)+($t>>>26)|0,$t&=67108863,U=Math.imul(ee,$e),m=Math.imul(ee,De),m=m+Math.imul(re,$e)|0,F=Math.imul(re,De),U=U+Math.imul(_,Fe)|0,m=m+Math.imul(_,Ze)|0,m=m+Math.imul($,Fe)|0,F=F+Math.imul($,Ze)|0,U=U+Math.imul(Me,je)|0,m=m+Math.imul(Me,Ge)|0,m=m+Math.imul(R,je)|0,F=F+Math.imul(R,Ge)|0,U=U+Math.imul(Ce,qe)|0,m=m+Math.imul(Ce,He)|0,m=m+Math.imul(Oe,qe)|0,F=F+Math.imul(Oe,He)|0,U=U+Math.imul(Ue,Ye)|0,m=m+Math.imul(Ue,Qe)|0,m=m+Math.imul(Be,Ye)|0,F=F+Math.imul(Be,Qe)|0,U=U+Math.imul(Pe,Xe)|0,m=m+Math.imul(Pe,Je)|0,m=m+Math.imul(Re,Xe)|0,F=F+Math.imul(Re,Je)|0,U=U+Math.imul(ve,et)|0,m=m+Math.imul(ve,tt)|0,m=m+Math.imul(Te,et)|0,F=F+Math.imul(Te,tt)|0;var Dt=(G+U|0)+((m&8191)<<13)|0;G=(F+(m>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,U=Math.imul(ee,Fe),m=Math.imul(ee,Ze),m=m+Math.imul(re,Fe)|0,F=Math.imul(re,Ze),U=U+Math.imul(_,je)|0,m=m+Math.imul(_,Ge)|0,m=m+Math.imul($,je)|0,F=F+Math.imul($,Ge)|0,U=U+Math.imul(Me,qe)|0,m=m+Math.imul(Me,He)|0,m=m+Math.imul(R,qe)|0,F=F+Math.imul(R,He)|0,U=U+Math.imul(Ce,Ye)|0,m=m+Math.imul(Ce,Qe)|0,m=m+Math.imul(Oe,Ye)|0,F=F+Math.imul(Oe,Qe)|0,U=U+Math.imul(Ue,Xe)|0,m=m+Math.imul(Ue,Je)|0,m=m+Math.imul(Be,Xe)|0,F=F+Math.imul(Be,Je)|0,U=U+Math.imul(Pe,et)|0,m=m+Math.imul(Pe,tt)|0,m=m+Math.imul(Re,et)|0,F=F+Math.imul(Re,tt)|0;var Et=(G+U|0)+((m&8191)<<13)|0;G=(F+(m>>>13)|0)+(Et>>>26)|0,Et&=67108863,U=Math.imul(ee,je),m=Math.imul(ee,Ge),m=m+Math.imul(re,je)|0,F=Math.imul(re,Ge),U=U+Math.imul(_,qe)|0,m=m+Math.imul(_,He)|0,m=m+Math.imul($,qe)|0,F=F+Math.imul($,He)|0,U=U+Math.imul(Me,Ye)|0,m=m+Math.imul(Me,Qe)|0,m=m+Math.imul(R,Ye)|0,F=F+Math.imul(R,Qe)|0,U=U+Math.imul(Ce,Xe)|0,m=m+Math.imul(Ce,Je)|0,m=m+Math.imul(Oe,Xe)|0,F=F+Math.imul(Oe,Je)|0,U=U+Math.imul(Ue,et)|0,m=m+Math.imul(Ue,tt)|0,m=m+Math.imul(Be,et)|0,F=F+Math.imul(Be,tt)|0;var Ft=(G+U|0)+((m&8191)<<13)|0;G=(F+(m>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,U=Math.imul(ee,qe),m=Math.imul(ee,He),m=m+Math.imul(re,qe)|0,F=Math.imul(re,He),U=U+Math.imul(_,Ye)|0,m=m+Math.imul(_,Qe)|0,m=m+Math.imul($,Ye)|0,F=F+Math.imul($,Qe)|0,U=U+Math.imul(Me,Xe)|0,m=m+Math.imul(Me,Je)|0,m=m+Math.imul(R,Xe)|0,F=F+Math.imul(R,Je)|0,U=U+Math.imul(Ce,et)|0,m=m+Math.imul(Ce,tt)|0,m=m+Math.imul(Oe,et)|0,F=F+Math.imul(Oe,tt)|0;var Ht=(G+U|0)+((m&8191)<<13)|0;G=(F+(m>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,U=Math.imul(ee,Ye),m=Math.imul(ee,Qe),m=m+Math.imul(re,Ye)|0,F=Math.imul(re,Qe),U=U+Math.imul(_,Xe)|0,m=m+Math.imul(_,Je)|0,m=m+Math.imul($,Xe)|0,F=F+Math.imul($,Je)|0,U=U+Math.imul(Me,et)|0,m=m+Math.imul(Me,tt)|0,m=m+Math.imul(R,et)|0,F=F+Math.imul(R,tt)|0;var vt=(G+U|0)+((m&8191)<<13)|0;G=(F+(m>>>13)|0)+(vt>>>26)|0,vt&=67108863,U=Math.imul(ee,Xe),m=Math.imul(ee,Je),m=m+Math.imul(re,Xe)|0,F=Math.imul(re,Je),U=U+Math.imul(_,et)|0,m=m+Math.imul(_,tt)|0,m=m+Math.imul($,et)|0,F=F+Math.imul($,tt)|0;var Wt=(G+U|0)+((m&8191)<<13)|0;G=(F+(m>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,U=Math.imul(ee,et),m=Math.imul(ee,tt),m=m+Math.imul(re,et)|0,F=Math.imul(re,tt);var zt=(G+U|0)+((m&8191)<<13)|0;return G=(F+(m>>>13)|0)+(zt>>>26)|0,zt&=67108863,W[0]=Lt,W[1]=Pt,W[2]=Ut,W[3]=Ct,W[4]=_t,W[5]=xt,W[6]=Ot,W[7]=wt,W[8]=Mt,W[9]=Nt,W[10]=St,W[11]=$t,W[12]=Dt,W[13]=Et,W[14]=Ft,W[15]=Ht,W[16]=vt,W[17]=Wt,W[18]=zt,G!==0&&(W[19]=G,E.length++),E};Math.imul||(z=O);function M(L,l,b){b.negative=l.negative^L.negative,b.length=L.length+l.length;for(var E=0,T=0,C=0;C<b.length-1;C++){var W=T;T=0;for(var G=E&67108863,U=Math.min(C,l.length-1),m=Math.max(0,C-L.length+1);m<=U;m++){var F=C-m,se=L.words[F]|0,ae=l.words[m]|0,ue=se*ae,me=ue&67108863;W=W+(ue/67108864|0)|0,me=me+G|0,G=me&67108863,W=W+(me>>>26)|0,T+=W>>>26,W&=67108863}b.words[C]=G,E=W,W=T}return E!==0?b.words[C]=E:b.length--,b._strip()}function H(L,l,b){return M(L,l,b)}s.prototype.mulTo=function(l,b){var E,T=this.length+l.length;return this.length===10&&l.length===10?E=z(this,l,b):T<63?E=O(this,l,b):T<1024?E=M(this,l,b):E=H(this,l,b),E},s.prototype.mul=function(l){var b=new s(null);return b.words=new Array(this.length+l.length),this.mulTo(l,b)},s.prototype.mulf=function(l){var b=new s(null);return b.words=new Array(this.length+l.length),H(this,l,b)},s.prototype.imul=function(l){return this.clone().mulTo(l,this)},s.prototype.imuln=function(l){var b=l<0;b&&(l=-l),n(typeof l=="number"),n(l<67108864);for(var E=0,T=0;T<this.length;T++){var C=(this.words[T]|0)*l,W=(C&67108863)+(E&67108863);E>>=26,E+=C/67108864|0,E+=W>>>26,this.words[T]=W&67108863}return E!==0&&(this.words[T]=E,this.length++),b?this.ineg():this},s.prototype.muln=function(l){return this.clone().imuln(l)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(l){var b=A(l);if(b.length===0)return new s(1);for(var E=this,T=0;T<b.length&&b[T]===0;T++,E=E.sqr());if(++T<b.length)for(var C=E.sqr();T<b.length;T++,C=C.sqr())b[T]!==0&&(E=E.mul(C));return E},s.prototype.iushln=function(l){n(typeof l=="number"&&l>=0);var b=l%26,E=(l-b)/26,T=67108863>>>26-b<<26-b,C;if(b!==0){var W=0;for(C=0;C<this.length;C++){var G=this.words[C]&T,U=(this.words[C]|0)-G<<b;this.words[C]=U|W,W=G>>>26-b}W&&(this.words[C]=W,this.length++)}if(E!==0){for(C=this.length-1;C>=0;C--)this.words[C+E]=this.words[C];for(C=0;C<E;C++)this.words[C]=0;this.length+=E}return this._strip()},s.prototype.ishln=function(l){return n(this.negative===0),this.iushln(l)},s.prototype.iushrn=function(l,b,E){n(typeof l=="number"&&l>=0);var T;b?T=(b-b%26)/26:T=0;var C=l%26,W=Math.min((l-C)/26,this.length),G=67108863^67108863>>>C<<C,U=E;if(T-=W,T=Math.max(0,T),U){for(var m=0;m<W;m++)U.words[m]=this.words[m];U.length=W}if(W!==0)if(this.length>W)for(this.length-=W,m=0;m<this.length;m++)this.words[m]=this.words[m+W];else this.words[0]=0,this.length=1;var F=0;for(m=this.length-1;m>=0&&(F!==0||m>=T);m--){var se=this.words[m]|0;this.words[m]=F<<26-C|se>>>C,F=se&G}return U&&F!==0&&(U.words[U.length++]=F),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(l,b,E){return n(this.negative===0),this.iushrn(l,b,E)},s.prototype.shln=function(l){return this.clone().ishln(l)},s.prototype.ushln=function(l){return this.clone().iushln(l)},s.prototype.shrn=function(l){return this.clone().ishrn(l)},s.prototype.ushrn=function(l){return this.clone().iushrn(l)},s.prototype.testn=function(l){n(typeof l=="number"&&l>=0);var b=l%26,E=(l-b)/26,T=1<<b;if(this.length<=E)return!1;var C=this.words[E];return!!(C&T)},s.prototype.imaskn=function(l){n(typeof l=="number"&&l>=0);var b=l%26,E=(l-b)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=E)return this;if(b!==0&&E++,this.length=Math.min(E,this.length),b!==0){var T=67108863^67108863>>>b<<b;this.words[this.length-1]&=T}return this._strip()},s.prototype.maskn=function(l){return this.clone().imaskn(l)},s.prototype.iaddn=function(l){return n(typeof l=="number"),n(l<67108864),l<0?this.isubn(-l):this.negative!==0?this.length===1&&(this.words[0]|0)<=l?(this.words[0]=l-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(l),this.negative=1,this):this._iaddn(l)},s.prototype._iaddn=function(l){this.words[0]+=l;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},s.prototype.isubn=function(l){if(n(typeof l=="number"),n(l<67108864),l<0)return this.iaddn(-l);if(this.negative!==0)return this.negative=0,this.iaddn(l),this.negative=1,this;if(this.words[0]-=l,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this._strip()},s.prototype.addn=function(l){return this.clone().iaddn(l)},s.prototype.subn=function(l){return this.clone().isubn(l)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(l,b,E){var T=l.length+E,C;this._expand(T);var W,G=0;for(C=0;C<l.length;C++){W=(this.words[C+E]|0)+G;var U=(l.words[C]|0)*b;W-=U&67108863,G=(W>>26)-(U/67108864|0),this.words[C+E]=W&67108863}for(;C<this.length-E;C++)W=(this.words[C+E]|0)+G,G=W>>26,this.words[C+E]=W&67108863;if(G===0)return this._strip();for(n(G===-1),G=0,C=0;C<this.length;C++)W=-(this.words[C]|0)+G,G=W>>26,this.words[C]=W&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(l,b){var E=this.length-l.length,T=this.clone(),C=l,W=C.words[C.length-1]|0,G=this._countBits(W);E=26-G,E!==0&&(C=C.ushln(E),T.iushln(E),W=C.words[C.length-1]|0);var U=T.length-C.length,m;if(b!=="mod"){m=new s(null),m.length=U+1,m.words=new Array(m.length);for(var F=0;F<m.length;F++)m.words[F]=0}var se=T.clone()._ishlnsubmul(C,1,U);se.negative===0&&(T=se,m&&(m.words[U]=1));for(var ae=U-1;ae>=0;ae--){var ue=(T.words[C.length+ae]|0)*67108864+(T.words[C.length+ae-1]|0);for(ue=Math.min(ue/W|0,67108863),T._ishlnsubmul(C,ue,ae);T.negative!==0;)ue--,T.negative=0,T._ishlnsubmul(C,1,ae),T.isZero()||(T.negative^=1);m&&(m.words[ae]=ue)}return m&&m._strip(),T._strip(),b!=="div"&&E!==0&&T.iushrn(E),{div:m||null,mod:T}},s.prototype.divmod=function(l,b,E){if(n(!l.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var T,C,W;return this.negative!==0&&l.negative===0?(W=this.neg().divmod(l,b),b!=="mod"&&(T=W.div.neg()),b!=="div"&&(C=W.mod.neg(),E&&C.negative!==0&&C.iadd(l)),{div:T,mod:C}):this.negative===0&&l.negative!==0?(W=this.divmod(l.neg(),b),b!=="mod"&&(T=W.div.neg()),{div:T,mod:W.mod}):this.negative&l.negative?(W=this.neg().divmod(l.neg(),b),b!=="div"&&(C=W.mod.neg(),E&&C.negative!==0&&C.isub(l)),{div:W.div,mod:C}):l.length>this.length||this.cmp(l)<0?{div:new s(0),mod:this}:l.length===1?b==="div"?{div:this.divn(l.words[0]),mod:null}:b==="mod"?{div:null,mod:new s(this.modrn(l.words[0]))}:{div:this.divn(l.words[0]),mod:new s(this.modrn(l.words[0]))}:this._wordDiv(l,b)},s.prototype.div=function(l){return this.divmod(l,"div",!1).div},s.prototype.mod=function(l){return this.divmod(l,"mod",!1).mod},s.prototype.umod=function(l){return this.divmod(l,"mod",!0).mod},s.prototype.divRound=function(l){var b=this.divmod(l);if(b.mod.isZero())return b.div;var E=b.div.negative!==0?b.mod.isub(l):b.mod,T=l.ushrn(1),C=l.andln(1),W=E.cmp(T);return W<0||C===1&&W===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},s.prototype.modrn=function(l){var b=l<0;b&&(l=-l),n(l<=67108863);for(var E=(1<<26)%l,T=0,C=this.length-1;C>=0;C--)T=(E*T+(this.words[C]|0))%l;return b?-T:T},s.prototype.modn=function(l){return this.modrn(l)},s.prototype.idivn=function(l){var b=l<0;b&&(l=-l),n(l<=67108863);for(var E=0,T=this.length-1;T>=0;T--){var C=(this.words[T]|0)+E*67108864;this.words[T]=C/l|0,E=C%l}return this._strip(),b?this.ineg():this},s.prototype.divn=function(l){return this.clone().idivn(l)},s.prototype.egcd=function(l){n(l.negative===0),n(!l.isZero());var b=this,E=l.clone();b.negative!==0?b=b.umod(l):b=b.clone();for(var T=new s(1),C=new s(0),W=new s(0),G=new s(1),U=0;b.isEven()&&E.isEven();)b.iushrn(1),E.iushrn(1),++U;for(var m=E.clone(),F=b.clone();!b.isZero();){for(var se=0,ae=1;!(b.words[0]&ae)&&se<26;++se,ae<<=1);if(se>0)for(b.iushrn(se);se-- >0;)(T.isOdd()||C.isOdd())&&(T.iadd(m),C.isub(F)),T.iushrn(1),C.iushrn(1);for(var ue=0,me=1;!(E.words[0]&me)&&ue<26;++ue,me<<=1);if(ue>0)for(E.iushrn(ue);ue-- >0;)(W.isOdd()||G.isOdd())&&(W.iadd(m),G.isub(F)),W.iushrn(1),G.iushrn(1);b.cmp(E)>=0?(b.isub(E),T.isub(W),C.isub(G)):(E.isub(b),W.isub(T),G.isub(C))}return{a:W,b:G,gcd:E.iushln(U)}},s.prototype._invmp=function(l){n(l.negative===0),n(!l.isZero());var b=this,E=l.clone();b.negative!==0?b=b.umod(l):b=b.clone();for(var T=new s(1),C=new s(0),W=E.clone();b.cmpn(1)>0&&E.cmpn(1)>0;){for(var G=0,U=1;!(b.words[0]&U)&&G<26;++G,U<<=1);if(G>0)for(b.iushrn(G);G-- >0;)T.isOdd()&&T.iadd(W),T.iushrn(1);for(var m=0,F=1;!(E.words[0]&F)&&m<26;++m,F<<=1);if(m>0)for(E.iushrn(m);m-- >0;)C.isOdd()&&C.iadd(W),C.iushrn(1);b.cmp(E)>=0?(b.isub(E),T.isub(C)):(E.isub(b),C.isub(T))}var se;return b.cmpn(1)===0?se=T:se=C,se.cmpn(0)<0&&se.iadd(l),se},s.prototype.gcd=function(l){if(this.isZero())return l.abs();if(l.isZero())return this.abs();var b=this.clone(),E=l.clone();b.negative=0,E.negative=0;for(var T=0;b.isEven()&&E.isEven();T++)b.iushrn(1),E.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;E.isEven();)E.iushrn(1);var C=b.cmp(E);if(C<0){var W=b;b=E,E=W}else if(C===0||E.cmpn(1)===0)break;b.isub(E)}while(!0);return E.iushln(T)},s.prototype.invm=function(l){return this.egcd(l).a.umod(l)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(l){return this.words[0]&l},s.prototype.bincn=function(l){n(typeof l=="number");var b=l%26,E=(l-b)/26,T=1<<b;if(this.length<=E)return this._expand(E+1),this.words[E]|=T,this;for(var C=T,W=E;C!==0&&W<this.length;W++){var G=this.words[W]|0;G+=C,C=G>>>26,G&=67108863,this.words[W]=G}return C!==0&&(this.words[W]=C,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(l){var b=l<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this._strip();var E;if(this.length>1)E=1;else{b&&(l=-l),n(l<=67108863,"Number is too big");var T=this.words[0]|0;E=T===l?0:T<l?-1:1}return this.negative!==0?-E|0:E},s.prototype.cmp=function(l){if(this.negative!==0&&l.negative===0)return-1;if(this.negative===0&&l.negative!==0)return 1;var b=this.ucmp(l);return this.negative!==0?-b|0:b},s.prototype.ucmp=function(l){if(this.length>l.length)return 1;if(this.length<l.length)return-1;for(var b=0,E=this.length-1;E>=0;E--){var T=this.words[E]|0,C=l.words[E]|0;if(T!==C){T<C?b=-1:T>C&&(b=1);break}}return b},s.prototype.gtn=function(l){return this.cmpn(l)===1},s.prototype.gt=function(l){return this.cmp(l)===1},s.prototype.gten=function(l){return this.cmpn(l)>=0},s.prototype.gte=function(l){return this.cmp(l)>=0},s.prototype.ltn=function(l){return this.cmpn(l)===-1},s.prototype.lt=function(l){return this.cmp(l)===-1},s.prototype.lten=function(l){return this.cmpn(l)<=0},s.prototype.lte=function(l){return this.cmp(l)<=0},s.prototype.eqn=function(l){return this.cmpn(l)===0},s.prototype.eq=function(l){return this.cmp(l)===0},s.red=function(l){return new Z(l)},s.prototype.toRed=function(l){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),l.convertTo(this)._forceRed(l)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(l){return this.red=l,this},s.prototype.forceRed=function(l){return n(!this.red,"Already a number in reduction context"),this._forceRed(l)},s.prototype.redAdd=function(l){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,l)},s.prototype.redIAdd=function(l){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,l)},s.prototype.redSub=function(l){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,l)},s.prototype.redISub=function(l){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,l)},s.prototype.redShl=function(l){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,l)},s.prototype.redMul=function(l){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.mul(this,l)},s.prototype.redIMul=function(l){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.imul(this,l)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(l){return n(this.red&&!l.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,l)};var q={k256:null,p224:null,p192:null,p25519:null};function Y(L,l){this.name=L,this.p=new s(l,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Y.prototype._tmp=function(){var l=new s(null);return l.words=new Array(Math.ceil(this.n/13)),l},Y.prototype.ireduce=function(l){var b=l,E;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),E=b.bitLength();while(E>this.n);var T=E<this.n?-1:b.ucmp(this.p);return T===0?(b.words[0]=0,b.length=1):T>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},Y.prototype.split=function(l,b){l.iushrn(this.n,0,b)},Y.prototype.imulK=function(l){return l.imul(this.k)};function B(){Y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(B,Y),B.prototype.split=function(l,b){for(var E=4194303,T=Math.min(l.length,9),C=0;C<T;C++)b.words[C]=l.words[C];if(b.length=T,l.length<=9){l.words[0]=0,l.length=1;return}var W=l.words[9];for(b.words[b.length++]=W&E,C=10;C<l.length;C++){var G=l.words[C]|0;l.words[C-10]=(G&E)<<4|W>>>22,W=G}W>>>=22,l.words[C-10]=W,W===0&&l.length>10?l.length-=10:l.length-=9},B.prototype.imulK=function(l){l.words[l.length]=0,l.words[l.length+1]=0,l.length+=2;for(var b=0,E=0;E<l.length;E++){var T=l.words[E]|0;b+=T*977,l.words[E]=b&67108863,b=T*64+(b/67108864|0)}return l.words[l.length-1]===0&&(l.length--,l.words[l.length-1]===0&&l.length--),l};function N(){Y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(N,Y);function V(){Y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(V,Y);function Q(){Y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(Q,Y),Q.prototype.imulK=function(l){for(var b=0,E=0;E<l.length;E++){var T=(l.words[E]|0)*19+b,C=T&67108863;T>>>=26,l.words[E]=C,b=T}return b!==0&&(l.words[l.length++]=b),l},s._prime=function(l){if(q[l])return q[l];var b;if(l==="k256")b=new B;else if(l==="p224")b=new N;else if(l==="p192")b=new V;else if(l==="p25519")b=new Q;else throw new Error("Unknown prime "+l);return q[l]=b,b};function Z(L){if(typeof L=="string"){var l=s._prime(L);this.m=l.p,this.prime=l}else n(L.gtn(1),"modulus must be greater than 1"),this.m=L,this.prime=null}Z.prototype._verify1=function(l){n(l.negative===0,"red works only with positives"),n(l.red,"red works only with red numbers")},Z.prototype._verify2=function(l,b){n((l.negative|b.negative)===0,"red works only with positives"),n(l.red&&l.red===b.red,"red works only with red numbers")},Z.prototype.imod=function(l){return this.prime?this.prime.ireduce(l)._forceRed(this):(y(l,l.umod(this.m)._forceRed(this)),l)},Z.prototype.neg=function(l){return l.isZero()?l.clone():this.m.sub(l)._forceRed(this)},Z.prototype.add=function(l,b){this._verify2(l,b);var E=l.add(b);return E.cmp(this.m)>=0&&E.isub(this.m),E._forceRed(this)},Z.prototype.iadd=function(l,b){this._verify2(l,b);var E=l.iadd(b);return E.cmp(this.m)>=0&&E.isub(this.m),E},Z.prototype.sub=function(l,b){this._verify2(l,b);var E=l.sub(b);return E.cmpn(0)<0&&E.iadd(this.m),E._forceRed(this)},Z.prototype.isub=function(l,b){this._verify2(l,b);var E=l.isub(b);return E.cmpn(0)<0&&E.iadd(this.m),E},Z.prototype.shl=function(l,b){return this._verify1(l),this.imod(l.ushln(b))},Z.prototype.imul=function(l,b){return this._verify2(l,b),this.imod(l.imul(b))},Z.prototype.mul=function(l,b){return this._verify2(l,b),this.imod(l.mul(b))},Z.prototype.isqr=function(l){return this.imul(l,l.clone())},Z.prototype.sqr=function(l){return this.mul(l,l)},Z.prototype.sqrt=function(l){if(l.isZero())return l.clone();var b=this.m.andln(3);if(n(b%2===1),b===3){var E=this.m.add(new s(1)).iushrn(2);return this.pow(l,E)}for(var T=this.m.subn(1),C=0;!T.isZero()&&T.andln(1)===0;)C++,T.iushrn(1);n(!T.isZero());var W=new s(1).toRed(this),G=W.redNeg(),U=this.m.subn(1).iushrn(1),m=this.m.bitLength();for(m=new s(2*m*m).toRed(this);this.pow(m,U).cmp(G)!==0;)m.redIAdd(G);for(var F=this.pow(m,T),se=this.pow(l,T.addn(1).iushrn(1)),ae=this.pow(l,T),ue=C;ae.cmp(W)!==0;){for(var me=ae,he=0;me.cmp(W)!==0;he++)me=me.redSqr();n(he<ue);var pe=this.pow(F,new s(1).iushln(ue-he-1));se=se.redMul(pe),F=pe.redSqr(),ae=ae.redMul(F),ue=he}return se},Z.prototype.invm=function(l){var b=l._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},Z.prototype.pow=function(l,b){if(b.isZero())return new s(1).toRed(this);if(b.cmpn(1)===0)return l.clone();var E=4,T=new Array(1<<E);T[0]=new s(1).toRed(this),T[1]=l;for(var C=2;C<T.length;C++)T[C]=this.mul(T[C-1],l);var W=T[0],G=0,U=0,m=b.bitLength()%26;for(m===0&&(m=26),C=b.length-1;C>=0;C--){for(var F=b.words[C],se=m-1;se>=0;se--){var ae=F>>se&1;if(W!==T[0]&&(W=this.sqr(W)),ae===0&&G===0){U=0;continue}G<<=1,G|=ae,U++,!(U!==E&&(C!==0||se!==0))&&(W=this.mul(W,T[G]),U=0,G=0)}m=26}return W},Z.prototype.convertTo=function(l){var b=l.umod(this.m);return b===l?b.clone():b},Z.prototype.convertFrom=function(l){var b=l.clone();return b.red=null,b},s.mont=function(l){return new J(l)};function J(L){Z.call(this,L),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(J,Z),J.prototype.convertTo=function(l){return this.imod(l.ushln(this.shift))},J.prototype.convertFrom=function(l){var b=this.imod(l.mul(this.rinv));return b.red=null,b},J.prototype.imul=function(l,b){if(l.isZero()||b.isZero())return l.words[0]=0,l.length=1,l;var E=l.imul(b),T=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=E.isub(T).iushrn(this.shift),W=C;return C.cmp(this.m)>=0?W=C.isub(this.m):C.cmpn(0)<0&&(W=C.iadd(this.m)),W._forceRed(this)},J.prototype.mul=function(l,b){if(l.isZero()||b.isZero())return new s(0)._forceRed(this);var E=l.mul(b),T=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=E.isub(T).iushrn(this.shift),W=C;return C.cmp(this.m)>=0?W=C.isub(this.m):C.cmpn(0)<0&&(W=C.iadd(this.m)),W._forceRed(this)},J.prototype.invm=function(l){var b=this.imod(l._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(r,commonjsGlobal)})(bn);var bnExports=bn.exports;const BN=getDefaultExportFromCjs$1(bnExports);var safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(r,e){var t=buffer,n=t.Buffer;function o(a,c){for(var d in a)c[d]=a[d]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(o(t,e),e.Buffer=s);function s(a,c,d){return n(a,c,d)}s.prototype=Object.create(n.prototype),o(n,s),s.from=function(a,c,d){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,c,d)},s.alloc=function(a,c,d){if(typeof a!="number")throw new TypeError("Argument must be a number");var u=n(a);return c!==void 0?typeof d=="string"?u.fill(c,d):u.fill(c):u.fill(0),u},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(a)}})(safeBuffer,safeBuffer.exports);var safeBufferExports=safeBuffer.exports,_Buffer$2=safeBufferExports.Buffer;function base$2(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var n=0;n<r.length;n++){var o=r.charAt(n),s=o.charCodeAt(0);if(e[s]!==255)throw new TypeError(o+" is ambiguous");e[s]=n}var a=r.length,c=r.charAt(0),d=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function y(S){if((Array.isArray(S)||S instanceof Uint8Array)&&(S=_Buffer$2.from(S)),!_Buffer$2.isBuffer(S))throw new TypeError("Expected Buffer");if(S.length===0)return"";for(var P=0,x=0,A=0,O=S.length;A!==O&&S[A]===0;)A++,P++;for(var z=(O-A)*u+1>>>0,M=new Uint8Array(z);A!==O;){for(var H=S[A],q=0,Y=z-1;(H!==0||q<x)&&Y!==-1;Y--,q++)H+=256*M[Y]>>>0,M[Y]=H%a>>>0,H=H/a>>>0;if(H!==0)throw new Error("Non-zero carry");x=q,A++}for(var B=z-x;B!==z&&M[B]===0;)B++;for(var N=c.repeat(P);B<z;++B)N+=r.charAt(M[B]);return N}function v(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return _Buffer$2.alloc(0);for(var P=0,x=0,A=0;S[P]===c;)x++,P++;for(var O=(S.length-P)*d+1>>>0,z=new Uint8Array(O);P<S.length;){var M=e[S.charCodeAt(P)];if(M===255)return;for(var H=0,q=O-1;(M!==0||H<A)&&q!==-1;q--,H++)M+=a*z[q]>>>0,z[q]=M%256>>>0,M=M/256>>>0;if(M!==0)throw new Error("Non-zero carry");A=H,P++}for(var Y=O-A;Y!==O&&z[Y]===0;)Y++;var B=_Buffer$2.allocUnsafe(x+(O-Y));B.fill(0,0,x);for(var N=x;Y!==O;)B[N++]=z[Y++];return B}function I(S){var P=v(S);if(P)return P;throw new Error("Non-base"+a+" character")}return{encode:y,decodeUnsafe:v,decode:I}}var src$2=base$2,basex$2=src$2,ALPHABET$2="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",bs58$3=basex$2(ALPHABET$2);const bs58$4=getDefaultExportFromCjs$1(bs58$3);function anumber(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function isBytes(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function abytes(r,...e){if(!isBytes(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function aexists(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function aoutput(r,e){abytes(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u32$1=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),createView=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),rotr=(r,e)=>r<<32-e|r>>>e,isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,byteSwap=r=>r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255;function byteSwap32(r){for(let e=0;e<r.length;e++)r[e]=byteSwap(r[e])}function utf8ToBytes(r){if(typeof r!="string")throw new Error("utf8ToBytes expected string, got "+typeof r);return new Uint8Array(new TextEncoder().encode(r))}function toBytes(r){return typeof r=="string"&&(r=utf8ToBytes(r)),abytes(r),r}class Hash{clone(){return this._cloneInto()}}function wrapConstructor(r){const e=n=>r().update(toBytes(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function setBigUint64(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const o=BigInt(32),s=BigInt(4294967295),a=Number(t>>o&s),c=Number(t&s),d=n?4:0,u=n?0:4;r.setUint32(e+d,a,n),r.setUint32(e+u,c,n)}const Chi=(r,e,t)=>r&e^~r&t,Maj=(r,e,t)=>r&e^r&t^e&t;class HashMD extends Hash{constructor(e,t,n,o){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=createView(this.buffer)}update(e){aexists(this);const{view:t,buffer:n,blockLen:o}=this;e=toBytes(e);const s=e.length;for(let a=0;a<s;){const c=Math.min(o-this.pos,s-a);if(c===o){const d=createView(e);for(;o<=s-a;a+=o)this.process(d,a);continue}n.set(e.subarray(a,a+c),this.pos),this.pos+=c,a+=c,this.pos===o&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){aexists(this),aoutput(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:o,isLE:s}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(n,0),a=0);for(let v=a;v<o;v++)t[v]=0;setBigUint64(n,o-8,BigInt(this.length*8),s),this.process(n,0);const c=createView(e),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=d/4,y=this.get();if(u>y.length)throw new Error("_sha2: outputLen bigger than state");for(let v=0;v<u;v++)c.setUint32(4*v,y[v],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:o,finished:s,destroyed:a,pos:c}=this;return e.length=o,e.pos=c,e.finished=s,e.destroyed=a,o%t&&e.buffer.set(n),e}}const SHA256_K$1=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_IV$1=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W$1=new Uint32Array(64);let SHA256$1=class extends HashMD{constructor(){super(64,32,8,!1),this.A=SHA256_IV$1[0]|0,this.B=SHA256_IV$1[1]|0,this.C=SHA256_IV$1[2]|0,this.D=SHA256_IV$1[3]|0,this.E=SHA256_IV$1[4]|0,this.F=SHA256_IV$1[5]|0,this.G=SHA256_IV$1[6]|0,this.H=SHA256_IV$1[7]|0}get(){const{A:e,B:t,C:n,D:o,E:s,F:a,G:c,H:d}=this;return[e,t,n,o,s,a,c,d]}set(e,t,n,o,s,a,c,d){this.A=e|0,this.B=t|0,this.C=n|0,this.D=o|0,this.E=s|0,this.F=a|0,this.G=c|0,this.H=d|0}process(e,t){for(let v=0;v<16;v++,t+=4)SHA256_W$1[v]=e.getUint32(t,!1);for(let v=16;v<64;v++){const I=SHA256_W$1[v-15],S=SHA256_W$1[v-2],P=rotr(I,7)^rotr(I,18)^I>>>3,x=rotr(S,17)^rotr(S,19)^S>>>10;SHA256_W$1[v]=x+SHA256_W$1[v-7]+P+SHA256_W$1[v-16]|0}let{A:n,B:o,C:s,D:a,E:c,F:d,G:u,H:y}=this;for(let v=0;v<64;v++){const I=rotr(c,6)^rotr(c,11)^rotr(c,25),S=y+I+Chi(c,d,u)+SHA256_K$1[v]+SHA256_W$1[v]|0,x=(rotr(n,2)^rotr(n,13)^rotr(n,22))+Maj(n,o,s)|0;y=u,u=d,d=c,c=a+S|0,a=s,s=o,o=n,n=S+x|0}n=n+this.A|0,o=o+this.B|0,s=s+this.C|0,a=a+this.D|0,c=c+this.E|0,d=d+this.F|0,u=u+this.G|0,y=y+this.H|0,this.set(n,o,s,a,c,d,u,y)}roundClean(){SHA256_W$1.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const sha256$3=wrapConstructor(()=>new SHA256$1);var lib$2={},_Buffer$1=safeBufferExports.Buffer;function base$1(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var n=0;n<r.length;n++){var o=r.charAt(n),s=o.charCodeAt(0);if(e[s]!==255)throw new TypeError(o+" is ambiguous");e[s]=n}var a=r.length,c=r.charAt(0),d=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function y(S){if((Array.isArray(S)||S instanceof Uint8Array)&&(S=_Buffer$1.from(S)),!_Buffer$1.isBuffer(S))throw new TypeError("Expected Buffer");if(S.length===0)return"";for(var P=0,x=0,A=0,O=S.length;A!==O&&S[A]===0;)A++,P++;for(var z=(O-A)*u+1>>>0,M=new Uint8Array(z);A!==O;){for(var H=S[A],q=0,Y=z-1;(H!==0||q<x)&&Y!==-1;Y--,q++)H+=256*M[Y]>>>0,M[Y]=H%a>>>0,H=H/a>>>0;if(H!==0)throw new Error("Non-zero carry");x=q,A++}for(var B=z-x;B!==z&&M[B]===0;)B++;for(var N=c.repeat(P);B<z;++B)N+=r.charAt(M[B]);return N}function v(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return _Buffer$1.alloc(0);for(var P=0,x=0,A=0;S[P]===c;)x++,P++;for(var O=(S.length-P)*d+1>>>0,z=new Uint8Array(O);P<S.length;){var M=e[S.charCodeAt(P)];if(M===255)return;for(var H=0,q=O-1;(M!==0||H<A)&&q!==-1;q--,H++)M+=a*z[q]>>>0,z[q]=M%256>>>0,M=M/256>>>0;if(M!==0)throw new Error("Non-zero carry");A=H,P++}for(var Y=O-A;Y!==O&&z[Y]===0;)Y++;var B=_Buffer$1.allocUnsafe(x+(O-Y));B.fill(0,0,x);for(var N=x;Y!==O;)B[N++]=z[Y++];return B}function I(S){var P=v(S);if(P)return P;throw new Error("Non-base"+a+" character")}return{encode:y,decodeUnsafe:v,decode:I}}var src$1=base$1,basex$1=src$1,ALPHABET$1="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",bs58$2=basex$1(ALPHABET$1);function inRange(r,e,t){return e<=r&&r<=t}function ToDictionary(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function stringToCodePoints(r){for(var e=String(r),t=e.length,n=0,o=[];n<t;){var s=e.charCodeAt(n);if(s<55296||s>57343)o.push(s);else if(56320<=s&&s<=57343)o.push(65533);else if(55296<=s&&s<=56319)if(n===t-1)o.push(65533);else{var a=r.charCodeAt(n+1);if(56320<=a&&a<=57343){var c=s&1023,d=a&1023;o.push(65536+(c<<10)+d),n+=1}else o.push(65533)}n+=1}return o}function codePointsToString(r){for(var e="",t=0;t<r.length;++t){var n=r[t];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var end_of_stream=-1;function Stream(r){this.tokens=[].slice.call(r)}Stream.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():end_of_stream},prepend:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.push(e.shift());else this.tokens.push(r)}};var finished=-1;function decoderError(r,e){if(r)throw TypeError("Decoder error");return e||65533}var DEFAULT_ENCODING="utf-8";function TextDecoder$1(r,e){if(!(this instanceof TextDecoder$1))return new TextDecoder$1(r,e);if(r=r!==void 0?String(r).toLowerCase():DEFAULT_ENCODING,r!==DEFAULT_ENCODING)throw new Error("Encoding not supported. Only utf-8 is supported");e=ToDictionary(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}TextDecoder$1.prototype={decode:function(e,t){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),t=ToDictionary(t),this._streaming||(this._decoder=new UTF8Decoder({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var o=new Stream(n),s=[],a;!o.endOfStream()&&(a=this._decoder.handler(o,o.read()),a!==finished);)a!==null&&(Array.isArray(a)?s.push.apply(s,a):s.push(a));if(!this._streaming){do{if(a=this._decoder.handler(o,o.read()),a===finished)break;a!==null&&(Array.isArray(a)?s.push.apply(s,a):s.push(a))}while(!o.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),codePointsToString(s)}};function TextEncoder$1(r,e){if(!(this instanceof TextEncoder$1))return new TextEncoder$1(r,e);if(r=r!==void 0?String(r).toLowerCase():DEFAULT_ENCODING,r!==DEFAULT_ENCODING)throw new Error("Encoding not supported. Only utf-8 is supported");e=ToDictionary(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}TextEncoder$1.prototype={encode:function(e,t){e=e?String(e):"",t=ToDictionary(t),this._streaming||(this._encoder=new UTF8Encoder(this._options)),this._streaming=!!t.stream;for(var n=[],o=new Stream(stringToCodePoints(e)),s;!o.endOfStream()&&(s=this._encoder.handler(o,o.read()),s!==finished);)Array.isArray(s)?n.push.apply(n,s):n.push(s);if(!this._streaming){for(;s=this._encoder.handler(o,o.read()),s!==finished;)Array.isArray(s)?n.push.apply(n,s):n.push(s);this._encoder=null}return new Uint8Array(n)}};function UTF8Decoder(r){var e=r.fatal,t=0,n=0,o=0,s=128,a=191;this.handler=function(c,d){if(d===end_of_stream&&o!==0)return o=0,decoderError(e);if(d===end_of_stream)return finished;if(o===0){if(inRange(d,0,127))return d;if(inRange(d,194,223))o=1,t=d-192;else if(inRange(d,224,239))d===224&&(s=160),d===237&&(a=159),o=2,t=d-224;else if(inRange(d,240,244))d===240&&(s=144),d===244&&(a=143),o=3,t=d-240;else return decoderError(e);return t=t<<6*o,null}if(!inRange(d,s,a))return t=o=n=0,s=128,a=191,c.prepend(d),decoderError(e);if(s=128,a=191,n+=1,t+=d-128<<6*(o-n),n!==o)return null;var u=t;return t=o=n=0,u}}function UTF8Encoder(r){r.fatal,this.handler=function(e,t){if(t===end_of_stream)return finished;if(inRange(t,0,127))return t;var n,o;inRange(t,128,2047)?(n=1,o=192):inRange(t,2048,65535)?(n=2,o=224):inRange(t,65536,1114111)&&(n=3,o=240);for(var s=[(t>>6*n)+o];n>0;){var a=t>>6*(n-1);s.push(128|a&63),n-=1}return s}}const encoding$1=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:TextDecoder$1,TextEncoder:TextEncoder$1},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace(encoding$1);var define_Buffer_default$h=["buffer","Buffer"],__createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),__decorate=commonjsGlobal&&commonjsGlobal.__decorate||function(r,e,t,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(o<3?a(s):o>3?a(e,t,s):a(e,t))||s);return o>3&&s&&Object.defineProperty(e,t,s),s},__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.hasOwnProperty.call(r,t)&&__createBinding(e,r,t);return __setModuleDefault(e,r),e},__importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(lib$2,"__esModule",{value:!0});var deserializeUnchecked_1=lib$2.deserializeUnchecked=deserialize_1=lib$2.deserialize=serialize_1=lib$2.serialize=lib$2.BinaryReader=lib$2.BinaryWriter=lib$2.BorshError=lib$2.baseDecode=lib$2.baseEncode=void 0;const bn_js_1$1=__importDefault$1(bnExports),bs58_1=__importDefault$1(bs58$2),encoding=__importStar(require$$2$1),ResolvedTextDecoder=typeof TextDecoder!="function"?encoding.TextDecoder:TextDecoder,textDecoder=new ResolvedTextDecoder("utf-8",{fatal:!0});function baseEncode(r){return typeof r=="string"&&(r=define_Buffer_default$h.from(r,"utf8")),bs58_1.default.encode(define_Buffer_default$h.from(r))}lib$2.baseEncode=baseEncode;function baseDecode(r){return define_Buffer_default$h.from(bs58_1.default.decode(r))}lib$2.baseDecode=baseDecode;const INITIAL_LENGTH=1024;class BorshError extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}lib$2.BorshError=BorshError;class BinaryWriter{constructor(){this.buf=define_Buffer_default$h.alloc(INITIAL_LENGTH),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=define_Buffer_default$h.concat([this.buf,define_Buffer_default$h.alloc(INITIAL_LENGTH)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(define_Buffer_default$h.from(new bn_js_1$1.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(define_Buffer_default$h.from(new bn_js_1$1.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(define_Buffer_default$h.from(new bn_js_1$1.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(define_Buffer_default$h.from(new bn_js_1$1.default(e).toArray("le",64)))}writeBuffer(e){this.buf=define_Buffer_default$h.concat([define_Buffer_default$h.from(this.buf.subarray(0,this.length)),e,define_Buffer_default$h.alloc(INITIAL_LENGTH)]),this.length+=e.length}writeString(e){this.maybeResize();const t=define_Buffer_default$h.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(define_Buffer_default$h.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const n of e)this.maybeResize(),t(n)}toArray(){return this.buf.subarray(0,this.length)}}lib$2.BinaryWriter=BinaryWriter;function handlingRangeError(r,e,t){const n=t.value;t.value=function(...o){try{return n.apply(this,o)}catch(s){if(s instanceof RangeError){const a=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(a)>=0)throw new BorshError("Reached the end of buffer when deserializing")}throw s}}}class BinaryReader{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new bn_js_1$1.default(e,"le")}readU128(){const e=this.readBuffer(16);return new bn_js_1$1.default(e,"le")}readU256(){const e=this.readBuffer(32);return new bn_js_1$1.default(e,"le")}readU512(){const e=this.readBuffer(64);return new bn_js_1$1.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new BorshError(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return textDecoder.decode(t)}catch(n){throw new BorshError(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),n=Array();for(let o=0;o<t;++o)n.push(e());return n}}__decorate([handlingRangeError],BinaryReader.prototype,"readU8",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU16",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU32",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU64",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU128",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU256",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU512",null);__decorate([handlingRangeError],BinaryReader.prototype,"readString",null);__decorate([handlingRangeError],BinaryReader.prototype,"readFixedArray",null);__decorate([handlingRangeError],BinaryReader.prototype,"readArray",null);lib$2.BinaryReader=BinaryReader;function capitalizeFirstLetter(r){return r.charAt(0).toUpperCase()+r.slice(1)}function serializeField(r,e,t,n,o){try{if(typeof n=="string")o[`write${capitalizeFirstLetter(n)}`](t);else if(n instanceof Array)if(typeof n[0]=="number"){if(t.length!==n[0])throw new BorshError(`Expecting byte array of length ${n[0]}, but got ${t.length} bytes`);o.writeFixedArray(t)}else if(n.length===2&&typeof n[1]=="number"){if(t.length!==n[1])throw new BorshError(`Expecting byte array of length ${n[1]}, but got ${t.length} bytes`);for(let s=0;s<n[1];s++)serializeField(r,null,t[s],n[0],o)}else o.writeArray(t,s=>{serializeField(r,e,s,n[0],o)});else if(n.kind!==void 0)switch(n.kind){case"option":{t==null?o.writeU8(0):(o.writeU8(1),serializeField(r,e,t,n.type,o));break}case"map":{o.writeU32(t.size),t.forEach((s,a)=>{serializeField(r,e,a,n.key,o),serializeField(r,e,s,n.value,o)});break}default:throw new BorshError(`FieldType ${n} unrecognized`)}else serializeStruct(r,t,o)}catch(s){throw s instanceof BorshError&&s.addToFieldPath(e),s}}function serializeStruct(r,e,t){if(typeof e.borshSerialize=="function"){e.borshSerialize(t);return}const n=r.get(e.constructor);if(!n)throw new BorshError(`Class ${e.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([o,s])=>{serializeField(r,o,e[o],s,t)});else if(n.kind==="enum"){const o=e[n.field];for(let s=0;s<n.values.length;++s){const[a,c]=n.values[s];if(a===o){t.writeU8(s),serializeField(r,a,e[a],c,t);break}}}else throw new BorshError(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function serialize(r,e,t=BinaryWriter){const n=new t;return serializeStruct(r,e,n),n.toArray()}var serialize_1=lib$2.serialize=serialize;function deserializeField(r,e,t,n){try{if(typeof t=="string")return n[`read${capitalizeFirstLetter(t)}`]();if(t instanceof Array){if(typeof t[0]=="number")return n.readFixedArray(t[0]);if(typeof t[1]=="number"){const o=[];for(let s=0;s<t[1];s++)o.push(deserializeField(r,null,t[0],n));return o}else return n.readArray(()=>deserializeField(r,e,t[0],n))}if(t.kind==="option")return n.readU8()?deserializeField(r,e,t.type,n):void 0;if(t.kind==="map"){let o=new Map;const s=n.readU32();for(let a=0;a<s;a++){const c=deserializeField(r,e,t.key,n),d=deserializeField(r,e,t.value,n);o.set(c,d)}return o}return deserializeStruct(r,t,n)}catch(o){throw o instanceof BorshError&&o.addToFieldPath(e),o}}function deserializeStruct(r,e,t){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(t);const n=r.get(e);if(!n)throw new BorshError(`Class ${e.name} is missing in schema`);if(n.kind==="struct"){const o={};for(const[s,a]of r.get(e).fields)o[s]=deserializeField(r,s,a,t);return new e(o)}if(n.kind==="enum"){const o=t.readU8();if(o>=n.values.length)throw new BorshError(`Enum index: ${o} is out of range`);const[s,a]=n.values[o],c=deserializeField(r,s,a,t);return new e({[s]:c})}throw new BorshError(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function deserialize(r,e,t,n=BinaryReader){const o=new n(t),s=deserializeStruct(r,e,o);if(o.offset<t.length)throw new BorshError(`Unexpected ${t.length-o.offset} bytes after deserialized data`);return s}var deserialize_1=lib$2.deserialize=deserialize;function deserializeUnchecked(r,e,t,n=BinaryReader){const o=new n(t);return deserializeStruct(r,e,o)}deserializeUnchecked_1=lib$2.deserializeUnchecked=deserializeUnchecked;var Layout$3={};/**
 * Support for translating between Uint8Array instances and JavaScript
 * native types.
 *
 * {@link module:Layout~Layout|Layout} is the basis of a class
 * hierarchy that associates property names with sequences of encoded
 * bytes.
 *
 * Layouts are supported for these scalar (numeric) types:
 * * {@link module:Layout~UInt|Unsigned integers in little-endian
 *   format} with {@link module:Layout.u8|8-bit}, {@link
 *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},
 *   {@link module:Layout.u32|32-bit}, {@link
 *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}
 *   representation ranges;
 * * {@link module:Layout~UIntBE|Unsigned integers in big-endian
 *   format} with {@link module:Layout.u16be|16-bit}, {@link
 *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},
 *   {@link module:Layout.u40be|40-bit}, and {@link
 *   module:Layout.u48be|48-bit} representation ranges;
 * * {@link module:Layout~Int|Signed integers in little-endian
 *   format} with {@link module:Layout.s8|8-bit}, {@link
 *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},
 *   {@link module:Layout.s32|32-bit}, {@link
 *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}
 *   representation ranges;
 * * {@link module:Layout~IntBE|Signed integers in big-endian format}
 *   with {@link module:Layout.s16be|16-bit}, {@link
 *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},
 *   {@link module:Layout.s40be|40-bit}, and {@link
 *   module:Layout.s48be|48-bit} representation ranges;
 * * 64-bit integral values that decode to an exact (if magnitude is
 *   less than 2^53) or nearby integral Number in {@link
 *   module:Layout.nu64|unsigned little-endian}, {@link
 *   module:Layout.nu64be|unsigned big-endian}, {@link
 *   module:Layout.ns64|signed little-endian}, and {@link
 *   module:Layout.ns64be|unsigned big-endian} encodings;
 * * 32-bit floating point values with {@link
 *   module:Layout.f32|little-endian} and {@link
 *   module:Layout.f32be|big-endian} representations;
 * * 64-bit floating point values with {@link
 *   module:Layout.f64|little-endian} and {@link
 *   module:Layout.f64be|big-endian} representations;
 * * {@link module:Layout.const|Constants} that take no space in the
 *   encoded expression.
 *
 * and for these aggregate types:
 * * {@link module:Layout.seq|Sequence}s of instances of a {@link
 *   module:Layout~Layout|Layout}, with JavaScript representation as
 *   an Array and constant or data-dependent {@link
 *   module:Layout~Sequence#count|length};
 * * {@link module:Layout.struct|Structure}s that aggregate a
 *   heterogeneous sequence of {@link module:Layout~Layout|Layout}
 *   instances, with JavaScript representation as an Object;
 * * {@link module:Layout.union|Union}s that support multiple {@link
 *   module:Layout~VariantLayout|variant layouts} over a fixed
 *   (padded) or variable (not padded) span of bytes, using an
 *   unsigned integer at the start of the data or a separate {@link
 *   module:Layout.unionLayoutDiscriminator|layout element} to
 *   determine which layout to use when interpreting the buffer
 *   contents;
 * * {@link module:Layout.bits|BitStructure}s that contain a sequence
 *   of individual {@link
 *   module:Layout~BitStructure#addField|BitField}s packed into an 8,
 *   16, 24, or 32-bit unsigned integer starting at the least- or
 *   most-significant bit;
 * * {@link module:Layout.cstr|C strings} of varying length;
 * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link
 *   module:Layout~Blob#length|length} raw data.
 *
 * All {@link module:Layout~Layout|Layout} instances are immutable
 * after construction, to prevent internal state from becoming
 * inconsistent.
 *
 * @local Layout
 * @local ExternalLayout
 * @local GreedyCount
 * @local OffsetLayout
 * @local UInt
 * @local UIntBE
 * @local Int
 * @local IntBE
 * @local NearUInt64
 * @local NearUInt64BE
 * @local NearInt64
 * @local NearInt64BE
 * @local Float
 * @local FloatBE
 * @local Double
 * @local DoubleBE
 * @local Sequence
 * @local Structure
 * @local UnionDiscriminator
 * @local UnionLayoutDiscriminator
 * @local Union
 * @local VariantLayout
 * @local BitStructure
 * @local BitField
 * @local Boolean
 * @local Blob
 * @local CString
 * @local Constant
 * @local bindConstructorLayout
 * @module Layout
 * @license MIT
 * @author Peter A. Bigot
 * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}
 */Object.defineProperty(Layout$3,"__esModule",{value:!0});Layout$3.s16=Layout$3.s8=Layout$3.nu64be=Layout$3.u48be=Layout$3.u40be=Layout$3.u32be=Layout$3.u24be=Layout$3.u16be=nu64=Layout$3.nu64=Layout$3.u48=Layout$3.u40=u32=Layout$3.u32=Layout$3.u24=u16=Layout$3.u16=u8=Layout$3.u8=offset=Layout$3.offset=Layout$3.greedy=Layout$3.Constant=Layout$3.UTF8=Layout$3.CString=Layout$3.Blob=Layout$3.Boolean=Layout$3.BitField=Layout$3.BitStructure=Layout$3.VariantLayout=Layout$3.Union=Layout$3.UnionLayoutDiscriminator=Layout$3.UnionDiscriminator=Layout$3.Structure=Layout$3.Sequence=Layout$3.DoubleBE=Layout$3.Double=Layout$3.FloatBE=Layout$3.Float=Layout$3.NearInt64BE=Layout$3.NearInt64=Layout$3.NearUInt64BE=Layout$3.NearUInt64=Layout$3.IntBE=Layout$3.Int=Layout$3.UIntBE=Layout$3.UInt=Layout$3.OffsetLayout=Layout$3.GreedyCount=Layout$3.ExternalLayout=Layout$3.bindConstructorLayout=Layout$3.nameWithProperty=Layout$3.Layout=Layout$3.uint8ArrayToBuffer=Layout$3.checkUint8Array=void 0;Layout$3.constant=Layout$3.utf8=Layout$3.cstr=blob=Layout$3.blob=Layout$3.unionLayoutDiscriminator=Layout$3.union=seq=Layout$3.seq=Layout$3.bits=struct=Layout$3.struct=Layout$3.f64be=Layout$3.f64=Layout$3.f32be=Layout$3.f32=Layout$3.ns64be=Layout$3.s48be=Layout$3.s40be=Layout$3.s32be=Layout$3.s24be=Layout$3.s16be=ns64=Layout$3.ns64=Layout$3.s48=Layout$3.s40=Layout$3.s32=Layout$3.s24=void 0;const buffer_1=buffer;function checkUint8Array(r){if(!(r instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Layout$3.checkUint8Array=checkUint8Array;function uint8ArrayToBuffer(r){return checkUint8Array(r),buffer_1.Buffer.from(r.buffer,r.byteOffset,r.length)}Layout$3.uint8ArrayToBuffer=uint8ArrayToBuffer;let Layout$2=class{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}};Layout$3.Layout=Layout$2;function nameWithProperty$1(r,e){return e.property?r+"["+e.property+"]":r}Layout$3.nameWithProperty=nameWithProperty$1;function bindConstructorLayout$1(r,e){if(typeof r!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(r,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof Layout$2))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");r.layout_=e,e.boundConstructor_=r,e.makeDestinationObject=()=>new r,Object.defineProperty(r.prototype,"encode",{value(t,n){return e.encode(this,t,n)},writable:!0}),Object.defineProperty(r,"decode",{value(t,n){return e.decode(t,n)},writable:!0})}Layout$3.bindConstructorLayout=bindConstructorLayout$1;let ExternalLayout$1=class extends Layout$2{isCount(){throw new Error("ExternalLayout is abstract")}};Layout$3.ExternalLayout=ExternalLayout$1;let GreedyCount$1=class extends ExternalLayout$1{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){checkUint8Array(e);const n=e.length-t;return Math.floor(n/this.elementSpan)}encode(e,t,n){return 0}};Layout$3.GreedyCount=GreedyCount$1;let OffsetLayout$1=class extends ExternalLayout$1{constructor(e,t=0,n){if(!(e instanceof Layout$2))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof UInt$1||this.layout instanceof UIntBE$1}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,n=0){return this.layout.encode(e,t,n+this.offset)}};Layout$3.OffsetLayout=OffsetLayout$1;let UInt$1=class extends Layout$2{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return uint8ArrayToBuffer(e).readUIntLE(t,this.span)}encode(e,t,n=0){return uint8ArrayToBuffer(t).writeUIntLE(e,n,this.span),this.span}};Layout$3.UInt=UInt$1;let UIntBE$1=class extends Layout$2{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return uint8ArrayToBuffer(e).readUIntBE(t,this.span)}encode(e,t,n=0){return uint8ArrayToBuffer(t).writeUIntBE(e,n,this.span),this.span}};Layout$3.UIntBE=UIntBE$1;let Int$1=class extends Layout$2{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return uint8ArrayToBuffer(e).readIntLE(t,this.span)}encode(e,t,n=0){return uint8ArrayToBuffer(t).writeIntLE(e,n,this.span),this.span}};Layout$3.Int=Int$1;let IntBE$1=class extends Layout$2{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return uint8ArrayToBuffer(e).readIntBE(t,this.span)}encode(e,t,n=0){return uint8ArrayToBuffer(t).writeIntBE(e,n,this.span),this.span}};Layout$3.IntBE=IntBE$1;const V2E32$1=Math.pow(2,32);function divmodInt64$1(r){const e=Math.floor(r/V2E32$1),t=r-e*V2E32$1;return{hi32:e,lo32:t}}function roundedInt64$1(r,e){return r*V2E32$1+e}let NearUInt64$1=class extends Layout$2{constructor(e){super(8,e)}decode(e,t=0){const n=uint8ArrayToBuffer(e),o=n.readUInt32LE(t),s=n.readUInt32LE(t+4);return roundedInt64$1(s,o)}encode(e,t,n=0){const o=divmodInt64$1(e),s=uint8ArrayToBuffer(t);return s.writeUInt32LE(o.lo32,n),s.writeUInt32LE(o.hi32,n+4),8}};Layout$3.NearUInt64=NearUInt64$1;let NearUInt64BE$1=class extends Layout$2{constructor(e){super(8,e)}decode(e,t=0){const n=uint8ArrayToBuffer(e),o=n.readUInt32BE(t),s=n.readUInt32BE(t+4);return roundedInt64$1(o,s)}encode(e,t,n=0){const o=divmodInt64$1(e),s=uint8ArrayToBuffer(t);return s.writeUInt32BE(o.hi32,n),s.writeUInt32BE(o.lo32,n+4),8}};Layout$3.NearUInt64BE=NearUInt64BE$1;let NearInt64$1=class extends Layout$2{constructor(e){super(8,e)}decode(e,t=0){const n=uint8ArrayToBuffer(e),o=n.readUInt32LE(t),s=n.readInt32LE(t+4);return roundedInt64$1(s,o)}encode(e,t,n=0){const o=divmodInt64$1(e),s=uint8ArrayToBuffer(t);return s.writeUInt32LE(o.lo32,n),s.writeInt32LE(o.hi32,n+4),8}};Layout$3.NearInt64=NearInt64$1;let NearInt64BE$1=class extends Layout$2{constructor(e){super(8,e)}decode(e,t=0){const n=uint8ArrayToBuffer(e),o=n.readInt32BE(t),s=n.readUInt32BE(t+4);return roundedInt64$1(o,s)}encode(e,t,n=0){const o=divmodInt64$1(e),s=uint8ArrayToBuffer(t);return s.writeInt32BE(o.hi32,n),s.writeUInt32BE(o.lo32,n+4),8}};Layout$3.NearInt64BE=NearInt64BE$1;let Float$1=class extends Layout$2{constructor(e){super(4,e)}decode(e,t=0){return uint8ArrayToBuffer(e).readFloatLE(t)}encode(e,t,n=0){return uint8ArrayToBuffer(t).writeFloatLE(e,n),4}};Layout$3.Float=Float$1;let FloatBE$1=class extends Layout$2{constructor(e){super(4,e)}decode(e,t=0){return uint8ArrayToBuffer(e).readFloatBE(t)}encode(e,t,n=0){return uint8ArrayToBuffer(t).writeFloatBE(e,n),4}};Layout$3.FloatBE=FloatBE$1;let Double$1=class extends Layout$2{constructor(e){super(8,e)}decode(e,t=0){return uint8ArrayToBuffer(e).readDoubleLE(t)}encode(e,t,n=0){return uint8ArrayToBuffer(t).writeDoubleLE(e,n),8}};Layout$3.Double=Double$1;let DoubleBE$1=class extends Layout$2{constructor(e){super(8,e)}decode(e,t=0){return uint8ArrayToBuffer(e).readDoubleBE(t)}encode(e,t,n=0){return uint8ArrayToBuffer(t).writeDoubleBE(e,n),8}};Layout$3.DoubleBE=DoubleBE$1;let Sequence$1=class extends Layout$2{constructor(e,t,n){if(!(e instanceof Layout$2))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof ExternalLayout$1&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let o=-1;!(t instanceof ExternalLayout$1)&&0<e.span&&(o=t*e.span),super(o,n),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0,o=this.count;if(o instanceof ExternalLayout$1&&(o=o.decode(e,t)),0<this.elementLayout.span)n=o*this.elementLayout.span;else{let s=0;for(;s<o;)n+=this.elementLayout.getSpan(e,t+n),++s}return n}decode(e,t=0){const n=[];let o=0,s=this.count;for(s instanceof ExternalLayout$1&&(s=s.decode(e,t));o<s;)n.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),o+=1;return n}encode(e,t,n=0){const o=this.elementLayout,s=e.reduce((a,c)=>a+o.encode(c,t,n+a),0);return this.count instanceof ExternalLayout$1&&this.count.encode(e.length,t,n),s}};Layout$3.Sequence=Sequence$1;let Structure$1=class extends Layout$2{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((s,a)=>s&&a instanceof Layout$2,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let o=-1;try{o=e.reduce((s,a)=>s+a.getSpan(),0)}catch{}super(o,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((o,s)=>{const a=s.getSpan(e,t);return t+=a,o+a},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t=0){checkUint8Array(e);const n=this.makeDestinationObject();for(const o of this.fields)if(o.property!==void 0&&(n[o.property]=o.decode(e,t)),t+=o.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n=0){const o=n;let s=0,a=0;for(const c of this.fields){let d=c.span;if(a=0<d?d:0,c.property!==void 0){const u=e[c.property];u!==void 0&&(a=c.encode(u,t,n),0>d&&(d=c.getSpan(t,n)))}s=n,n+=d}return s+a-o}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}};Layout$3.Structure=Structure$1;let UnionDiscriminator$1=class{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,n){throw new Error("UnionDiscriminator is abstract")}};Layout$3.UnionDiscriminator=UnionDiscriminator$1;let UnionLayoutDiscriminator$1=class extends UnionDiscriminator$1{constructor(e,t){if(!(e instanceof ExternalLayout$1&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}};Layout$3.UnionLayoutDiscriminator=UnionLayoutDiscriminator$1;let Union$1=class extends Layout$2{constructor(e,t,n){let o;if(e instanceof UInt$1||e instanceof UIntBE$1)o=new UnionLayoutDiscriminator$1(new OffsetLayout$1(e));else if(e instanceof ExternalLayout$1&&e.isCount())o=new UnionLayoutDiscriminator$1(e);else if(e instanceof UnionDiscriminator$1)o=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof Layout$2))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let s=-1;t&&(s=t.span,0<=s&&(e instanceof UInt$1||e instanceof UIntBE$1)&&(s+=o.layout.span)),super(s,n),this.discriminator=o,this.usesPrefixDiscriminator=e instanceof UInt$1||e instanceof UIntBE$1,this.defaultLayout=t,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(c){return a(c)},this.configGetSourceVariant=function(c){a=c.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(n.property&&Object.prototype.hasOwnProperty.call(e,n.property))return n}throw new Error("unable to infer src variant")}decode(e,t=0){let n;const o=this.discriminator,s=o.decode(e,t),a=this.registry[s];if(a===void 0){const c=this.defaultLayout;let d=0;this.usesPrefixDiscriminator&&(d=o.layout.span),n=this.makeDestinationObject(),n[o.property]=s,n[c.property]=c.decode(e,t+d)}else n=a.decode(e,t);return n}encode(e,t,n=0){const o=this.getSourceVariant(e);if(o===void 0){const s=this.discriminator,a=this.defaultLayout;let c=0;return this.usesPrefixDiscriminator&&(c=s.layout.span),s.encode(e[s.property],t,n),c+a.encode(e[a.property],t,n+c)}return o.encode(e,t,n)}addVariant(e,t,n){const o=new VariantLayout$1(this,e,t,n);return this.registry[e]=o,o}getVariant(e,t=0){let n;return e instanceof Uint8Array?n=this.discriminator.decode(e,t):n=e,this.registry[n]}};Layout$3.Union=Union$1;let VariantLayout$1=class extends Layout$2{constructor(e,t,n,o){if(!(e instanceof Union$1))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&o===void 0&&(o=n,n=null),n){if(!(n instanceof Layout$2))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof o!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=n?n.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,o),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let o=0;return this.layout&&(o=this.layout.getSpan(e,t+n)),n+o}decode(e,t=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let o=0;return this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+o):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n=0){let o=0;if(this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let s=o;if(this.layout&&(this.layout.encode(e[this.property],t,n+o),s+=this.layout.getSpan(t,n+o),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}};Layout$3.VariantLayout=VariantLayout$1;function fixBitwiseResult$1(r){return 0>r&&(r+=4294967296),r}let BitStructure$1=class extends Layout$2{constructor(e,t,n){if(!(e instanceof UInt$1||e instanceof UIntBE$1))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&n===void 0&&(n=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,n),this.word=e,this.msb=!!t,this.fields=[];let o=0;this._packedSetValue=function(s){return o=fixBitwiseResult$1(s),this},this._packedGetValue=function(){return o}}decode(e,t=0){const n=this.makeDestinationObject(),o=this.word.decode(e,t);this._packedSetValue(o);for(const s of this.fields)s.property!==void 0&&(n[s.property]=s.decode(e));return n}encode(e,t,n=0){const o=this.word.decode(t,n);this._packedSetValue(o);for(const s of this.fields)if(s.property!==void 0){const a=e[s.property];a!==void 0&&s.encode(a)}return this.word.encode(this._packedGetValue(),t,n)}addField(e,t){const n=new BitField$1(this,e,t);return this.fields.push(n),n}addBoolean(e){const t=new Boolean$2(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}};Layout$3.BitStructure=BitStructure$1;let BitField$1=class{constructor(e,t,n){if(!(e instanceof BitStructure$1))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const o=8*e.span,s=e.fields.reduce((a,c)=>a+c.bits,0);if(t+s>o)throw new Error("bits too long for span remainder ("+(o-s)+" of "+o+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=o-s-t),this.wordMask=fixBitwiseResult$1(this.valueMask<<this.start),this.property=n}decode(e,t){const n=this.container._packedGetValue();return fixBitwiseResult$1(n&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==fixBitwiseResult$1(e&this.valueMask))throw new TypeError(nameWithProperty$1("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),n=fixBitwiseResult$1(e<<this.start);this.container._packedSetValue(fixBitwiseResult$1(t&~this.wordMask)|n)}};Layout$3.BitField=BitField$1;let Boolean$2=class extends BitField$1{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};Layout$3.Boolean=Boolean$2;let Blob$1=class extends Layout$2{constructor(e,t){if(!(e instanceof ExternalLayout$1&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof ExternalLayout$1||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t=0){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),uint8ArrayToBuffer(e).slice(t,t+n)}encode(e,t,n){let o=this.length;if(this.length instanceof ExternalLayout$1&&(o=e.length),!(e instanceof Uint8Array&&o===e.length))throw new TypeError(nameWithProperty$1("Blob.encode",this)+" requires (length "+o+") Uint8Array as src");if(n+o>t.length)throw new RangeError("encoding overruns Uint8Array");const s=uint8ArrayToBuffer(e);return uint8ArrayToBuffer(t).write(s.toString("hex"),n,o,"hex"),this.length instanceof ExternalLayout$1&&this.length.encode(o,t,n),o}};Layout$3.Blob=Blob$1;let CString$1=class extends Layout$2{constructor(e){super(-1,e)}getSpan(e,t=0){checkUint8Array(e);let n=t;for(;n<e.length&&e[n]!==0;)n+=1;return 1+n-t}decode(e,t=0){const n=this.getSpan(e,t);return uint8ArrayToBuffer(e).slice(t,t+n-1).toString("utf-8")}encode(e,t,n=0){typeof e!="string"&&(e=String(e));const o=buffer_1.Buffer.from(e,"utf8"),s=o.length;if(n+s>t.length)throw new RangeError("encoding overruns Buffer");const a=uint8ArrayToBuffer(t);return o.copy(a,n),a[n+s]=0,s+1}};Layout$3.CString=CString$1;let UTF8$1=class extends Layout$2{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return checkUint8Array(e),e.length-t}decode(e,t=0){const n=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return uint8ArrayToBuffer(e).slice(t,t+n).toString("utf-8")}encode(e,t,n=0){typeof e!="string"&&(e=String(e));const o=buffer_1.Buffer.from(e,"utf8"),s=o.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(n+s>t.length)throw new RangeError("encoding overruns Buffer");return o.copy(uint8ArrayToBuffer(t),n),s}};Layout$3.UTF8=UTF8$1;let Constant$1=class extends Layout$2{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,n){return 0}};Layout$3.Constant=Constant$1;Layout$3.greedy=(r,e)=>new GreedyCount$1(r,e);var offset=Layout$3.offset=(r,e,t)=>new OffsetLayout$1(r,e,t),u8=Layout$3.u8=r=>new UInt$1(1,r),u16=Layout$3.u16=r=>new UInt$1(2,r);Layout$3.u24=r=>new UInt$1(3,r);var u32=Layout$3.u32=r=>new UInt$1(4,r);Layout$3.u40=r=>new UInt$1(5,r);Layout$3.u48=r=>new UInt$1(6,r);var nu64=Layout$3.nu64=r=>new NearUInt64$1(r);Layout$3.u16be=r=>new UIntBE$1(2,r);Layout$3.u24be=r=>new UIntBE$1(3,r);Layout$3.u32be=r=>new UIntBE$1(4,r);Layout$3.u40be=r=>new UIntBE$1(5,r);Layout$3.u48be=r=>new UIntBE$1(6,r);Layout$3.nu64be=r=>new NearUInt64BE$1(r);Layout$3.s8=r=>new Int$1(1,r);Layout$3.s16=r=>new Int$1(2,r);Layout$3.s24=r=>new Int$1(3,r);Layout$3.s32=r=>new Int$1(4,r);Layout$3.s40=r=>new Int$1(5,r);Layout$3.s48=r=>new Int$1(6,r);var ns64=Layout$3.ns64=r=>new NearInt64$1(r);Layout$3.s16be=r=>new IntBE$1(2,r);Layout$3.s24be=r=>new IntBE$1(3,r);Layout$3.s32be=r=>new IntBE$1(4,r);Layout$3.s40be=r=>new IntBE$1(5,r);Layout$3.s48be=r=>new IntBE$1(6,r);Layout$3.ns64be=r=>new NearInt64BE$1(r);Layout$3.f32=r=>new Float$1(r);Layout$3.f32be=r=>new FloatBE$1(r);Layout$3.f64=r=>new Double$1(r);Layout$3.f64be=r=>new DoubleBE$1(r);var struct=Layout$3.struct=(r,e,t)=>new Structure$1(r,e,t);Layout$3.bits=(r,e,t)=>new BitStructure$1(r,e,t);var seq=Layout$3.seq=(r,e,t)=>new Sequence$1(r,e,t);Layout$3.union=(r,e,t)=>new Union$1(r,e,t);Layout$3.unionLayoutDiscriminator=(r,e)=>new UnionLayoutDiscriminator$1(r,e);var blob=Layout$3.blob=(r,e)=>new Blob$1(r,e);Layout$3.cstr=r=>new CString$1(r);Layout$3.utf8=(r,e)=>new UTF8$1(r,e);Layout$3.constant=(r,e)=>new Constant$1(r,e);var browser$1={},define_Buffer_default$g=["buffer","Buffer"];Object.defineProperty(browser$1,"__esModule",{value:!0});function toBigIntLE(r){{const e=define_Buffer_default$g.from(r);e.reverse();const t=e.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}var toBigIntLE_1=browser$1.toBigIntLE=toBigIntLE;function toBigIntBE(r){{const e=r.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}browser$1.toBigIntBE=toBigIntBE;function toBufferLE(r,e){{const t=r.toString(16),n=define_Buffer_default$g.from(t.padStart(e*2,"0").slice(0,e*2),"hex");return n.reverse(),n}}var toBufferLE_1=browser$1.toBufferLE=toBufferLE;function toBufferBE(r,e){{const t=r.toString(16);return define_Buffer_default$g.from(t.padStart(e*2,"0").slice(0,e*2),"hex")}}browser$1.toBufferBE=toBufferBE;class StructError extends TypeError{constructor(e,t){let n;const{message:o,explanation:s,...a}=e,{path:c}=e,d=c.length===0?o:`At path: ${c.join(".")} -- ${o}`;super(s??d),s!=null&&(this.cause=d),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}}function isIterable(r){return isObject(r)&&typeof r[Symbol.iterator]=="function"}function isObject(r){return typeof r=="object"&&r!=null}function isNonArrayObject(r){return isObject(r)&&!Array.isArray(r)}function print(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function shiftIterator(r){const{done:e,value:t}=r.next();return e?void 0:t}function toFailure(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:o,branch:s}=e,{type:a}=t,{refinement:c,message:d=`Expected a value of type \`${a}\`${c?` with refinement \`${c}\``:""}, but received: \`${print(n)}\``}=r;return{value:n,type:a,refinement:c,key:o[o.length-1],path:o,branch:s,...r,message:d}}function*toFailures(r,e,t,n){isIterable(r)||(r=[r]);for(const o of r){const s=toFailure(o,e,t,n);s&&(yield s)}}function*run(r,e,t={}){const{path:n=[],branch:o=[r],coerce:s=!1,mask:a=!1}=t,c={path:n,branch:o,mask:a};s&&(r=e.coercer(r,c));let d="valid";for(const u of e.validator(r,c))u.explanation=t.message,d="not_valid",yield[u,void 0];for(let[u,y,v]of e.entries(r,c)){const I=run(y,v,{path:u===void 0?n:[...n,u],branch:u===void 0?o:[...o,y],coerce:s,mask:a,message:t.message});for(const S of I)S[0]?(d=S[0].refinement!=null?"not_refined":"not_valid",yield[S[0],void 0]):s&&(y=S[1],u===void 0?r=y:r instanceof Map?r.set(u,y):r instanceof Set?r.add(y):isObject(r)&&(y!==void 0||u in r)&&(r[u]=y))}if(d!=="not_valid")for(const u of e.refiner(r,c))u.explanation=t.message,d="not_refined",yield[u,void 0];d==="valid"&&(yield[void 0,r])}let Struct$1=class{constructor(e){const{type:t,schema:n,validator:o,refiner:s,coercer:a=d=>d,entries:c=function*(){}}=e;this.type=t,this.schema=n,this.entries=c,this.coercer=a,o?this.validator=(d,u)=>{const y=o(d,u);return toFailures(y,u,this,d)}:this.validator=()=>[],s?this.refiner=(d,u)=>{const y=s(d,u);return toFailures(y,u,this,d)}:this.refiner=()=>[]}assert(e,t){return assert$2(e,this,t)}create(e,t){return create(e,this,t)}is(e){return is(e,this)}mask(e,t){return mask(e,this,t)}validate(e,t={}){return validate$1(e,this,t)}};function assert$2(r,e,t){const n=validate$1(r,e,{message:t});if(n[0])throw n[0]}function create(r,e,t){const n=validate$1(r,e,{coerce:!0,message:t});if(n[0])throw n[0];return n[1]}function mask(r,e,t){const n=validate$1(r,e,{coerce:!0,mask:!0,message:t});if(n[0])throw n[0];return n[1]}function is(r,e){return!validate$1(r,e)[0]}function validate$1(r,e,t={}){const n=run(r,e,t),o=shiftIterator(n);return o[0]?[new StructError(o[0],function*(){for(const a of n)a[0]&&(yield a[0])}),void 0]:[void 0,o[1]]}function define(r,e){return new Struct$1({type:r,schema:null,validator:e})}function any(){return define("any",()=>!0)}function array(r){return new Struct$1({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${print(e)}`}})}function boolean(){return define("boolean",r=>typeof r=="boolean")}function instance(r){return define("instance",e=>e instanceof r||`Expected a \`${r.name}\` instance, but received: ${print(e)}`)}function literal(r){const e=print(r),t=typeof r;return new Struct$1({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${e}\`, but received: ${print(n)}`}})}function never(){return define("never",()=>!1)}function nullable(r){return new Struct$1({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function number(){return define("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${print(r)}`)}function optional(r){return new Struct$1({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function record(r,e){return new Struct$1({type:"record",schema:null,*entries(t){if(isObject(t))for(const n in t){const o=t[n];yield[n,n,r],yield[n,o,e]}},validator(t){return isNonArrayObject(t)||`Expected an object, but received: ${print(t)}`},coercer(t){return isNonArrayObject(t)?{...t}:t}})}function string(){return define("string",r=>typeof r=="string"||`Expected a string, but received: ${print(r)}`)}function tuple(r){const e=never();return new Struct$1({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const n=Math.max(r.length,t.length);for(let o=0;o<n;o++)yield[o,t[o],r[o]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${print(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function type(r){const e=Object.keys(r);return new Struct$1({type:"type",schema:r,*entries(t){if(isObject(t))for(const n of e)yield[n,t[n],r[n]]},validator(t){return isNonArrayObject(t)||`Expected an object, but received: ${print(t)}`},coercer(t){return isNonArrayObject(t)?{...t}:t}})}function union(r){const e=r.map(t=>t.type).join(" | ");return new Struct$1({type:"union",schema:null,coercer(t,n){for(const o of r){const[s,a]=o.validate(t,{coerce:!0,mask:n.mask});if(!s)return a}return t},validator(t,n){const o=[];for(const s of r){const[...a]=run(t,s,n),[c]=a;if(c[0])for(const[d]of a)d&&o.push(d);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${print(t)}`,...o]}})}function unknown(){return define("unknown",()=>!0)}function coerce(r,e,t){return new Struct$1({...r,coercer:(n,o)=>is(n,e)?r.coercer(t(n,o),o):r.coercer(n,o)})}var getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate(r){return typeof r=="string"&&REGEX.test(r)}var byteToHex=[];for(var i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));function stringify(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(byteToHex[r[e+0]]+byteToHex[r[e+1]]+byteToHex[r[e+2]]+byteToHex[r[e+3]]+"-"+byteToHex[r[e+4]]+byteToHex[r[e+5]]+"-"+byteToHex[r[e+6]]+byteToHex[r[e+7]]+"-"+byteToHex[r[e+8]]+byteToHex[r[e+9]]+"-"+byteToHex[r[e+10]]+byteToHex[r[e+11]]+byteToHex[r[e+12]]+byteToHex[r[e+13]]+byteToHex[r[e+14]]+byteToHex[r[e+15]]).toLowerCase();if(!validate(t))throw TypeError("Stringified UUID is invalid");return t}var _nodeId,_clockseq,_lastMSecs=0,_lastNSecs=0;function v1(r,e,t){var n=e&&t||0,o=e||new Array(16);r=r||{};var s=r.node||_nodeId,a=r.clockseq!==void 0?r.clockseq:_clockseq;if(s==null||a==null){var c=r.random||(r.rng||rng)();s==null&&(s=_nodeId=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),a==null&&(a=_clockseq=(c[6]<<8|c[7])&16383)}var d=r.msecs!==void 0?r.msecs:Date.now(),u=r.nsecs!==void 0?r.nsecs:_lastNSecs+1,y=d-_lastMSecs+(u-_lastNSecs)/1e4;if(y<0&&r.clockseq===void 0&&(a=a+1&16383),(y<0||d>_lastMSecs)&&r.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=d,_lastNSecs=u,_clockseq=a,d+=122192928e5;var v=((d&268435455)*1e4+u)%4294967296;o[n++]=v>>>24&255,o[n++]=v>>>16&255,o[n++]=v>>>8&255,o[n++]=v&255;var I=d/4294967296*1e4&268435455;o[n++]=I>>>8&255,o[n++]=I&255,o[n++]=I>>>24&15|16,o[n++]=I>>>16&255,o[n++]=a>>>8|128,o[n++]=a&255;for(var S=0;S<6;++S)o[n+S]=s[S];return e||stringify(o)}function parse(r){if(!validate(r))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function stringToBytes(r){r=unescape(encodeURIComponent(r));for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}var DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35(r,e,t){function n(o,s,a,c){if(typeof o=="string"&&(o=stringToBytes(o)),typeof s=="string"&&(s=parse(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var d=new Uint8Array(16+o.length);if(d.set(s),d.set(o,s.length),d=t(d),d[6]=d[6]&15|e,d[8]=d[8]&63|128,a){c=c||0;for(var u=0;u<16;++u)a[c+u]=d[u];return a}return stringify(d)}try{n.name=r}catch{}return n.DNS=DNS,n.URL=URL,n}function md5(r){if(typeof r=="string"){var e=unescape(encodeURIComponent(r));r=new Uint8Array(e.length);for(var t=0;t<e.length;++t)r[t]=e.charCodeAt(t)}return md5ToHexEncodedArray(wordsToMd5(bytesToWords(r),r.length*8))}function md5ToHexEncodedArray(r){for(var e=[],t=r.length*32,n="0123456789abcdef",o=0;o<t;o+=8){var s=r[o>>5]>>>o%32&255,a=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);e.push(a)}return e}function getOutputLength(r){return(r+64>>>9<<4)+14+1}function wordsToMd5(r,e){r[e>>5]|=128<<e%32,r[getOutputLength(e)-1]=e;for(var t=1732584193,n=-271733879,o=-1732584194,s=271733878,a=0;a<r.length;a+=16){var c=t,d=n,u=o,y=s;t=md5ff(t,n,o,s,r[a],7,-680876936),s=md5ff(s,t,n,o,r[a+1],12,-389564586),o=md5ff(o,s,t,n,r[a+2],17,606105819),n=md5ff(n,o,s,t,r[a+3],22,-1044525330),t=md5ff(t,n,o,s,r[a+4],7,-176418897),s=md5ff(s,t,n,o,r[a+5],12,1200080426),o=md5ff(o,s,t,n,r[a+6],17,-1473231341),n=md5ff(n,o,s,t,r[a+7],22,-45705983),t=md5ff(t,n,o,s,r[a+8],7,1770035416),s=md5ff(s,t,n,o,r[a+9],12,-1958414417),o=md5ff(o,s,t,n,r[a+10],17,-42063),n=md5ff(n,o,s,t,r[a+11],22,-1990404162),t=md5ff(t,n,o,s,r[a+12],7,1804603682),s=md5ff(s,t,n,o,r[a+13],12,-40341101),o=md5ff(o,s,t,n,r[a+14],17,-1502002290),n=md5ff(n,o,s,t,r[a+15],22,1236535329),t=md5gg(t,n,o,s,r[a+1],5,-165796510),s=md5gg(s,t,n,o,r[a+6],9,-1069501632),o=md5gg(o,s,t,n,r[a+11],14,643717713),n=md5gg(n,o,s,t,r[a],20,-373897302),t=md5gg(t,n,o,s,r[a+5],5,-701558691),s=md5gg(s,t,n,o,r[a+10],9,38016083),o=md5gg(o,s,t,n,r[a+15],14,-660478335),n=md5gg(n,o,s,t,r[a+4],20,-405537848),t=md5gg(t,n,o,s,r[a+9],5,568446438),s=md5gg(s,t,n,o,r[a+14],9,-1019803690),o=md5gg(o,s,t,n,r[a+3],14,-187363961),n=md5gg(n,o,s,t,r[a+8],20,1163531501),t=md5gg(t,n,o,s,r[a+13],5,-1444681467),s=md5gg(s,t,n,o,r[a+2],9,-51403784),o=md5gg(o,s,t,n,r[a+7],14,1735328473),n=md5gg(n,o,s,t,r[a+12],20,-1926607734),t=md5hh(t,n,o,s,r[a+5],4,-378558),s=md5hh(s,t,n,o,r[a+8],11,-2022574463),o=md5hh(o,s,t,n,r[a+11],16,1839030562),n=md5hh(n,o,s,t,r[a+14],23,-35309556),t=md5hh(t,n,o,s,r[a+1],4,-1530992060),s=md5hh(s,t,n,o,r[a+4],11,1272893353),o=md5hh(o,s,t,n,r[a+7],16,-155497632),n=md5hh(n,o,s,t,r[a+10],23,-1094730640),t=md5hh(t,n,o,s,r[a+13],4,681279174),s=md5hh(s,t,n,o,r[a],11,-358537222),o=md5hh(o,s,t,n,r[a+3],16,-722521979),n=md5hh(n,o,s,t,r[a+6],23,76029189),t=md5hh(t,n,o,s,r[a+9],4,-640364487),s=md5hh(s,t,n,o,r[a+12],11,-421815835),o=md5hh(o,s,t,n,r[a+15],16,530742520),n=md5hh(n,o,s,t,r[a+2],23,-995338651),t=md5ii(t,n,o,s,r[a],6,-198630844),s=md5ii(s,t,n,o,r[a+7],10,1126891415),o=md5ii(o,s,t,n,r[a+14],15,-1416354905),n=md5ii(n,o,s,t,r[a+5],21,-57434055),t=md5ii(t,n,o,s,r[a+12],6,1700485571),s=md5ii(s,t,n,o,r[a+3],10,-1894986606),o=md5ii(o,s,t,n,r[a+10],15,-1051523),n=md5ii(n,o,s,t,r[a+1],21,-2054922799),t=md5ii(t,n,o,s,r[a+8],6,1873313359),s=md5ii(s,t,n,o,r[a+15],10,-30611744),o=md5ii(o,s,t,n,r[a+6],15,-1560198380),n=md5ii(n,o,s,t,r[a+13],21,1309151649),t=md5ii(t,n,o,s,r[a+4],6,-145523070),s=md5ii(s,t,n,o,r[a+11],10,-1120210379),o=md5ii(o,s,t,n,r[a+2],15,718787259),n=md5ii(n,o,s,t,r[a+9],21,-343485551),t=safeAdd(t,c),n=safeAdd(n,d),o=safeAdd(o,u),s=safeAdd(s,y)}return[t,n,o,s]}function bytesToWords(r){if(r.length===0)return[];for(var e=r.length*8,t=new Uint32Array(getOutputLength(e)),n=0;n<e;n+=8)t[n>>5]|=(r[n/8]&255)<<n%32;return t}function safeAdd(r,e){var t=(r&65535)+(e&65535),n=(r>>16)+(e>>16)+(t>>16);return n<<16|t&65535}function bitRotateLeft(r,e){return r<<e|r>>>32-e}function md5cmn(r,e,t,n,o,s){return safeAdd(bitRotateLeft(safeAdd(safeAdd(e,r),safeAdd(n,s)),o),t)}function md5ff(r,e,t,n,o,s,a){return md5cmn(e&t|~e&n,r,e,o,s,a)}function md5gg(r,e,t,n,o,s,a){return md5cmn(e&n|t&~n,r,e,o,s,a)}function md5hh(r,e,t,n,o,s,a){return md5cmn(e^t^n,r,e,o,s,a)}function md5ii(r,e,t,n,o,s,a){return md5cmn(t^(e|~n),r,e,o,s,a)}var v3=v35("v3",48,md5);function v4(r,e,t){r=r||{};var n=r.random||(r.rng||rng)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var o=0;o<16;++o)e[t+o]=n[o];return e}return stringify(n)}function f(r,e,t,n){switch(r){case 0:return e&t^~e&n;case 1:return e^t^n;case 2:return e&t^e&n^t&n;case 3:return e^t^n}}function ROTL(r,e){return r<<e|r>>>32-e}function sha1(r){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var o=0;o<n.length;++o)r.push(n.charCodeAt(o))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var s=r.length/4+2,a=Math.ceil(s/16),c=new Array(a),d=0;d<a;++d){for(var u=new Uint32Array(16),y=0;y<16;++y)u[y]=r[d*64+y*4]<<24|r[d*64+y*4+1]<<16|r[d*64+y*4+2]<<8|r[d*64+y*4+3];c[d]=u}c[a-1][14]=(r.length-1)*8/Math.pow(2,32),c[a-1][14]=Math.floor(c[a-1][14]),c[a-1][15]=(r.length-1)*8&4294967295;for(var v=0;v<a;++v){for(var I=new Uint32Array(80),S=0;S<16;++S)I[S]=c[v][S];for(var P=16;P<80;++P)I[P]=ROTL(I[P-3]^I[P-8]^I[P-14]^I[P-16],1);for(var x=t[0],A=t[1],O=t[2],z=t[3],M=t[4],H=0;H<80;++H){var q=Math.floor(H/20),Y=ROTL(x,5)+f(q,A,O,z)+M+e[q]+I[H]>>>0;M=z,z=O,O=ROTL(A,30)>>>0,A=x,x=Y}t[0]=t[0]+x>>>0,t[1]=t[1]+A>>>0,t[2]=t[2]+O>>>0,t[3]=t[3]+z>>>0,t[4]=t[4]+M>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var v5=v35("v5",80,sha1);const nil="00000000-0000-0000-0000-000000000000";function version(r){if(!validate(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const esmBrowser=Object.freeze(Object.defineProperty({__proto__:null,NIL:nil,parse,stringify,v1,v3,v4,v5,validate,version},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(esmBrowser),uuid$1=require$$0$1.v4,generateRequest$1=function(r,e,t,n){if(typeof r!="string")throw new TypeError(r+" must be a string");n=n||{};const o=typeof n.version=="number"?n.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const s={method:r};if(o===2&&(s.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");s.params=e}if(typeof t>"u"){const a=typeof n.generator=="function"?n.generator:function(){return uuid$1()};s.id=a(s,n)}else o===2&&t===null?n.notificationIdNull&&(s.id=null):s.id=t;return s};var generateRequest_1=generateRequest$1;const uuid=require$$0$1.v4,generateRequest=generateRequest_1,ClientBrowser=function(r,e){if(!(this instanceof ClientBrowser))return new ClientBrowser(r,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return uuid()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=r};var browser=ClientBrowser;ClientBrowser.prototype.request=function(r,e,t,n){const o=this;let s=null;const a=Array.isArray(r)&&typeof e=="function";if(this.options.version===1&&a)throw new TypeError("JSON-RPC 1.0 does not support batching");if(a||!a&&r&&typeof r=="object"&&typeof e=="function")n=e,s=r;else{typeof t=="function"&&(n=t,t=void 0);const u=typeof n=="function";try{s=generateRequest(r,e,t,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(y){if(u)return n(y);throw y}if(!u)return s}let d;try{d=JSON.stringify(s,this.options.replacer)}catch(u){return n(u)}return this.callServer(d,function(u,y){o._parseResponse(u,y,n)}),s};ClientBrowser.prototype._parseResponse=function(r,e,t){if(r){t(r);return}if(!e)return t();let n;try{n=JSON.parse(e,this.options.reviver)}catch(o){return t(o)}if(t.length===3)if(Array.isArray(n)){const o=function(a){return typeof a.error<"u"},s=function(a){return!o(a)};return t(null,n.filter(o),n.filter(s))}else return t(null,n.error,n.result);t(null,n)};const RpcClient=getDefaultExportFromCjs$1(browser);var eventemitter3$1={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function o(d,u,y){this.fn=d,this.context=u,this.once=y||!1}function s(d,u,y,v,I){if(typeof y!="function")throw new TypeError("The listener must be a function");var S=new o(y,v||d,I),P=t?t+u:u;return d._events[P]?d._events[P].fn?d._events[P]=[d._events[P],S]:d._events[P].push(S):(d._events[P]=S,d._eventsCount++),d}function a(d,u){--d._eventsCount===0?d._events=new n:delete d._events[u]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var u=[],y,v;if(this._eventsCount===0)return u;for(v in y=this._events)e.call(y,v)&&u.push(t?v.slice(1):v);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(y)):u},c.prototype.listeners=function(u){var y=t?t+u:u,v=this._events[y];if(!v)return[];if(v.fn)return[v.fn];for(var I=0,S=v.length,P=new Array(S);I<S;I++)P[I]=v[I].fn;return P},c.prototype.listenerCount=function(u){var y=t?t+u:u,v=this._events[y];return v?v.fn?1:v.length:0},c.prototype.emit=function(u,y,v,I,S,P){var x=t?t+u:u;if(!this._events[x])return!1;var A=this._events[x],O=arguments.length,z,M;if(A.fn){switch(A.once&&this.removeListener(u,A.fn,void 0,!0),O){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,y),!0;case 3:return A.fn.call(A.context,y,v),!0;case 4:return A.fn.call(A.context,y,v,I),!0;case 5:return A.fn.call(A.context,y,v,I,S),!0;case 6:return A.fn.call(A.context,y,v,I,S,P),!0}for(M=1,z=new Array(O-1);M<O;M++)z[M-1]=arguments[M];A.fn.apply(A.context,z)}else{var H=A.length,q;for(M=0;M<H;M++)switch(A[M].once&&this.removeListener(u,A[M].fn,void 0,!0),O){case 1:A[M].fn.call(A[M].context);break;case 2:A[M].fn.call(A[M].context,y);break;case 3:A[M].fn.call(A[M].context,y,v);break;case 4:A[M].fn.call(A[M].context,y,v,I);break;default:if(!z)for(q=1,z=new Array(O-1);q<O;q++)z[q-1]=arguments[q];A[M].fn.apply(A[M].context,z)}}return!0},c.prototype.on=function(u,y,v){return s(this,u,y,v,!1)},c.prototype.once=function(u,y,v){return s(this,u,y,v,!0)},c.prototype.removeListener=function(u,y,v,I){var S=t?t+u:u;if(!this._events[S])return this;if(!y)return a(this,S),this;var P=this._events[S];if(P.fn)P.fn===y&&(!I||P.once)&&(!v||P.context===v)&&a(this,S);else{for(var x=0,A=[],O=P.length;x<O;x++)(P[x].fn!==y||I&&!P[x].once||v&&P[x].context!==v)&&A.push(P[x]);A.length?this._events[S]=A.length===1?A[0]:A:a(this,S)}return this},c.prototype.removeAllListeners=function(u){var y;return u?(y=t?t+u:u,this._events[y]&&a(this,y)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,r.exports=c})(eventemitter3$1);var eventemitter3Exports$1=eventemitter3$1.exports;const EventEmitter$1=getDefaultExportFromCjs$1(eventemitter3Exports$1);var WebSocketBrowserImpl=class extends EventEmitter$1{constructor(e,t,n){super();it(this,"socket");this.socket=new window.WebSocket(e,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=o=>this.emit("message",o.data),this.socket.onerror=o=>this.emit("error",o),this.socket.onclose=o=>{this.emit("close",o.code,o.reason)}}send(e,t,n){const o=n||t;try{this.socket.send(e),o()}catch(s){o(s)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,n){this.socket.addEventListener(e,t,n)}};function WebSocket(r,e){return new WebSocketBrowserImpl(r,e)}var DefaultDataPack=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},CommonClient=class extends EventEmitter$1{constructor(e,t="ws://localhost:8080",{autoconnect:n=!0,reconnect:o=!0,reconnect_interval:s=1e3,max_reconnects:a=5,...c}={},d,u){super();it(this,"address");it(this,"rpc_id");it(this,"queue");it(this,"options");it(this,"autoconnect");it(this,"ready");it(this,"reconnect");it(this,"reconnect_timer_id");it(this,"reconnect_interval");it(this,"max_reconnects");it(this,"rest_options");it(this,"current_reconnects");it(this,"generate_request_id");it(this,"socket");it(this,"webSocketFactory");it(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=n,this.ready=!1,this.reconnect=o,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=a,this.rest_options=c,this.current_reconnects=0,this.generate_request_id=d||(()=>++this.rpc_id),u?this.dataPack=u:this.dataPack=new DefaultDataPack,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,n,o){return!o&&typeof n=="object"&&(o=n,n=null),new Promise((s,a)=>{if(!this.ready)return a(new Error("socket not ready"));const c=this.generate_request_id(e,t),d={jsonrpc:"2.0",method:e,params:t||void 0,id:c};this.socket.send(this.dataPack.encode(d),o,u=>{if(u)return a(u);this.queue[c]={promise:[s,a]},n&&(this.queue[c].timeout=setTimeout(()=>{delete this.queue[c],a(new Error("reply timeout"))},n))})})}async login(e){const t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise((n,o)=>{if(!this.ready)return o(new Error("socket not ready"));const s={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(s),a=>{if(a)return o(a);n()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.on",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.off",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=buffer.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const o=[n.notification];if(n.params.constructor===Object)o.push(n.params);else for(let s=0;s<n.params.length;s++)o.push(n.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,o)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n?.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:o})=>{this.ready&&setTimeout(()=>this.emit("close",n,o),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,t),this.reconnect_interval)))})}};const U32_MASK64=BigInt(2**32-1),_32n=BigInt(32);function fromBig(r,e=!1){return e?{h:Number(r&U32_MASK64),l:Number(r>>_32n&U32_MASK64)}:{h:Number(r>>_32n&U32_MASK64)|0,l:Number(r&U32_MASK64)|0}}function split(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let o=0;o<r.length;o++){const{h:s,l:a}=fromBig(r[o],e);[t[o],n[o]]=[s,a]}return[t,n]}const rotlSH=(r,e,t)=>r<<t|e>>>32-t,rotlSL=(r,e,t)=>e<<t|r>>>32-t,rotlBH=(r,e,t)=>e<<t-32|r>>>64-t,rotlBL=(r,e,t)=>r<<t-32|e>>>64-t,SHA3_PI=[],SHA3_ROTL=[],_SHA3_IOTA=[],_0n$1=BigInt(0),_1n$2=BigInt(1),_2n$1=BigInt(2),_7n=BigInt(7),_256n=BigInt(256),_0x71n=BigInt(113);for(let r=0,e=_1n$2,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],SHA3_PI.push(2*(5*n+t)),SHA3_ROTL.push((r+1)*(r+2)/2%64);let o=_0n$1;for(let s=0;s<7;s++)e=(e<<_1n$2^(e>>_7n)*_0x71n)%_256n,e&_2n$1&&(o^=_1n$2<<(_1n$2<<BigInt(s))-_1n$2);_SHA3_IOTA.push(o)}const[SHA3_IOTA_H,SHA3_IOTA_L]=split(_SHA3_IOTA,!0),rotlH=(r,e,t)=>t>32?rotlBH(r,e,t):rotlSH(r,e,t),rotlL=(r,e,t)=>t>32?rotlBL(r,e,t):rotlSL(r,e,t);function keccakP(r,e=24){const t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let a=0;a<10;a++)t[a]=r[a]^r[a+10]^r[a+20]^r[a+30]^r[a+40];for(let a=0;a<10;a+=2){const c=(a+8)%10,d=(a+2)%10,u=t[d],y=t[d+1],v=rotlH(u,y,1)^t[c],I=rotlL(u,y,1)^t[c+1];for(let S=0;S<50;S+=10)r[a+S]^=v,r[a+S+1]^=I}let o=r[2],s=r[3];for(let a=0;a<24;a++){const c=SHA3_ROTL[a],d=rotlH(o,s,c),u=rotlL(o,s,c),y=SHA3_PI[a];o=r[y],s=r[y+1],r[y]=d,r[y+1]=u}for(let a=0;a<50;a+=10){for(let c=0;c<10;c++)t[c]=r[a+c];for(let c=0;c<10;c++)r[a+c]^=~t[(c+2)%10]&t[(c+4)%10]}r[0]^=SHA3_IOTA_H[n],r[1]^=SHA3_IOTA_L[n]}t.fill(0)}class Keccak extends Hash{constructor(e,t,n,o=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=o,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,anumber(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=u32$1(this.state)}keccak(){isLE||byteSwap32(this.state32),keccakP(this.state32,this.rounds),isLE||byteSwap32(this.state32),this.posOut=0,this.pos=0}update(e){aexists(this);const{blockLen:t,state:n}=this;e=toBytes(e);const o=e.length;for(let s=0;s<o;){const a=Math.min(t-this.pos,o-s);for(let c=0;c<a;c++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:o}=this;e[n]^=t,t&128&&n===o-1&&this.keccak(),e[o-1]^=128,this.keccak()}writeInto(e){aexists(this,!1),abytes(e),this.finish();const t=this.state,{blockLen:n}=this;for(let o=0,s=e.length;o<s;){this.posOut>=n&&this.keccak();const a=Math.min(n-this.posOut,s-o);e.set(t.subarray(this.posOut,this.posOut+a),o),this.posOut+=a,o+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return anumber(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(aoutput(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:o,rounds:s,enableXOF:a}=this;return e||(e=new Keccak(t,n,o,a,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=o,e.enableXOF=a,e.destroyed=this.destroyed,e}}const gen=(r,e,t)=>wrapConstructor(()=>new Keccak(e,r,t)),keccak_256=gen(1,136,256/8),SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W=new Uint32Array(64);class SHA256 extends HashMD$1{constructor(){super(64,32,8,!1),this.A=SHA256_IV[0]|0,this.B=SHA256_IV[1]|0,this.C=SHA256_IV[2]|0,this.D=SHA256_IV[3]|0,this.E=SHA256_IV[4]|0,this.F=SHA256_IV[5]|0,this.G=SHA256_IV[6]|0,this.H=SHA256_IV[7]|0}get(){const{A:e,B:t,C:n,D:o,E:s,F:a,G:c,H:d}=this;return[e,t,n,o,s,a,c,d]}set(e,t,n,o,s,a,c,d){this.A=e|0,this.B=t|0,this.C=n|0,this.D=o|0,this.E=s|0,this.F=a|0,this.G=c|0,this.H=d|0}process(e,t){for(let v=0;v<16;v++,t+=4)SHA256_W[v]=e.getUint32(t,!1);for(let v=16;v<64;v++){const I=SHA256_W[v-15],S=SHA256_W[v-2],P=rotr$1(I,7)^rotr$1(I,18)^I>>>3,x=rotr$1(S,17)^rotr$1(S,19)^S>>>10;SHA256_W[v]=x+SHA256_W[v-7]+P+SHA256_W[v-16]|0}let{A:n,B:o,C:s,D:a,E:c,F:d,G:u,H:y}=this;for(let v=0;v<64;v++){const I=rotr$1(c,6)^rotr$1(c,11)^rotr$1(c,25),S=y+I+Chi$1(c,d,u)+SHA256_K[v]+SHA256_W[v]|0,x=(rotr$1(n,2)^rotr$1(n,13)^rotr$1(n,22))+Maj$1(n,o,s)|0;y=u,u=d,d=c,c=a+S|0,a=s,s=o,o=n,n=S+x|0}n=n+this.A|0,o=o+this.B|0,s=s+this.C|0,a=a+this.D|0,c=c+this.E|0,d=d+this.F|0,u=u+this.G|0,y=y+this.H|0,this.set(n,o,s,a,c,d,u,y)}roundClean(){SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const sha256$2=wrapConstructor$1(()=>new SHA256);class HMAC extends Hash$1{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,ahash(e);const n=toBytes$1(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,s=new Uint8Array(o);s.set(n.length>o?e.create().update(n).digest():n);for(let a=0;a<s.length;a++)s[a]^=54;this.iHash.update(s),this.oHash=e.create();for(let a=0;a<s.length;a++)s[a]^=106;this.oHash.update(s),s.fill(0)}update(e){return aexists$1(this),this.iHash.update(e),this}digestInto(e){aexists$1(this),abytes$2(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:o,destroyed:s,blockLen:a,outputLen:c}=this;return e=e,e.finished=o,e.destroyed=s,e.blockLen=a,e.outputLen=c,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hmac=(r,e,t)=>new HMAC(r,e).update(t).digest();hmac.create=(r,e)=>new HMAC(r,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validateSigVerOpts(r){r.lowS!==void 0&&abool("lowS",r.lowS),r.prehash!==void 0&&abool("prehash",r.prehash)}function validatePointOpts(r){const e=validateBasic(r);validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:o}=e;if(t){if(!n.eql(o,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:b2n,hexToBytes:h2b}=ut,DER={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(r,e)=>{const{Err:t}=DER;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const n=e.length/2,o=numberToHexUnpadded(n);if(o.length/2&128)throw new t("tlv.encode: long form length too big");const s=n>127?numberToHexUnpadded(o.length/2|128):"";return numberToHexUnpadded(r)+s+o+e},decode(r,e){const{Err:t}=DER;let n=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[n++]!==r)throw new t("tlv.decode: wrong tlv");const o=e[n++],s=!!(o&128);let a=0;if(!s)a=o;else{const d=o&127;if(!d)throw new t("tlv.decode(long): indefinite length not supported");if(d>4)throw new t("tlv.decode(long): byte length is too big");const u=e.subarray(n,n+d);if(u.length!==d)throw new t("tlv.decode: length bytes not complete");if(u[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const y of u)a=a<<8|y;if(n+=d,a<128)throw new t("tlv.decode(long): not minimal encoding")}const c=e.subarray(n,n+a);if(c.length!==a)throw new t("tlv.decode: wrong value length");return{v:c,l:e.subarray(n+a)}}},_int:{encode(r){const{Err:e}=DER;if(r<_0n)throw new e("integer: negative integers are not allowed");let t=numberToHexUnpadded(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){const{Err:e}=DER;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return b2n(r)}},toSig(r){const{Err:e,_int:t,_tlv:n}=DER,o=typeof r=="string"?h2b(r):r;abytes$1(o);const{v:s,l:a}=n.decode(48,o);if(a.length)throw new e("invalid signature: left bytes after parsing");const{v:c,l:d}=n.decode(2,s),{v:u,l:y}=n.decode(2,d);if(y.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(c),s:t.decode(u)}},hexFromSig(r){const{_tlv:e,_int:t}=DER,n=e.encode(2,t.encode(r.r)),o=e.encode(2,t.encode(r.s)),s=n+o;return e.encode(48,s)}},_0n=BigInt(0),_1n$1=BigInt(1);BigInt(2);const _3n=BigInt(3);BigInt(4);function weierstrassPoints(r){const e=validatePointOpts(r),{Fp:t}=e,n=Field(e.n,e.nBitLength),o=e.toBytes||((x,A,O)=>{const z=A.toAffine();return concatBytes(Uint8Array.from([4]),t.toBytes(z.x),t.toBytes(z.y))}),s=e.fromBytes||(x=>{const A=x.subarray(1),O=t.fromBytes(A.subarray(0,t.BYTES)),z=t.fromBytes(A.subarray(t.BYTES,2*t.BYTES));return{x:O,y:z}});function a(x){const{a:A,b:O}=e,z=t.sqr(x),M=t.mul(z,x);return t.add(t.add(M,t.mul(x,A)),O)}if(!t.eql(t.sqr(e.Gy),a(e.Gx)))throw new Error("bad generator point: equation left != right");function c(x){return inRange$1(x,_1n$1,e.n)}function d(x){const{allowedPrivateKeyLengths:A,nByteLength:O,wrapPrivateKey:z,n:M}=e;if(A&&typeof x!="bigint"){if(isBytes$1(x)&&(x=bytesToHex(x)),typeof x!="string"||!A.includes(x.length))throw new Error("invalid private key");x=x.padStart(O*2,"0")}let H;try{H=typeof x=="bigint"?x:bytesToNumberBE(ensureBytes("private key",x,O))}catch{throw new Error("invalid private key, expected hex or "+O+" bytes, got "+typeof x)}return z&&(H=mod(H,M)),aInRange("private key",H,_1n$1,M),H}function u(x){if(!(x instanceof I))throw new Error("ProjectivePoint expected")}const y=memoized((x,A)=>{const{px:O,py:z,pz:M}=x;if(t.eql(M,t.ONE))return{x:O,y:z};const H=x.is0();A==null&&(A=H?t.ONE:t.inv(M));const q=t.mul(O,A),Y=t.mul(z,A),B=t.mul(M,A);if(H)return{x:t.ZERO,y:t.ZERO};if(!t.eql(B,t.ONE))throw new Error("invZ was invalid");return{x:q,y:Y}}),v=memoized(x=>{if(x.is0()){if(e.allowInfinityPoint&&!t.is0(x.py))return;throw new Error("bad point: ZERO")}const{x:A,y:O}=x.toAffine();if(!t.isValid(A)||!t.isValid(O))throw new Error("bad point: x or y not FE");const z=t.sqr(O),M=a(A);if(!t.eql(z,M))throw new Error("bad point: equation left != right");if(!x.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class I{constructor(A,O,z){if(this.px=A,this.py=O,this.pz=z,A==null||!t.isValid(A))throw new Error("x required");if(O==null||!t.isValid(O))throw new Error("y required");if(z==null||!t.isValid(z))throw new Error("z required");Object.freeze(this)}static fromAffine(A){const{x:O,y:z}=A||{};if(!A||!t.isValid(O)||!t.isValid(z))throw new Error("invalid affine point");if(A instanceof I)throw new Error("projective point not allowed");const M=H=>t.eql(H,t.ZERO);return M(O)&&M(z)?I.ZERO:new I(O,z,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(A){const O=t.invertBatch(A.map(z=>z.pz));return A.map((z,M)=>z.toAffine(O[M])).map(I.fromAffine)}static fromHex(A){const O=I.fromAffine(s(ensureBytes("pointHex",A)));return O.assertValidity(),O}static fromPrivateKey(A){return I.BASE.multiply(d(A))}static msm(A,O){return pippenger(I,n,A,O)}_setWindowSize(A){P.setWindowSize(this,A)}assertValidity(){v(this)}hasEvenY(){const{y:A}=this.toAffine();if(t.isOdd)return!t.isOdd(A);throw new Error("Field doesn't support isOdd")}equals(A){u(A);const{px:O,py:z,pz:M}=this,{px:H,py:q,pz:Y}=A,B=t.eql(t.mul(O,Y),t.mul(H,M)),N=t.eql(t.mul(z,Y),t.mul(q,M));return B&&N}negate(){return new I(this.px,t.neg(this.py),this.pz)}double(){const{a:A,b:O}=e,z=t.mul(O,_3n),{px:M,py:H,pz:q}=this;let Y=t.ZERO,B=t.ZERO,N=t.ZERO,V=t.mul(M,M),Q=t.mul(H,H),Z=t.mul(q,q),J=t.mul(M,H);return J=t.add(J,J),N=t.mul(M,q),N=t.add(N,N),Y=t.mul(A,N),B=t.mul(z,Z),B=t.add(Y,B),Y=t.sub(Q,B),B=t.add(Q,B),B=t.mul(Y,B),Y=t.mul(J,Y),N=t.mul(z,N),Z=t.mul(A,Z),J=t.sub(V,Z),J=t.mul(A,J),J=t.add(J,N),N=t.add(V,V),V=t.add(N,V),V=t.add(V,Z),V=t.mul(V,J),B=t.add(B,V),Z=t.mul(H,q),Z=t.add(Z,Z),V=t.mul(Z,J),Y=t.sub(Y,V),N=t.mul(Z,Q),N=t.add(N,N),N=t.add(N,N),new I(Y,B,N)}add(A){u(A);const{px:O,py:z,pz:M}=this,{px:H,py:q,pz:Y}=A;let B=t.ZERO,N=t.ZERO,V=t.ZERO;const Q=e.a,Z=t.mul(e.b,_3n);let J=t.mul(O,H),L=t.mul(z,q),l=t.mul(M,Y),b=t.add(O,z),E=t.add(H,q);b=t.mul(b,E),E=t.add(J,L),b=t.sub(b,E),E=t.add(O,M);let T=t.add(H,Y);return E=t.mul(E,T),T=t.add(J,l),E=t.sub(E,T),T=t.add(z,M),B=t.add(q,Y),T=t.mul(T,B),B=t.add(L,l),T=t.sub(T,B),V=t.mul(Q,E),B=t.mul(Z,l),V=t.add(B,V),B=t.sub(L,V),V=t.add(L,V),N=t.mul(B,V),L=t.add(J,J),L=t.add(L,J),l=t.mul(Q,l),E=t.mul(Z,E),L=t.add(L,l),l=t.sub(J,l),l=t.mul(Q,l),E=t.add(E,l),J=t.mul(L,E),N=t.add(N,J),J=t.mul(T,E),B=t.mul(b,B),B=t.sub(B,J),J=t.mul(b,L),V=t.mul(T,V),V=t.add(V,J),new I(B,N,V)}subtract(A){return this.add(A.negate())}is0(){return this.equals(I.ZERO)}wNAF(A){return P.wNAFCached(this,A,I.normalizeZ)}multiplyUnsafe(A){const{endo:O,n:z}=e;aInRange("scalar",A,_0n,z);const M=I.ZERO;if(A===_0n)return M;if(this.is0()||A===_1n$1)return this;if(!O||P.hasPrecomputes(this))return P.wNAFCachedUnsafe(this,A,I.normalizeZ);let{k1neg:H,k1:q,k2neg:Y,k2:B}=O.splitScalar(A),N=M,V=M,Q=this;for(;q>_0n||B>_0n;)q&_1n$1&&(N=N.add(Q)),B&_1n$1&&(V=V.add(Q)),Q=Q.double(),q>>=_1n$1,B>>=_1n$1;return H&&(N=N.negate()),Y&&(V=V.negate()),V=new I(t.mul(V.px,O.beta),V.py,V.pz),N.add(V)}multiply(A){const{endo:O,n:z}=e;aInRange("scalar",A,_1n$1,z);let M,H;if(O){const{k1neg:q,k1:Y,k2neg:B,k2:N}=O.splitScalar(A);let{p:V,f:Q}=this.wNAF(Y),{p:Z,f:J}=this.wNAF(N);V=P.constTimeNegate(q,V),Z=P.constTimeNegate(B,Z),Z=new I(t.mul(Z.px,O.beta),Z.py,Z.pz),M=V.add(Z),H=Q.add(J)}else{const{p:q,f:Y}=this.wNAF(A);M=q,H=Y}return I.normalizeZ([M,H])[0]}multiplyAndAddUnsafe(A,O,z){const M=I.BASE,H=(Y,B)=>B===_0n||B===_1n$1||!Y.equals(M)?Y.multiplyUnsafe(B):Y.multiply(B),q=H(this,O).add(H(A,z));return q.is0()?void 0:q}toAffine(A){return y(this,A)}isTorsionFree(){const{h:A,isTorsionFree:O}=e;if(A===_1n$1)return!0;if(O)return O(I,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:A,clearCofactor:O}=e;return A===_1n$1?this:O?O(I,this):this.multiplyUnsafe(e.h)}toRawBytes(A=!0){return abool("isCompressed",A),this.assertValidity(),o(I,this,A)}toHex(A=!0){return abool("isCompressed",A),bytesToHex(this.toRawBytes(A))}}I.BASE=new I(e.Gx,e.Gy,t.ONE),I.ZERO=new I(t.ZERO,t.ONE,t.ZERO);const S=e.nBitLength,P=wNAF(I,e.endo?Math.ceil(S/2):S);return{CURVE:e,ProjectivePoint:I,normPrivateKeyToScalar:d,weierstrassEquation:a,isWithinCurveOrder:c}}function validateOpts(r){const e=validateBasic(r);return validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function weierstrass(r){const e=validateOpts(r),{Fp:t,n}=e,o=t.BYTES+1,s=2*t.BYTES+1;function a(l){return mod(l,n)}function c(l){return invert(l,n)}const{ProjectivePoint:d,normPrivateKeyToScalar:u,weierstrassEquation:y,isWithinCurveOrder:v}=weierstrassPoints({...e,toBytes(l,b,E){const T=b.toAffine(),C=t.toBytes(T.x),W=concatBytes;return abool("isCompressed",E),E?W(Uint8Array.from([b.hasEvenY()?2:3]),C):W(Uint8Array.from([4]),C,t.toBytes(T.y))},fromBytes(l){const b=l.length,E=l[0],T=l.subarray(1);if(b===o&&(E===2||E===3)){const C=bytesToNumberBE(T);if(!inRange$1(C,_1n$1,t.ORDER))throw new Error("Point is not on curve");const W=y(C);let G;try{G=t.sqrt(W)}catch(F){const se=F instanceof Error?": "+F.message:"";throw new Error("Point is not on curve"+se)}const U=(G&_1n$1)===_1n$1;return(E&1)===1!==U&&(G=t.neg(G)),{x:C,y:G}}else if(b===s&&E===4){const C=t.fromBytes(T.subarray(0,t.BYTES)),W=t.fromBytes(T.subarray(t.BYTES,2*t.BYTES));return{x:C,y:W}}else{const C=o,W=s;throw new Error("invalid Point, expected length of "+C+", or uncompressed "+W+", got "+b)}}}),I=l=>bytesToHex(numberToBytesBE(l,e.nByteLength));function S(l){const b=n>>_1n$1;return l>b}function P(l){return S(l)?a(-l):l}const x=(l,b,E)=>bytesToNumberBE(l.slice(b,E));class A{constructor(b,E,T){this.r=b,this.s=E,this.recovery=T,this.assertValidity()}static fromCompact(b){const E=e.nByteLength;return b=ensureBytes("compactSignature",b,E*2),new A(x(b,0,E),x(b,E,2*E))}static fromDER(b){const{r:E,s:T}=DER.toSig(ensureBytes("DER",b));return new A(E,T)}assertValidity(){aInRange("r",this.r,_1n$1,n),aInRange("s",this.s,_1n$1,n)}addRecoveryBit(b){return new A(this.r,this.s,b)}recoverPublicKey(b){const{r:E,s:T,recovery:C}=this,W=Y(ensureBytes("msgHash",b));if(C==null||![0,1,2,3].includes(C))throw new Error("recovery id invalid");const G=C===2||C===3?E+e.n:E;if(G>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const U=C&1?"03":"02",m=d.fromHex(U+I(G)),F=c(G),se=a(-W*F),ae=a(T*F),ue=d.BASE.multiplyAndAddUnsafe(m,se,ae);if(!ue)throw new Error("point at infinify");return ue.assertValidity(),ue}hasHighS(){return S(this.s)}normalizeS(){return this.hasHighS()?new A(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes(this.toDERHex())}toDERHex(){return DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes(this.toCompactHex())}toCompactHex(){return I(this.r)+I(this.s)}}const O={isValidPrivateKey(l){try{return u(l),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const l=getMinHashLength(e.n);return mapHashToField(e.randomBytes(l),e.n)},precompute(l=8,b=d.BASE){return b._setWindowSize(l),b.multiply(BigInt(3)),b}};function z(l,b=!0){return d.fromPrivateKey(l).toRawBytes(b)}function M(l){const b=isBytes$1(l),E=typeof l=="string",T=(b||E)&&l.length;return b?T===o||T===s:E?T===2*o||T===2*s:l instanceof d}function H(l,b,E=!0){if(M(l))throw new Error("first arg must be private key");if(!M(b))throw new Error("second arg must be public key");return d.fromHex(b).multiply(u(l)).toRawBytes(E)}const q=e.bits2int||function(l){if(l.length>8192)throw new Error("input is too large");const b=bytesToNumberBE(l),E=l.length*8-e.nBitLength;return E>0?b>>BigInt(E):b},Y=e.bits2int_modN||function(l){return a(q(l))},B=bitMask(e.nBitLength);function N(l){return aInRange("num < 2^"+e.nBitLength,l,_0n,B),numberToBytesBE(l,e.nByteLength)}function V(l,b,E=Q){if(["recovered","canonical"].some(he=>he in E))throw new Error("sign() legacy options not supported");const{hash:T,randomBytes:C}=e;let{lowS:W,prehash:G,extraEntropy:U}=E;W==null&&(W=!0),l=ensureBytes("msgHash",l),validateSigVerOpts(E),G&&(l=ensureBytes("prehashed msgHash",T(l)));const m=Y(l),F=u(b),se=[N(F),N(m)];if(U!=null&&U!==!1){const he=U===!0?C(t.BYTES):U;se.push(ensureBytes("extraEntropy",he))}const ae=concatBytes(...se),ue=m;function me(he){const pe=q(he);if(!v(pe))return;const ke=c(pe),ge=d.BASE.multiply(pe).toAffine(),Se=a(ge.x);if(Se===_0n)return;const Ae=a(ke*a(ue+Se*F));if(Ae===_0n)return;let ve=(ge.x===Se?0:2)|Number(ge.y&_1n$1),Te=Ae;return W&&S(Ae)&&(Te=P(Ae),ve^=1),new A(Se,Te,ve)}return{seed:ae,k2sig:me}}const Q={lowS:e.lowS,prehash:!1},Z={lowS:e.lowS,prehash:!1};function J(l,b,E=Q){const{seed:T,k2sig:C}=V(l,b,E),W=e;return createHmacDrbg(W.hash.outputLen,W.nByteLength,W.hmac)(T,C)}d.BASE._setWindowSize(8);function L(l,b,E,T=Z){const C=l;b=ensureBytes("msgHash",b),E=ensureBytes("publicKey",E);const{lowS:W,prehash:G,format:U}=T;if(validateSigVerOpts(T),"strict"in T)throw new Error("options.strict was renamed to lowS");if(U!==void 0&&U!=="compact"&&U!=="der")throw new Error("format must be compact or der");const m=typeof C=="string"||isBytes$1(C),F=!m&&!U&&typeof C=="object"&&C!==null&&typeof C.r=="bigint"&&typeof C.s=="bigint";if(!m&&!F)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let se,ae;try{if(F&&(se=new A(C.r,C.s)),m){try{U!=="compact"&&(se=A.fromDER(C))}catch(ve){if(!(ve instanceof DER.Err))throw ve}!se&&U!=="der"&&(se=A.fromCompact(C))}ae=d.fromHex(E)}catch{return!1}if(!se||W&&se.hasHighS())return!1;G&&(b=e.hash(b));const{r:ue,s:me}=se,he=Y(b),pe=c(me),ke=a(he*pe),ge=a(ue*pe),Se=d.BASE.multiplyAndAddUnsafe(ae,ke,ge)?.toAffine();return Se?a(Se.x)===ue:!1}return{CURVE:e,getPublicKey:z,getSharedSecret:H,sign:J,verify:L,ProjectivePoint:d,Signature:A,utils:O}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function getHash(r){return{hash:r,hmac:(e,...t)=>hmac(r,e,concatBytes$1(...t)),randomBytes}}function createCurve(r,e){const t=n=>weierstrass({...r,...getHash(n)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const secp256k1P=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),secp256k1N=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_1n=BigInt(1),_2n=BigInt(2),divNearest=(r,e)=>(r+e/_2n)/e;function sqrtMod(r){const e=secp256k1P,t=BigInt(3),n=BigInt(6),o=BigInt(11),s=BigInt(22),a=BigInt(23),c=BigInt(44),d=BigInt(88),u=r*r*r%e,y=u*u*r%e,v=pow2(y,t,e)*y%e,I=pow2(v,t,e)*y%e,S=pow2(I,_2n,e)*u%e,P=pow2(S,o,e)*S%e,x=pow2(P,s,e)*P%e,A=pow2(x,c,e)*x%e,O=pow2(A,d,e)*A%e,z=pow2(O,c,e)*x%e,M=pow2(z,t,e)*y%e,H=pow2(M,a,e)*P%e,q=pow2(H,n,e)*u%e,Y=pow2(q,_2n,e);if(!Fpk1.eql(Fpk1.sqr(Y),r))throw new Error("Cannot find square root");return Y}const Fpk1=Field(secp256k1P,void 0,void 0,{sqrt:sqrtMod}),secp256k1=createCurve({a:BigInt(0),b:BigInt(7),Fp:Fpk1,n:secp256k1N,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const e=secp256k1N,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-_1n*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,a=BigInt("0x100000000000000000000000000000000"),c=divNearest(s*r,e),d=divNearest(-n*r,e);let u=mod(r-c*t-d*o,e),y=mod(-c*n-d*s,e);const v=u>a,I=y>a;if(v&&(u=e-u),I&&(y=e-y),u>a||y>a)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:v,k1:u,k2neg:I,k2:y}}}},sha256$2);BigInt(0);secp256k1.ProjectivePoint;const generatePrivateKey=ed25519.utils.randomPrivateKey,generateKeypair=()=>{const r=ed25519.utils.randomPrivateKey(),e=getPublicKey(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},getPublicKey=ed25519.getPublicKey;function isOnCurve(r){try{return ed25519.ExtendedPoint.fromHex(r),!0}catch{return!1}}const sign=(r,e)=>ed25519.sign(r,e.slice(0,32)),verify=ed25519.verify,toBuffer$1=r=>buffer.Buffer.isBuffer(r)?r:r instanceof Uint8Array?buffer.Buffer.from(r.buffer,r.byteOffset,r.byteLength):buffer.Buffer.from(r);class Struct{constructor(e){Object.assign(this,e)}encode(){return buffer.Buffer.from(serialize_1(SOLANA_SCHEMA,this))}static decode(e){return deserialize_1(SOLANA_SCHEMA,this,e)}static decodeUnchecked(e){return deserializeUnchecked_1(SOLANA_SCHEMA,this,e)}}class Enum extends Struct{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}}const SOLANA_SCHEMA=new Map;var _PublicKey;const MAX_SEED_LENGTH=32,PUBLIC_KEY_LENGTH=32;function isPublicKeyData(r){return r._bn!==void 0}let uniquePublicKeyCounter=1,PublicKey$1=class It extends Struct{constructor(e){if(super({}),this._bn=void 0,isPublicKeyData(e))this._bn=e._bn;else{if(typeof e=="string"){const t=bs58$4.decode(e);if(t.length!=PUBLIC_KEY_LENGTH)throw new Error("Invalid public key input");this._bn=new BN(t)}else this._bn=new BN(e);if(this._bn.byteLength()>PUBLIC_KEY_LENGTH)throw new Error("Invalid public key input")}}static unique(){const e=new It(uniquePublicKeyCounter);return uniquePublicKeyCounter+=1,new It(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return bs58$4.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(buffer.Buffer);if(e.length===PUBLIC_KEY_LENGTH)return e;const t=buffer.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const o=buffer.Buffer.concat([e.toBuffer(),buffer.Buffer.from(t),n.toBuffer()]),s=sha256$3(o);return new It(s)}static createProgramAddressSync(e,t){let n=buffer.Buffer.alloc(0);e.forEach(function(s){if(s.length>MAX_SEED_LENGTH)throw new TypeError("Max seed length exceeded");n=buffer.Buffer.concat([n,toBuffer$1(s)])}),n=buffer.Buffer.concat([n,t.toBuffer(),buffer.Buffer.from("ProgramDerivedAddress")]);const o=sha256$3(n);if(isOnCurve(o))throw new Error("Invalid seeds, address must fall off the curve");return new It(o)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,o;for(;n!=0;){try{const s=e.concat(buffer.Buffer.from([n]));o=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[o,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new It(e);return isOnCurve(t.toBytes())}};_PublicKey=PublicKey$1;PublicKey$1.default=new _PublicKey("11111111111111111111111111111111");SOLANA_SCHEMA.set(PublicKey$1,{kind:"struct",fields:[["_bn","u256"]]});class Account{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=toBuffer$1(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=toBuffer$1(generatePrivateKey()),this._publicKey=toBuffer$1(getPublicKey(this._secretKey))}get publicKey(){return new PublicKey$1(this._publicKey)}get secretKey(){return buffer.Buffer.concat([this._secretKey,this._publicKey],64)}}const BPF_LOADER_DEPRECATED_PROGRAM_ID=new PublicKey$1("BPFLoader1111111111111111111111111111111111"),PACKET_DATA_SIZE=1232,VERSION_PREFIX_MASK=127,SIGNATURE_LENGTH_IN_BYTES=64;class TransactionExpiredBlockheightExceededError extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(TransactionExpiredBlockheightExceededError.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class TransactionExpiredTimeoutError extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(TransactionExpiredTimeoutError.prototype,"name",{value:"TransactionExpiredTimeoutError"});class TransactionExpiredNonceInvalidError extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(TransactionExpiredNonceInvalidError.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class MessageAccountKeys{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,a)=>{n.set(s.toBase58(),a)});const o=s=>{const a=n.get(s.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return e.map(s=>({programIdIndex:o(s.programId),accountKeyIndexes:s.keys.map(a=>o(a.pubkey)),data:s.data}))}}const publicKey=(r="publicKey")=>blob(32,r),signature=(r="signature")=>blob(64,r),rustString=(r="string")=>{const e=struct([u32("length"),u32("lengthPadding"),blob(offset(u32(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),o=e;return o.decode=(s,a)=>t(s,a).chars.toString(),o.encode=(s,a,c)=>{const d={chars:buffer.Buffer.from(s,"utf8")};return n(d,a,c)},o.alloc=s=>u32().span+u32().span+buffer.Buffer.from(s,"utf8").length,o},authorized=(r="authorized")=>struct([publicKey("staker"),publicKey("withdrawer")],r),lockup=(r="lockup")=>struct([ns64("unixTimestamp"),ns64("epoch"),publicKey("custodian")],r),voteInit=(r="voteInit")=>struct([publicKey("nodePubkey"),publicKey("authorizedVoter"),publicKey("authorizedWithdrawer"),u8("commission")],r),voteAuthorizeWithSeedArgs=(r="voteAuthorizeWithSeedArgs")=>struct([u32("voteAuthorizationType"),publicKey("currentAuthorityDerivedKeyOwnerPubkey"),rustString("currentAuthorityDerivedKeySeed"),publicKey("newAuthorized")],r);function getAlloc(r,e){const t=o=>{if(o.span>=0)return o.span;if(typeof o.alloc=="function")return o.alloc(e[o.property]);if("count"in o&&"elementLayout"in o){const s=e[o.property];if(Array.isArray(s))return s.length*t(o.elementLayout)}else if("fields"in o)return getAlloc({layout:o},e[o.property]);return 0};let n=0;return r.layout.fields.forEach(o=>{n+=t(o)}),n}function decodeLength(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,!(n&128))break}return e}function encodeLength(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function assert$1(r,e){if(!r)throw new Error(e||"Assertion failed")}class CompiledKeys{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,o=a=>{const c=a.toBase58();let d=n.get(c);return d===void 0&&(d={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(c,d)),d},s=o(t);s.isSigner=!0,s.isWritable=!0;for(const a of e){o(a.programId).isInvoked=!0;for(const c of a.keys){const d=o(c.pubkey);d.isSigner||(d.isSigner=c.isSigner),d.isWritable||(d.isWritable=c.isWritable)}}return new CompiledKeys(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];assert$1(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,d])=>d.isSigner&&d.isWritable),n=e.filter(([,d])=>d.isSigner&&!d.isWritable),o=e.filter(([,d])=>!d.isSigner&&d.isWritable),s=e.filter(([,d])=>!d.isSigner&&!d.isWritable),a={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{assert$1(t.length>0,"Expected at least one writable signer key");const[d]=t[0];assert$1(d===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const c=[...t.map(([d])=>new PublicKey$1(d)),...n.map(([d])=>new PublicKey$1(d)),...o.map(([d])=>new PublicKey$1(d)),...s.map(([d])=>new PublicKey$1(d))];return[a,c]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[o,s]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(t.length===0&&o.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:o},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,o=new Array;for(const[s,a]of this.keyMetaMap.entries())if(t(a)){const c=new PublicKey$1(s),d=e.findIndex(u=>u.equals(c));d>=0&&(assert$1(d<256,"Max lookup table index exceeded"),n.push(d),o.push(c),this.keyMetaMap.delete(s))}return[n,o]}}const END_OF_BUFFER_ERROR_MESSAGE="Reached end of buffer unexpectedly";function guardedShift(r){if(r.length===0)throw new Error(END_OF_BUFFER_ERROR_MESSAGE);return r.shift()}function guardedSplice(r,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>r.length:t>=r.length)throw new Error(END_OF_BUFFER_ERROR_MESSAGE);return r.splice(...e)}class Message{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new PublicKey$1(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:bs58$4.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new MessageAccountKeys(this.staticAccountKeys)}static compile(e){const t=CompiledKeys.compile(e.instructions,e.payerKey),[n,o]=t.getMessageComponents(),a=new MessageAccountKeys(o).compileInstructions(e.instructions).map(c=>({programIdIndex:c.programIdIndex,accounts:c.accountKeyIndexes,data:bs58$4.encode(c.data)}));return new Message({header:n,accountKeys:o,recentBlockhash:e.recentBlockhash,instructions:a})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];encodeLength(t,e);const n=this.instructions.map(v=>{const{accounts:I,programIdIndex:S}=v,P=Array.from(bs58$4.decode(v.data));let x=[];encodeLength(x,I.length);let A=[];return encodeLength(A,P.length),{programIdIndex:S,keyIndicesCount:buffer.Buffer.from(x),keyIndices:I,dataLength:buffer.Buffer.from(A),data:P}});let o=[];encodeLength(o,n.length);let s=buffer.Buffer.alloc(PACKET_DATA_SIZE);buffer.Buffer.from(o).copy(s);let a=o.length;n.forEach(v=>{const S=struct([u8("programIdIndex"),blob(v.keyIndicesCount.length,"keyIndicesCount"),seq(u8("keyIndex"),v.keyIndices.length,"keyIndices"),blob(v.dataLength.length,"dataLength"),seq(u8("userdatum"),v.data.length,"data")]).encode(v,s,a);a+=S}),s=s.slice(0,a);const c=struct([blob(1,"numRequiredSignatures"),blob(1,"numReadonlySignedAccounts"),blob(1,"numReadonlyUnsignedAccounts"),blob(t.length,"keyCount"),seq(publicKey("key"),e,"keys"),publicKey("recentBlockhash")]),d={numRequiredSignatures:buffer.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:buffer.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:buffer.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:buffer.Buffer.from(t),keys:this.accountKeys.map(v=>toBuffer$1(v.toBytes())),recentBlockhash:bs58$4.decode(this.recentBlockhash)};let u=buffer.Buffer.alloc(2048);const y=c.encode(d,u);return s.copy(u,y),u.slice(0,y+s.length)}static from(e){let t=[...e];const n=guardedShift(t);if(n!==(n&VERSION_PREFIX_MASK))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const o=guardedShift(t),s=guardedShift(t),a=decodeLength(t);let c=[];for(let I=0;I<a;I++){const S=guardedSplice(t,0,PUBLIC_KEY_LENGTH);c.push(new PublicKey$1(buffer.Buffer.from(S)))}const d=guardedSplice(t,0,PUBLIC_KEY_LENGTH),u=decodeLength(t);let y=[];for(let I=0;I<u;I++){const S=guardedShift(t),P=decodeLength(t),x=guardedSplice(t,0,P),A=decodeLength(t),O=guardedSplice(t,0,A),z=bs58$4.encode(buffer.Buffer.from(O));y.push({programIdIndex:S,accounts:x,data:z})}const v={header:{numRequiredSignatures:n,numReadonlySignedAccounts:o,numReadonlyUnsignedAccounts:s},recentBlockhash:bs58$4.encode(buffer.Buffer.from(d)),accountKeys:c,instructions:y};return new Message(v)}}class MessageV0{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new MessageAccountKeys(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const o=e-n,s=this.addressTableLookups.reduce((a,c)=>a+c.writableIndexes.length,0);return o<s}else if(e>=this.header.numRequiredSignatures){const o=e-t,a=n-t-this.header.numReadonlyUnsignedAccounts;return o<a}else{const o=t-this.header.numReadonlySignedAccounts;return e<o}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const o=e.find(s=>s.key.equals(n.accountKey));if(!o)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<o.state.addresses.length)t.writable.push(o.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<o.state.addresses.length)t.readonly.push(o.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=CompiledKeys.compile(e.instructions,e.payerKey),n=new Array,o={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const y of s){const v=t.extractTableLookup(y);if(v!==void 0){const[I,{writable:S,readonly:P}]=v;n.push(I),o.writable.push(...S),o.readonly.push(...P)}}const[a,c]=t.getMessageComponents(),u=new MessageAccountKeys(c,o).compileInstructions(e.instructions);return new MessageV0({header:a,staticAccountKeys:c,recentBlockhash:e.recentBlockhash,compiledInstructions:u,addressTableLookups:n})}serialize(){const e=Array();encodeLength(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();encodeLength(n,this.compiledInstructions.length);const o=this.serializeAddressTableLookups(),s=Array();encodeLength(s,this.addressTableLookups.length);const a=struct([u8("prefix"),struct([u8("numRequiredSignatures"),u8("numReadonlySignedAccounts"),u8("numReadonlyUnsignedAccounts")],"header"),blob(e.length,"staticAccountKeysLength"),seq(publicKey(),this.staticAccountKeys.length,"staticAccountKeys"),publicKey("recentBlockhash"),blob(n.length,"instructionsLength"),blob(t.length,"serializedInstructions"),blob(s.length,"addressTableLookupsLength"),blob(o.length,"serializedAddressTableLookups")]),c=new Uint8Array(PACKET_DATA_SIZE),u=a.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(y=>y.toBytes()),recentBlockhash:bs58$4.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:o},c);return c.slice(0,u)}serializeInstructions(){let e=0;const t=new Uint8Array(PACKET_DATA_SIZE);for(const n of this.compiledInstructions){const o=Array();encodeLength(o,n.accountKeyIndexes.length);const s=Array();encodeLength(s,n.data.length);const a=struct([u8("programIdIndex"),blob(o.length,"encodedAccountKeyIndexesLength"),seq(u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),blob(s.length,"encodedDataLength"),blob(n.data.length,"data")]);e+=a.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(o),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(PACKET_DATA_SIZE);for(const n of this.addressTableLookups){const o=Array();encodeLength(o,n.writableIndexes.length);const s=Array();encodeLength(s,n.readonlyIndexes.length);const a=struct([publicKey("accountKey"),blob(o.length,"encodedWritableIndexesLength"),seq(u8(),n.writableIndexes.length,"writableIndexes"),blob(s.length,"encodedReadonlyIndexesLength"),seq(u8(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=a.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(o),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=guardedShift(t),o=n&VERSION_PREFIX_MASK;assert$1(n!==o,"Expected versioned message but received legacy message");const s=o;assert$1(s===0,`Expected versioned message with version 0 but found version ${s}`);const a={numRequiredSignatures:guardedShift(t),numReadonlySignedAccounts:guardedShift(t),numReadonlyUnsignedAccounts:guardedShift(t)},c=[],d=decodeLength(t);for(let P=0;P<d;P++)c.push(new PublicKey$1(guardedSplice(t,0,PUBLIC_KEY_LENGTH)));const u=bs58$4.encode(guardedSplice(t,0,PUBLIC_KEY_LENGTH)),y=decodeLength(t),v=[];for(let P=0;P<y;P++){const x=guardedShift(t),A=decodeLength(t),O=guardedSplice(t,0,A),z=decodeLength(t),M=new Uint8Array(guardedSplice(t,0,z));v.push({programIdIndex:x,accountKeyIndexes:O,data:M})}const I=decodeLength(t),S=[];for(let P=0;P<I;P++){const x=new PublicKey$1(guardedSplice(t,0,PUBLIC_KEY_LENGTH)),A=decodeLength(t),O=guardedSplice(t,0,A),z=decodeLength(t),M=guardedSplice(t,0,z);S.push({accountKey:x,writableIndexes:O,readonlyIndexes:M})}return new MessageV0({header:a,staticAccountKeys:c,recentBlockhash:u,compiledInstructions:v,addressTableLookups:S})}}const VersionedMessage={deserializeMessageVersion(r){const e=r[0],t=e&VERSION_PREFIX_MASK;return t===e?"legacy":t},deserialize:r=>{const e=VersionedMessage.deserializeMessageVersion(r);if(e==="legacy")return Message.from(r);if(e===0)return MessageV0.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let TransactionStatus=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const DEFAULT_SIGNATURE=buffer.Buffer.alloc(SIGNATURE_LENGTH_IN_BYTES).fill(0);class TransactionInstruction{constructor(e){this.keys=void 0,this.programId=void 0,this.data=buffer.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Transaction{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new TransactionInstruction(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let x=0;x<t.length;x++)if(t[x].programId===void 0)throw new Error(`Transaction instruction index ${x} has undefined program id`);const o=[],s=[];t.forEach(x=>{x.keys.forEach(O=>{s.push({...O})});const A=x.programId.toString();o.includes(A)||o.push(A)}),o.forEach(x=>{s.push({pubkey:new PublicKey$1(x),isSigner:!1,isWritable:!1})});const a=[];s.forEach(x=>{const A=x.pubkey.toString(),O=a.findIndex(z=>z.pubkey.toString()===A);O>-1?(a[O].isWritable=a[O].isWritable||x.isWritable,a[O].isSigner=a[O].isSigner||x.isSigner):a.push(x)}),a.sort(function(x,A){if(x.isSigner!==A.isSigner)return x.isSigner?-1:1;if(x.isWritable!==A.isWritable)return x.isWritable?-1:1;const O={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return x.pubkey.toBase58().localeCompare(A.pubkey.toBase58(),"en",O)});const c=a.findIndex(x=>x.pubkey.equals(n));if(c>-1){const[x]=a.splice(c,1);x.isSigner=!0,x.isWritable=!0,a.unshift(x)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const x of this.signatures){const A=a.findIndex(O=>O.pubkey.equals(x.publicKey));if(A>-1)a[A].isSigner||(a[A].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${x.publicKey.toString()}`)}let d=0,u=0,y=0;const v=[],I=[];a.forEach(({pubkey:x,isSigner:A,isWritable:O})=>{A?(v.push(x.toString()),d+=1,O||(u+=1)):(I.push(x.toString()),O||(y+=1))});const S=v.concat(I),P=t.map(x=>{const{data:A,programId:O}=x;return{programIdIndex:S.indexOf(O.toString()),accounts:x.keys.map(z=>S.indexOf(z.pubkey.toString())),data:bs58$4.encode(A)}});return P.forEach(x=>{assert$1(x.programIdIndex>=0),x.accounts.forEach(A=>assert$1(A>=0))}),new Message({header:{numRequiredSignatures:d,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:y},accountKeys:S,recentBlockhash:e,instructions:P})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((o,s)=>t[s].equals(o.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const o=n.toString();return t.has(o)?!1:(t.add(o),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const o=this._compile();this._partialSign(o,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}const o=this._compile();this._partialSign(o,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(o=>{const s=sign(n,o.secretKey);this._addSignature(o.publicKey,toBuffer$1(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){assert$1(t.length===64);const n=this.signatures.findIndex(o=>e.equals(o.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=buffer.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const n={};for(const{signature:o,publicKey:s}of this.signatures)o===null?t&&(n.missing||(n.missing=[])).push(s):verify(o,e,s.toBytes())||(n.invalid||(n.invalid=[])).push(s);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),o=this.serializeMessage();if(n){const s=this._getMessageSignednessErrors(o,t);if(s){let a="Signature verification failed.";throw s.invalid&&(a+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(c=>c.toBase58()).join("`, `")}\`].`),s.missing&&(a+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(c=>c.toBase58()).join("`, `")}\`].`),new Error(a)}}return this._serialize(o)}_serialize(e){const{signatures:t}=this,n=[];encodeLength(n,t.length);const o=n.length+t.length*64+e.length,s=buffer.Buffer.alloc(o);return assert$1(t.length<256),buffer.Buffer.from(n).copy(s,0),t.forEach(({signature:a},c)=>{a!==null&&(assert$1(a.length===64,"signature has invalid length"),buffer.Buffer.from(a).copy(s,n.length+c*64))}),e.copy(s,n.length+t.length*64),assert$1(s.length<=PACKET_DATA_SIZE,`Transaction too large: ${s.length} > ${PACKET_DATA_SIZE}`),s}get keys(){return assert$1(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return assert$1(this.instructions.length===1),this.instructions[0].programId}get data(){return assert$1(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=decodeLength(t);let o=[];for(let s=0;s<n;s++){const a=guardedSplice(t,0,SIGNATURE_LENGTH_IN_BYTES);o.push(bs58$4.encode(buffer.Buffer.from(a)))}return Transaction.populate(Message.from(t),o)}static populate(e,t=[]){const n=new Transaction;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((o,s)=>{const a={signature:o==bs58$4.encode(DEFAULT_SIGNATURE)?null:bs58$4.decode(o),publicKey:e.accountKeys[s]};n.signatures.push(a)}),e.instructions.forEach(o=>{const s=o.accounts.map(a=>{const c=e.accountKeys[a];return{pubkey:c,isSigner:n.signatures.some(d=>d.publicKey.toString()===c.toString())||e.isAccountSigner(a),isWritable:e.isAccountWritable(a)}});n.instructions.push(new TransactionInstruction({keys:s,programId:e.accountKeys[o.programIdIndex],data:bs58$4.decode(o.data)}))}),n._message=e,n._json=n.toJSON(),n}}class TransactionMessage{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:n,compiledInstructions:o,recentBlockhash:s}=e,{numRequiredSignatures:a,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:d}=n,u=a-c;assert$1(u>0,"Message header is invalid");const y=e.staticAccountKeys.length-a-d;assert$1(y>=0,"Message header is invalid");const v=e.getAccountKeys(t),I=v.get(0);if(I===void 0)throw new Error("Failed to decompile message because no account keys were found");const S=[];for(const P of o){const x=[];for(const O of P.accountKeyIndexes){const z=v.get(O);if(z===void 0)throw new Error(`Failed to find key for account key index ${O}`);const M=O<a;let H;M?H=O<u:O<v.staticAccountKeys.length?H=O-a<y:H=O-v.staticAccountKeys.length<v.accountKeysFromLookups.writable.length,x.push({pubkey:z,isSigner:O<n.numRequiredSignatures,isWritable:H})}const A=v.get(P.programIdIndex);if(A===void 0)throw new Error(`Failed to find program id for program id index ${P.programIdIndex}`);S.push(new TransactionInstruction({programId:A,data:toBuffer$1(P.data),keys:x}))}return new TransactionMessage({payerKey:I,instructions:S,recentBlockhash:s})}compileToLegacyMessage(){return Message.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return MessageV0.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class VersionedTransaction{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)assert$1(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let o=0;o<e.header.numRequiredSignatures;o++)n.push(new Uint8Array(SIGNATURE_LENGTH_IN_BYTES));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();encodeLength(t,this.signatures.length);const n=struct([blob(t.length,"encodedSignaturesLength"),seq(signature(),this.signatures.length,"signatures"),blob(e.length,"serializedMessage")]),o=new Uint8Array(2048),s=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},o);return o.slice(0,s)}static deserialize(e){let t=[...e];const n=[],o=decodeLength(t);for(let a=0;a<o;a++)n.push(new Uint8Array(guardedSplice(t,0,SIGNATURE_LENGTH_IN_BYTES)));const s=VersionedMessage.deserialize(new Uint8Array(t));return new VersionedTransaction(s,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const o of e){const s=n.findIndex(a=>a.equals(o.publicKey));assert$1(s>=0,`Cannot sign with non signer key ${o.publicKey.toBase58()}`),this.signatures[s]=sign(t,o.secretKey)}}addSignature(e,t){assert$1(t.byteLength===64,"Signature must be 64 bytes long");const o=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));assert$1(o>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[o]=t}}const NUM_TICKS_PER_SECOND=160,DEFAULT_TICKS_PER_SLOT=64,NUM_SLOTS_PER_SECOND=NUM_TICKS_PER_SECOND/DEFAULT_TICKS_PER_SLOT,MS_PER_SLOT=1e3/NUM_SLOTS_PER_SECOND,SYSVAR_CLOCK_PUBKEY=new PublicKey$1("SysvarC1ock11111111111111111111111111111111"),SYSVAR_EPOCH_SCHEDULE_PUBKEY=new PublicKey$1("SysvarEpochSchedu1e111111111111111111111111"),SYSVAR_INSTRUCTIONS_PUBKEY=new PublicKey$1("Sysvar1nstructions1111111111111111111111111"),SYSVAR_RECENT_BLOCKHASHES_PUBKEY=new PublicKey$1("SysvarRecentB1ockHashes11111111111111111111"),SYSVAR_RENT_PUBKEY=new PublicKey$1("SysvarRent111111111111111111111111111111111"),SYSVAR_REWARDS_PUBKEY=new PublicKey$1("SysvarRewards111111111111111111111111111111"),SYSVAR_SLOT_HASHES_PUBKEY=new PublicKey$1("SysvarS1otHashes111111111111111111111111111"),SYSVAR_SLOT_HISTORY_PUBKEY=new PublicKey$1("SysvarS1otHistory11111111111111111111111111"),SYSVAR_STAKE_HISTORY_PUBKEY=new PublicKey$1("SysvarStakeHistory1111111111111111111111111");class SendTransactionError extends Error{constructor({action:e,signature:t,transactionMessage:n,logs:o}){const s=o?`Logs: 
${JSON.stringify(o.slice(-10),null,2)}. `:"",a="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let c;switch(e){case"send":c=`Transaction ${t} resulted in an error. 
${n}. `+s+a;break;case"simulate":c=`Simulation failed. 
Message: ${n}. 
`+s+a;break;default:c=`Unknown action '${(d=>d)(e)}'`}super(c),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=n,this.transactionLogs=o||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,n)=>{e.getTransaction(this.signature).then(o=>{if(o&&o.meta&&o.meta.logMessages){const s=o.meta.logMessages;this.transactionLogs=s,t(s)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}const SolanaJSONRPCErrorCode={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class SolanaJSONRPCError extends Error{constructor({code:e,message:t,data:n},o){super(o!=null?`${o}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}async function sendAndConfirmTransaction(r,e,t,n){const o=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await r.sendTransaction(e,t,o);let a;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)a=(await r.confirmTransaction({abortSignal:n?.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:c}=e.nonceInfo,d=c.keys[0].pubkey;a=(await r.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:d,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else n?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),a=(await r.confirmTransaction(s,n&&n.commitment)).value;if(a.err)throw s!=null?new SendTransactionError({action:"send",signature:s,transactionMessage:`Status: (${JSON.stringify(a)})`}):new Error(`Transaction ${s} failed (${JSON.stringify(a)})`);return s}function sleep(r){return new Promise(e=>setTimeout(e,r))}function encodeData(r,e){const t=r.layout.span>=0?r.layout.span:getAlloc(r,e),n=buffer.Buffer.alloc(t),o=Object.assign({instruction:r.index},e);return r.layout.encode(o,n),n}function decodeData$1(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.instruction!==r.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${r.index}`);return t}const FeeCalculatorLayout=nu64("lamportsPerSignature"),NonceAccountLayout=struct([u32("version"),u32("state"),publicKey("authorizedPubkey"),publicKey("nonce"),struct([FeeCalculatorLayout],"feeCalculator")]),NONCE_ACCOUNT_LENGTH=NonceAccountLayout.span;class NonceAccount{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=NonceAccountLayout.decode(toBuffer$1(e),0);return new NonceAccount({authorizedPubkey:new PublicKey$1(t.authorizedPubkey),nonce:new PublicKey$1(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const encodeDecode=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},bigInt=r=>e=>{const t=blob(r,e),{encode:n,decode:o}=encodeDecode(t),s=t;return s.decode=(a,c)=>{const d=o(a,c);return toBigIntLE_1(buffer.Buffer.from(d))},s.encode=(a,c,d)=>{const u=toBufferLE_1(a,r);return n(u,c,d)},s},u64$1=bigInt(8);class SystemInstruction{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=u32("instruction").decode(e.data);let o;for(const[s,a]of Object.entries(SYSTEM_INSTRUCTION_LAYOUTS))if(a.index==n){o=s;break}if(!o)throw new Error("Instruction type incorrect; not a SystemInstruction");return o}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:n,programId:o}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:n,programId:new PublicKey$1(o)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:n,programId:o}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:n,programId:new PublicKey$1(o)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,space:o,programId:s}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new PublicKey$1(t),seed:n,space:o,programId:new PublicKey$1(s)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new PublicKey$1(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,programId:o}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new PublicKey$1(t),seed:n,programId:new PublicKey$1(o)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:n,lamports:o,space:s,programId:a}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new PublicKey$1(t),seed:n,lamports:o,space:s,programId:new PublicKey$1(a)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new PublicKey$1(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new PublicKey$1(t)}}static checkProgramId(e){if(!e.equals(SystemProgram.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const SYSTEM_INSTRUCTION_LAYOUTS=Object.freeze({Create:{index:0,layout:struct([u32("instruction"),ns64("lamports"),ns64("space"),publicKey("programId")])},Assign:{index:1,layout:struct([u32("instruction"),publicKey("programId")])},Transfer:{index:2,layout:struct([u32("instruction"),u64$1("lamports")])},CreateWithSeed:{index:3,layout:struct([u32("instruction"),publicKey("base"),rustString("seed"),ns64("lamports"),ns64("space"),publicKey("programId")])},AdvanceNonceAccount:{index:4,layout:struct([u32("instruction")])},WithdrawNonceAccount:{index:5,layout:struct([u32("instruction"),ns64("lamports")])},InitializeNonceAccount:{index:6,layout:struct([u32("instruction"),publicKey("authorized")])},AuthorizeNonceAccount:{index:7,layout:struct([u32("instruction"),publicKey("authorized")])},Allocate:{index:8,layout:struct([u32("instruction"),ns64("space")])},AllocateWithSeed:{index:9,layout:struct([u32("instruction"),publicKey("base"),rustString("seed"),ns64("space"),publicKey("programId")])},AssignWithSeed:{index:10,layout:struct([u32("instruction"),publicKey("base"),rustString("seed"),publicKey("programId")])},TransferWithSeed:{index:11,layout:struct([u32("instruction"),u64$1("lamports"),rustString("seed"),publicKey("programId")])},UpgradeNonceAccount:{index:12,layout:struct([u32("instruction")])}});class SystemProgram{constructor(){}static createAccount(e){const t=SYSTEM_INSTRUCTION_LAYOUTS.Create,n=encodeData(t,{lamports:e.lamports,space:e.space,programId:toBuffer$1(e.programId.toBuffer())});return new TransactionInstruction({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const o=SYSTEM_INSTRUCTION_LAYOUTS.TransferWithSeed;t=encodeData(o,{lamports:BigInt(e.lamports),seed:e.seed,programId:toBuffer$1(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const o=SYSTEM_INSTRUCTION_LAYOUTS.Transfer;t=encodeData(o,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new TransactionInstruction({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const o=SYSTEM_INSTRUCTION_LAYOUTS.AssignWithSeed;t=encodeData(o,{base:toBuffer$1(e.basePubkey.toBuffer()),seed:e.seed,programId:toBuffer$1(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const o=SYSTEM_INSTRUCTION_LAYOUTS.Assign;t=encodeData(o,{programId:toBuffer$1(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new TransactionInstruction({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=SYSTEM_INSTRUCTION_LAYOUTS.CreateWithSeed,n=encodeData(t,{base:toBuffer$1(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:toBuffer$1(e.programId.toBuffer())});let o=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||o.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new TransactionInstruction({keys:o,programId:this.programId,data:n})}static createNonceAccount(e){const t=new Transaction;"basePubkey"in e&&"seed"in e?t.add(SystemProgram.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:NONCE_ACCOUNT_LENGTH,programId:this.programId})):t.add(SystemProgram.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:NONCE_ACCOUNT_LENGTH,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=SYSTEM_INSTRUCTION_LAYOUTS.InitializeNonceAccount,n=encodeData(t,{authorized:toBuffer$1(e.authorizedPubkey.toBuffer())}),o={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new TransactionInstruction(o)}static nonceAdvance(e){const t=SYSTEM_INSTRUCTION_LAYOUTS.AdvanceNonceAccount,n=encodeData(t),o={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new TransactionInstruction(o)}static nonceWithdraw(e){const t=SYSTEM_INSTRUCTION_LAYOUTS.WithdrawNonceAccount,n=encodeData(t,{lamports:e.lamports});return new TransactionInstruction({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=SYSTEM_INSTRUCTION_LAYOUTS.AuthorizeNonceAccount,n=encodeData(t,{authorized:toBuffer$1(e.newAuthorizedPubkey.toBuffer())});return new TransactionInstruction({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const o=SYSTEM_INSTRUCTION_LAYOUTS.AllocateWithSeed;t=encodeData(o,{base:toBuffer$1(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:toBuffer$1(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const o=SYSTEM_INSTRUCTION_LAYOUTS.Allocate;t=encodeData(o,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new TransactionInstruction({keys:n,programId:this.programId,data:t})}}SystemProgram.programId=new PublicKey$1("11111111111111111111111111111111");const CHUNK_SIZE=PACKET_DATA_SIZE-300;class Loader{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/Loader.chunkSize)+1+1)}static async load(e,t,n,o,s){{const v=await e.getMinimumBalanceForRentExemption(s.length),I=await e.getAccountInfo(n.publicKey,"confirmed");let S=null;if(I!==null){if(I.executable)return console.error("Program load failed, account is already executable"),!1;I.data.length!==s.length&&(S=S||new Transaction,S.add(SystemProgram.allocate({accountPubkey:n.publicKey,space:s.length}))),I.owner.equals(o)||(S=S||new Transaction,S.add(SystemProgram.assign({accountPubkey:n.publicKey,programId:o}))),I.lamports<v&&(S=S||new Transaction,S.add(SystemProgram.transfer({fromPubkey:t.publicKey,toPubkey:n.publicKey,lamports:v-I.lamports})))}else S=new Transaction().add(SystemProgram.createAccount({fromPubkey:t.publicKey,newAccountPubkey:n.publicKey,lamports:v>0?v:1,space:s.length,programId:o}));S!==null&&await sendAndConfirmTransaction(e,S,[t,n],{commitment:"confirmed"})}const a=struct([u32("instruction"),u32("offset"),u32("bytesLength"),u32("bytesLengthPadding"),seq(u8("byte"),offset(u32(),-8),"bytes")]),c=Loader.chunkSize;let d=0,u=s,y=[];for(;u.length>0;){const v=u.slice(0,c),I=buffer.Buffer.alloc(c+16);a.encode({instruction:0,offset:d,bytes:v,bytesLength:0,bytesLengthPadding:0},I);const S=new Transaction().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:o,data:I});y.push(sendAndConfirmTransaction(e,S,[t,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await sleep(1e3/4),d+=c,u=u.slice(c)}await Promise.all(y);{const v=struct([u32("instruction")]),I=buffer.Buffer.alloc(v.span);v.encode({instruction:1},I);const S=new Transaction().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:o,data:I}),P="processed",x=await e.sendTransaction(S,[t,n],{preflightCommitment:P}),{context:A,value:O}=await e.confirmTransaction({signature:x,lastValidBlockHeight:S.lastValidBlockHeight,blockhash:S.recentBlockhash},P);if(O.err)throw new Error(`Transaction ${x} failed (${JSON.stringify(O)})`);for(;;){try{if(await e.getSlot({commitment:P})>A.slot)break}catch{}await new Promise(z=>setTimeout(z,Math.round(MS_PER_SLOT/2)))}}return!0}}Loader.chunkSize=CHUNK_SIZE;const BPF_LOADER_PROGRAM_ID=new PublicKey$1("BPFLoader2111111111111111111111111111111111");class BpfLoader{static getMinNumSignatures(e){return Loader.getMinNumSignatures(e)}static load(e,t,n,o,s){return Loader.load(e,t,n,s,o)}}function getDefaultExportFromCjs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var fastStableStringify$1,hasRequiredFastStableStringify;function requireFastStableStringify(){if(hasRequiredFastStableStringify)return fastStableStringify$1;hasRequiredFastStableStringify=1;var r=Object.prototype.toString,e=Object.keys||function(n){var o=[];for(var s in n)o.push(s);return o};function t(n,o){var s,a,c,d,u,y,v;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return t(n.toJSON(),o);if(v=r.call(n),v==="[object Array]"){for(c="[",a=n.length-1,s=0;s<a;s++)c+=t(n[s],!0)+",";return a>-1&&(c+=t(n[s],!0)),c+"]"}else if(v==="[object Object]"){for(d=e(n).sort(),a=d.length,c="",s=0;s<a;)u=d[s],y=t(n[u],!1),y!==void 0&&(c&&(c+=","),c+=JSON.stringify(u)+":"+y),s++;return"{"+c+"}"}else return JSON.stringify(n);case"function":case"undefined":return o?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return fastStableStringify$1=function(n){var o=t(n,!1);if(o!==void 0)return""+o},fastStableStringify$1}var fastStableStringifyExports=requireFastStableStringify(),fastStableStringify=getDefaultExportFromCjs(fastStableStringifyExports);const MINIMUM_SLOT_PER_EPOCH=32;function trailingZeros(r){let e=0;for(;r>1;)r/=2,e++;return e}function nextPowerOfTwo(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class EpochSchedule{constructor(e,t,n,o,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=o,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=trailingZeros(nextPowerOfTwo(e+MINIMUM_SLOT_PER_EPOCH+1))-trailingZeros(MINIMUM_SLOT_PER_EPOCH)-1,n=this.getSlotsInEpoch(t),o=e-(n-MINIMUM_SLOT_PER_EPOCH);return[t,o]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),o=this.firstNormalEpoch+n,s=t%this.slotsPerEpoch;return[o,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*MINIMUM_SLOT_PER_EPOCH:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+trailingZeros(MINIMUM_SLOT_PER_EPOCH)):this.slotsPerEpoch}}var fetchImpl=globalThis.fetch;class RpcWebSocketClient extends CommonClient{constructor(e,t,n){const o=s=>{const a=WebSocket(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in a?this.underlyingSocket=a.socket:this.underlyingSocket=a,a};super(o,e,t,n),this.underlyingSocket=void 0}call(...e){const t=this.underlyingSocket?.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){const t=this.underlyingSocket?.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function decodeData(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const LOOKUP_TABLE_META_SIZE=56;class AddressLookupTableAccount{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=decodeData(LookupTableMetaLayout,e),n=e.length-LOOKUP_TABLE_META_SIZE;assert$1(n>=0,"lookup table is invalid"),assert$1(n%32===0,"lookup table is invalid");const o=n/32,{addresses:s}=struct([seq(publicKey(),o,"addresses")]).decode(e.slice(LOOKUP_TABLE_META_SIZE));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new PublicKey$1(t.authority[0]):void 0,addresses:s.map(a=>new PublicKey$1(a))}}}const LookupTableMetaLayout={index:1,layout:struct([u32("typeIndex"),u64$1("deactivationSlot"),nu64("lastExtendedSlot"),u8("lastExtendedStartIndex"),u8(),seq(publicKey(),offset(u8(),-1),"authority")])},URL_RE=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function makeWebsocketUrl(r){const e=r.match(URL_RE);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,o,s]=e,a=r.startsWith("https:")?"wss:":"ws:",c=o==null?null:parseInt(o.slice(1),10),d=c==null?"":`:${c+1}`;return`${a}//${n}${d}${s}`}const PublicKeyFromString=coerce(instance(PublicKey$1),string(),r=>new PublicKey$1(r)),RawAccountDataResult=tuple([string(),literal("base64")]),BufferFromRawAccountData=coerce(instance(buffer.Buffer),RawAccountDataResult,r=>buffer.Buffer.from(r[0],"base64")),BLOCKHASH_CACHE_TIMEOUT_MS=30*1e3;function assertEndpointUrl(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function extractCommitmentFromConfig(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...o}=r;e=n,t=o}return{commitment:e,config:t}}function applyDefaultMemcmpEncodingToFilters(r){return r.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function createRpcResult(r){return union([type({jsonrpc:literal("2.0"),id:string(),result:r}),type({jsonrpc:literal("2.0"),id:string(),error:type({code:unknown(),message:string(),data:optional(any())})})])}const UnknownRpcResult=createRpcResult(unknown());function jsonRpcResult(r){return coerce(createRpcResult(r),UnknownRpcResult,e=>"error"in e?e:{...e,result:create(e.result,r)})}function jsonRpcResultAndContext(r){return jsonRpcResult(type({context:type({slot:number()}),value:r}))}function notificationResultAndContext(r){return type({context:type({slot:number()}),value:r})}function versionedMessageFromResponse(r,e){return r===0?new MessageV0({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new PublicKey$1(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:bs58$4.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new Message(e)}const GetInflationGovernorResult=type({foundation:number(),foundationTerm:number(),initial:number(),taper:number(),terminal:number()}),GetInflationRewardResult=jsonRpcResult(array(nullable(type({epoch:number(),effectiveSlot:number(),amount:number(),postBalance:number(),commission:optional(nullable(number()))})))),GetRecentPrioritizationFeesResult=array(type({slot:number(),prioritizationFee:number()})),GetInflationRateResult=type({total:number(),validator:number(),foundation:number(),epoch:number()}),GetEpochInfoResult=type({epoch:number(),slotIndex:number(),slotsInEpoch:number(),absoluteSlot:number(),blockHeight:optional(number()),transactionCount:optional(number())}),GetEpochScheduleResult=type({slotsPerEpoch:number(),leaderScheduleSlotOffset:number(),warmup:boolean(),firstNormalEpoch:number(),firstNormalSlot:number()}),GetLeaderScheduleResult=record(string(),array(number())),TransactionErrorResult=nullable(union([type({}),string()])),SignatureStatusResult=type({err:TransactionErrorResult}),SignatureReceivedResult=literal("receivedSignature"),VersionResult=type({"solana-core":string(),"feature-set":optional(number())}),ParsedInstructionStruct=type({program:string(),programId:PublicKeyFromString,parsed:unknown()}),PartiallyDecodedInstructionStruct=type({programId:PublicKeyFromString,accounts:array(PublicKeyFromString),data:string()}),SimulatedTransactionResponseStruct=jsonRpcResultAndContext(type({err:nullable(union([type({}),string()])),logs:nullable(array(string())),accounts:optional(nullable(array(nullable(type({executable:boolean(),owner:string(),lamports:number(),data:array(string()),rentEpoch:optional(number())}))))),unitsConsumed:optional(number()),returnData:optional(nullable(type({programId:string(),data:tuple([string(),literal("base64")])}))),innerInstructions:optional(nullable(array(type({index:number(),instructions:array(union([ParsedInstructionStruct,PartiallyDecodedInstructionStruct]))}))))})),BlockProductionResponseStruct=jsonRpcResultAndContext(type({byIdentity:record(string(),array(number())),range:type({firstSlot:number(),lastSlot:number()})}));function createRpcClient(r,e,t,n,o,s){const a=t||fetchImpl;let c;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let d;return n&&(d=async(y,v)=>{const I=await new Promise((S,P)=>{try{n(y,v,(x,A)=>S([x,A]))}catch(x){P(x)}});return await a(...I)}),new RpcClient(async(y,v)=>{const I={method:"POST",body:y,agent:c,headers:Object.assign({"Content-Type":"application/json"},e||{},COMMON_HTTP_HEADERS)};try{let S=5,P,x=500;for(;d?P=await d(r,I):P=await a(r,I),!(P.status!==429||o===!0||(S-=1,S===0));)console.error(`Server responded with ${P.status} ${P.statusText}.  Retrying after ${x}ms delay...`),await sleep(x),x*=2;const A=await P.text();P.ok?v(null,A):v(new Error(`${P.status} ${P.statusText}: ${A}`))}catch(S){S instanceof Error&&v(S)}},{})}function createRpcRequest(r){return(e,t)=>new Promise((n,o)=>{r.request(e,t,(s,a)=>{if(s){o(s);return}n(a)})})}function createRpcBatchRequest(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const o=e.map(s=>r.request(s.methodName,s.args));r.request(o,(s,a)=>{if(s){n(s);return}t(a)})})}const GetInflationGovernorRpcResult=jsonRpcResult(GetInflationGovernorResult),GetInflationRateRpcResult=jsonRpcResult(GetInflationRateResult),GetRecentPrioritizationFeesRpcResult=jsonRpcResult(GetRecentPrioritizationFeesResult),GetEpochInfoRpcResult=jsonRpcResult(GetEpochInfoResult),GetEpochScheduleRpcResult=jsonRpcResult(GetEpochScheduleResult),GetLeaderScheduleRpcResult=jsonRpcResult(GetLeaderScheduleResult),SlotRpcResult=jsonRpcResult(number()),GetSupplyRpcResult=jsonRpcResultAndContext(type({total:number(),circulating:number(),nonCirculating:number(),nonCirculatingAccounts:array(PublicKeyFromString)})),TokenAmountResult=type({amount:string(),uiAmount:nullable(number()),decimals:number(),uiAmountString:optional(string())}),GetTokenLargestAccountsResult=jsonRpcResultAndContext(array(type({address:PublicKeyFromString,amount:string(),uiAmount:nullable(number()),decimals:number(),uiAmountString:optional(string())}))),GetTokenAccountsByOwner=jsonRpcResultAndContext(array(type({pubkey:PublicKeyFromString,account:type({executable:boolean(),owner:PublicKeyFromString,lamports:number(),data:BufferFromRawAccountData,rentEpoch:number()})}))),ParsedAccountDataResult=type({program:string(),parsed:unknown(),space:number()}),GetParsedTokenAccountsByOwner=jsonRpcResultAndContext(array(type({pubkey:PublicKeyFromString,account:type({executable:boolean(),owner:PublicKeyFromString,lamports:number(),data:ParsedAccountDataResult,rentEpoch:number()})}))),GetLargestAccountsRpcResult=jsonRpcResultAndContext(array(type({lamports:number(),address:PublicKeyFromString}))),AccountInfoResult=type({executable:boolean(),owner:PublicKeyFromString,lamports:number(),data:BufferFromRawAccountData,rentEpoch:number()}),KeyedAccountInfoResult=type({pubkey:PublicKeyFromString,account:AccountInfoResult}),ParsedOrRawAccountData=coerce(union([instance(buffer.Buffer),ParsedAccountDataResult]),union([RawAccountDataResult,ParsedAccountDataResult]),r=>Array.isArray(r)?create(r,BufferFromRawAccountData):r),ParsedAccountInfoResult=type({executable:boolean(),owner:PublicKeyFromString,lamports:number(),data:ParsedOrRawAccountData,rentEpoch:number()}),KeyedParsedAccountInfoResult=type({pubkey:PublicKeyFromString,account:ParsedAccountInfoResult}),StakeActivationResult=type({state:union([literal("active"),literal("inactive"),literal("activating"),literal("deactivating")]),active:number(),inactive:number()}),GetConfirmedSignaturesForAddress2RpcResult=jsonRpcResult(array(type({signature:string(),slot:number(),err:TransactionErrorResult,memo:nullable(string()),blockTime:optional(nullable(number()))}))),GetSignaturesForAddressRpcResult=jsonRpcResult(array(type({signature:string(),slot:number(),err:TransactionErrorResult,memo:nullable(string()),blockTime:optional(nullable(number()))}))),AccountNotificationResult=type({subscription:number(),result:notificationResultAndContext(AccountInfoResult)}),ProgramAccountInfoResult=type({pubkey:PublicKeyFromString,account:AccountInfoResult}),ProgramAccountNotificationResult=type({subscription:number(),result:notificationResultAndContext(ProgramAccountInfoResult)}),SlotInfoResult=type({parent:number(),slot:number(),root:number()}),SlotNotificationResult=type({subscription:number(),result:SlotInfoResult}),SlotUpdateResult=union([type({type:union([literal("firstShredReceived"),literal("completed"),literal("optimisticConfirmation"),literal("root")]),slot:number(),timestamp:number()}),type({type:literal("createdBank"),parent:number(),slot:number(),timestamp:number()}),type({type:literal("frozen"),slot:number(),timestamp:number(),stats:type({numTransactionEntries:number(),numSuccessfulTransactions:number(),numFailedTransactions:number(),maxTransactionsPerEntry:number()})}),type({type:literal("dead"),slot:number(),timestamp:number(),err:string()})]),SlotUpdateNotificationResult=type({subscription:number(),result:SlotUpdateResult}),SignatureNotificationResult=type({subscription:number(),result:notificationResultAndContext(union([SignatureStatusResult,SignatureReceivedResult]))}),RootNotificationResult=type({subscription:number(),result:number()}),ContactInfoResult=type({pubkey:string(),gossip:nullable(string()),tpu:nullable(string()),rpc:nullable(string()),version:nullable(string())}),VoteAccountInfoResult=type({votePubkey:string(),nodePubkey:string(),activatedStake:number(),epochVoteAccount:boolean(),epochCredits:array(tuple([number(),number(),number()])),commission:number(),lastVote:number(),rootSlot:nullable(number())}),GetVoteAccounts=jsonRpcResult(type({current:array(VoteAccountInfoResult),delinquent:array(VoteAccountInfoResult)})),ConfirmationStatus=union([literal("processed"),literal("confirmed"),literal("finalized")]),SignatureStatusResponse=type({slot:number(),confirmations:nullable(number()),err:TransactionErrorResult,confirmationStatus:optional(ConfirmationStatus)}),GetSignatureStatusesRpcResult=jsonRpcResultAndContext(array(nullable(SignatureStatusResponse))),GetMinimumBalanceForRentExemptionRpcResult=jsonRpcResult(number()),AddressTableLookupStruct=type({accountKey:PublicKeyFromString,writableIndexes:array(number()),readonlyIndexes:array(number())}),ConfirmedTransactionResult=type({signatures:array(string()),message:type({accountKeys:array(string()),header:type({numRequiredSignatures:number(),numReadonlySignedAccounts:number(),numReadonlyUnsignedAccounts:number()}),instructions:array(type({accounts:array(number()),data:string(),programIdIndex:number()})),recentBlockhash:string(),addressTableLookups:optional(array(AddressTableLookupStruct))})}),AnnotatedAccountKey=type({pubkey:PublicKeyFromString,signer:boolean(),writable:boolean(),source:optional(union([literal("transaction"),literal("lookupTable")]))}),ConfirmedTransactionAccountsModeResult=type({accountKeys:array(AnnotatedAccountKey),signatures:array(string())}),ParsedInstructionResult=type({parsed:unknown(),program:string(),programId:PublicKeyFromString}),RawInstructionResult=type({accounts:array(PublicKeyFromString),data:string(),programId:PublicKeyFromString}),InstructionResult=union([RawInstructionResult,ParsedInstructionResult]),UnknownInstructionResult=union([type({parsed:unknown(),program:string(),programId:string()}),type({accounts:array(string()),data:string(),programId:string()})]),ParsedOrRawInstruction=coerce(InstructionResult,UnknownInstructionResult,r=>"accounts"in r?create(r,RawInstructionResult):create(r,ParsedInstructionResult)),ParsedConfirmedTransactionResult=type({signatures:array(string()),message:type({accountKeys:array(AnnotatedAccountKey),instructions:array(ParsedOrRawInstruction),recentBlockhash:string(),addressTableLookups:optional(nullable(array(AddressTableLookupStruct)))})}),TokenBalanceResult=type({accountIndex:number(),mint:string(),owner:optional(string()),programId:optional(string()),uiTokenAmount:TokenAmountResult}),LoadedAddressesResult=type({writable:array(PublicKeyFromString),readonly:array(PublicKeyFromString)}),ConfirmedTransactionMetaResult=type({err:TransactionErrorResult,fee:number(),innerInstructions:optional(nullable(array(type({index:number(),instructions:array(type({accounts:array(number()),data:string(),programIdIndex:number()}))})))),preBalances:array(number()),postBalances:array(number()),logMessages:optional(nullable(array(string()))),preTokenBalances:optional(nullable(array(TokenBalanceResult))),postTokenBalances:optional(nullable(array(TokenBalanceResult))),loadedAddresses:optional(LoadedAddressesResult),computeUnitsConsumed:optional(number())}),ParsedConfirmedTransactionMetaResult=type({err:TransactionErrorResult,fee:number(),innerInstructions:optional(nullable(array(type({index:number(),instructions:array(ParsedOrRawInstruction)})))),preBalances:array(number()),postBalances:array(number()),logMessages:optional(nullable(array(string()))),preTokenBalances:optional(nullable(array(TokenBalanceResult))),postTokenBalances:optional(nullable(array(TokenBalanceResult))),loadedAddresses:optional(LoadedAddressesResult),computeUnitsConsumed:optional(number())}),TransactionVersionStruct=union([literal(0),literal("legacy")]),RewardsResult=type({pubkey:string(),lamports:number(),postBalance:nullable(number()),rewardType:nullable(string()),commission:optional(nullable(number()))}),GetBlockRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),transactions:array(type({transaction:ConfirmedTransactionResult,meta:nullable(ConfirmedTransactionMetaResult),version:optional(TransactionVersionStruct)})),rewards:optional(array(RewardsResult)),blockTime:nullable(number()),blockHeight:nullable(number())}))),GetNoneModeBlockRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),rewards:optional(array(RewardsResult)),blockTime:nullable(number()),blockHeight:nullable(number())}))),GetAccountsModeBlockRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),transactions:array(type({transaction:ConfirmedTransactionAccountsModeResult,meta:nullable(ConfirmedTransactionMetaResult),version:optional(TransactionVersionStruct)})),rewards:optional(array(RewardsResult)),blockTime:nullable(number()),blockHeight:nullable(number())}))),GetParsedBlockRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),transactions:array(type({transaction:ParsedConfirmedTransactionResult,meta:nullable(ParsedConfirmedTransactionMetaResult),version:optional(TransactionVersionStruct)})),rewards:optional(array(RewardsResult)),blockTime:nullable(number()),blockHeight:nullable(number())}))),GetParsedAccountsModeBlockRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),transactions:array(type({transaction:ConfirmedTransactionAccountsModeResult,meta:nullable(ParsedConfirmedTransactionMetaResult),version:optional(TransactionVersionStruct)})),rewards:optional(array(RewardsResult)),blockTime:nullable(number()),blockHeight:nullable(number())}))),GetParsedNoneModeBlockRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),rewards:optional(array(RewardsResult)),blockTime:nullable(number()),blockHeight:nullable(number())}))),GetConfirmedBlockRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),transactions:array(type({transaction:ConfirmedTransactionResult,meta:nullable(ConfirmedTransactionMetaResult)})),rewards:optional(array(RewardsResult)),blockTime:nullable(number())}))),GetBlockSignaturesRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),signatures:array(string()),blockTime:nullable(number())}))),GetTransactionRpcResult=jsonRpcResult(nullable(type({slot:number(),meta:nullable(ConfirmedTransactionMetaResult),blockTime:optional(nullable(number())),transaction:ConfirmedTransactionResult,version:optional(TransactionVersionStruct)}))),GetParsedTransactionRpcResult=jsonRpcResult(nullable(type({slot:number(),transaction:ParsedConfirmedTransactionResult,meta:nullable(ParsedConfirmedTransactionMetaResult),blockTime:optional(nullable(number())),version:optional(TransactionVersionStruct)}))),GetLatestBlockhashRpcResult=jsonRpcResultAndContext(type({blockhash:string(),lastValidBlockHeight:number()})),IsBlockhashValidRpcResult=jsonRpcResultAndContext(boolean()),PerfSampleResult=type({slot:number(),numTransactions:number(),numSlots:number(),samplePeriodSecs:number()}),GetRecentPerformanceSamplesRpcResult=jsonRpcResult(array(PerfSampleResult)),GetFeeCalculatorRpcResult=jsonRpcResultAndContext(nullable(type({feeCalculator:type({lamportsPerSignature:number()})}))),RequestAirdropRpcResult=jsonRpcResult(string()),SendTransactionRpcResult=jsonRpcResult(string()),LogsResult=type({err:TransactionErrorResult,logs:array(string()),signature:string()}),LogsNotificationResult=type({result:notificationResultAndContext(LogsResult),subscription:number()}),COMMON_HTTP_HEADERS={"solana-client":"js/1.0.0-maintenance"};class Connection{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const u={};return async y=>{const{commitment:v,config:I}=extractCommitmentFromConfig(y),S=this._buildArgs([],v,void 0,I),P=fastStableStringify(S);return u[P]=u[P]??(async()=>{try{const x=await this._rpcRequest("getBlockHeight",S),A=create(x,jsonRpcResult(number()));if("error"in A)throw new SolanaJSONRPCError(A.error,"failed to get block height information");return A.result}finally{delete u[P]}})(),await u[P]}})();let n,o,s,a,c,d;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,o=t.httpHeaders,s=t.fetch,a=t.fetchMiddleware,c=t.disableRetryOnRateLimit,d=t.httpAgent),this._rpcEndpoint=assertEndpointUrl(e),this._rpcWsEndpoint=n||makeWebsocketUrl(e),this._rpcClient=createRpcClient(e,o,s,a,c,d),this._rpcRequest=createRpcRequest(this._rpcClient),this._rpcBatchRequest=createRpcBatchRequest(this._rpcClient),this._rpcWebSocket=new RpcWebSocketClient(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:o}=extractCommitmentFromConfig(t),s=this._buildArgs([e.toBase58()],n,void 0,o),a=await this._rpcRequest("getBalance",s),c=create(a,jsonRpcResultAndContext(number()));if("error"in c)throw new SolanaJSONRPCError(c.error,`failed to get balance for ${e.toBase58()}`);return c.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=create(t,jsonRpcResult(nullable(number())));if("error"in n)throw new SolanaJSONRPCError(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=create(e,jsonRpcResult(number()));if("error"in t)throw new SolanaJSONRPCError(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=create(e,SlotRpcResult);if("error"in t)throw new SolanaJSONRPCError(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),o=create(n,GetSupplyRpcResult);if("error"in o)throw new SolanaJSONRPCError(o.error,"failed to get supply");return o.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),o=await this._rpcRequest("getTokenSupply",n),s=create(o,jsonRpcResultAndContext(TokenAmountResult));if("error"in s)throw new SolanaJSONRPCError(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),o=await this._rpcRequest("getTokenAccountBalance",n),s=create(o,jsonRpcResultAndContext(TokenAmountResult));if("error"in s)throw new SolanaJSONRPCError(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,t,n){const{commitment:o,config:s}=extractCommitmentFromConfig(n);let a=[e.toBase58()];"mint"in t?a.push({mint:t.mint.toBase58()}):a.push({programId:t.programId.toBase58()});const c=this._buildArgs(a,o,"base64",s),d=await this._rpcRequest("getTokenAccountsByOwner",c),u=create(d,GetTokenAccountsByOwner);if("error"in u)throw new SolanaJSONRPCError(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getParsedTokenAccountsByOwner(e,t,n){let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const s=this._buildArgs(o,n,"jsonParsed"),a=await this._rpcRequest("getTokenAccountsByOwner",s),c=create(a,GetParsedTokenAccountsByOwner);if("error"in c)throw new SolanaJSONRPCError(c.error,`failed to get token accounts owned by account ${e.toBase58()}`);return c.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],o=await this._rpcRequest("getLargestAccounts",n),s=create(o,GetLargestAccountsRpcResult);if("error"in s)throw new SolanaJSONRPCError(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),o=await this._rpcRequest("getTokenLargestAccounts",n),s=create(o,GetTokenLargestAccountsResult);if("error"in s)throw new SolanaJSONRPCError(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:o}=extractCommitmentFromConfig(t),s=this._buildArgs([e.toBase58()],n,"base64",o),a=await this._rpcRequest("getAccountInfo",s),c=create(a,jsonRpcResultAndContext(nullable(AccountInfoResult)));if("error"in c)throw new SolanaJSONRPCError(c.error,`failed to get info about account ${e.toBase58()}`);return c.result}async getParsedAccountInfo(e,t){const{commitment:n,config:o}=extractCommitmentFromConfig(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",o),a=await this._rpcRequest("getAccountInfo",s),c=create(a,jsonRpcResultAndContext(nullable(ParsedAccountInfoResult)));if("error"in c)throw new SolanaJSONRPCError(c.error,`failed to get info about account ${e.toBase58()}`);return c.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:o}=extractCommitmentFromConfig(t),s=e.map(u=>u.toBase58()),a=this._buildArgs([s],n,"jsonParsed",o),c=await this._rpcRequest("getMultipleAccounts",a),d=create(c,jsonRpcResultAndContext(array(nullable(ParsedAccountInfoResult))));if("error"in d)throw new SolanaJSONRPCError(d.error,`failed to get info for accounts ${s}`);return d.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:o}=extractCommitmentFromConfig(t),s=e.map(u=>u.toBase58()),a=this._buildArgs([s],n,"base64",o),c=await this._rpcRequest("getMultipleAccounts",a),d=create(c,jsonRpcResultAndContext(array(nullable(AccountInfoResult))));if("error"in d)throw new SolanaJSONRPCError(d.error,`failed to get info for accounts ${s}`);return d.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:o,config:s}=extractCommitmentFromConfig(t),a=this._buildArgs([e.toBase58()],o,void 0,{...s,epoch:n??s?.epoch}),c=await this._rpcRequest("getStakeActivation",a),d=create(c,jsonRpcResult(StakeActivationResult));if("error"in d)throw new SolanaJSONRPCError(d.error,`failed to get Stake Activation ${e.toBase58()}`);return d.result}async getProgramAccounts(e,t){const{commitment:n,config:o}=extractCommitmentFromConfig(t),{encoding:s,...a}=o||{},c=this._buildArgs([e.toBase58()],n,s||"base64",{...a,...a.filters?{filters:applyDefaultMemcmpEncodingToFilters(a.filters)}:null}),d=await this._rpcRequest("getProgramAccounts",c),u=array(KeyedAccountInfoResult),y=a.withContext===!0?create(d,jsonRpcResultAndContext(u)):create(d,jsonRpcResult(u));if("error"in y)throw new SolanaJSONRPCError(y.error,`failed to get accounts owned by program ${e.toBase58()}`);return y.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:o}=extractCommitmentFromConfig(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",o),a=await this._rpcRequest("getProgramAccounts",s),c=create(a,jsonRpcResult(array(KeyedParsedAccountInfoResult)));if("error"in c)throw new SolanaJSONRPCError(c.error,`failed to get accounts owned by program ${e.toBase58()}`);return c.result}async confirmTransaction(e,t){let n;if(typeof e=="string")n=e;else{const s=e;if(s.abortSignal?.aborted)return Promise.reject(s.abortSignal.reason);n=s.signature}let o;try{o=bs58$4.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return assert$1(o.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,o,s=!1;const a=new Promise((d,u)=>{try{n=this.onSignature(t,(v,I)=>{n=void 0;const S={context:I,value:v};d({__type:TransactionStatus.PROCESSED,response:S})},e);const y=new Promise(v=>{n==null?v():o=this._onSubscriptionStateChange(n,I=>{I==="subscribed"&&v()})});(async()=>{if(await y,s)return;const v=await this.getSignatureStatus(t);if(s||v==null)return;const{context:I,value:S}=v;if(S!=null)if(S?.err)u(S.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(S.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(S.confirmationStatus==="processed"||S.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,d({__type:TransactionStatus.PROCESSED,response:{context:I,value:S}})}})()}catch(y){u(y)}});return{abortConfirmation:()=>{o&&(o(),o=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:a}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:o}}){let s=!1;const a=new Promise(v=>{const I=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let S=await I();if(!s){for(;S<=n;)if(await sleep(1e3),s||(S=await I(),s))return;v({__type:TransactionStatus.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:c,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),u=this.getCancellationPromise(t);let y;try{const v=await Promise.race([u,d,a]);if(v.__type===TransactionStatus.PROCESSED)y=v.response;else throw new TransactionExpiredBlockheightExceededError(o)}finally{s=!0,c()}return y}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:o,nonceValue:s,signature:a}}){let c=!1;const d=new Promise(S=>{let P=s,x=null;const A=async()=>{try{const{context:O,value:z}=await this.getNonceAndContext(o,{commitment:e,minContextSlot:n});return x=O.slot,z?.nonce}catch{return P}};(async()=>{if(P=await A(),!c)for(;;){if(s!==P){S({__type:TransactionStatus.NONCE_INVALID,slotInWhichNonceDidAdvance:x});return}if(await sleep(2e3),c||(P=await A(),c))return}})()}),{abortConfirmation:u,confirmationPromise:y}=this.getTransactionConfirmationPromise({commitment:e,signature:a}),v=this.getCancellationPromise(t);let I;try{const S=await Promise.race([v,y,d]);if(S.__type===TransactionStatus.PROCESSED)I=S.response;else{let P;for(;;){const x=await this.getSignatureStatus(a);if(x==null)break;if(x.context.slot<(S.slotInWhichNonceDidAdvance??n)){await sleep(400);continue}P=x;break}if(P?.value){const x=e||"finalized",{confirmationStatus:A}=P.value;switch(x){case"processed":case"recent":if(A!=="processed"&&A!=="confirmed"&&A!=="finalized")throw new TransactionExpiredNonceInvalidError(a);break;case"confirmed":case"single":case"singleGossip":if(A!=="confirmed"&&A!=="finalized")throw new TransactionExpiredNonceInvalidError(a);break;case"finalized":case"max":case"root":if(A!=="finalized")throw new TransactionExpiredNonceInvalidError(a);break;default:}I={context:P.context,value:{err:P.value.err}}}else throw new TransactionExpiredNonceInvalidError(a)}}finally{c=!0,u()}return I}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const o=new Promise(d=>{let u=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{u=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>d({__type:TransactionStatus.TIMED_OUT,timeoutMs:u}),u)}),{abortConfirmation:s,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let c;try{const d=await Promise.race([a,o]);if(d.__type===TransactionStatus.PROCESSED)c=d.response;else throw new TransactionExpiredTimeoutError(t,d.timeoutMs/1e3)}finally{clearTimeout(n),s()}return c}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=create(e,jsonRpcResult(array(ContactInfoResult)));if("error"in t)throw new SolanaJSONRPCError(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),o=create(n,GetVoteAccounts);if("error"in o)throw new SolanaJSONRPCError(o.error,"failed to get vote accounts");return o.result}async getSlot(e){const{commitment:t,config:n}=extractCommitmentFromConfig(e),o=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlot",o),a=create(s,jsonRpcResult(number()));if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get slot");return a.result}async getSlotLeader(e){const{commitment:t,config:n}=extractCommitmentFromConfig(e),o=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlotLeader",o),a=create(s,jsonRpcResult(string()));if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get slot leader");return a.result}async getSlotLeaders(e,t){const n=[e,t],o=await this._rpcRequest("getSlotLeaders",n),s=create(o,jsonRpcResult(array(PublicKeyFromString)));if("error"in s)throw new SolanaJSONRPCError(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,t){const{context:n,value:o}=await this.getSignatureStatuses([e],t);assert$1(o.length===1);const s=o[0];return{context:n,value:s}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const o=await this._rpcRequest("getSignatureStatuses",n),s=create(o,GetSignatureStatusesRpcResult);if("error"in s)throw new SolanaJSONRPCError(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:t,config:n}=extractCommitmentFromConfig(e),o=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getTransactionCount",o),a=create(s,jsonRpcResult(number()));if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get transaction count");return a.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),o=create(n,GetInflationGovernorRpcResult);if("error"in o)throw new SolanaJSONRPCError(o.error,"failed to get inflation");return o.result}async getInflationReward(e,t,n){const{commitment:o,config:s}=extractCommitmentFromConfig(n),a=this._buildArgs([e.map(u=>u.toBase58())],o,void 0,{...s,epoch:t??s?.epoch}),c=await this._rpcRequest("getInflationReward",a),d=create(c,GetInflationRewardResult);if("error"in d)throw new SolanaJSONRPCError(d.error,"failed to get inflation reward");return d.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=create(e,GetInflationRateRpcResult);if("error"in t)throw new SolanaJSONRPCError(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=extractCommitmentFromConfig(e),o=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getEpochInfo",o),a=create(s,GetEpochInfoRpcResult);if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get epoch info");return a.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=create(e,GetEpochScheduleRpcResult);if("error"in t)throw new SolanaJSONRPCError(t.error,"failed to get epoch schedule");const n=t.result;return new EpochSchedule(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=create(e,GetLeaderScheduleRpcResult);if("error"in t)throw new SolanaJSONRPCError(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),o=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=create(o,GetMinimumBalanceForRentExemptionRpcResult);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=create(t,GetRecentPerformanceSamplesRpcResult);if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),o=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=create(o,GetFeeCalculatorRpcResult);if("error"in s)throw new SolanaJSONRPCError(s.error,"failed to get fee calculator");const{context:a,value:c}=s.result;return{context:a,value:c!==null?c.feeCalculator:null}}async getFeeForMessage(e,t){const n=toBuffer$1(e.serialize()).toString("base64"),o=this._buildArgs([n],t),s=await this._rpcRequest("getFeeForMessage",o),a=create(s,jsonRpcResultAndContext(nullable(number())));if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get fee for message");if(a.result===null)throw new Error("invalid blockhash");return a.result}async getRecentPrioritizationFees(e){const t=e?.lockedWritableAccounts?.map(a=>a.toBase58()),n=t?.length?[t]:[],o=await this._rpcRequest("getRecentPrioritizationFees",n),s=create(o,GetRecentPrioritizationFeesRpcResult);if("error"in s)throw new SolanaJSONRPCError(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=extractCommitmentFromConfig(e),o=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getLatestBlockhash",o),a=create(s,GetLatestBlockhashRpcResult);if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get latest blockhash");return a.result}async isBlockhashValid(e,t){const{commitment:n,config:o}=extractCommitmentFromConfig(t),s=this._buildArgs([e],n,void 0,o),a=await this._rpcRequest("isBlockhashValid",s),c=create(a,IsBlockhashValidRpcResult);if("error"in c)throw new SolanaJSONRPCError(c.error,"failed to determine if the blockhash `"+e+"`is valid");return c.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=create(e,jsonRpcResult(VersionResult));if("error"in t)throw new SolanaJSONRPCError(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=create(e,jsonRpcResult(string()));if("error"in t)throw new SolanaJSONRPCError(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:o}=extractCommitmentFromConfig(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,o),a=await this._rpcRequest("getBlock",s);try{switch(o?.transactionDetails){case"accounts":{const c=create(a,GetAccountsModeBlockRpcResult);if("error"in c)throw c.error;return c.result}case"none":{const c=create(a,GetNoneModeBlockRpcResult);if("error"in c)throw c.error;return c.result}default:{const c=create(a,GetBlockRpcResult);if("error"in c)throw c.error;const{result:d}=c;return d?{...d,transactions:d.transactions.map(({transaction:u,meta:y,version:v})=>({meta:y,transaction:{...u,message:versionedMessageFromResponse(v,u.message)},version:v}))}:null}}}catch(c){throw new SolanaJSONRPCError(c,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:o}=extractCommitmentFromConfig(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",o),a=await this._rpcRequest("getBlock",s);try{switch(o?.transactionDetails){case"accounts":{const c=create(a,GetParsedAccountsModeBlockRpcResult);if("error"in c)throw c.error;return c.result}case"none":{const c=create(a,GetParsedNoneModeBlockRpcResult);if("error"in c)throw c.error;return c.result}default:{const c=create(a,GetParsedBlockRpcResult);if("error"in c)throw c.error;return c.result}}}catch(c){throw new SolanaJSONRPCError(c,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:c,...d}=e;n=c,t=d}const o=this._buildArgs([],n,"base64",t),s=await this._rpcRequest("getBlockProduction",o),a=create(s,BlockProductionResponseStruct);if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get block production information");return a.result}async getTransaction(e,t){const{commitment:n,config:o}=extractCommitmentFromConfig(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,o),a=await this._rpcRequest("getTransaction",s),c=create(a,GetTransactionRpcResult);if("error"in c)throw new SolanaJSONRPCError(c.error,"failed to get transaction");const d=c.result;return d&&{...d,transaction:{...d.transaction,message:versionedMessageFromResponse(d.version,d.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:o}=extractCommitmentFromConfig(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",o),a=await this._rpcRequest("getTransaction",s),c=create(a,GetParsedTransactionRpcResult);if("error"in c)throw new SolanaJSONRPCError(c.error,"failed to get transaction");return c.result}async getParsedTransactions(e,t){const{commitment:n,config:o}=extractCommitmentFromConfig(t),s=e.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],n,"jsonParsed",o)}));return(await this._rpcBatchRequest(s)).map(d=>{const u=create(d,GetParsedTransactionRpcResult);if("error"in u)throw new SolanaJSONRPCError(u.error,"failed to get transactions");return u.result})}async getTransactions(e,t){const{commitment:n,config:o}=extractCommitmentFromConfig(t),s=e.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],n,void 0,o)}));return(await this._rpcBatchRequest(s)).map(d=>{const u=create(d,GetTransactionRpcResult);if("error"in u)throw new SolanaJSONRPCError(u.error,"failed to get transactions");const y=u.result;return y&&{...y,transaction:{...y.transaction,message:versionedMessageFromResponse(y.version,y.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),o=await this._rpcRequest("getBlock",n),s=create(o,GetConfirmedBlockRpcResult);if("error"in s)throw new SolanaJSONRPCError(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+e+" not found");const c={...a,transactions:a.transactions.map(({transaction:d,meta:u})=>{const y=new Message(d.message);return{meta:u,transaction:{...d,message:y}}})};return{...c,transactions:c.transactions.map(({transaction:d,meta:u})=>({meta:u,transaction:Transaction.populate(d.message,d.signatures)}))}}async getBlocks(e,t,n){const o=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),s=await this._rpcRequest("getBlocks",o),a=create(s,jsonRpcResult(array(number())));if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get blocks");return a.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),o=await this._rpcRequest("getBlock",n),s=create(o,GetBlockSignaturesRpcResult);if("error"in s)throw new SolanaJSONRPCError(s.error,"failed to get block");const a=s.result;if(!a)throw new Error("Block "+e+" not found");return a}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),o=await this._rpcRequest("getBlock",n),s=create(o,GetBlockSignaturesRpcResult);if("error"in s)throw new SolanaJSONRPCError(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+e+" not found");return a}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),o=await this._rpcRequest("getTransaction",n),s=create(o,GetTransactionRpcResult);if("error"in s)throw new SolanaJSONRPCError(s.error,"failed to get transaction");const a=s.result;if(!a)return a;const c=new Message(a.transaction.message),d=a.transaction.signatures;return{...a,transaction:Transaction.populate(c,d)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),o=await this._rpcRequest("getTransaction",n),s=create(o,GetParsedTransactionRpcResult);if("error"in s)throw new SolanaJSONRPCError(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,t){const n=e.map(a=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([a],t,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(a=>{const c=create(a,GetParsedTransactionRpcResult);if("error"in c)throw new SolanaJSONRPCError(c.error,"failed to get confirmed transactions");return c.result})}async getConfirmedSignaturesForAddress(e,t,n){let o={},s=await this.getFirstAvailableBlock();for(;!("until"in o)&&(t--,!(t<=0||t<s));)try{const d=await this.getConfirmedBlockSignatures(t,"finalized");d.signatures.length>0&&(o.until=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}let a=await this.getSlot("finalized");for(;!("before"in o)&&(n++,!(n>a));)try{const d=await this.getConfirmedBlockSignatures(n);d.signatures.length>0&&(o.before=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}return(await this.getConfirmedSignaturesForAddress2(e,o)).map(d=>d.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const o=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",o),a=create(s,GetConfirmedSignaturesForAddress2RpcResult);if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get confirmed signatures for address");return a.result}async getSignaturesForAddress(e,t,n){const o=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getSignaturesForAddress",o),a=create(s,GetSignaturesForAddressRpcResult);if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get signatures for address");return a.result}async getAddressLookupTable(e,t){const{context:n,value:o}=await this.getAccountInfoAndContext(e,t);let s=null;return o!==null&&(s=new AddressLookupTableAccount({key:e,state:AddressLookupTableAccount.deserialize(o.data)})),{context:n,value:s}}async getNonceAndContext(e,t){const{context:n,value:o}=await this.getAccountInfoAndContext(e,t);let s=null;return o!==null&&(s=NonceAccount.fromAccountData(o.data)),{context:n,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),o=create(n,RequestAirdropRpcResult);if("error"in o)throw new SolanaJSONRPCError(o.error,`airdrop to ${e.toBase58()} failed`);return o.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await sleep(100);const n=Date.now()-this._blockhashInfo.lastFetch>=BLOCKHASH_CACHE_TIMEOUT_MS;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let o=0;o<50;o++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await sleep(MS_PER_SLOT/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=extractCommitmentFromConfig(e),o=this._buildArgs([],t,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",o),a=create(s,jsonRpcResultAndContext(number()));if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get stake minimum delegation");return a.result}async simulateTransaction(e,t,n){if("message"in e){const x=e.serialize(),A=buffer.Buffer.from(x).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const O=t||{};O.encoding="base64","commitment"in O||(O.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(O.innerInstructions=t.innerInstructions);const z=[A,O],M=await this._rpcRequest("simulateTransaction",z),H=create(M,SimulatedTransactionResponseStruct);if("error"in H)throw new Error("failed to simulate transaction: "+H.error.message);return H.result}let o;if(e instanceof Transaction){let P=e;o=new Transaction,o.feePayer=P.feePayer,o.instructions=e.instructions,o.nonceInfo=P.nonceInfo,o.signatures=P.signatures}else o=Transaction.populate(e),o._message=o._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(o.nonceInfo&&s)o.sign(...s);else{let P=this._disableBlockhashCaching;for(;;){const x=await this._blockhashWithExpiryBlockHeight(P);if(o.lastValidBlockHeight=x.lastValidBlockHeight,o.recentBlockhash=x.blockhash,!s)break;if(o.sign(...s),!o.signature)throw new Error("!signature");const A=o.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(A)&&!this._blockhashInfo.transactionSignatures.includes(A)){this._blockhashInfo.simulatedSignatures.push(A);break}else P=!0}}const a=o._compile(),c=a.serialize(),u=o._serialize(c).toString("base64"),y={encoding:"base64",commitment:this.commitment};if(n){const P=(Array.isArray(n)?n:a.nonProgramIds()).map(x=>x.toBase58());y.accounts={encoding:"base64",addresses:P}}s&&(y.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(y.innerInstructions=t.innerInstructions);const v=[u,y],I=await this._rpcRequest("simulateTransaction",v),S=create(I,SimulatedTransactionResponseStruct);if("error"in S){let P;if("data"in S.error&&(P=S.error.data.logs,P&&Array.isArray(P))){const x=`
    `,A=x+P.join(x);console.error(S.error.message,A)}throw new SendTransactionError({action:"simulate",signature:"",transactionMessage:S.error.message,logs:P})}return S.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const a=e.serialize();return await this.sendRawTransaction(a,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const o=t;if(e.nonceInfo)e.sign(...o);else{let a=this._disableBlockhashCaching;for(;;){const c=await this._blockhashWithExpiryBlockHeight(a);if(e.lastValidBlockHeight=c.lastValidBlockHeight,e.recentBlockhash=c.blockhash,e.sign(...o),!e.signature)throw new Error("!signature");const d=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(d))a=!0;else{this._blockhashInfo.transactionSignatures.push(d);break}}}const s=e.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(e,t){const n=toBuffer$1(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},o=t&&t.skipPreflight,s=o===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),o&&(n.skipPreflight=o),s&&(n.preflightCommitment=s);const a=[e,n],c=await this._rpcRequest("sendTransaction",a),d=create(c,SendTransactionRpcResult);if("error"in d){let u;throw"data"in d.error&&(u=d.error.data.logs),new SendTransactionError({action:o?"send":"simulate",signature:"",transactionMessage:d.error.message,logs:u})}return d.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){const n=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const o=this._subscriptionStateChangeCallbacksByHash[e];o&&o.forEach(s=>{try{s(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){var s;const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const o=(s=this._subscriptionStateChangeCallbacksByHash)[n]||(s[n]=new Set);return o.add(t),()=>{o.delete(t),o.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const o=this._subscriptionsByHash[n];if(o!==void 0)switch(o.state){case"pending":case"unsubscribed":if(o.callbacks.size===0){delete this._subscriptionsByHash[n],o.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[o.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:a}=o;try{this._setSubscription(n,{...o,state:"subscribing"});const c=await this._rpcWebSocket.call(a,s);this._setSubscription(n,{...o,serverSubscriptionId:c,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[c]=o.callbacks,await this._updateSubscriptions()}catch(c){if(console.error(`Received ${c instanceof Error?"":"JSON-RPC "}error calling \`${a}\``,{args:s,error:c}),!t())return;this._setSubscription(n,{...o,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":o.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:a}=o;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...o,state:"unsubscribing"}),this._setSubscription(n,{...o,state:"unsubscribing"});try{await this._rpcWebSocket.call(a,[s])}catch(c){if(c instanceof Error&&console.error(`${a} error:`,c.message),!t())return;this._setSubscription(n,{...o,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...o,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(o=>{try{o(...t)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=create(e,AccountNotificationResult);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,o=fastStableStringify([e.method,t]),s=this._subscriptionsByHash[o];return s===void 0?this._subscriptionsByHash[o]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=o,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const a=this._subscriptionsByHash[o];assert$1(a!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),a.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const{commitment:o,config:s}=extractCommitmentFromConfig(n),a=this._buildArgs([e.toBase58()],o||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},a)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=create(e,ProgramAccountNotificationResult);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,o){const{commitment:s,config:a}=extractCommitmentFromConfig(n),c=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",a||(o?{filters:applyDefaultMemcmpEncodingToFilters(o)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},c)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const o=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},o)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=create(e,LogsNotificationResult);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=create(e,SlotNotificationResult);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=create(e,SlotUpdateNotificationResult);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,o){const s=t||this._commitment;if(s||n||o){let a={};n&&(a.encoding=n),s&&(a.commitment=s),o&&(a=Object.assign(a,o)),e.push(a)}return e}_buildArgsAtLeastConfirmed(e,t,n,o){const s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,o)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=create(e,SignatureNotificationResult);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const o=this._buildArgs([e],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(a,c)=>{if(a.type==="status"){t(a.result,c);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return s}onSignatureWithOptions(e,t,n){const{commitment:o,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},a=this._buildArgs([e],o,void 0,s),c=this._makeSubscription({callback:(d,u)=>{t(d,u);try{this.removeSignatureListener(c)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return c}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=create(e,RootNotificationResult);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Keypair{constructor(e){this._keypair=void 0,this._keypair=e??generateKeypair()}static generate(){return new Keypair(generateKeypair())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const o=e.slice(0,32),s=getPublicKey(o);for(let a=0;a<32;a++)if(n[a]!==s[a])throw new Error("provided secretKey is invalid")}return new Keypair({publicKey:n,secretKey:e})}static fromSeed(e){const t=getPublicKey(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new Keypair({publicKey:t,secretKey:n})}get publicKey(){return new PublicKey$1(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const LOOKUP_TABLE_INSTRUCTION_LAYOUTS=Object.freeze({CreateLookupTable:{index:0,layout:struct([u32("instruction"),u64$1("recentSlot"),u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:struct([u32("instruction")])},ExtendLookupTable:{index:2,layout:struct([u32("instruction"),u64$1(),seq(publicKey(),offset(u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:struct([u32("instruction")])},CloseLookupTable:{index:4,layout:struct([u32("instruction")])}});class AddressLookupTableInstruction{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=u32("instruction").decode(e.data);let o;for(const[s,a]of Object.entries(LOOKUP_TABLE_INSTRUCTION_LAYOUTS))if(a.index==n){o=s;break}if(!o)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return o}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=decodeData$1(LOOKUP_TABLE_INSTRUCTION_LAYOUTS.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=decodeData$1(LOOKUP_TABLE_INSTRUCTION_LAYOUTS.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(n=>new PublicKey$1(n))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(AddressLookupTableProgram.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class AddressLookupTableProgram{constructor(){}static createLookupTable(e){const[t,n]=PublicKey$1.findProgramAddressSync([e.authority.toBuffer(),toBufferLE_1(BigInt(e.recentSlot),8)],this.programId),o=LOOKUP_TABLE_INSTRUCTION_LAYOUTS.CreateLookupTable,s=encodeData(o,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:SystemProgram.programId,isSigner:!1,isWritable:!1}];return[new TransactionInstruction({programId:this.programId,keys:a,data:s}),t]}static freezeLookupTable(e){const t=LOOKUP_TABLE_INSTRUCTION_LAYOUTS.FreezeLookupTable,n=encodeData(t),o=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new TransactionInstruction({programId:this.programId,keys:o,data:n})}static extendLookupTable(e){const t=LOOKUP_TABLE_INSTRUCTION_LAYOUTS.ExtendLookupTable,n=encodeData(t,{addresses:e.addresses.map(s=>s.toBytes())}),o=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&o.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:SystemProgram.programId,isSigner:!1,isWritable:!1}),new TransactionInstruction({programId:this.programId,keys:o,data:n})}static deactivateLookupTable(e){const t=LOOKUP_TABLE_INSTRUCTION_LAYOUTS.DeactivateLookupTable,n=encodeData(t),o=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new TransactionInstruction({programId:this.programId,keys:o,data:n})}static closeLookupTable(e){const t=LOOKUP_TABLE_INSTRUCTION_LAYOUTS.CloseLookupTable,n=encodeData(t),o=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new TransactionInstruction({programId:this.programId,keys:o,data:n})}}AddressLookupTableProgram.programId=new PublicKey$1("AddressLookupTab1e1111111111111111111111111");class ComputeBudgetInstruction{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=u8("instruction").decode(e.data);let o;for(const[s,a]of Object.entries(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS))if(a.index==n){o=s;break}if(!o)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return o}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:n}=decodeData$1(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestUnits,e.data);return{units:t,additionalFee:n}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=decodeData$1(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=decodeData$1(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=decodeData$1(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(ComputeBudgetProgram.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const COMPUTE_BUDGET_INSTRUCTION_LAYOUTS=Object.freeze({RequestUnits:{index:0,layout:struct([u8("instruction"),u32("units"),u32("additionalFee")])},RequestHeapFrame:{index:1,layout:struct([u8("instruction"),u32("bytes")])},SetComputeUnitLimit:{index:2,layout:struct([u8("instruction"),u32("units")])},SetComputeUnitPrice:{index:3,layout:struct([u8("instruction"),u64$1("microLamports")])}});class ComputeBudgetProgram{constructor(){}static requestUnits(e){const t=COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestUnits,n=encodeData(t,e);return new TransactionInstruction({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){const t=COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestHeapFrame,n=encodeData(t,e);return new TransactionInstruction({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){const t=COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitLimit,n=encodeData(t,e);return new TransactionInstruction({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){const t=COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitPrice,n=encodeData(t,{microLamports:BigInt(e.microLamports)});return new TransactionInstruction({keys:[],programId:this.programId,data:n})}}ComputeBudgetProgram.programId=new PublicKey$1("ComputeBudget111111111111111111111111111111");const PRIVATE_KEY_BYTES$1=64,PUBLIC_KEY_BYTES$1=32,SIGNATURE_BYTES=64,ED25519_INSTRUCTION_LAYOUT=struct([u8("numSignatures"),u8("padding"),u16("signatureOffset"),u16("signatureInstructionIndex"),u16("publicKeyOffset"),u16("publicKeyInstructionIndex"),u16("messageDataOffset"),u16("messageDataSize"),u16("messageInstructionIndex")]);class Ed25519Program{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:o,instructionIndex:s}=e;assert$1(t.length===PUBLIC_KEY_BYTES$1,`Public Key must be ${PUBLIC_KEY_BYTES$1} bytes but received ${t.length} bytes`),assert$1(o.length===SIGNATURE_BYTES,`Signature must be ${SIGNATURE_BYTES} bytes but received ${o.length} bytes`);const a=ED25519_INSTRUCTION_LAYOUT.span,c=a+t.length,d=c+o.length,u=1,y=buffer.Buffer.alloc(d+n.length),v=s??65535;return ED25519_INSTRUCTION_LAYOUT.encode({numSignatures:u,padding:0,signatureOffset:c,signatureInstructionIndex:v,publicKeyOffset:a,publicKeyInstructionIndex:v,messageDataOffset:d,messageDataSize:n.length,messageInstructionIndex:v},y),y.fill(t,a),y.fill(o,c),y.fill(n,d),new TransactionInstruction({keys:[],programId:Ed25519Program.programId,data:y})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:o}=e;assert$1(t.length===PRIVATE_KEY_BYTES$1,`Private key must be ${PRIVATE_KEY_BYTES$1} bytes but received ${t.length} bytes`);try{const s=Keypair.fromSecretKey(t),a=s.publicKey.toBytes(),c=sign(n,s.secretKey);return this.createInstructionWithPublicKey({publicKey:a,message:n,signature:c,instructionIndex:o})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}Ed25519Program.programId=new PublicKey$1("Ed25519SigVerify111111111111111111111111111");const ecdsaSign=(r,e)=>{const t=secp256k1.sign(r,e);return[t.toCompactRawBytes(),t.recovery]};secp256k1.utils.isValidPrivateKey;const publicKeyCreate=secp256k1.getPublicKey,PRIVATE_KEY_BYTES=32,ETHEREUM_ADDRESS_BYTES=20,PUBLIC_KEY_BYTES=64,SIGNATURE_OFFSETS_SERIALIZED_SIZE=11,SECP256K1_INSTRUCTION_LAYOUT=struct([u8("numSignatures"),u16("signatureOffset"),u8("signatureInstructionIndex"),u16("ethAddressOffset"),u8("ethAddressInstructionIndex"),u16("messageDataOffset"),u16("messageDataSize"),u8("messageInstructionIndex"),blob(20,"ethAddress"),blob(64,"signature"),u8("recoveryId")]);class Secp256k1Program{constructor(){}static publicKeyToEthAddress(e){assert$1(e.length===PUBLIC_KEY_BYTES,`Public key must be ${PUBLIC_KEY_BYTES} bytes but received ${e.length} bytes`);try{return buffer.Buffer.from(keccak_256(toBuffer$1(e))).slice(-ETHEREUM_ADDRESS_BYTES)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:o,recoveryId:s,instructionIndex:a}=e;return Secp256k1Program.createInstructionWithEthAddress({ethAddress:Secp256k1Program.publicKeyToEthAddress(t),message:n,signature:o,recoveryId:s,instructionIndex:a})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:n,signature:o,recoveryId:s,instructionIndex:a=0}=e;let c;typeof t=="string"?t.startsWith("0x")?c=buffer.Buffer.from(t.substr(2),"hex"):c=buffer.Buffer.from(t,"hex"):c=t,assert$1(c.length===ETHEREUM_ADDRESS_BYTES,`Address must be ${ETHEREUM_ADDRESS_BYTES} bytes but received ${c.length} bytes`);const d=1+SIGNATURE_OFFSETS_SERIALIZED_SIZE,u=d,y=d+c.length,v=y+o.length+1,I=1,S=buffer.Buffer.alloc(SECP256K1_INSTRUCTION_LAYOUT.span+n.length);return SECP256K1_INSTRUCTION_LAYOUT.encode({numSignatures:I,signatureOffset:y,signatureInstructionIndex:a,ethAddressOffset:u,ethAddressInstructionIndex:a,messageDataOffset:v,messageDataSize:n.length,messageInstructionIndex:a,signature:toBuffer$1(o),ethAddress:toBuffer$1(c),recoveryId:s},S),S.fill(toBuffer$1(n),SECP256K1_INSTRUCTION_LAYOUT.span),new TransactionInstruction({keys:[],programId:Secp256k1Program.programId,data:S})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:o}=e;assert$1(t.length===PRIVATE_KEY_BYTES,`Private key must be ${PRIVATE_KEY_BYTES} bytes but received ${t.length} bytes`);try{const s=toBuffer$1(t),a=publicKeyCreate(s,!1).slice(1),c=buffer.Buffer.from(keccak_256(toBuffer$1(n))),[d,u]=ecdsaSign(c,s);return this.createInstructionWithPublicKey({publicKey:a,message:n,signature:d,recoveryId:u,instructionIndex:o})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}Secp256k1Program.programId=new PublicKey$1("KeccakSecp256k11111111111111111111111111111");var _Lockup;const STAKE_CONFIG_ID=new PublicKey$1("StakeConfig11111111111111111111111111111111");class Authorized{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class Lockup{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}_Lockup=Lockup;Lockup.default=new _Lockup(0,0,PublicKey$1.default);class StakeInstruction{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=u32("instruction").decode(e.data);let o;for(const[s,a]of Object.entries(STAKE_INSTRUCTION_LAYOUTS))if(a.index==n){o=s;break}if(!o)throw new Error("Instruction type incorrect; not a StakeInstruction");return o}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:n}=decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new Authorized(new PublicKey$1(t.staker),new PublicKey$1(t.withdrawer)),lockup:new Lockup(n.unixTimestamp,n.epoch,new PublicKey$1(n.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:n}=decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Authorize,e.data),o={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new PublicKey$1(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(o.custodianPubkey=e.keys[3].pubkey),o}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:n,authoritySeed:o,authorityOwner:s}=decodeData$1(STAKE_INSTRUCTION_LAYOUTS.AuthorizeWithSeed,e.data),a={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:o,authorityOwner:new PublicKey$1(s),newAuthorizedPubkey:new PublicKey$1(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(a.custodianPubkey=e.keys[3].pubkey),a}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Withdraw,e.data),n={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(n.custodianPubkey=e.keys[5].pubkey),n}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(StakeProgram.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const STAKE_INSTRUCTION_LAYOUTS=Object.freeze({Initialize:{index:0,layout:struct([u32("instruction"),authorized(),lockup()])},Authorize:{index:1,layout:struct([u32("instruction"),publicKey("newAuthorized"),u32("stakeAuthorizationType")])},Delegate:{index:2,layout:struct([u32("instruction")])},Split:{index:3,layout:struct([u32("instruction"),ns64("lamports")])},Withdraw:{index:4,layout:struct([u32("instruction"),ns64("lamports")])},Deactivate:{index:5,layout:struct([u32("instruction")])},Merge:{index:7,layout:struct([u32("instruction")])},AuthorizeWithSeed:{index:8,layout:struct([u32("instruction"),publicKey("newAuthorized"),u32("stakeAuthorizationType"),rustString("authoritySeed"),publicKey("authorityOwner")])}}),StakeAuthorizationLayout=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class StakeProgram{constructor(){}static initialize(e){const{stakePubkey:t,authorized:n,lockup:o}=e,s=o||Lockup.default,a=STAKE_INSTRUCTION_LAYOUTS.Initialize,c=encodeData(a,{authorized:{staker:toBuffer$1(n.staker.toBuffer()),withdrawer:toBuffer$1(n.withdrawer.toBuffer())},lockup:{unixTimestamp:s.unixTimestamp,epoch:s.epoch,custodian:toBuffer$1(s.custodian.toBuffer())}}),d={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:this.programId,data:c};return new TransactionInstruction(d)}static createAccountWithSeed(e){const t=new Transaction;t.add(SystemProgram.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:o,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:o,lockup:s}))}static createAccount(e){const t=new Transaction;t.add(SystemProgram.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:o,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:o,lockup:s}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:n,votePubkey:o}=e,s=STAKE_INSTRUCTION_LAYOUTS.Delegate,a=encodeData(s);return new Transaction().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:STAKE_CONFIG_ID,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static authorize(e){const{stakePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:o,stakeAuthorizationType:s,custodianPubkey:a}=e,c=STAKE_INSTRUCTION_LAYOUTS.Authorize,d=encodeData(c,{newAuthorized:toBuffer$1(o.toBuffer()),stakeAuthorizationType:s.index}),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return a&&u.push({pubkey:a,isSigner:!0,isWritable:!1}),new Transaction().add({keys:u,programId:this.programId,data:d})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:n,authoritySeed:o,authorityOwner:s,newAuthorizedPubkey:a,stakeAuthorizationType:c,custodianPubkey:d}=e,u=STAKE_INSTRUCTION_LAYOUTS.AuthorizeWithSeed,y=encodeData(u,{newAuthorized:toBuffer$1(a.toBuffer()),stakeAuthorizationType:c.index,authoritySeed:o,authorityOwner:toBuffer$1(s.toBuffer())}),v=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1}];return d&&v.push({pubkey:d,isSigner:!0,isWritable:!1}),new Transaction().add({keys:v,programId:this.programId,data:y})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:o,lamports:s}=e,a=STAKE_INSTRUCTION_LAYOUTS.Split,c=encodeData(a,{lamports:s});return new TransactionInstruction({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:c})}static split(e,t){const n=new Transaction;return n.add(SystemProgram.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),n.add(this.splitInstruction(e))}static splitWithSeed(e,t){const{stakePubkey:n,authorizedPubkey:o,splitStakePubkey:s,basePubkey:a,seed:c,lamports:d}=e,u=new Transaction;return u.add(SystemProgram.allocate({accountPubkey:s,basePubkey:a,seed:c,space:this.space,programId:this.programId})),t&&t>0&&u.add(SystemProgram.transfer({fromPubkey:e.authorizedPubkey,toPubkey:s,lamports:t})),u.add(this.splitInstruction({stakePubkey:n,authorizedPubkey:o,splitStakePubkey:s,lamports:d}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:n,authorizedPubkey:o}=e,s=STAKE_INSTRUCTION_LAYOUTS.Merge,a=encodeData(s);return new Transaction().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:n,toPubkey:o,lamports:s,custodianPubkey:a}=e,c=STAKE_INSTRUCTION_LAYOUTS.Withdraw,d=encodeData(c,{lamports:s}),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return a&&u.push({pubkey:a,isSigner:!0,isWritable:!1}),new Transaction().add({keys:u,programId:this.programId,data:d})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:n}=e,o=STAKE_INSTRUCTION_LAYOUTS.Deactivate,s=encodeData(o);return new Transaction().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}}StakeProgram.programId=new PublicKey$1("Stake11111111111111111111111111111111111111");StakeProgram.space=200;class VoteInit{constructor(e,t,n,o){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=n,this.commission=o}}class VoteInstruction{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=u32("instruction").decode(e.data);let o;for(const[s,a]of Object.entries(VOTE_INSTRUCTION_LAYOUTS))if(a.index==n){o=s;break}if(!o)throw new Error("Instruction type incorrect; not a VoteInstruction");return o}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=decodeData$1(VOTE_INSTRUCTION_LAYOUTS.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new VoteInit(new PublicKey$1(t.nodePubkey),new PublicKey$1(t.authorizedVoter),new PublicKey$1(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:n}=decodeData$1(VOTE_INSTRUCTION_LAYOUTS.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new PublicKey$1(t),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:n,newAuthorized:o,voteAuthorizationType:s}}=decodeData$1(VOTE_INSTRUCTION_LAYOUTS.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new PublicKey$1(t),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new PublicKey$1(o),voteAuthorizationType:{index:s},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=decodeData$1(VOTE_INSTRUCTION_LAYOUTS.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(VoteProgram.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const VOTE_INSTRUCTION_LAYOUTS=Object.freeze({InitializeAccount:{index:0,layout:struct([u32("instruction"),voteInit()])},Authorize:{index:1,layout:struct([u32("instruction"),publicKey("newAuthorized"),u32("voteAuthorizationType")])},Withdraw:{index:3,layout:struct([u32("instruction"),ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:struct([u32("instruction")])},AuthorizeWithSeed:{index:10,layout:struct([u32("instruction"),voteAuthorizeWithSeedArgs()])}}),VoteAuthorizationLayout=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class VoteProgram{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:n,voteInit:o}=e,s=VOTE_INSTRUCTION_LAYOUTS.InitializeAccount,a=encodeData(s,{voteInit:{nodePubkey:toBuffer$1(o.nodePubkey.toBuffer()),authorizedVoter:toBuffer$1(o.authorizedVoter.toBuffer()),authorizedWithdrawer:toBuffer$1(o.authorizedWithdrawer.toBuffer()),commission:o.commission}}),c={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a};return new TransactionInstruction(c)}static createAccount(e){const t=new Transaction;return t.add(SystemProgram.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:o,voteAuthorizationType:s}=e,a=VOTE_INSTRUCTION_LAYOUTS.Authorize,c=encodeData(a,{newAuthorized:toBuffer$1(o.toBuffer()),voteAuthorizationType:s.index}),d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new Transaction().add({keys:d,programId:this.programId,data:c})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:o,newAuthorizedPubkey:s,voteAuthorizationType:a,votePubkey:c}=e,d=VOTE_INSTRUCTION_LAYOUTS.AuthorizeWithSeed,u=encodeData(d,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:toBuffer$1(n.toBuffer()),currentAuthorityDerivedKeySeed:o,newAuthorized:toBuffer$1(s.toBuffer()),voteAuthorizationType:a.index}}),y=[{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new Transaction().add({keys:y,programId:this.programId,data:u})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,lamports:o,toPubkey:s}=e,a=VOTE_INSTRUCTION_LAYOUTS.Withdraw,c=encodeData(a,{lamports:o}),d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new Transaction().add({keys:d,programId:this.programId,data:c})}static safeWithdraw(e,t,n){if(e.lamports>t-n)throw new Error("Withdraw will leave vote account with insufficient funds.");return VoteProgram.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,nodePubkey:o}=e,s=VOTE_INSTRUCTION_LAYOUTS.UpdateValidatorIdentity,a=encodeData(s),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new Transaction().add({keys:c,programId:this.programId,data:a})}}VoteProgram.programId=new PublicKey$1("Vote111111111111111111111111111111111111111");VoteProgram.space=3762;const VALIDATOR_INFO_KEY=new PublicKey$1("Va1idator1nfo111111111111111111111111111111"),InfoString=type({name:string(),website:optional(string()),details:optional(string()),iconUrl:optional(string()),keybaseUsername:optional(string())});class ValidatorInfo{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(decodeLength(t)!==2)return null;const o=[];for(let s=0;s<2;s++){const a=new PublicKey$1(guardedSplice(t,0,PUBLIC_KEY_LENGTH)),c=guardedShift(t)===1;o.push({publicKey:a,isSigner:c})}if(o[0].publicKey.equals(VALIDATOR_INFO_KEY)&&o[1].isSigner){const s=rustString().decode(buffer.Buffer.from(t)),a=JSON.parse(s);return assert$2(a,InfoString),new ValidatorInfo(o[1].publicKey,a)}return null}}const VOTE_PROGRAM_ID=new PublicKey$1("Vote111111111111111111111111111111111111111"),VoteAccountLayout=struct([publicKey("nodePubkey"),publicKey("authorizedWithdrawer"),u8("commission"),nu64(),seq(struct([nu64("slot"),u32("confirmationCount")]),offset(u32(),-8),"votes"),u8("rootSlotValid"),nu64("rootSlot"),nu64(),seq(struct([nu64("epoch"),publicKey("authorizedVoter")]),offset(u32(),-8),"authorizedVoters"),struct([seq(struct([publicKey("authorizedPubkey"),nu64("epochOfLastAuthorizedSwitch"),nu64("targetEpoch")]),32,"buf"),nu64("idx"),u8("isEmpty")],"priorVoters"),nu64(),seq(struct([nu64("epoch"),nu64("credits"),nu64("prevCredits")]),offset(u32(),-8),"epochCredits"),struct([nu64("slot"),nu64("timestamp")],"lastTimestamp")]);class VoteAccount{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const n=VoteAccountLayout.decode(toBuffer$1(e),4);let o=n.rootSlot;return n.rootSlotValid||(o=null),new VoteAccount({nodePubkey:new PublicKey$1(n.nodePubkey),authorizedWithdrawer:new PublicKey$1(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:o,authorizedVoters:n.authorizedVoters.map(parseAuthorizedVoter),priorVoters:getPriorVoters(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}}function parseAuthorizedVoter({authorizedVoter:r,epoch:e}){return{epoch:e,authorizedVoter:new PublicKey$1(r)}}function parsePriorVoters({authorizedPubkey:r,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new PublicKey$1(r),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function getPriorVoters({buf:r,idx:e,isEmpty:t}){return t?[]:[...r.slice(e+1).map(parsePriorVoters),...r.slice(0,e).map(parsePriorVoters)]}const endpoint={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function clusterApiUrl(r,e){const t=e===!1?"http":"https";if(!r)return endpoint[t].devnet;const n=endpoint[t][r];if(!n)throw new Error(`Unknown ${t} cluster: ${r}`);return n}async function sendAndConfirmRawTransaction(r,e,t,n){let o,s;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(o=t,s=n):s=t;const a=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},c=await r.sendRawTransaction(e,a),d=s&&s.commitment,y=(await(o?r.confirmTransaction(o,d):r.confirmTransaction(c,d))).value;if(y.err)throw c!=null?new SendTransactionError({action:a?.skipPreflight?"send":"simulate",signature:c,transactionMessage:`Status: (${JSON.stringify(y)})`}):new Error(`Raw transaction ${c} failed (${JSON.stringify(y)})`);return c}const LAMPORTS_PER_SOL=1e9,index_browser_esm=Object.freeze(Object.defineProperty({__proto__:null,Account,AddressLookupTableAccount,AddressLookupTableInstruction,AddressLookupTableProgram,Authorized,BLOCKHASH_CACHE_TIMEOUT_MS,BPF_LOADER_DEPRECATED_PROGRAM_ID,BPF_LOADER_PROGRAM_ID,BpfLoader,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS,ComputeBudgetInstruction,ComputeBudgetProgram,Connection,Ed25519Program,Enum,EpochSchedule,FeeCalculatorLayout,Keypair,LAMPORTS_PER_SOL,LOOKUP_TABLE_INSTRUCTION_LAYOUTS,Loader,Lockup,MAX_SEED_LENGTH,Message,MessageAccountKeys,MessageV0,NONCE_ACCOUNT_LENGTH,NonceAccount,PACKET_DATA_SIZE,PUBLIC_KEY_LENGTH,PublicKey:PublicKey$1,SIGNATURE_LENGTH_IN_BYTES,SOLANA_SCHEMA,STAKE_CONFIG_ID,STAKE_INSTRUCTION_LAYOUTS,SYSTEM_INSTRUCTION_LAYOUTS,SYSVAR_CLOCK_PUBKEY,SYSVAR_EPOCH_SCHEDULE_PUBKEY,SYSVAR_INSTRUCTIONS_PUBKEY,SYSVAR_RECENT_BLOCKHASHES_PUBKEY,SYSVAR_RENT_PUBKEY,SYSVAR_REWARDS_PUBKEY,SYSVAR_SLOT_HASHES_PUBKEY,SYSVAR_SLOT_HISTORY_PUBKEY,SYSVAR_STAKE_HISTORY_PUBKEY,Secp256k1Program,SendTransactionError,SolanaJSONRPCError,SolanaJSONRPCErrorCode,StakeAuthorizationLayout,StakeInstruction,StakeProgram,Struct,SystemInstruction,SystemProgram,Transaction,TransactionExpiredBlockheightExceededError,TransactionExpiredNonceInvalidError,TransactionExpiredTimeoutError,TransactionInstruction,TransactionMessage,TransactionStatus,VALIDATOR_INFO_KEY,VERSION_PREFIX_MASK,VOTE_PROGRAM_ID,ValidatorInfo,VersionedMessage,VersionedTransaction,VoteAccount,VoteAuthorizationLayout,VoteInit,VoteInstruction,VoteProgram,clusterApiUrl,sendAndConfirmRawTransaction,sendAndConfirmTransaction},Symbol.toStringTag,{value:"Module"})),CONFIG={RPC:{ENDPOINT:"https://api.mainnet-beta.solana.com",WSS_ENDPOINT:"wss://api.mainnet-beta.solana.com",BACKUP_ENDPOINTS:["https://solana-api.projectserum.com","https://rpc.ankr.com/solana"],CONNECTION_TIMEOUT:3e4,MAX_RETRIES:3,RETRY_DELAY:1e3},TRADING:{MIN_PROFIT_THRESHOLD:.013,MAX_SLIPPAGE:.003,MIN_TRADE_SIZE:.1,MAX_TRADE_SIZE:.3,TRADES_PER_DAY:2e3},SECURITY:{MAX_TRANSACTION_SIZE:.3,DAILY_TRANSACTION_LIMIT:600},MONITORING:{METRICS_INTERVAL:1e3,HEALTH_CHECK_INTERVAL:3e4,TRANSACTION_BATCH_SIZE:100}},eventEmitter=new EventEmitter$1;class ConnectionService{constructor(){this.connection=null,this.currentEndpoint=null,this.isConnected=!1,this.healthCheckInterval=null,this.isInitialized=!1}async initialize(){try{return logger.info("Initializing connection service..."),await this.connect(),this.isInitialized=!0,!0}catch(e){throw logger.error("Failed to initialize connection service:",e),e}}async connect(){try{return logger.info("Connecting to Solana network..."),await this.establishConnection(),this.startHealthCheck(),this.connection}catch(e){throw logger.error("Failed to connect:",e),e}}async establishConnection(){const e=[CONFIG.RPC.ENDPOINT,...CONFIG.RPC.BACKUP_ENDPOINTS];for(const t of e)try{this.connection=new Connection(t,{commitment:"confirmed",wsEndpoint:CONFIG.RPC.WSS_ENDPOINT,confirmTransactionInitialTimeout:CONFIG.RPC.CONNECTION_TIMEOUT}),await this.connection.getBlockHeight(),this.currentEndpoint=t,this.isConnected=!0,logger.info("Connected to Solana network",{endpoint:t}),eventEmitter.emit("connection:established");return}catch(n){logger.warn(`Failed to connect to ${t}:`,n)}throw new Error("Failed to connect to any endpoint")}getConnection(){if(!this.isConnected||!this.connection)throw new Error("Not connected to Solana network");return this.connection}}const connectionService=new ConnectionService;var lib$1={},market={},Layout$1={},define_Buffer_default$f=["buffer","Buffer"];/**
 * Support for translating between Buffer instances and JavaScript
 * native types.
 *
 * {@link module:Layout~Layout|Layout} is the basis of a class
 * hierarchy that associates property names with sequences of encoded
 * bytes.
 *
 * Layouts are supported for these scalar (numeric) types:
 * * {@link module:Layout~UInt|Unsigned integers in little-endian
 *   format} with {@link module:Layout.u8|8-bit}, {@link
 *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},
 *   {@link module:Layout.u32|32-bit}, {@link
 *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}
 *   representation ranges;
 * * {@link module:Layout~UIntBE|Unsigned integers in big-endian
 *   format} with {@link module:Layout.u16be|16-bit}, {@link
 *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},
 *   {@link module:Layout.u40be|40-bit}, and {@link
 *   module:Layout.u48be|48-bit} representation ranges;
 * * {@link module:Layout~Int|Signed integers in little-endian
 *   format} with {@link module:Layout.s8|8-bit}, {@link
 *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},
 *   {@link module:Layout.s32|32-bit}, {@link
 *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}
 *   representation ranges;
 * * {@link module:Layout~IntBE|Signed integers in big-endian format}
 *   with {@link module:Layout.s16be|16-bit}, {@link
 *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},
 *   {@link module:Layout.s40be|40-bit}, and {@link
 *   module:Layout.s48be|48-bit} representation ranges;
 * * 64-bit integral values that decode to an exact (if magnitude is
 *   less than 2^53) or nearby integral Number in {@link
 *   module:Layout.nu64|unsigned little-endian}, {@link
 *   module:Layout.nu64be|unsigned big-endian}, {@link
 *   module:Layout.ns64|signed little-endian}, and {@link
 *   module:Layout.ns64be|unsigned big-endian} encodings;
 * * 32-bit floating point values with {@link
 *   module:Layout.f32|little-endian} and {@link
 *   module:Layout.f32be|big-endian} representations;
 * * 64-bit floating point values with {@link
 *   module:Layout.f64|little-endian} and {@link
 *   module:Layout.f64be|big-endian} representations;
 * * {@link module:Layout.const|Constants} that take no space in the
 *   encoded expression.
 *
 * and for these aggregate types:
 * * {@link module:Layout.seq|Sequence}s of instances of a {@link
 *   module:Layout~Layout|Layout}, with JavaScript representation as
 *   an Array and constant or data-dependent {@link
 *   module:Layout~Sequence#count|length};
 * * {@link module:Layout.struct|Structure}s that aggregate a
 *   heterogeneous sequence of {@link module:Layout~Layout|Layout}
 *   instances, with JavaScript representation as an Object;
 * * {@link module:Layout.union|Union}s that support multiple {@link
 *   module:Layout~VariantLayout|variant layouts} over a fixed
 *   (padded) or variable (not padded) span of bytes, using an
 *   unsigned integer at the start of the data or a separate {@link
 *   module:Layout.unionLayoutDiscriminator|layout element} to
 *   determine which layout to use when interpreting the buffer
 *   contents;
 * * {@link module:Layout.bits|BitStructure}s that contain a sequence
 *   of individual {@link
 *   module:Layout~BitStructure#addField|BitField}s packed into an 8,
 *   16, 24, or 32-bit unsigned integer starting at the least- or
 *   most-significant bit;
 * * {@link module:Layout.cstr|C strings} of varying length;
 * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link
 *   module:Layout~Blob#length|length} raw data.
 *
 * All {@link module:Layout~Layout|Layout} instances are immutable
 * after construction, to prevent internal state from becoming
 * inconsistent.
 *
 * @local Layout
 * @local ExternalLayout
 * @local GreedyCount
 * @local OffsetLayout
 * @local UInt
 * @local UIntBE
 * @local Int
 * @local IntBE
 * @local NearUInt64
 * @local NearUInt64BE
 * @local NearInt64
 * @local NearInt64BE
 * @local Float
 * @local FloatBE
 * @local Double
 * @local DoubleBE
 * @local Sequence
 * @local Structure
 * @local UnionDiscriminator
 * @local UnionLayoutDiscriminator
 * @local Union
 * @local VariantLayout
 * @local BitStructure
 * @local BitField
 * @local Boolean
 * @local Blob
 * @local CString
 * @local Constant
 * @local bindConstructorLayout
 * @module Layout
 * @license MIT
 * @author Peter A. Bigot
 * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}
 */class Layout{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}Layout$1.Layout=Layout;function nameWithProperty(r,e){return e.property?r+"["+e.property+"]":r}Layout$1.nameWithProperty=nameWithProperty;function bindConstructorLayout(r,e){if(typeof r!="function")throw new TypeError("Class must be constructor");if(r.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof Layout))throw new TypeError("layout must be a Layout");if(e.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");r.layout_=e,e.boundConstructor_=r,e.makeDestinationObject=()=>new r,Object.defineProperty(r.prototype,"encode",{value:function(t,n){return e.encode(this,t,n)},writable:!0}),Object.defineProperty(r,"decode",{value:function(t,n){return e.decode(t,n)},writable:!0})}Layout$1.bindConstructorLayout=bindConstructorLayout;class ExternalLayout extends Layout{isCount(){throw new Error("ExternalLayout is abstract")}}class GreedyCount extends ExternalLayout{constructor(e,t){if(e===void 0&&(e=1),!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t){t===void 0&&(t=0);const n=e.length-t;return Math.floor(n/this.elementSpan)}encode(e,t,n){return 0}}class OffsetLayout extends ExternalLayout{constructor(e,t,n){if(!(e instanceof Layout))throw new TypeError("layout must be a Layout");if(t===void 0)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof UInt||this.layout instanceof UIntBE}decode(e,t){return t===void 0&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,n){return n===void 0&&(n=0),this.layout.encode(e,t,n+this.offset)}}class UInt extends Layout{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class UIntBE extends Layout{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntBE(e,n,this.span),this.span}}class Int extends Layout{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeIntLE(e,n,this.span),this.span}}class IntBE extends Layout{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readIntBE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeIntBE(e,n,this.span),this.span}}const V2E32=Math.pow(2,32);function divmodInt64(r){const e=Math.floor(r/V2E32),t=r-e*V2E32;return{hi32:e,lo32:t}}function roundedInt64(r,e){return r*V2E32+e}class NearUInt64 extends Layout{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32LE(t),o=e.readUInt32LE(t+4);return roundedInt64(o,n)}encode(e,t,n){n===void 0&&(n=0);const o=divmodInt64(e);return t.writeUInt32LE(o.lo32,n),t.writeUInt32LE(o.hi32,n+4),8}}class NearUInt64BE extends Layout{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32BE(t),o=e.readUInt32BE(t+4);return roundedInt64(n,o)}encode(e,t,n){n===void 0&&(n=0);const o=divmodInt64(e);return t.writeUInt32BE(o.hi32,n),t.writeUInt32BE(o.lo32,n+4),8}}class NearInt64 extends Layout{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32LE(t),o=e.readInt32LE(t+4);return roundedInt64(o,n)}encode(e,t,n){n===void 0&&(n=0);const o=divmodInt64(e);return t.writeUInt32LE(o.lo32,n),t.writeInt32LE(o.hi32,n+4),8}}class NearInt64BE extends Layout{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readInt32BE(t),o=e.readUInt32BE(t+4);return roundedInt64(n,o)}encode(e,t,n){n===void 0&&(n=0);const o=divmodInt64(e);return t.writeInt32BE(o.hi32,n),t.writeUInt32BE(o.lo32,n+4),8}}class Float extends Layout{constructor(e){super(4,e)}decode(e,t){return t===void 0&&(t=0),e.readFloatLE(t)}encode(e,t,n){return n===void 0&&(n=0),t.writeFloatLE(e,n),4}}class FloatBE extends Layout{constructor(e){super(4,e)}decode(e,t){return t===void 0&&(t=0),e.readFloatBE(t)}encode(e,t,n){return n===void 0&&(n=0),t.writeFloatBE(e,n),4}}class Double extends Layout{constructor(e){super(8,e)}decode(e,t){return t===void 0&&(t=0),e.readDoubleLE(t)}encode(e,t,n){return n===void 0&&(n=0),t.writeDoubleLE(e,n),8}}class DoubleBE extends Layout{constructor(e){super(8,e)}decode(e,t){return t===void 0&&(t=0),e.readDoubleBE(t)}encode(e,t,n){return n===void 0&&(n=0),t.writeDoubleBE(e,n),8}}class Sequence extends Layout{constructor(e,t,n){if(!(e instanceof Layout))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof ExternalLayout&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let o=-1;!(t instanceof ExternalLayout)&&0<e.span&&(o=t*e.span),super(o,n),this.elementLayout=e,this.count=t}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0,o=this.count;if(o instanceof ExternalLayout&&(o=o.decode(e,t)),0<this.elementLayout.span)n=o*this.elementLayout.span;else{let s=0;for(;s<o;)n+=this.elementLayout.getSpan(e,t+n),++s}return n}decode(e,t){t===void 0&&(t=0);const n=[];let o=0,s=this.count;for(s instanceof ExternalLayout&&(s=s.decode(e,t));o<s;)n.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),o+=1;return n}encode(e,t,n){n===void 0&&(n=0);const o=this.elementLayout,s=e.reduce((a,c)=>a+o.encode(c,t,n+a),0);return this.count instanceof ExternalLayout&&this.count.encode(e.length,t,n),s}}class Structure extends Layout{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((s,a)=>s&&a instanceof Layout,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let o=-1;try{o=e.reduce((s,a)=>s+a.getSpan(),0)}catch{}super(o,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;try{n=this.fields.reduce((o,s)=>{const a=s.getSpan(e,t);return t+=a,o+a},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t){t===void 0&&(t=0);const n=this.makeDestinationObject();for(const o of this.fields)if(o.property!==void 0&&(n[o.property]=o.decode(e,t)),t+=o.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){n===void 0&&(n=0);const o=n;let s=0,a=0;for(const c of this.fields){let d=c.span;if(a=0<d?d:0,c.property!==void 0){const u=e[c.property];u!==void 0&&(a=c.encode(u,t,n),0>d&&(d=c.getSpan(t,n)))}s=n,n+=d}return s+a-o}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class UnionDiscriminator{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class UnionLayoutDiscriminator extends UnionDiscriminator{constructor(e,t){if(!(e instanceof ExternalLayout&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}class Union extends Layout{constructor(e,t,n){const o=e instanceof UInt||e instanceof UIntBE;if(o)e=new UnionLayoutDiscriminator(new OffsetLayout(e));else if(e instanceof ExternalLayout&&e.isCount())e=new UnionLayoutDiscriminator(e);else if(!(e instanceof UnionDiscriminator))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof Layout))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let s=-1;t&&(s=t.span,0<=s&&o&&(s+=e.layout.span)),super(s,n),this.discriminator=e,this.usesPrefixDiscriminator=o,this.defaultLayout=t,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(c){return a(c)},this.configGetSourceVariant=function(c){a=c.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(e.hasOwnProperty(n.property))return n}throw new Error("unable to infer src variant")}decode(e,t){t===void 0&&(t=0);let n;const o=this.discriminator,s=o.decode(e,t);let a=this.registry[s];if(a===void 0){let c=0;a=this.defaultLayout,this.usesPrefixDiscriminator&&(c=o.layout.span),n=this.makeDestinationObject(),n[o.property]=s,n[a.property]=this.defaultLayout.decode(e,t+c)}else n=a.decode(e,t);return n}encode(e,t,n){n===void 0&&(n=0);const o=this.getSourceVariant(e);if(o===void 0){const s=this.discriminator,a=this.defaultLayout;let c=0;return this.usesPrefixDiscriminator&&(c=s.layout.span),s.encode(e[s.property],t,n),c+a.encode(e[a.property],t,n+c)}return o.encode(e,t,n)}addVariant(e,t,n){const o=new VariantLayout(this,e,t,n);return this.registry[e]=o,o}getVariant(e,t){let n=e;return define_Buffer_default$f.isBuffer(e)&&(t===void 0&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}}class VariantLayout extends Layout{constructor(e,t,n,o){if(!(e instanceof Union))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&o===void 0&&(o=n,n=null),n){if(!(n instanceof Layout))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof o!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=n?n.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,o),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}decode(e,t){const n=this.makeDestinationObject();if(t===void 0&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let o=0;return this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+o):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n){n===void 0&&(n=0);let o=0;if(this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let s=o;if(this.layout&&(this.layout.encode(e[this.property],t,n+o),s+=this.layout.getSpan(t,n+o),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function fixBitwiseResult(r){return 0>r&&(r+=4294967296),r}class BitStructure extends Layout{constructor(e,t,n){if(!(e instanceof UInt||e instanceof UIntBE))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&n===void 0&&(n=t,t=void 0),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,n),this.word=e,this.msb=!!t,this.fields=[];let o=0;this._packedSetValue=function(s){return o=fixBitwiseResult(s),this},this._packedGetValue=function(){return o}}decode(e,t){const n=this.makeDestinationObject();t===void 0&&(t=0);const o=this.word.decode(e,t);this._packedSetValue(o);for(const s of this.fields)s.property!==void 0&&(n[s.property]=s.decode(o));return n}encode(e,t,n){n===void 0&&(n=0);const o=this.word.decode(t,n);this._packedSetValue(o);for(const s of this.fields)if(s.property!==void 0){const a=e[s.property];a!==void 0&&s.encode(a)}return this.word.encode(this._packedGetValue(),t,n)}addField(e,t){const n=new BitField(this,e,t);return this.fields.push(n),n}addBoolean(e){const t=new Boolean$1(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}class BitField{constructor(e,t,n){if(!(e instanceof BitStructure))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const o=8*e.span,s=e.fields.reduce((a,c)=>a+c.bits,0);if(t+s>o)throw new Error("bits too long for span remainder ("+(o-s)+" of "+o+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=o-s-t),this.wordMask=fixBitwiseResult(this.valueMask<<this.start),this.property=n}decode(){const e=this.container._packedGetValue();return fixBitwiseResult(e&this.wordMask)>>>this.start}encode(e){if(!Number.isInteger(e)||e!==fixBitwiseResult(e&this.valueMask))throw new TypeError(nameWithProperty("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),n=fixBitwiseResult(e<<this.start);this.container._packedSetValue(fixBitwiseResult(t&~this.wordMask)|n)}}let Boolean$1=class extends BitField{constructor(e,t){super(e,1,t)}decode(e,t){return!!BitField.prototype.decode.call(this,e,t)}encode(e){return typeof e=="boolean"&&(e=+e),BitField.prototype.encode.call(this,e)}};class Blob extends Layout{constructor(e,t){if(!(e instanceof ExternalLayout&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof ExternalLayout||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){t===void 0&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let o=this.length;if(this.length instanceof ExternalLayout&&(o=e.length),!(define_Buffer_default$f.isBuffer(e)&&o===e.length))throw new TypeError(nameWithProperty("Blob.encode",this)+" requires (length "+o+") Buffer as src");if(n+o>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,o,"hex"),this.length instanceof ExternalLayout&&this.length.encode(o,t,n),o}}class CString extends Layout{constructor(e){super(-1,e)}getSpan(e,t){if(!define_Buffer_default$f.isBuffer(e))throw new TypeError("b must be a Buffer");t===void 0&&(t=0);let n=t;for(;n<e.length&&e[n]!==0;)n+=1;return 1+n-t}decode(e,t,n){t===void 0&&(t=0);let o=this.getSpan(e,t);return e.slice(t,t+o-1).toString("utf-8")}encode(e,t,n){n===void 0&&(n=0),typeof e!="string"&&(e=e.toString());const o=new define_Buffer_default$f(e,"utf8"),s=o.length;if(n+s>t.length)throw new RangeError("encoding overruns Buffer");return o.copy(t,n),t[n+s]=0,s+1}}class UTF8 extends Layout{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t){if(!define_Buffer_default$f.isBuffer(e))throw new TypeError("b must be a Buffer");return t===void 0&&(t=0),e.length-t}decode(e,t,n){t===void 0&&(t=0);let o=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");return e.slice(t,t+o).toString("utf-8")}encode(e,t,n){n===void 0&&(n=0),typeof e!="string"&&(e=e.toString());const o=new define_Buffer_default$f(e,"utf8"),s=o.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(n+s>t.length)throw new RangeError("encoding overruns Buffer");return o.copy(t,n),s}}class Constant extends Layout{constructor(e,t){super(0,t),this.value=e}decode(e,t,n){return this.value}encode(e,t,n){return 0}}Layout$1.ExternalLayout=ExternalLayout;Layout$1.GreedyCount=GreedyCount;Layout$1.OffsetLayout=OffsetLayout;Layout$1.UInt=UInt;Layout$1.UIntBE=UIntBE;Layout$1.Int=Int;Layout$1.IntBE=IntBE;Layout$1.Float=Float;Layout$1.FloatBE=FloatBE;Layout$1.Double=Double;Layout$1.DoubleBE=DoubleBE;Layout$1.Sequence=Sequence;Layout$1.Structure=Structure;Layout$1.UnionDiscriminator=UnionDiscriminator;Layout$1.UnionLayoutDiscriminator=UnionLayoutDiscriminator;Layout$1.Union=Union;Layout$1.VariantLayout=VariantLayout;Layout$1.BitStructure=BitStructure;Layout$1.BitField=BitField;Layout$1.Boolean=Boolean$1;Layout$1.Blob=Blob;Layout$1.CString=CString;Layout$1.UTF8=UTF8;Layout$1.Constant=Constant;Layout$1.greedy=(r,e)=>new GreedyCount(r,e);Layout$1.offset=(r,e,t)=>new OffsetLayout(r,e,t);Layout$1.u8=r=>new UInt(1,r);Layout$1.u16=r=>new UInt(2,r);Layout$1.u24=r=>new UInt(3,r);Layout$1.u32=r=>new UInt(4,r);Layout$1.u40=r=>new UInt(5,r);Layout$1.u48=r=>new UInt(6,r);Layout$1.nu64=r=>new NearUInt64(r);Layout$1.u16be=r=>new UIntBE(2,r);Layout$1.u24be=r=>new UIntBE(3,r);Layout$1.u32be=r=>new UIntBE(4,r);Layout$1.u40be=r=>new UIntBE(5,r);Layout$1.u48be=r=>new UIntBE(6,r);Layout$1.nu64be=r=>new NearUInt64BE(r);Layout$1.s8=r=>new Int(1,r);Layout$1.s16=r=>new Int(2,r);Layout$1.s24=r=>new Int(3,r);Layout$1.s32=r=>new Int(4,r);Layout$1.s40=r=>new Int(5,r);Layout$1.s48=r=>new Int(6,r);Layout$1.ns64=r=>new NearInt64(r);Layout$1.s16be=r=>new IntBE(2,r);Layout$1.s24be=r=>new IntBE(3,r);Layout$1.s32be=r=>new IntBE(4,r);Layout$1.s40be=r=>new IntBE(5,r);Layout$1.s48be=r=>new IntBE(6,r);Layout$1.ns64be=r=>new NearInt64BE(r);Layout$1.f32=r=>new Float(r);Layout$1.f32be=r=>new FloatBE(r);Layout$1.f64=r=>new Double(r);Layout$1.f64be=r=>new DoubleBE(r);Layout$1.struct=(r,e,t)=>new Structure(r,e,t);Layout$1.bits=(r,e,t)=>new BitStructure(r,e,t);Layout$1.seq=(r,e,t)=>new Sequence(r,e,t);Layout$1.union=(r,e,t)=>new Union(r,e,t);Layout$1.unionLayoutDiscriminator=(r,e)=>new UnionLayoutDiscriminator(r,e);Layout$1.blob=(r,e)=>new Blob(r,e);Layout$1.cstr=r=>new CString(r);Layout$1.utf8=(r,e)=>new UTF8(r,e);Layout$1.const=(r,e)=>new Constant(r,e);var layout={};const require$$1$1=getAugmentedNamespace(index_browser_esm);var define_Buffer_default$e=["buffer","Buffer"],__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(layout,"__esModule",{value:!0});layout.setLayoutEncoder=layout.setLayoutDecoder=layout.accountFlagsLayout=layout.selfTradeBehaviorLayout=layout.orderTypeLayout=layout.sideLayout=layout.VersionedLayout=layout.WideBits=layout.u128=layout.i64=layout.u64=layout.publicKeyLayout=layout.zeros=void 0;const buffer_layout_1$1=Layout$1,web3_js_1$1=require$$1$1,bn_js_1=__importDefault(bnExports);class Zeros extends buffer_layout_1$1.Blob{decode(e,t){const n=super.decode(e,t);if(!n.every(o=>o===0))throw new Error("nonzero padding bytes");return n}}function zeros(r){return new Zeros(r)}layout.zeros=zeros;class PublicKeyLayout extends buffer_layout_1$1.Blob{constructor(e){super(32,e)}decode(e,t){return new web3_js_1$1.PublicKey(super.decode(e,t))}encode(e,t,n){return super.encode(e.toBuffer(),t,n)}}function publicKeyLayout(r){return new PublicKeyLayout(r)}layout.publicKeyLayout=publicKeyLayout;class BNLayout extends buffer_layout_1$1.Blob{decode(e,t){return new bn_js_1.default(super.decode(e,t),10,"le")}encode(e,t,n){return super.encode(e.toArrayLike(define_Buffer_default$e,"le",this.span),t,n)}}function u64(r){return new BNLayout(8,r)}layout.u64=u64;function i64(r){return new BNLayout(8,r)}layout.i64=i64;function u128(r){return new BNLayout(16,r)}layout.u128=u128;class WideBits extends buffer_layout_1$1.Layout{constructor(e){super(8,e),this._lower=buffer_layout_1$1.bits(buffer_layout_1$1.u32(),!1),this._upper=buffer_layout_1$1.bits(buffer_layout_1$1.u32(),!1)}addBoolean(e){this._lower.fields.length<32?this._lower.addBoolean(e):this._upper.addBoolean(e)}decode(e,t=0){const n=this._lower.decode(e,t),o=this._upper.decode(e,t+this._lower.span);return{...n,...o}}encode(e,t,n=0){return this._lower.encode(e,t,n)+this._upper.encode(e,t,n+this._lower.span)}}layout.WideBits=WideBits;class VersionedLayout extends buffer_layout_1$1.Layout{constructor(e,t,n){super(t.span>0?t.span+1:t.span,n),this.version=e,this.inner=t}decode(e,t=0){return this.inner.decode(e,t+1)}encode(e,t,n=0){return t.writeUInt8(this.version,n),1+this.inner.encode(e,t,n+1)}getSpan(e,t=0){return 1+this.inner.getSpan(e,t+1)}}layout.VersionedLayout=VersionedLayout;class EnumLayout extends buffer_layout_1$1.UInt{constructor(e,t,n){super(t,n),this.values=e}encode(e,t,n){if(this.values[e]!==void 0)return super.encode(this.values[e],t,n);throw new Error("Invalid "+this.property)}decode(e,t){const n=super.decode(e,t),o=Object.entries(this.values).find(([,s])=>s===n);if(o)return o[0];throw new Error("Invalid "+this.property)}}function sideLayout(r){return new EnumLayout({buy:0,sell:1},4,r)}layout.sideLayout=sideLayout;function orderTypeLayout(r){return new EnumLayout({limit:0,ioc:1,postOnly:2},4,r)}layout.orderTypeLayout=orderTypeLayout;function selfTradeBehaviorLayout(r){return new EnumLayout({decrementTake:0,cancelProvide:1,abortTransaction:2},4,r)}layout.selfTradeBehaviorLayout=selfTradeBehaviorLayout;const ACCOUNT_FLAGS_LAYOUT=new WideBits;ACCOUNT_FLAGS_LAYOUT.addBoolean("initialized");ACCOUNT_FLAGS_LAYOUT.addBoolean("market");ACCOUNT_FLAGS_LAYOUT.addBoolean("openOrders");ACCOUNT_FLAGS_LAYOUT.addBoolean("requestQueue");ACCOUNT_FLAGS_LAYOUT.addBoolean("eventQueue");ACCOUNT_FLAGS_LAYOUT.addBoolean("bids");ACCOUNT_FLAGS_LAYOUT.addBoolean("asks");function accountFlagsLayout(r="accountFlags"){return ACCOUNT_FLAGS_LAYOUT.replicate(r)}layout.accountFlagsLayout=accountFlagsLayout;function setLayoutDecoder(r,e){const t=r.decode;r.decode=function(o,s=0){return e(t.call(this,o,s))}}layout.setLayoutDecoder=setLayoutDecoder;function setLayoutEncoder(r,e){const t=r.encode;return r.encode=function(o,s,a){return t.call(this,e(o),s,a)},r}layout.setLayoutEncoder=setLayoutEncoder;var slab={};(function(r){var e=commonjsGlobal&&commonjsGlobal.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(r,"__esModule",{value:!0}),r.Slab=r.SLAB_LAYOUT=void 0;const t=e(bnExports),n=Layout$1,o=layout,s=n.struct([n.u32("bumpIndex"),o.zeros(4),n.u32("freeListLen"),o.zeros(4),n.u32("freeListHead"),n.u32("root"),n.u32("leafCount"),o.zeros(4)],"header"),a=n.union(n.u32("tag"),n.blob(68),"node");a.addVariant(0,n.struct([]),"uninitialized"),a.addVariant(1,n.struct([n.u32("prefixLen"),o.u128("key"),n.seq(n.u32(),2,"children")]),"innerNode"),a.addVariant(2,n.struct([n.u8("ownerSlot"),n.u8("feeTier"),n.blob(2),o.u128("key"),o.publicKeyLayout("owner"),o.u64("quantity"),o.u64("clientOrderId")]),"leafNode"),a.addVariant(3,n.struct([n.u32("next")]),"freeNode"),a.addVariant(4,n.struct([]),"lastFreeNode"),r.SLAB_LAYOUT=n.struct([s,n.seq(a,n.offset(s.layoutFor("bumpIndex"),s.offsetOf("bumpIndex")-s.span),"nodes")]);class c{constructor(u,y){this.header=u,this.nodes=y}static decode(u){return r.SLAB_LAYOUT.decode(u)}get(u){if(this.header.leafCount===0)return null;u instanceof t.default||(u=new t.default(u));let y=this.header.root;for(;;){const{leafNode:v,innerNode:I}=this.nodes[y];if(v)return v.key.eq(u)?v:null;if(I){if(!I.key.xor(u).iushrn(128-I.prefixLen).isZero())return null;y=I.children[u.testn(128-I.prefixLen-1)?1:0]}else throw new Error("Invalid slab")}}[Symbol.iterator](){return this.items(!1)}*items(u=!1){if(this.header.leafCount===0)return;const y=[this.header.root];for(;y.length>0;){const v=y.pop(),{leafNode:I,innerNode:S}=this.nodes[v];I?yield I:S&&(u?y.push(S.children[0],S.children[1]):y.push(S.children[1],S.children[0]))}}}r.Slab=c,o.setLayoutDecoder(r.SLAB_LAYOUT,({header:d,nodes:u})=>new c(d,u))})(slab);var instructions={},tokenInstructions={};(function(r){var e=["buffer","Buffer"],t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(H,q,Y,B){B===void 0&&(B=Y),Object.defineProperty(H,B,{enumerable:!0,get:function(){return q[Y]}})}:function(H,q,Y,B){B===void 0&&(B=Y),H[B]=q[Y]}),n=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(H,q){Object.defineProperty(H,"default",{enumerable:!0,value:q})}:function(H,q){H.default=q}),o=commonjsGlobal&&commonjsGlobal.__importStar||function(H){if(H&&H.__esModule)return H;var q={};if(H!=null)for(var Y in H)Y!=="default"&&Object.prototype.hasOwnProperty.call(H,Y)&&t(q,H,Y);return n(q,H),q};Object.defineProperty(r,"__esModule",{value:!0}),r.closeAccount=r.mintTo=r.setAuthority=r.revoke=r.approve=r.transfer=r.initializeAccount=r.initializeMint=r.decodeTokenInstructionData=r.SRM_DECIMALS=r.SRM_MINT=r.MSRM_DECIMALS=r.MSRM_MINT=r.WRAPPED_SOL_MINT=r.TOKEN_PROGRAM_ID=r.CLOSE_ACCOUNT_OWNER_INDEX=r.CLOSE_ACCOUNT_DESTINATION_INDEX=r.CLOSE_ACCOUNT_SOURCE_INDEX=r.TRANSFER_OWNER_INDEX=r.TRANSFER_DESTINATION_INDEX=r.TRANSFER_SOURCE_INDEX=r.INITIALIZE_ACCOUNT_OWNER_INDEX=r.INITIALIZE_ACCOUNT_MINT_INDEX=r.INITIALIZE_ACCOUNT_ACCOUNT_INDEX=void 0;const s=o(Layout$1),a=require$$1$1,c=layout;r.INITIALIZE_ACCOUNT_ACCOUNT_INDEX=0,r.INITIALIZE_ACCOUNT_MINT_INDEX=1,r.INITIALIZE_ACCOUNT_OWNER_INDEX=2,r.TRANSFER_SOURCE_INDEX=0,r.TRANSFER_DESTINATION_INDEX=1,r.TRANSFER_OWNER_INDEX=2,r.CLOSE_ACCOUNT_SOURCE_INDEX=0,r.CLOSE_ACCOUNT_DESTINATION_INDEX=1,r.CLOSE_ACCOUNT_OWNER_INDEX=2,r.TOKEN_PROGRAM_ID=new a.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),r.WRAPPED_SOL_MINT=new a.PublicKey("So11111111111111111111111111111111111111112"),r.MSRM_MINT=new a.PublicKey("MSRMcoVyrFxnSgo5uXwone5SKcGhT1KEJMFEkMEWf9L"),r.MSRM_DECIMALS=0,r.SRM_MINT=new a.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),r.SRM_DECIMALS=6;const d=s.union(s.u8("instruction"));d.addVariant(0,s.struct([s.u8("decimals"),c.publicKeyLayout("mintAuthority"),s.u8("freezeAuthorityOption"),c.publicKeyLayout("freezeAuthority")]),"initializeMint"),d.addVariant(1,s.struct([]),"initializeAccount"),d.addVariant(3,s.struct([s.nu64("amount")]),"transfer"),d.addVariant(4,s.struct([s.nu64("amount")]),"approve"),d.addVariant(5,s.struct([]),"revoke"),d.addVariant(6,s.struct([s.u8("authorityType"),s.u8("newAuthorityOption"),c.publicKeyLayout("newAuthority")]),"setAuthority"),d.addVariant(7,s.struct([s.nu64("amount")]),"mintTo"),d.addVariant(8,s.struct([s.nu64("amount")]),"burn"),d.addVariant(9,s.struct([]),"closeAccount");const u=Math.max(...Object.values(d.registry).map(H=>H.span));function y(H){const q=e.alloc(u),Y=d.encode(H,q);return q.slice(0,Y)}function v(H){return d.decode(H)}r.decodeTokenInstructionData=v;function I({mint:H,decimals:q,mintAuthority:Y,freezeAuthority:B=null}){const N=[{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:a.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new a.TransactionInstruction({keys:N,data:y({initializeMint:{decimals:q,mintAuthority:Y,freezeAuthorityOption:!!B,freezeAuthority:B||new a.PublicKey(0)}}),programId:r.TOKEN_PROGRAM_ID})}r.initializeMint=I;function S({account:H,mint:q,owner:Y}){const B=[{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:q,isSigner:!1,isWritable:!1},{pubkey:Y,isSigner:!1,isWritable:!1},{pubkey:a.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new a.TransactionInstruction({keys:B,data:y({initializeAccount:{}}),programId:r.TOKEN_PROGRAM_ID})}r.initializeAccount=S;function P({source:H,destination:q,amount:Y,owner:B}){const N=[{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:q,isSigner:!1,isWritable:!0},{pubkey:B,isSigner:!0,isWritable:!1}];return new a.TransactionInstruction({keys:N,data:y({transfer:{amount:Y}}),programId:r.TOKEN_PROGRAM_ID})}r.transfer=P;function x({source:H,delegate:q,amount:Y,owner:B}){const N=[{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:q,isSigner:!1,isWritable:!1},{pubkey:B,isSigner:!0,isWritable:!1}];return new a.TransactionInstruction({keys:N,data:y({approve:{amount:Y}}),programId:r.TOKEN_PROGRAM_ID})}r.approve=x;function A({source:H,owner:q}){const Y=[{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:q,isSigner:!0,isWritable:!1}];return new a.TransactionInstruction({keys:Y,data:y({revoke:{}}),programId:r.TOKEN_PROGRAM_ID})}r.revoke=A;function O({target:H,currentAuthority:q,newAuthority:Y,authorityType:B}){const N=[{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:q,isSigner:!0,isWritable:!1}];return new a.TransactionInstruction({keys:N,data:y({setAuthority:{authorityType:B,newAuthorityOption:!!Y,newAuthority:Y}}),programId:r.TOKEN_PROGRAM_ID})}r.setAuthority=O;function z({mint:H,destination:q,amount:Y,mintAuthority:B}){const N=[{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:q,isSigner:!1,isWritable:!0},{pubkey:B,isSigner:!0,isWritable:!1}];return new a.TransactionInstruction({keys:N,data:y({mintTo:{amount:Y}}),programId:r.TOKEN_PROGRAM_ID})}r.mintTo=z;function M({source:H,destination:q,owner:Y}){const B=[{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:q,isSigner:!1,isWritable:!0},{pubkey:Y,isSigner:!0,isWritable:!1}];return new a.TransactionInstruction({keys:B,data:y({closeAccount:{}}),programId:r.TOKEN_PROGRAM_ID})}r.closeAccount=M})(tokenInstructions);(function(r){var e=["buffer","Buffer"],t=commonjsGlobal&&commonjsGlobal.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(r,"__esModule",{value:!0}),r.DexInstructions=r.decodeInstructionV2=r.decodeInstruction=r.encodeInstructionV2=r.encodeInstruction=r.INSTRUCTION_LAYOUT_V2=r.INSTRUCTION_LAYOUT=r.NEW_ORDER_V3_OWNER_INDEX=r.NEW_ORDER_V3_OPEN_ORDERS_INDEX=r.NEW_ORDER_OWNER_INDEX=r.NEW_ORDER_OPEN_ORDERS_INDEX=r.SETTLE_FUNDS_QUOTE_WALLET_INDEX=r.SETTLE_FUNDS_BASE_WALLET_INDEX=void 0;const n=Layout$1,o=layout,s=require$$1$1,a=tokenInstructions,c=t(bnExports);r.SETTLE_FUNDS_BASE_WALLET_INDEX=5,r.SETTLE_FUNDS_QUOTE_WALLET_INDEX=6,r.NEW_ORDER_OPEN_ORDERS_INDEX=1,r.NEW_ORDER_OWNER_INDEX=4,r.NEW_ORDER_V3_OPEN_ORDERS_INDEX=1,r.NEW_ORDER_V3_OWNER_INDEX=7,r.INSTRUCTION_LAYOUT=new o.VersionedLayout(0,n.union(n.u32("instruction"))),r.INSTRUCTION_LAYOUT.inner.addVariant(0,n.struct([o.u64("baseLotSize"),o.u64("quoteLotSize"),n.u16("feeRateBps"),o.u64("vaultSignerNonce"),o.u64("quoteDustThreshold")]),"initializeMarket"),r.INSTRUCTION_LAYOUT.inner.addVariant(1,n.struct([o.sideLayout("side"),o.u64("limitPrice"),o.u64("maxQuantity"),o.orderTypeLayout("orderType"),o.u64("clientId")]),"newOrder"),r.INSTRUCTION_LAYOUT.inner.addVariant(2,n.struct([n.u16("limit")]),"matchOrders"),r.INSTRUCTION_LAYOUT.inner.addVariant(3,n.struct([n.u16("limit")]),"consumeEvents"),r.INSTRUCTION_LAYOUT.inner.addVariant(4,n.struct([o.sideLayout("side"),o.u128("orderId"),o.publicKeyLayout("openOrders"),n.u8("openOrdersSlot")]),"cancelOrder"),r.INSTRUCTION_LAYOUT.inner.addVariant(5,n.struct([]),"settleFunds"),r.INSTRUCTION_LAYOUT.inner.addVariant(6,n.struct([o.u64("clientId")]),"cancelOrderByClientId"),r.INSTRUCTION_LAYOUT.inner.addVariant(10,n.struct([o.sideLayout("side"),o.u64("limitPrice"),o.u64("maxBaseQuantity"),o.u64("maxQuoteQuantity"),o.selfTradeBehaviorLayout("selfTradeBehavior"),o.orderTypeLayout("orderType"),o.u64("clientId"),n.u16("limit")]),"newOrderV3"),r.INSTRUCTION_LAYOUT.inner.addVariant(11,n.struct([o.sideLayout("side"),o.u128("orderId")]),"cancelOrderV2"),r.INSTRUCTION_LAYOUT.inner.addVariant(12,n.struct([o.u64("clientId")]),"cancelOrderByClientIdV2"),r.INSTRUCTION_LAYOUT.inner.addVariant(14,n.struct([]),"closeOpenOrders"),r.INSTRUCTION_LAYOUT.inner.addVariant(15,n.struct([]),"initOpenOrders"),r.INSTRUCTION_LAYOUT.inner.addVariant(16,n.struct([n.u16("limit")]),"prune"),r.INSTRUCTION_LAYOUT.inner.addVariant(17,n.struct([n.u16("limit")]),"consumeEventsPermissioned"),r.INSTRUCTION_LAYOUT.inner.addVariant(18,n.struct([n.seq(o.u64(),8,"clientIds")]),"cancelOrdersByClientIds");const d=()=>n.struct([o.sideLayout("side"),o.u64("limitPrice"),o.u64("maxBaseQuantity"),o.u64("maxQuoteQuantity"),o.selfTradeBehaviorLayout("selfTradeBehavior"),o.orderTypeLayout("orderType"),o.u64("clientId"),n.u16("limit"),o.i64("maxTs")]);r.INSTRUCTION_LAYOUT.inner.addVariant(19,d(),"replaceOrderByClientId"),r.INSTRUCTION_LAYOUT.inner.addVariant(20,n.struct([o.u64("orderAmount"),n.seq(d(),8,"orders")]),"replaceOrdersByClientIds"),r.INSTRUCTION_LAYOUT_V2=new o.VersionedLayout(0,n.union(n.u32("instruction"))),r.INSTRUCTION_LAYOUT_V2.inner.addVariant(10,d(),"newOrderV3");function u(P,x=100){const A=e.alloc(x);return A.slice(0,r.INSTRUCTION_LAYOUT.encode(P,A))}r.encodeInstruction=u;function y(P){const x=e.alloc(100);return x.slice(0,r.INSTRUCTION_LAYOUT_V2.encode(P,x))}r.encodeInstructionV2=y;function v(P){return r.INSTRUCTION_LAYOUT.decode(P)}r.decodeInstruction=v;function I(P){return r.INSTRUCTION_LAYOUT_V2.decode(P)}r.decodeInstructionV2=I;class S{static initializeMarket({market:x,requestQueue:A,eventQueue:O,bids:z,asks:M,baseVault:H,quoteVault:q,baseMint:Y,quoteMint:B,baseLotSize:N,quoteLotSize:V,feeRateBps:Q,vaultSignerNonce:Z,quoteDustThreshold:J,programId:L,authority:l=void 0,pruneAuthority:b=void 0,crankAuthority:E=void 0}){return new s.PublicKey("SysvarRent111111111111111111111111111111111"),new s.TransactionInstruction({keys:[{pubkey:x,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:O,isSigner:!1,isWritable:!0},{pubkey:z,isSigner:!1,isWritable:!0},{pubkey:M,isSigner:!1,isWritable:!0},{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:q,isSigner:!1,isWritable:!0},{pubkey:Y,isSigner:!1,isWritable:!1},{pubkey:B,isSigner:!1,isWritable:!1},{pubkey:l?B:s.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}].concat(l?{pubkey:l,isSigner:!1,isWritable:!1}:[]).concat(l&&b?{pubkey:b,isSigner:!1,isWritable:!1}:[]).concat(l&&b&&E?{pubkey:E,isSigner:!1,isWritable:!1}:[]),programId:L,data:u({initializeMarket:{baseLotSize:N,quoteLotSize:V,feeRateBps:Q,vaultSignerNonce:Z,quoteDustThreshold:J}})})}static newOrder({market:x,openOrders:A,payer:O,owner:z,requestQueue:M,baseVault:H,quoteVault:q,side:Y,limitPrice:B,maxQuantity:N,orderType:V,clientId:Q,programId:Z,feeDiscountPubkey:J=null}){const L=[{pubkey:x,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:M,isSigner:!1,isWritable:!0},{pubkey:O,isSigner:!1,isWritable:!0},{pubkey:z,isSigner:!0,isWritable:!1},{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:q,isSigner:!1,isWritable:!0},{pubkey:a.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:s.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return J&&L.push({pubkey:J,isSigner:!1,isWritable:!1}),new s.TransactionInstruction({keys:L,programId:Z,data:u({newOrder:Q?{side:Y,limitPrice:B,maxQuantity:N,orderType:V,clientId:Q}:{side:Y,limitPrice:B,maxQuantity:N,orderType:V}})})}static newOrderV3({market:x,openOrders:A,payer:O,owner:z,requestQueue:M,eventQueue:H,bids:q,asks:Y,baseVault:B,quoteVault:N,side:V,limitPrice:Q,maxBaseQuantity:Z,maxQuoteQuantity:J,orderType:L,clientId:l,programId:b,selfTradeBehavior:E,feeDiscountPubkey:T=null,maxTs:C=null,replaceIfExists:W=!1}){const G=[{pubkey:x,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:M,isSigner:!1,isWritable:!0},{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:q,isSigner:!1,isWritable:!0},{pubkey:Y,isSigner:!1,isWritable:!0},{pubkey:O,isSigner:!1,isWritable:!0},{pubkey:z,isSigner:!0,isWritable:!1},{pubkey:B,isSigner:!1,isWritable:!0},{pubkey:N,isSigner:!1,isWritable:!0},{pubkey:a.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:s.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];T&&G.push({pubkey:T,isSigner:!1,isWritable:!1});let U,m;return W?(U="replaceOrderByClientId",m=u):(U="newOrderV3",m=C?y:u),new s.TransactionInstruction({keys:G,programId:b,data:m({[U]:{side:V,limitPrice:Q,maxBaseQuantity:Z,maxQuoteQuantity:J,selfTradeBehavior:E,orderType:L,clientId:l,limit:65535,maxTs:new c.default(C??"9223372036854775807")}})})}static replaceOrdersByClientIds({market:x,openOrders:A,payer:O,owner:z,requestQueue:M,eventQueue:H,bids:q,asks:Y,baseVault:B,quoteVault:N,feeDiscountPubkey:V=null,programId:Q,orders:Z}){const J=[{pubkey:x,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:M,isSigner:!1,isWritable:!0},{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:q,isSigner:!1,isWritable:!0},{pubkey:Y,isSigner:!1,isWritable:!0},{pubkey:O,isSigner:!1,isWritable:!0},{pubkey:z,isSigner:!0,isWritable:!1},{pubkey:B,isSigner:!1,isWritable:!0},{pubkey:N,isSigner:!1,isWritable:!0},{pubkey:a.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:s.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return V&&J.push({pubkey:V,isSigner:!1,isWritable:!1}),new s.TransactionInstruction({keys:J,programId:Q,data:u({replaceOrdersByClientIds:{orderAmount:new c.default(Z.length),orders:Z.map(L=>{var l;return{...L,maxTs:new c.default((l=L.maxTs)!==null&&l!==void 0?l:"9223372036854775807"),limit:65535}})}},15+Z.length*60).slice(0,13+Z.length*54)})}static matchOrders({market:x,requestQueue:A,eventQueue:O,bids:z,asks:M,baseVault:H,quoteVault:q,limit:Y,programId:B}){return new s.TransactionInstruction({keys:[{pubkey:x,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:O,isSigner:!1,isWritable:!0},{pubkey:z,isSigner:!1,isWritable:!0},{pubkey:M,isSigner:!1,isWritable:!0},{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:q,isSigner:!1,isWritable:!0}],programId:B,data:u({matchOrders:{limit:Y}})})}static consumeEvents({market:x,eventQueue:A,coinFee:O,pcFee:z,openOrdersAccounts:M,limit:H,programId:q}){return new s.TransactionInstruction({keys:[...M.map(Y=>({pubkey:Y,isSigner:!1,isWritable:!0})),{pubkey:x,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:O,isSigner:!1,isWriteable:!0},{pubkey:z,isSigner:!1,isWritable:!0}],programId:q,data:u({consumeEvents:{limit:H}})})}static consumeEventsPermissioned({market:x,eventQueue:A,crankAuthority:O,openOrdersAccounts:z,limit:M,programId:H}){return new s.TransactionInstruction({keys:[...z.map(q=>({pubkey:q,isSigner:!1,isWritable:!0})),{pubkey:x,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:O,isSigner:!0,isWritable:!1}],programId:H,data:u({consumeEventsPermissioned:{limit:M}})})}static cancelOrder({market:x,openOrders:A,owner:O,requestQueue:z,side:M,orderId:H,openOrdersSlot:q,programId:Y}){return new s.TransactionInstruction({keys:[{pubkey:x,isSigner:!1,isWritable:!1},{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:z,isSigner:!1,isWritable:!0},{pubkey:O,isSigner:!0,isWritable:!1}],programId:Y,data:u({cancelOrder:{side:M,orderId:H,openOrders:A,openOrdersSlot:q}})})}static cancelOrderV2(x){const{market:A,bids:O,asks:z,eventQueue:M,openOrders:H,owner:q,side:Y,orderId:B,programId:N}=x;return new s.TransactionInstruction({keys:[{pubkey:A,isSigner:!1,isWritable:!1},{pubkey:O,isSigner:!1,isWritable:!0},{pubkey:z,isSigner:!1,isWritable:!0},{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:q,isSigner:!0,isWritable:!1},{pubkey:M,isSigner:!1,isWritable:!0}],programId:N,data:u({cancelOrderV2:{side:Y,orderId:B}})})}static cancelOrderByClientId({market:x,openOrders:A,owner:O,requestQueue:z,clientId:M,programId:H}){return new s.TransactionInstruction({keys:[{pubkey:x,isSigner:!1,isWritable:!1},{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:z,isSigner:!1,isWritable:!0},{pubkey:O,isSigner:!0,isWritable:!1}],programId:H,data:u({cancelOrderByClientId:{clientId:M}})})}static cancelOrderByClientIdV2({market:x,openOrders:A,owner:O,bids:z,asks:M,eventQueue:H,clientId:q,programId:Y}){return new s.TransactionInstruction({keys:[{pubkey:x,isSigner:!1,isWritable:!1},{pubkey:z,isSigner:!1,isWritable:!0},{pubkey:M,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:O,isSigner:!0,isWritable:!1},{pubkey:H,isSigner:!1,isWritable:!0}],programId:Y,data:u({cancelOrderByClientIdV2:{clientId:q}})})}static cancelOrdersByClientIds({market:x,openOrders:A,owner:O,bids:z,asks:M,eventQueue:H,clientIds:q,programId:Y}){if(q.length>8)throw new Error("Number of client ids cannot exceed 8!");for(;q.length<8;)q.push(new c.default(0));return new s.TransactionInstruction({keys:[{pubkey:x,isSigner:!1,isWritable:!1},{pubkey:z,isSigner:!1,isWritable:!0},{pubkey:M,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:O,isSigner:!0,isWritable:!1},{pubkey:H,isSigner:!1,isWritable:!0}],programId:Y,data:u({cancelOrdersByClientIds:{clientIds:q}})})}static settleFunds({market:x,openOrders:A,owner:O,baseVault:z,quoteVault:M,baseWallet:H,quoteWallet:q,vaultSigner:Y,programId:B,referrerQuoteWallet:N=null}){const V=[{pubkey:x,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:O,isSigner:!0,isWritable:!1},{pubkey:z,isSigner:!1,isWritable:!0},{pubkey:M,isSigner:!1,isWritable:!0},{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:q,isSigner:!1,isWritable:!0},{pubkey:Y,isSigner:!1,isWritable:!1},{pubkey:a.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1}];return N&&V.push({pubkey:N,isSigner:!1,isWritable:!0}),new s.TransactionInstruction({keys:V,programId:B,data:u({settleFunds:{}})})}static closeOpenOrders({market:x,openOrders:A,owner:O,solWallet:z,programId:M}){const H=[{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:O,isSigner:!0,isWritable:!1},{pubkey:z,isSigner:!1,isWritable:!0},{pubkey:x,isSigner:!1,isWritable:!1}];return new s.TransactionInstruction({keys:H,programId:M,data:u({closeOpenOrders:{}})})}static initOpenOrders({market:x,openOrders:A,owner:O,programId:z,marketAuthority:M}){const H=[{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:O,isSigner:!0,isWritable:!1},{pubkey:x,isSigner:!1,isWritable:!1},{pubkey:s.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}].concat(M?{pubkey:M,isSigner:!1,isWritable:!1}:[]);return new s.TransactionInstruction({keys:H,programId:z,data:u({initOpenOrders:{}})})}static prune({market:x,bids:A,asks:O,eventQueue:z,pruneAuthority:M,openOrders:H,openOrdersOwner:q,programId:Y,limit:B}){const N=[{pubkey:x,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:O,isSigner:!1,isWritable:!0},{pubkey:M,isSigner:!1,isWritable:!1},{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:q,isSigner:!1,isWritable:!1},{pubkey:z,isSigner:!1,isWritable:!0}];return new s.TransactionInstruction({keys:N,programId:Y,data:u({prune:{limit:B}})})}}r.DexInstructions=S})(instructions);var queue={};Object.defineProperty(queue,"__esModule",{value:!0});queue.EVENT_QUEUE_LAYOUT=queue.REQUEST_QUEUE_LAYOUT=queue.decodeEventQueue=queue.decodeRequestQueue=queue.decodeEventsSince=void 0;const buffer_layout_1=Layout$1,layout_1=layout,REQUEST_QUEUE_HEADER=buffer_layout_1.struct([buffer_layout_1.blob(5),layout_1.accountFlagsLayout("accountFlags"),buffer_layout_1.u32("head"),layout_1.zeros(4),buffer_layout_1.u32("count"),layout_1.zeros(4),buffer_layout_1.u32("nextSeqNum"),layout_1.zeros(4)]),REQUEST_FLAGS=buffer_layout_1.bits(buffer_layout_1.u8(),!1,"requestFlags");REQUEST_FLAGS.addBoolean("newOrder");REQUEST_FLAGS.addBoolean("cancelOrder");REQUEST_FLAGS.addBoolean("bid");REQUEST_FLAGS.addBoolean("postOnly");REQUEST_FLAGS.addBoolean("ioc");const REQUEST=buffer_layout_1.struct([REQUEST_FLAGS,buffer_layout_1.u8("openOrdersSlot"),buffer_layout_1.u8("feeTier"),buffer_layout_1.blob(5),layout_1.u64("maxBaseSizeOrCancelId"),layout_1.u64("nativeQuoteQuantityLocked"),layout_1.u128("orderId"),layout_1.publicKeyLayout("openOrders"),layout_1.u64("clientOrderId")]),EVENT_QUEUE_HEADER=buffer_layout_1.struct([buffer_layout_1.blob(5),layout_1.accountFlagsLayout("accountFlags"),buffer_layout_1.u32("head"),layout_1.zeros(4),buffer_layout_1.u32("count"),layout_1.zeros(4),buffer_layout_1.u32("seqNum"),layout_1.zeros(4)]),EVENT_FLAGS=buffer_layout_1.bits(buffer_layout_1.u8(),!1,"eventFlags");EVENT_FLAGS.addBoolean("fill");EVENT_FLAGS.addBoolean("out");EVENT_FLAGS.addBoolean("bid");EVENT_FLAGS.addBoolean("maker");const EVENT=buffer_layout_1.struct([EVENT_FLAGS,buffer_layout_1.u8("openOrdersSlot"),buffer_layout_1.u8("feeTier"),buffer_layout_1.blob(5),layout_1.u64("nativeQuantityReleased"),layout_1.u64("nativeQuantityPaid"),layout_1.u64("nativeFeeOrRebate"),layout_1.u128("orderId"),layout_1.publicKeyLayout("openOrders"),layout_1.u64("clientOrderId")]);function decodeQueueItem(r,e,t,n){return e.decode(t,r.span+n*e.span)}function decodeQueue(r,e,t,n){const o=r.decode(t),s=Math.floor((t.length-r.span)/e.span),a=[];if(n)for(let c=0;c<Math.min(n,s);++c){const d=(o.head+o.count+s-1-c)%s;a.push(decodeQueueItem(r,e,t,d))}else for(let c=0;c<o.count;++c){const d=(o.head+c)%s;a.push(decodeQueueItem(r,e,t,d))}return{header:o,nodes:a}}function decodeEventsSince(r,e){const t=EVENT_QUEUE_HEADER.decode(r),n=Math.floor((r.length-EVENT_QUEUE_HEADER.span)/EVENT.span),o=4294967296;let s=(t.seqNum-e+o)%o;s>n&&(s=n-1);const a=(t.seqNum-s+o)%o,d=((t.head+t.count)%n-s+n)%n,u=[];for(let y=0;y<s;++y){const v=(d+y)%n,I=decodeQueueItem(EVENT_QUEUE_HEADER,EVENT,r,v);I.seqNum=(a+y)%o,u.push(I)}return u}queue.decodeEventsSince=decodeEventsSince;function decodeRequestQueue(r,e){const{header:t,nodes:n}=decodeQueue(REQUEST_QUEUE_HEADER,REQUEST,r,e);if(!t.accountFlags.initialized||!t.accountFlags.requestQueue)throw new Error("Invalid requests queue");return n}queue.decodeRequestQueue=decodeRequestQueue;function decodeEventQueue(r,e){const{header:t,nodes:n}=decodeQueue(EVENT_QUEUE_HEADER,EVENT,r,e);if(!t.accountFlags.initialized||!t.accountFlags.eventQueue)throw new Error("Invalid events queue");return n}queue.decodeEventQueue=decodeEventQueue;queue.REQUEST_QUEUE_LAYOUT={HEADER:REQUEST_QUEUE_HEADER,NODE:REQUEST};queue.EVENT_QUEUE_LAYOUT={HEADER:EVENT_QUEUE_HEADER,NODE:EVENT};var fees={},tokens_and_markets={};const require$$1=[{address:"B37pZmwrwXHjpgvd9hHDAx1yeDsNevTnbbrN9W12BoGK",deprecated:!0,name:"soALEPH/soUSDC",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"CAgAeMD7quTdnr6RPa7JySQpjf3irAmefYNdTb6anemq",deprecated:!0,name:"BTC/soUSDC",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"ASKiV944nKg1W9vsf7hf3fTsjawK6DwLwrnB2LH9n61c",deprecated:!0,name:"soETH/soUSDC",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"Cdp72gDcYMCLLk3aDkPxjeiirKoFqK38ECm8Ywvk94Wi",deprecated:!0,name:"SOL/soUSDC",programId:"BJ3jrUzddfuSrZHXSCxMUUQsjKEyLmuuyZebkcaFp2fg"},{address:"68J6nkWToik6oM9rTatKSR5ibVSykAtzftBUEAvpRsys",deprecated:!0,name:"SRM/soUSDC",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"8Jzed8Fafu1RU1CQDWdiETSrqAJy1ukZ5JL6Pma3p3a2",deprecated:!0,name:"SRM/SOL",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"9wDmxsfwaDb2ysmZpBLzxKzoWrF1zHzBN7PV5EmJe19R",deprecated:!0,name:"soSUSHI/soUSDC",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"GbQSffne1NcJbS4jsewZEpRGYVR4RNnuVUN8Ht6vAGb6",deprecated:!0,name:"soSXP/soUSDC",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"7kgkDyW7dmyMeP8KFXzbcUZz1R2WHsovDZ7n3ihZuNDS",deprecated:!0,name:"MSRM/soUSDC",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"FZqrBXz7ADGsmDf1TM9YgysPUfvtG8rJiNUrqDpHc9Au",deprecated:!0,name:"soFTT/soUSDC",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"FJg9FUtbN3fg3YFbMCFiZKjGh5Bn4gtzxZmtxFzmz9kT",deprecated:!0,name:"soYFI/soUSDC",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"7GZ59DMgJ7D6dfoJTpszPayTRyua9jwcaGJXaRMMF1my",deprecated:!0,name:"soLINK/soUSDC",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"uPNcBgFhrLW3FtvyYYbBUi53BBEQf9e4NPgwxaLu5Hn",deprecated:!0,name:"soHGET/soUSDC",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"3puWJFZyCso14EdxhywjD7xqyTarpsULx483mzvqxQRW",deprecated:!0,name:"soCREAM/soUSDC",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"8Ae7Uhigx8k4fKdJG7irdPCVDZLvWsJfeTH2t5fr3TVD",deprecated:!0,name:"soUBXT/soUSDC",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"Hze5AUX4Qp1cTujiJ4CsAMRGn4g6ZpgXsmptFn3xxhWg",deprecated:!0,name:"soHNT/soUSDC",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"FJq4HX3bUSgF3yQZ8ADALtJYfAyr9fz36SNG18hc3dgF",deprecated:!0,name:"soFRONT/soUSDC",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"BZMuoQ2i2noNUXMdrRDivc7MwjGspNJTCfZkdHMwK18T",deprecated:!0,name:"soALEPH/soUSDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"5LgJphS6D5zXwUVPU7eCryDBkyta3AidrJ5vjNU6BcGW",deprecated:!0,name:"BTC/soUSDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"DmEDKZPXXkWgaYiKgWws2ZXWWKCh41eryDPRVD4zKnD9",deprecated:!0,name:"soETH/soUSDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"EBFTQNg2QjyxV7WDDenoLbfLLXLcbSz6w1YrdTCGPWT5",deprecated:!0,name:"SOL/soUSDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"8YmQZRXGizZXYPCDmxgjwB8X8XN4PZG7MMwNg76iAmPZ",deprecated:!0,name:"SRM/soUSDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"9vFuX2BizwinWjkZLQTmThDcNMFEcY3wVXYuqnRQtcD",deprecated:!0,name:"soSUSHI/soUSDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"C5NReXAeQhfjiDCGPFj1UUmDxDqF8v2CUVKoYuQqb4eW",deprecated:!0,name:"soSXP/soUSDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"58H7ZRmiyWtsrz2sQGz1qQCMW6n7447xhNNehUSQGPj5",deprecated:!0,name:"MSRM/soUSDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"ES8skmkEeyH1BYFThd2FtyaFKhkqtwH7XWp8mXptv3vg",deprecated:!0,name:"soFTT/soUSDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"Gw78CYLLFbgmmn4rps9KoPAnNtBQ2S1foL2Mn6Z5ZHYB",deprecated:!0,name:"soYFI/soUSDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"WjfsTPyrvUUrhGJ9hVQFubMnKDcnQS8VxSXU7L2gLcA",deprecated:!0,name:"soLINK/soUSDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"2ZmB255T4FVUugpeXTFxD6Yz5GE47yTByYvqSTDUbk3G",deprecated:!0,name:"soHGET/soUSDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"FGJtCDXoHLHjagP5Ht6xcUFt2rW3z8MJPe87rFKP2ZW6",deprecated:!0,name:"soCREAM/soUSDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"7K6MPog6LskZmyaYwqtLvRUuedoiE68nirbQ9tK3LasE",deprecated:!0,name:"soUBXT/soUSDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"9RyozJe3bkAFfH3jmoiKHjkWCoLTxn7aBQSi6YfaV6ab",deprecated:!0,name:"soHNT/soUSDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"AGtBbGuJZiv3Ko3dfT4v6g4kCqnNc9DXfoGLe5HpjmWx",deprecated:!0,name:"soFRONT/soUSDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"AA1HSrsMcRNzjaQfRMTNarHR9B7e4U79LJ2319UtiqPF",deprecated:!0,name:"soAKRO/soUSDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"AUAobJdffexcoJBMeyLorpShu3ZtG9VvPEPjoeTN4u5Z",deprecated:!0,name:"soHXRO/soUSDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"GpdYLFbKHeSeDGqsnQ4jnP7D1294iBpQcsN1VPwhoaFS",deprecated:!0,name:"soUNI/soUSDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"sxS9EdTx1UPe4j2c6Au9f1GKZXrFj5pTgNKgjGGtGdY",deprecated:!0,name:"soKEEP/soUSDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"CfnnU38ACScF6pcurxSB3FLXeZmfFYunVKExeUyosu5P",deprecated:!0,name:"soMATH/soUSDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"7NR5GDouQYkkfppVkNhpa4HfJ2LwqUQymE3b4CYQiYHa",deprecated:!0,name:"soALEPH/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"CVfYa8RGXnuDBeGmniCcdkBwoLqVxh92xB1JqgRQx3F",deprecated:!0,name:"BTC/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"H5uzEytiByuXt964KampmuNCurNDwkVVypkym75J2DQW",deprecated:!0,name:"soETH/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"7xMDbYTCqQEcK2aM9LbetGtNFJpzKdfXzLL5juaLh4GJ",deprecated:!0,name:"SOL/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"CDdR97S8y96v3To93aKvi3nCnjUrbuVSuumw8FLvbVeg",deprecated:!0,name:"SRM/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"7LVJtqSrF6RudMaz5rKGTmR3F3V5TKoDcN6bnk68biYZ",deprecated:!0,name:"soSUSHI/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"13vjJ8pxDMmzen26bQ5UrouX8dkXYPW1p3VLVDjxXrKR",deprecated:!0,name:"soSXP/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"AwvPwwSprfDZ86beBJDNH5vocFvuw4ZbVQ6upJDbSCXZ",deprecated:!0,name:"MSRM/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"FfDb3QZUdMW2R2aqJQgzeieys4ETb3rPrFFfPSemzq7R",deprecated:!0,name:"soFTT/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"4QL5AQvXdMSCVZmnKXiuMMU83Kq3LCwVfU8CyznqZELG",deprecated:!0,name:"soYFI/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"7JCG9TsCx3AErSV3pvhxiW4AbkKRcJ6ZAveRmJwrgQ16",deprecated:!0,name:"soLINK/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"3otQFkeQ7GNUKT3i2p3aGTQKS2SAw6NLYPE5qxh3PoqZ",deprecated:!0,name:"soHGET/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"2M8EBxFbLANnCoHydypL1jupnRHG782RofnvkatuKyLL",deprecated:!0,name:"soCREAM/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"3UqXdFtNBZsFrFtRGAWGvy9R8H6GJR2hAyGRdYT9BgG3",deprecated:!0,name:"soUBXT/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"9jiasgdYGGh34fAbBQSwkKe1dYSapXbjy2sLsYpetqFp",deprecated:!0,name:"soHNT/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"7oKqJhnz9b8af8Mw47dieTiuxeaHnRYYGBiqCrRpzTRD",deprecated:!0,name:"soFRONT/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"F1rxD8Ns5w4WzVcTRdaJ96LG7YKaA5a25BBmM32yFP4b",deprecated:!0,name:"soAKRO/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"6ToedDwjRCvrcKX7fnHSTA9uABQe1dcLK6YgS5B9M3wo",deprecated:!0,name:"soHXRO/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"FURvCsDUiuUaxZ13pZqQbbfktFGWmQVTHz7tL992LQVZ",deprecated:!0,name:"soUNI/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"EcfDRMrEJ3yW4SgrRyyxTPoKqAZDNSBV8EerigT7BNSS",deprecated:!0,name:"soKEEP/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"2bPsJ6bZ9KDLfJ8QgSN1Eb4mRsbAiaGyHN6cJkoVLpwd",deprecated:!0,name:"soMATH/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"B1GypajMh7S8zJVp6M1xMfu6zGsMgvYrt3cSn9wG7Dd6",deprecated:!0,name:"soTOMO/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"rPTGvVrNFYzBeTEcYnHiaWGNnkSXsWNNjUgk771LkwJ",deprecated:!0,name:"soLUA/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"FrDavxi4QawYnQY259PVfYUjUvuyPNfqSXbLBqMnbfWJ",deprecated:!0,name:"FIDA/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"CVn1nJ5Utuseyy2qqwrpYoJz9Y7jjYonVL4UYvcCepDH",deprecated:!0,name:"KIN/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"BqjGW7ousAizgs8VrHo5SR1LxTksAQPtb8cKZZiNvX5D",deprecated:!0,name:"MAPS/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"GcoKtAmTy5QyuijXSmJKBtFdt99e6Buza18Js7j9AJ6e",deprecated:!1,name:"soALEPH/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"A8YFbxQYFVqKZaoYJLLUVcQiWP7G2MeEgW5wsAQgMvFw",deprecated:!1,name:"BTC/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"4tSvZvnbyzHXLMTiFonMyxZoHmFqau1XArcRCVHLZ5gX",deprecated:!1,name:"soETH/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"ByRys5tuUWDgL73G8JBAEfkdFf8JWBzPBDHsBVQ5vbQA",deprecated:!1,name:"SRM/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"A1Q9iJDVVS8Wsswr9ajeZugmj64bQVCYLZQLra2TMBMo",deprecated:!1,name:"soSUSHI/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"4LUro5jaPaTurXK737QAxgJywdhABnFAMQkXX4ZyqqaZ",deprecated:!1,name:"soSXP/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"4VKLSYdvrQ5ngQrt1d2VS8o4ewvb2MMUZLiejbnGPV33",deprecated:!1,name:"MSRM/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"2Pbh1CvRVku1TgewMfycemghf6sU9EyuFDcNXqvRmSxc",deprecated:!1,name:"soFTT/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"7qcCo8jqepnjjvB5swP4Afsr3keVBs6gNpBTNubd1Kr2",deprecated:!1,name:"soYFI/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"3hwH1txjJVS8qv588tWrjHfRxdqNjBykM1kMcit484up",deprecated:!1,name:"soLINK/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"88vztw7RTN6yJQchVvxrs6oXUDryvpv9iJaFa1EEmg87",deprecated:!1,name:"soHGET/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"7nZP6feE94eAz9jmfakNJWPwEKaeezuKKC5D1vrnqyo2",deprecated:!1,name:"soCREAM/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"2wr3Ab29KNwGhtzr5HaPCyfU1qGJzTUAN4amCLZWaD1H",deprecated:!1,name:"soUBXT/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"CnUV42ZykoKUnMDdyefv5kP6nDSJf7jFd7WXAecC6LYr",deprecated:!1,name:"soHNT/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"9Zx1CvxSVdroKMMWf2z8RwrnrLiQZ9VkQ7Ex3syQqdSH",deprecated:!1,name:"soFRONT/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"5CZXTTgVZKSzgSA3AFMN5a2f3hmwmmJ6hU8BHTEJ3PX8",deprecated:!1,name:"soAKRO/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"6Pn1cSiRos3qhBf54uBP9ZQg8x3JTardm1dL3n4p29tA",deprecated:!1,name:"soHXRO/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"6JYHjaQBx6AtKSSsizDMwozAEDEZ5KBsSUzH7kRjGJon",deprecated:!1,name:"soUNI/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"J7cPYBrXVy8Qeki2crZkZavcojf2sMRyQU7nx438Mf8t",deprecated:!1,name:"soMATH/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"8BdpjpSD5n3nk8DQLqPUyTZvVqFu6kcff5bzUX5dqDpy",deprecated:!1,name:"soTOMO/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"4xyWjQ74Eifq17vbue5Ut9xfFNfuVB116tZLEpiZuAn8",deprecated:!1,name:"soLUA/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"jyei9Fpj2GtHLDDGgcuhDacxYLLiSyxU4TY7KxB2xai",deprecated:!1,name:"SRM/SOL",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"9wFFyRfZBsuAha4YcuxcXLKwMxJR43S7fPfQLusDBzvT",deprecated:!1,name:"SOL/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"E14BKBhDWD4EuTkWj1ooZezesGxMW8LPCps4W5PuzZJo",deprecated:!1,name:"FIDA/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"Bn6NPyr6UzrFAwC4WmvPvDr2Vm8XSUnFykM2aQroedgn",deprecated:!1,name:"KIN/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"3A8XQRWXC7BjLpgLDDBhQJLT5yPCzS16cGYRKHkKxvYo",deprecated:!1,name:"MAPS/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"3rgacody9SvM88QR83GHaNdEEx4Fe2V2ed5GJp2oeKDr",deprecated:!1,name:"soKEEP/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"EmCzMQfXMgNHcnRoFwAdPe1i2SuiSzMj1mx6wu3KN2uA",deprecated:!0,name:"soALEPH/soUSDT",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"8AcVjMG2LTbpkjNoyq8RwysokqZunkjy3d5JDzxC6BJa",deprecated:!0,name:"BTC/soUSDT",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"HfCZdJ1wfsWKfYP2qyWdXTT5PWAGWFctzFjLH48U1Hsd",deprecated:!0,name:"soETH/soUSDT",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"8mDuvJJSgoodovMRYArtVVYBbixWYdGzR47GPrRT65YJ",deprecated:!0,name:"SOL/soUSDT",programId:"BJ3jrUzddfuSrZHXSCxMUUQsjKEyLmuuyZebkcaFp2fg"},{address:"HARFLhSq8nECZk4DVFKvzqXMNMA9a3hjvridGMFizeLa",deprecated:!0,name:"SRM/soUSDT",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"DzFjazak6EKHnaB2w6qSsArnj28CV1TKd2Smcj9fqtHW",deprecated:!0,name:"soSUSHI/soUSDT",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"GuvWMATdEV6DExWnXncPYEzn4ePWYkvGdC8pu8gsn7m7",deprecated:!0,name:"soSXP/soUSDT",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"H4snTKK9adiU15gP22ErfZYtro3aqR9BTMXiH3AwiUTQ",deprecated:!0,name:"MSRM/soUSDT",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"DHDdghmkBhEpReno3tbzBPtsxCt6P3KrMzZvxavTktJt",deprecated:!0,name:"soFTT/soUSDT",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"5zu5bTZZvqESAAgFsr12CUMxdQvMrvU9CgvC1GW8vJdf",deprecated:!0,name:"soYFI/soUSDT",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"F5xschQBMpu1gD2q1babYEAVJHR1buj1YazLiXyQNqSW",deprecated:!0,name:"soLINK/soUSDT",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"BAbc9baz4hV1hnYjWSJ6cZDRjfvziWbYGQu9UFkcdUmx",deprecated:!0,name:"soHGET/soUSDT",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"EBxJWA2nLV57ZntbjizxH527ZjPNLT5cpUHMnY5k3oq",deprecated:!0,name:"soCREAM/soUSDT",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"46VdEkj4MJwZinwVb3Y7DUDpVXLNb9YW7P2waKU3vCqr",deprecated:!0,name:"soUBXT/soUSDT",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"Hc22rHKrhbrZBaQMmhJvPTkp1yDr31PDusU8wKoqFSZV",deprecated:!0,name:"soHNT/soUSDT",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"HFoca5HKwiTPpw9iUY5iXWqzkXdu88dS7YrpSvt2uhyF",deprecated:!0,name:"soFRONT/soUSDT",programId:"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn"},{address:"5xnYnWca2bFwC6cPufpdsCbDJhMjYCC59YgwoZHEfiee",deprecated:!0,name:"soALEPH/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"EXnGBBSamqzd3uxEdRLUiYzjJkTwQyorAaFXdfteuGXe",deprecated:!0,name:"BTC/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"5abZGhrELnUnfM9ZUnvK6XJPoBU5eShZwfFPkdhAC7o",deprecated:!0,name:"soETH/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"7xLk17EQQ5KLDLDe44wCmupJKJjTGd8hs3eSVVhCx932",deprecated:!0,name:"SOL/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"H3APNWA8bZW2gLMSq5sRL41JSMmEJ648AqoEdDgLcdvB",deprecated:!0,name:"SRM/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"4uZTPc72sCDcVRfKKii67dTPm2Xe4ri3TYnGcUQrtnU9",deprecated:!0,name:"soSUSHI/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"33GHmwG9woY95JuWNi74Aa8uKvysSXxif9P1EwwkrCRz",deprecated:!0,name:"soSXP/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"FUaF58sDrgbqakHTR8RUwRLauSofRTjqyCsqThFPh6YM",deprecated:!0,name:"MSRM/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"5NqjQVXLuLSDnsnQMfWp3rF9gbWDusWG4B1Xwtk3rZ5S",deprecated:!0,name:"soFTT/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"97NiXHUNkpYd1eb2HthSDGhaPfepuqMAV3QsZhAgb1wm",deprecated:!0,name:"soYFI/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"hBswhpNyz4m5nt4KwtCA7jYXvh7VmyZ4TuuPmpaKQb1",deprecated:!0,name:"soLINK/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"GaeUpY7CT8rjoeVGjY1t3mJJDd1bdXxYWtrGSpsVFors",deprecated:!0,name:"soHGET/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"7qq9BABQvTWKZuJ5fX2PeTKX6XVtduEs9zW9WS21fSzN",deprecated:!0,name:"soCREAM/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"DCHvVahuLTNWBGUtEzF5GrTdx5FRpxqEJiS6Ru1hrDfD",deprecated:!0,name:"soUBXT/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"DWjJ8VHdGYBxDQYdrRBVDWkHswrgjuBFEv5pBhiRoPBz",deprecated:!0,name:"soHNT/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"56eqxJYzPigm4FkigiBdsfebjMgAbKNh24E7oiKLBtye",deprecated:!0,name:"soFRONT/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"FQbCNSVH3RgosCPB4CJRstkLh5hXkvuXzAjQzT11oMYo",deprecated:!0,name:"soAKRO/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"Fs5xtGUmJTYo8Ao75M3R3m3mVX53KMUhzfXCmyRLnp2P",deprecated:!0,name:"soHXRO/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"ChKV7mxecPqFPGYJjhzowPHDiLKFWXXVujUiE3EWxFcg",deprecated:!0,name:"soUNI/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"6N3oU7ALvn2RPwdpYVzPBgQJ8njT29inBbS2tSrwx8fh",deprecated:!0,name:"soKEEP/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"5P6dJbyKySFXMYNWiEcNQu8xPRYsehYzCeVpae9Ueqrg",deprecated:!0,name:"soMATH/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"H7c8FcQPJ2E5tJmpWBPSi7xCAbk8immdtUxKFRUyE4Ro",deprecated:!0,name:"soTOMO/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"7PSeX1AEtBY9KvgegF5rUh452VemMh7oDzFtJgH7sxMG",deprecated:!0,name:"soLUA/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"AF2oQQaLtcrTnQyVs3EPTdyw57TPaK6njKYDq2Qw7LqP",deprecated:!0,name:"soSWAG/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"9TE15E5h61zJ5VmQAAHkGrAuQdFTth33aBbKdcrppZBp",deprecated:!0,name:"FIDA/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"8HEaA1vSA5mGQoHcvRPNibnuZvnUpSjJJru9HJNH3SqM",deprecated:!0,name:"KIN/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"8EuuEwULFM7n7zthPjC7kA64LPRzYkpAyuLFiLuVg7D4",deprecated:!0,name:"soUSDT/USDC",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"8grUs4WZoTs4KJ8LfRNUBs6SNkMTp5BnVRzJgQ2ranDT",deprecated:!0,name:"MAPS/soUSDT",programId:"EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"},{address:"FoCuWt4KboucUg2PwmQ3dbkvLqYPLnAo1Rsm8p7QPyf",deprecated:!0,name:"soALEPH/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"5r8FfnbNYcQbS1m4CYmoHYGjBtu6bxfo6UJHNRfzPiYH",deprecated:!0,name:"BTC/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"71CtEComq2XdhGNbXBuYPmosAjMCPSedcgbNi5jDaGbR",deprecated:!0,name:"soETH/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"EZyQ9zyqQsw3QcsLksoWyd1UFVjHZkzRx8N4ZMnZQrS2",deprecated:!0,name:"SRM/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"6ERBjj692XHLWwWSRAUpiKenXshcwmPqhMy7RMapeoKa",deprecated:!0,name:"soSUSHI/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"CQ3kAGxPmpBbak2RSHWyMeRhyLYbH6oVZHJxgjzDLpLW",deprecated:!0,name:"soSXP/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"2Hqn46jhwaQMQ3zEnHtxrWxQZom6qwLXAgdsFJM1Srwh",deprecated:!0,name:"MSRM/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"G5jqZNo2UVCTnJxgEhKCYvqFRs3MxsnH8Bervq3rfLoL",deprecated:!0,name:"soFTT/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"CbwtTHEpfTnCyLw4GoTbKk7WyrXkuATLfLadY2odBSsY",deprecated:!0,name:"soYFI/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"5GjhBAYx8pYeCeUQt7rt93KQZnoQFuDq9Jx4iqq97Mip",deprecated:!0,name:"soLINK/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"9jMPV9E23pTirMjC7vz5suRNkd25311G3Httg7jTib8R",deprecated:!0,name:"soCREAM/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"DsSz9KWT97T4RewRTqTNDpNFQyxMPcuYNAJw2xHAzSiZ",deprecated:!0,name:"soUBXT/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"3k1sURztjxhjYczjyioQ7y2UkMB6K5Ksi3SWvLeLx6Ex",deprecated:!0,name:"soHNT/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"B791G8UCahfmABVcR2wPAMK6LJnuqxSAqiG6wX3mmVVM",deprecated:!0,name:"soFRONT/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"95f7fxfUh8WqUTrdjorHRXm6rTfkWqr23ioGMmKMjedP",deprecated:!0,name:"soAKRO/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"H4RxtmQ4P3TYPt78G3DuHgaGzyFct6MfaeYneLB5PyeG",deprecated:!0,name:"soHXRO/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"7myaZEGZf9m72T1Mqm8GTx5MnmSFS5NCXSwRP18W4EA3",deprecated:!0,name:"soUNI/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"7cRKzNoqjF9VtzvdnP129VYP3izivk9iY3jMJBMzREVT",deprecated:!0,name:"soHGET/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"GV9fYzdwipoaagXFxe5tzDMPcmSVQati5CUvBPsEZThH",deprecated:!0,name:"soMATH/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"AaMLXcwYYi5fA41JNCB2ukAmQyKHitYx5NnpsiWWev6R",deprecated:!0,name:"soTOMO/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"5ZeNLrduGi3WkH9CPwv2Zpbkh38MH8v63aSi2aBUW23g",deprecated:!0,name:"soLUA/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"Ec1aq54XKH9o5fe169cU2sCcxxTP54eeQCe77SpizKuc",deprecated:!0,name:"soUSDT/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"G3uhFg2rBFunHUXtCera13vyQ5KCS8Hx3d4HohLoZbT5",deprecated:!0,name:"SOL/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"2NMTG7tFZidRpQk9Sf4dgQyJb9HxKCyXjQdiuXww3sKm",deprecated:!0,name:"soSWAG/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"7QpJAiwGmqY1SiucjfPXvgeWwCobyV6hZSgzMysZX6Ww",deprecated:!0,name:"FIDA/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"CmLhvXARncLncE1949XBfQWeJh6Zvw3FE5A3Z5ecPYQH",deprecated:!0,name:"KIN/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"FhP3X2ptdi7L1RtWK9Vfow5dyzD92gfXiA57e8eqxvka",deprecated:!0,name:"MAPS/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"DE7xJE2EkaV81wLabDMuhBzUwFhhwfURLdz1aXBBQZQ1",deprecated:!0,name:"soKEEP/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"5nLJ22h1DUfeCfwbFxPYK8zbfbri7nA9bXoDcR8AcJjs",deprecated:!1,name:"MSRM/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"7dLVkUfBVfCGkFhSXDCq1ukM9usathSgS716t643iFGF",deprecated:!1,name:"soETH/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"8afKwzHR3wJE7W7Y5hvQkngXh6iTepSZuutRMMy96MjR",deprecated:!1,name:"soSXP/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"cgani53cMZgYfRMgSrNekJTMaLmccRfspsfTbXWRg7u",deprecated:!1,name:"soCEL/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"Gyp1UGRgbrb6z8t7fpssxEKQgEmcJ4pVnWW3ds2p6ZPY",deprecated:!1,name:"soALEPH/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"4ztJEvQyryoYagj2uieep3dyPwG2pyEwb2dKXTwmXe82",deprecated:!1,name:"soCREAM/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"HEGnaVL5i48ubPBqWAhodnZo8VsSLzEM3Gfc451DnFj9",deprecated:!1,name:"soKEEP/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"8FpuMGLtMZ7Wt9ZvyTGuTVwTwwzLYfS5NZWcHxbP1Wuh",deprecated:!1,name:"soHNT/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"5GAPymgnnWieGcRrcghZdA3aanefqa4cZx1ZSE8UTyMV",deprecated:!1,name:"soMAPS/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"AADohBGxvf7bvixs2HKC3dG2RuU3xpZDwaTzYFJThM8U",deprecated:!1,name:"TRYB/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"EbV7pPpEvheLizuYX3gUCvWM8iySbSRAhu2mQ5Vz2Mxf",deprecated:!1,name:"FIDA/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"FcPet5fz9NLdbXwVM6kw2WTHzRAD7mT78UjwTpawd7hJ",deprecated:!1,name:"soRSR/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"AtNnsY1AyRERWJ8xCskfz38YdvruWVJQUVXgScC1iPb",deprecated:!1,name:"SRM/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"teE55QrL4a4QSfydR9dnHF97jgCfptpuigbb53Lo95g",deprecated:!1,name:"RAY/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"C1EuT9VokAKLiW7i2ASnZUvxDoKuKkCpDDeNxAptuNe4",deprecated:!1,name:"BTC/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"Hr3wzG8mZXNHV7TuL6YqtgfVUesCqMxGYCEyP3otywZE",deprecated:!1,name:"soFTT/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"HLvRdctRB48F9yLnu9E24LUTRt89D48Z35yi1HcxayDf",deprecated:!1,name:"soAKRO/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"2SSnWNrc83otLpfRo792P6P3PESZpdr8cu2r8zCE6bMD",deprecated:!1,name:"soUNI/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"F1T7b6pnR8Pge3qmfNUfW6ZipRDiGpMww6TKTrRU4NiL",deprecated:!1,name:"soUBXT/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"HWHvQhFmJB3NUcu1aihKmrKegfVxBEHzwVX6yZCKEsi1",deprecated:!1,name:"SOL/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"35tV8UsHH8FnSAi3YFRrgCu4K9tb883wKnAXpnihot5r",deprecated:!1,name:"soLUA/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"6DgQRTpJTnAYBSShngAVZZDq7j9ogRN1GfSQ3cq9tubW",deprecated:!1,name:"soSUSHI/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"2WghiBkDL2yRhHdvm8CpprrkmfguuQGJTCDfPSudKBAZ",deprecated:!1,name:"soMATH/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"ErQXxiNfJgd4fqQ58PuEw5xY35TZG84tHT6FXf5s4UxY",deprecated:!1,name:"soHGET/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"CGC4UgWwqA9PET6Tfx6o6dLv94EK2coVkPtxgNHuBtxj",deprecated:!1,name:"soFRONT/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"GnKPri4thaGipzTbp8hhSGSrHgG4F8MFiZVrbRn16iG2",deprecated:!1,name:"soTOMO/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"6bxuB5N3bt3qW8UnPNLgMMzDq5sEH8pFmYJYGgzvE11V",deprecated:!1,name:"soAAVE/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"7cknqHAuGpfVXPtFoJpFvUjJ8wkmyEfbFusmwMfNy3FE",deprecated:!1,name:"MAPS/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"4absuMsgemvdjfkgdLQq1zKEjw3dHBoCWkzKoctndyqd",deprecated:!1,name:"soHXRO/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"4nCFQr8sahhhL4XJ7kngGFBmpkmyf3xLzemuMhn6mWTm",deprecated:!1,name:"KIN/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"3Xg9Q4VtZhD4bVYJbTfgGWFV5zjE3U7ztSHa938zizte",deprecated:!1,name:"soYFI/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"3yEZ9ZpXSQapmKjLAGKZEzUNA1rcupJtsDp5mPBWmGZR",deprecated:!1,name:"soLINK/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"J2XSt77XWim5HwtUM8RUwQvmRXNZsbMKpp5GTKpHafvf",deprecated:!1,name:"soSWAG/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"77quYg4MGneUdjgXCunt9GgM1usmrxKY31twEy3WHwcS",deprecated:!1,name:"USDT/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"GKLev6UHeX1KSDCyo2bzyG6wqhByEzDBkmYTxEdmYJgB",deprecated:!1,name:"OXY/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{address:"HdBhZrnrxpje39ggXnTb6WuTWVvj5YKcSHwYGQCRsVj",deprecated:!1,name:"OXY/soUSDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{name:"OXY/USDC",address:"GZ3WBFsqntmERPwumFEYgrX2B7J7G11MzNZAy7Hje27X",deprecated:!1,programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{name:"xCOPE/USDC",address:"7MpMwArporUHEGW7quUpkPZp5L5cHPs9eKUfKCdaPHq2",deprecated:!1,programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{name:"COPE/USDC",address:"6fc7v3PmjZG9Lk2XTot6BywGyYLkBQuzuFKd4FpCsPxk",deprecated:!1,programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{name:"MER/USDC",address:"HhvDWug3ftYNx5148ZmrQxzvEmohN2pKVNiRT4TVoekF",deprecated:!0,programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{name:"MER/USDT",address:"6HwcY27nbeb933UkEcxqJejtjWLfNQFWkGCjAVNes6g7",deprecated:!1,programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{name:"MER/USDC",address:"G4LcexdCzzJUKZfqyVDQFzpkjhB1JoCNL8Kooxi9nJz5",deprecated:!1,programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{name:"SNY/USDC",address:"DPfj2jYwPaezkCmUNm5SSYfkrkz8WFqwGLcxDDUsN3gA",deprecated:!1,programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{name:"SLRS/USDC",address:"2Gx3UfV831BAh8uQv1FKSPKS9yajfeeD8GJ4ZNb2o2YP",deprecated:!1,programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"},{name:"ETHV/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"HrgkuJryyKRserkoz7LBFYkASzhXHWp9XA6fRYCA6PHb"},{name:"IETHV/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"5aoLj1bySDhhWjo7cLfT3pF2gqNGd63uEJ9HMSfASESL"},{name:"SBR/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"HXBi8YBwbh4TXF6PjVw81m8Z3Cc4WBofvauj5SBFdgUs"},{name:"renBTC/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"74Ciu5yRzhe8TFTHvQuEVbFZJrbnCMRoohBK33NNiPtv"},{name:"renDOGE/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"5FpKCWYXgHWZ9CdDMHjwxAfqxJLdw2PRXuAmtECkzADk"},{name:"DXL/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"DYfigimKWc5VhavR4moPBibx9sMcWYVSjVdWvPztBPTa"},{name:"MNGO/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"3d4rzwpy9iGdCZvgxcu7B1YocYffVLsQXPXkBZKt2zLc"},{name:"CYS/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"6V6y6QFi17QZC9qNRpVp7SaPiHpCTp2skbRQkUyZZXPW"},{name:"POLIS/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"HxFLKUAmAMLz1jtT3hbvCMELwH5H9tpM2QugP8sKyfhW"},{name:"ATLAS/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"Di66GTLsV64JgCCYGVcY21RZ173BHkjJVgPyezNN7P1K"},{name:"LIKE/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"3WptgZZu34aiDrLMUiPntTYZGNZ72yT1yxHYxSdbTArX"},{name:"MSOL/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"6oGsL2puUgySccKzn9XA9afqF217LfxP5ocq4B3LWsjy"},{name:"MSOL/SOL",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"5cLrMai1DsLRYc1Nio9qMTicsWtvzjzZfJPXyAoF4t1Z"},{name:"AAVE/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"8WZrmdpLckptiVKd2fPHPjewRVYQGQkjxi9vzRYG1sfs"},{name:"AAVE/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"LghsMERQWQFK3zWMTrUkoyAJARQw2wSmcYZjexeN3zy"},{name:"AKRO/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"G3h8NZgJozk9crme2me6sKDJuSQ12mNCtvC9NbSWqGuk"},{name:"AKRO/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"DvbiPxKzuXZPcmUcYDqBz1tvUrXYPsNrRAjSeuwHtmEA"},{name:"ALEPH/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"Fw4mvuE7KZmTjQPxP2sRpHwPDfRMWnKBupFZGyW9CAQH"},{name:"ALEPH/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"GZeHR8uCTVoHVDZFRVXTgm386DK1EKehy9yMS3BFChcL"},{name:"CEL/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"79ESpYSb2hM14KTRXPZUwDkxUGC5irE2esd1vxdXfnZz"},{name:"CEL/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"J9ww1yufRNDDbUbDXmew2mW2ozkx7cme7dMvKjMQVHrL"},{name:"CREAM/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"4pdQ2D4gehMhGu4z9jeQbEPUFbTxB5qcPr3zCynjJGyp"},{name:"CREAM/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"6fspxMfBmYFTGFBDN5MU33A55i2MkGr7eSjBLPCAU6y9"},{name:"ETH/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"8Gmi2HhZmwQPVdCwzS7CM66MGstMXPcTVHA7jF19cLZz"},{name:"ETH/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"ch7kmPrtoQUSEPBggcNAvLGiMQkJagVwd3gDYfd8m7Q"},{name:"FRONT/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"B95oZN5HCLGmFAhbzReWBA9cuSGPFQAXeuhm2FfpdrML"},{name:"FRONT/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"DZTYyy1L5Pr6DmTtYY5bEuU9g3LQ4XGvuYiN3zS25yG7"},{name:"FTT/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"2wteg25ch227n4Rh1CN4WNrDZXBpRBpWJ48mEC2K7f4r"},{name:"FTT/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"BoHojHESAv4McZx9gXd1bWTZMq25JYyGz4qL1m5C3nvk"},{name:"HGET/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"27e1mB6UoPohbc3MmwMXu5QM7b2E3k5Mbhwv6JguwyXg"},{name:"HGET/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"BdRzTEKb7Qdu4tWts5zXjwcpQErZxEzvShKZ5QcthMag"},{name:"HXRO/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"CBb5zXwNRB73WVjs2m21P5prcEZa6SWmej74Vzxh8dRm"},{name:"HXRO/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"3BScwNxtMrEcQ5VTHyXHYQR98dTaxfyXGaLkuSjBY1dW"},{name:"LINK/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"FJMjxMCiDKn16TLhXUdEbVDH5wC6k9EHYJTcrH6NcbDE"},{name:"LINK/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"Gr2KmhK7Upr4uW56B1QQrJuhhgmot6zAHJeZALTMStiX"},{name:"LUA/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"J9imTcEeahZqKuaoQaPcCeSGCMWL8qSACpK4B7bC8NN4"},{name:"LUA/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"BMJ3CvQZ57cNnuc3Lz5Pb6cW6Sr9kZGz3qz2bJQTE24A"},{name:"MATH/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"G8L1YLrktaG1t8YBMJs3CwV96nExvJJCSpw3DARPDjE2"},{name:"MATH/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"CkvNfATB7nky8zPLuwS9bgcFbVRkQdkd5zuKEovyo9rs"},{name:"RAY/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"2xiv8A5xrJ7RnGdxXB42uFEkYHJjszEhaJyKKt4WaLep"},{name:"RSR/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"GqgkxEswUwHBntmzb5GpUhKrVpJhzreSruZycuJwdNwB"},{name:"RSR/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"2j2or38X2FUbpkK4gkgvjDtqN3ibkKw3v5yn7o2gHqPc"},{name:"SUSHI/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"3uWVMWu7cwMnYMAAdtsZNwaaqeeeZHARGZwcExnQiFay"},{name:"SUSHI/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"T3aC6qcPAJtX1gqkckfSxBPdPWziz5fLYRt5Dz3Nafq"},{name:"SWAG/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"wSkeLMv3ktJyLm51bvQWxY2saGKqGxbnUFimPxbgEvQ"},{name:"SWAG/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"6URQ4zFWvPm1fhJCKKWorrh8X3mmTFiDDyXEUmSf8Rb2"},{name:"SXP/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"G5F84rfqmWqzZv5GBpSn8mMwW8zJ2B4Y1GpGupiwjHNM"},{name:"SXP/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"2FQbPW1ticJz2SMMbEXxbKWJKmw1wLc6ggSP2HyzdMen"},{name:"UBXT/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"Hh4p7tJpqkGW6xsHM2LiPPMpJg43fwn5TbmVmfrURdLY"},{name:"UBXT/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"5xhjc3ZtAwnBK3qsaro28VChL7WrxY9N4SG6UZpYxpGc"},{name:"UNI/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"B7b5rjQuqQCuGqmUBWmcCTqaL3Z1462mo4NArqty6QFR"},{name:"UNI/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"FrKM6kJtAjXknHPEpkrQtJSXZwUxV5dq26wDpc4YjQST"},{name:"YFI/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"BiJXGFc1c4gyPpv9HLRJoKbZewWQrTCHGuxYKjYMQJpC"},{name:"YFI/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"9sue9TZAeUhNtNAPPGb9dke7rkJeXktGD3u8ZC37GWnQ"},{name:"AVAX/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"E8JQstcwjuqN5kdMyUJLNuaectymnhffkvfg1j286UCr"},{name:"AXSet/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"HZCheduA4nsSuQpVww1TiyKZpXSAitqaXxjBD2ymg22X"},{name:"BNB/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"4UPUurKveNEJgBqJzqHPyi8DhedvpYsMXi7d43CjAg2f"},{name:"BNB/USDT",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"FjbKNZME5yVSC1R3HJM99kB3yir3q3frS5MteMFD72sV"},{name:"GALA/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"F7WJsoxTWQRmAwAyFe9APmuVv4HqmhchFtdbR9dvAUDm"},{name:"MATICpo/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"5WRoQxE59966N2XfD2wYy1uhuyKeoVJ9NBMH6r6RNYEF"},{name:"ROSE/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"EybAYkmRKCyD4w8AErTG1bqmnvT85LFuPQPMCc8J3yD"},{name:"SAND/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"3FE2g3cadTJjN3C7gNRavwnv7Yh9Midq7h9KgTVUE7tR"},{name:"LUNA/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"HBTu8hNaoT3VyiSSzJYa8jwt9sDGKtJviSwFa11iXdmE"},{name:"SHIB/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"Er7Jp4PADPVHifykFwbVoHdkL1RtZSsx9zGJrPJTrCgW"},{name:"UST/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"8WmckvEoVGZvtN8knjdzFGbWJ3Sr4BcWdyzSYuCrD4YK"},{name:"FAB/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"Cud48DK2qoxsWNzQeTL5D8sAiHsGwG8Ev1VMNcYLayxt"},{name:"JET/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"6pQMoHDC2o8eeFxyTKtfnsr8d48hKFWsRpLHAqVHH2ZP"},{name:"scnSOL/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"D52sefGCWho2nd5UGxWd7wCftAzeNEMNYZkdEPGEdQTb"},{name:"stSOL/USDC",programId:"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",deprecated:!1,address:"5F7LGsP1LPtaRV7vVKgxwNYX4Vf22xvuzyXjyar7jJqp"}],require$$2=[{address:"9n4nbM75f5Ui33ZbPYXn59EwSgE8CGsHtAeTH5YFeJ9E",name:"BTC"},{address:"2FPyTwcZLUg1MDrwsyoP4D6s1tM7hAkHYRjkNb5w6Pxk",name:"ETH"},{address:"AGFEad2et2ZJif9jaGpdMixQqvW5i81aBdvKe7PHNfz3",name:"FTT"},{address:"3JSf5tPeuscJGtaCp5giEiDhv51gQ4v3zWg8DGgyLfAB",name:"YFI"},{address:"CWE8jPTUYhdCTZYWPTe1o5DFqfdjzWKc9WKz6rSjQUdG",name:"LINK"},{address:"Ga2AXHpfAF6mv2ekZwcsJFqu7wB4NV331qNH7fW9Nst8",name:"XRP"},{address:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB",name:"USDT"},{address:"BQcdHdAQW1hczDbBi9hiegXAR7A98Q9jx3X3iBBBDiq4",name:"WUSDT"},{address:"BXXkv6z8ykpG1yuvUDPgh732wzVHB69RnB9YgSYh3itW",name:"WUSDC"},{address:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",name:"USDC"},{address:"MSRMcoVyrFxnSgo5uXwone5SKcGhT1KEJMFEkMEWf9L",name:"MSRM"},{address:"SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt",name:"SRM"},{address:"AR1Mtgh7zAtxuxGd2XPovXPVjcSdY3i4rQYisNadjfKy",name:"SUSHI"},{address:"SF3oTvfWzEP3DTwGSvUXRrGTvr75pdZNnBLAH9bzMuX",name:"SXP"},{address:"CsZ5LZkDS7h9TDKjrbL7VAwQZ9nsRu8vJLhRYfmGaN8K",name:"ALEPH"},{address:"BtZQfWqDGbk9Wf2rXEiWyQBdBY1etnUUn6zEphvVS7yN",name:"HGET"},{address:"5Fu5UUgbjpUvdBveb3a1JTNirL8rXtiYeSMWvKjtUNQv",name:"CREAM"},{address:"873KLxCbz7s9Kc4ZzgYRtNmhfkQrhfyWGZJBmyCbC3ei",name:"UBXT"},{address:"HqB7uswoVg4suaQiDP3wjxob1G5WdZ144zhdStwMCq7e",name:"HNT"},{address:"9S4t2NEAiJVMvPdRYKVrfJpBafPBLtvbvyS3DecojQHw",name:"FRONT"},{address:"6WNVCuxCGJzNjmMZoKyhZJwvJ5tYpsLyAtagzYASqBoF",name:"AKRO"},{address:"DJafV9qemGp7mLMEn5wrfqaFwxsbLgUsGVS16zKRk9kc",name:"HXRO"},{address:"DEhAasscXF4kEGxFgJ3bq4PpVGp5wyUxMRvn6TzGVHaw",name:"UNI"},{address:"GUohe4DJUA5FKPWo3joiPgsB7yzer7LpDmt1Vhzy3Zht",name:"KEEP"},{address:"GeDS162t9yGJuLEHPWXXGrb1zwkzinCgRwnT8vHYjKza",name:"MATH"},{address:"So11111111111111111111111111111111111111112",name:"SOL"},{address:"GXMvfY2jpQctDqZ9RoU3oWPhufKiCcFEfchvYumtX7jd",name:"TOMO"},{address:"EqWCKXfs3x47uVosDpTRgFniThL9Y8iCztJaapxbEaVX",name:"LUA"},{address:"9F9fNTT6qwjsu4X4yWYKZpsbw5qT7o6yR2i57JF2jagy",name:"SWAG"},{address:"EchesyfXePKdLtoiZSL8pBe8Myagyy8ZRqsACNCFGnvp",name:"FIDA"},{address:"kinXdEcpDQeHPEuQnqmUgtYykqKGVFq6CeVX5iAHJq6",name:"KIN"},{address:"MAPS41MDahZ9QdKXhVa4dWB9RuyfV4XqhyAZ8XcYepb",name:"MAPS"},{address:"z3dn17yLaGMKffVogeFHQ9zWVcXgqgf3PQnDsNs2g6M",name:"OXY"},{address:"4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R",name:"RAY"},{address:"3K6rftdAaQYMPunrtNRHgnK2UAtjm2JwyT2oCiTDouYE",name:"xCOPE"},{address:"dK83wTVypEpa1pqiBbHY3MNuUnT3ADUZM4wk9VZXZEc",name:"AAVE"},{address:"DgHK9mfhMtUwwv54GChRrU54T2Em5cuszq2uMuen1ZVE",name:"CEL"},{address:"7ncCLJpP3MNww17LW8bRvx8odQQnubNtfNZBL5BgAEHW",name:"RSR"},{address:"6ry4WBDvAwAnrYJVv6MCog4J8zx6S3cPgSqnTsDZ73AR",name:"TRYB"},{address:"8HGyAAB1yoM1ttS7pXjHMa3dukTFGQggnFFH3hJZgzQh",name:"COPE"},{address:"MERt85fc5boKw3BW1eYdxonEuJNvXbiMbs6hvheau5K",name:"MER"},{address:"4dmKkXNHdgYsXqBHCuMikNQWwVomZURhYvkkX5c4pQ7y",name:"SNY"},{address:"SLRSSpSLUTP7okbCUBYStWCo1vUgyt775faPqz8HUMr",name:"SLRS"},{address:"CDJWUqTcYTVAKXAVXoQZFes5JUFc7owSeq7eMQcDSbo5",name:"renBTC"},{address:"ArUkYE2XDKzqy77PRRGjo4wREWwqk6RXTfM9NeqzPvjU",name:"renDOGE"},{address:"GsNzxJfFn6zQdJGeYsupJWzUAm57Ba7335mfhWvFiE9Z",name:"DXL"}];(function(r){var e=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(r,"__esModule",{value:!0}),r.MARKETS=r.TOKEN_MINTS=r.getLayoutVersion=r.PROGRAM_LAYOUT_VERSIONS=void 0;const t=require$$1$1,n=e(require$$1),o=e(require$$2);r.PROGRAM_LAYOUT_VERSIONS={"4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn":1,BJ3jrUzddfuSrZHXSCxMUUQsjKEyLmuuyZebkcaFp2fg:1,EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o:2,"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin":3};function s(a){return r.PROGRAM_LAYOUT_VERSIONS[a.toString()]||3}r.getLayoutVersion=s,r.TOKEN_MINTS=o.default.map(a=>({address:new t.PublicKey(a.address),name:a.name})),r.MARKETS=n.default.map(a=>({address:new t.PublicKey(a.address),name:a.name,programId:new t.PublicKey(a.programId),deprecated:a.deprecated}))})(tokens_and_markets);Object.defineProperty(fees,"__esModule",{value:!0});fees.getFeeTier=fees.getFeeRates=fees.supportsSrmFeeDiscounts=void 0;const tokens_and_markets_1=tokens_and_markets;function supportsSrmFeeDiscounts(r){return tokens_and_markets_1.getLayoutVersion(r)>1}fees.supportsSrmFeeDiscounts=supportsSrmFeeDiscounts;function getFeeRates(r){return r===1?{taker:.002,maker:-3e-4}:r===2?{taker:.0018,maker:-3e-4}:r===3?{taker:.0016,maker:-3e-4}:r===4?{taker:.0014,maker:-3e-4}:r===5?{taker:.0012,maker:-3e-4}:r===6?{taker:.001,maker:-5e-4}:{taker:.0022,maker:-3e-4}}fees.getFeeRates=getFeeRates;function getFeeTier(r,e){return r>=1?6:e>=1e6?5:e>=1e5?4:e>=1e4?3:e>=1e3?2:e>=100?1:0}fees.getFeeTier=getFeeTier;(function(r){var e=commonjsGlobal&&commonjsGlobal.__importDefault||function(Y){return Y&&Y.__esModule?Y:{default:Y}};Object.defineProperty(r,"__esModule",{value:!0}),r.getMintDecimals=r.Orderbook=r.ORDERBOOK_LAYOUT=r.OpenOrders=r._OPEN_ORDERS_LAYOUT_V2=r._OPEN_ORDERS_LAYOUT_V1=r.Market=r.MARKET_STATE_LAYOUT_V3=r.MARKET_STATE_LAYOUT_V2=r._MARKET_STAT_LAYOUT_V1=void 0;const t=Layout$1,n=layout,o=slab,s=instructions,a=e(bnExports),c=require$$1$1,d=queue,u=buffer,y=fees,v=tokenInstructions,I=tokens_and_markets;r._MARKET_STAT_LAYOUT_V1=t.struct([t.blob(5),n.accountFlagsLayout("accountFlags"),n.publicKeyLayout("ownAddress"),n.u64("vaultSignerNonce"),n.publicKeyLayout("baseMint"),n.publicKeyLayout("quoteMint"),n.publicKeyLayout("baseVault"),n.u64("baseDepositsTotal"),n.u64("baseFeesAccrued"),n.publicKeyLayout("quoteVault"),n.u64("quoteDepositsTotal"),n.u64("quoteFeesAccrued"),n.u64("quoteDustThreshold"),n.publicKeyLayout("requestQueue"),n.publicKeyLayout("eventQueue"),n.publicKeyLayout("bids"),n.publicKeyLayout("asks"),n.u64("baseLotSize"),n.u64("quoteLotSize"),n.u64("feeRateBps"),t.blob(7)]),r.MARKET_STATE_LAYOUT_V2=t.struct([t.blob(5),n.accountFlagsLayout("accountFlags"),n.publicKeyLayout("ownAddress"),n.u64("vaultSignerNonce"),n.publicKeyLayout("baseMint"),n.publicKeyLayout("quoteMint"),n.publicKeyLayout("baseVault"),n.u64("baseDepositsTotal"),n.u64("baseFeesAccrued"),n.publicKeyLayout("quoteVault"),n.u64("quoteDepositsTotal"),n.u64("quoteFeesAccrued"),n.u64("quoteDustThreshold"),n.publicKeyLayout("requestQueue"),n.publicKeyLayout("eventQueue"),n.publicKeyLayout("bids"),n.publicKeyLayout("asks"),n.u64("baseLotSize"),n.u64("quoteLotSize"),n.u64("feeRateBps"),n.u64("referrerRebatesAccrued"),t.blob(7)]),r.MARKET_STATE_LAYOUT_V3=t.struct([t.blob(5),n.accountFlagsLayout("accountFlags"),n.publicKeyLayout("ownAddress"),n.u64("vaultSignerNonce"),n.publicKeyLayout("baseMint"),n.publicKeyLayout("quoteMint"),n.publicKeyLayout("baseVault"),n.u64("baseDepositsTotal"),n.u64("baseFeesAccrued"),n.publicKeyLayout("quoteVault"),n.u64("quoteDepositsTotal"),n.u64("quoteFeesAccrued"),n.u64("quoteDustThreshold"),n.publicKeyLayout("requestQueue"),n.publicKeyLayout("eventQueue"),n.publicKeyLayout("bids"),n.publicKeyLayout("asks"),n.u64("baseLotSize"),n.u64("quoteLotSize"),n.u64("feeRateBps"),n.u64("referrerRebatesAccrued"),n.publicKeyLayout("authority"),n.publicKeyLayout("pruneAuthority"),n.publicKeyLayout("consumeEventsAuthority"),t.blob(992),t.blob(7)]);class S{constructor(B,N,V,Q={},Z,J){const{skipPreflight:L=!1,commitment:l="recent"}=Q;if(!B.accountFlags.initialized||!B.accountFlags.market)throw new Error("Invalid market state");this._decoded=B,this._baseSplTokenDecimals=N,this._quoteSplTokenDecimals=V,this._skipPreflight=L,this._commitment=l,this._programId=Z,this._openOrdersAccountsCache={},this._feeDiscountKeysCache={},this._layoutOverride=J}static getLayout(B){return I.getLayoutVersion(B)===1?r._MARKET_STAT_LAYOUT_V1:r.MARKET_STATE_LAYOUT_V2}static async findAccountsByMints(B,N,V,Q){const Z=[{memcmp:{offset:this.getLayout(Q).offsetOf("baseMint"),bytes:N.toBase58()}},{memcmp:{offset:S.getLayout(Q).offsetOf("quoteMint"),bytes:V.toBase58()}}];return H(B,Q,Z)}static async load(B,N,V={},Q,Z){const{owner:J,data:L}=q(await B.getAccountInfo(N),"Market not found");if(!J.equals(Q))throw new Error("Address not owned by program: "+J.toBase58());const l=(Z??this.getLayout(Q)).decode(L);if(!l.accountFlags.initialized||!l.accountFlags.market||!l.ownAddress.equals(N))throw new Error("Invalid market");const[b,E]=await Promise.all([M(B,l.baseMint),M(B,l.quoteMint)]);return new S(l,b,E,V,Q,Z)}get programId(){return this._programId}get address(){return this._decoded.ownAddress}get publicKey(){return this.address}get baseMintAddress(){return this._decoded.baseMint}get quoteMintAddress(){return this._decoded.quoteMint}get bidsAddress(){return this._decoded.bids}get asksAddress(){return this._decoded.asks}get decoded(){return this._decoded}async loadBids(B){const{data:N}=q(await B.getAccountInfo(this._decoded.bids));return x.decode(this,N)}async loadAsks(B){const{data:N}=q(await B.getAccountInfo(this._decoded.asks));return x.decode(this,N)}async loadOrdersForOwner(B,N,V=0){const[Q,Z,J]=await Promise.all([this.loadBids(B),this.loadAsks(B),this.findOpenOrdersAccountsForOwner(B,N,V)]);return this.filterForOpenOrders(Q,Z,J)}filterForOpenOrders(B,N,V){return[...B,...N].filter(Q=>V.some(Z=>Q.openOrdersAddress.equals(Z.address)))}async findBaseTokenAccountsForOwner(B,N,V=!1){if(this.baseMintAddress.equals(v.WRAPPED_SOL_MINT)&&V){const[Q,Z]=await Promise.all([this.findBaseTokenAccountsForOwner(B,N,!1),B.getAccountInfo(N)]);return Z!==null?[{pubkey:N,account:Z},...Q]:Q}return await this.getTokenAccountsByOwnerForMint(B,N,this.baseMintAddress)}async getTokenAccountsByOwnerForMint(B,N,V){return(await B.getTokenAccountsByOwner(N,{mint:V})).value}async findQuoteTokenAccountsForOwner(B,N,V=!1){if(this.quoteMintAddress.equals(v.WRAPPED_SOL_MINT)&&V){const[Q,Z]=await Promise.all([this.findQuoteTokenAccountsForOwner(B,N,!1),B.getAccountInfo(N)]);return Z!==null?[{pubkey:N,account:Z},...Q]:Q}return await this.getTokenAccountsByOwnerForMint(B,N,this.quoteMintAddress)}async findOpenOrdersAccountsForOwner(B,N,V=0){const Q=N.toBase58(),Z=new Date().getTime();if(Q in this._openOrdersAccountsCache&&Z-this._openOrdersAccountsCache[Q].ts<V)return this._openOrdersAccountsCache[Q].accounts;const J=await P.findForMarketAndOwner(B,this.address,N,this._programId);return this._openOrdersAccountsCache[Q]={accounts:J,ts:Z},J}async replaceOrders(B,N,V,Q=0){var Z;if(!N.openOrdersAccount&&!N.openOrdersAddressKey){const L=(Z=N.owner.publicKey)!==null&&Z!==void 0?Z:N.owner,l=await this.findOpenOrdersAccountsForOwner(B,L,Q);N.openOrdersAddressKey=l[0].address}const J=new c.Transaction;return J.add(this.makeReplaceOrdersByClientIdsInstruction(N,V)),await this._sendTransaction(B,J,[N.owner])}async placeOrder(B,{owner:N,payer:V,side:Q,price:Z,size:J,orderType:L="limit",clientId:l,openOrdersAddressKey:b,openOrdersAccount:E,feeDiscountPubkey:T,maxTs:C,replaceIfExists:W=!1}){const{transaction:G,signers:U}=await this.makePlaceOrderTransaction(B,{owner:N,payer:V,side:Q,price:Z,size:J,orderType:L,clientId:l,openOrdersAddressKey:b,openOrdersAccount:E,feeDiscountPubkey:T,maxTs:C,replaceIfExists:W});return await this._sendTransaction(B,G,[N,...U])}getSplTokenBalanceFromAccountInfo(B,N){return O(new a.default(B.data.slice(64,72),10,"le"),new a.default(10).pow(new a.default(N)))}get supportsSrmFeeDiscounts(){return y.supportsSrmFeeDiscounts(this._programId)}get supportsReferralFees(){return I.getLayoutVersion(this._programId)>1}get usesRequestQueue(){return I.getLayoutVersion(this._programId)<=2}async findFeeDiscountKeys(B,N,V=0){let Q=[];const Z=new Date().getTime(),J=N.toBase58();if(J in this._feeDiscountKeysCache&&Z-this._feeDiscountKeysCache[J].ts<V)return this._feeDiscountKeysCache[J].accounts;if(this.supportsSrmFeeDiscounts){const L=(await this.getTokenAccountsByOwnerForMint(B,N,v.MSRM_MINT)).map(({pubkey:b,account:E})=>{const T=this.getSplTokenBalanceFromAccountInfo(E,v.MSRM_DECIMALS);return{pubkey:b,mint:v.MSRM_MINT,balance:T,feeTier:y.getFeeTier(T,0)}}),l=(await this.getTokenAccountsByOwnerForMint(B,N,v.SRM_MINT)).map(({pubkey:b,account:E})=>{const T=this.getSplTokenBalanceFromAccountInfo(E,v.SRM_DECIMALS);return{pubkey:b,mint:v.SRM_MINT,balance:T,feeTier:y.getFeeTier(0,T)}});Q=L.concat(l).sort((b,E)=>b.feeTier>E.feeTier?-1:b.feeTier<E.feeTier?1:b.balance>E.balance?-1:b.balance<E.balance?1:0)}return this._feeDiscountKeysCache[J]={accounts:Q,ts:Z},Q}async findBestFeeDiscountKey(B,N,V=3e4){const Q=await this.findFeeDiscountKeys(B,N,V);return Q.length>0?{pubkey:Q[0].pubkey,feeTier:Q[0].feeTier}:{pubkey:null,feeTier:0}}async makePlaceOrderTransaction(B,{owner:N,payer:V,side:Q,price:Z,size:J,orderType:L="limit",clientId:l,openOrdersAddressKey:b,openOrdersAccount:E,feeDiscountPubkey:T=void 0,selfTradeBehavior:C="decrementTake",maxTs:W,replaceIfExists:G=!1},U=0,m=0){var F,se;const ae=(F=N.publicKey)!==null&&F!==void 0?F:N,ue=await this.findOpenOrdersAccountsForOwner(B,ae,U),me=new c.Transaction,he=[];let pe;T?pe=T:T===void 0&&this.supportsSrmFeeDiscounts?pe=(await this.findBestFeeDiscountKey(B,ae,m)).pubkey:pe=null;let ke;if(ue.length===0){let Ae;E?Ae=E:Ae=new c.Account,me.add(await P.makeCreateAccountTransaction(B,this.address,ae,Ae.publicKey,this._programId)),ke=Ae.publicKey,he.push(Ae),this._openOrdersAccountsCache[ae.toBase58()].ts=0}else E?ke=E.publicKey:b?ke=b:ke=ue[0].address;let ge=null;if(V.equals(ae))if(Q==="buy"&&this.quoteMintAddress.equals(v.WRAPPED_SOL_MINT)||Q==="sell"&&this.baseMintAddress.equals(v.WRAPPED_SOL_MINT)){ge=new c.Account;let Ae;Q==="buy"?(Ae=Math.round(Z*J*1.01*c.LAMPORTS_PER_SOL),ue.length>0&&(Ae-=ue[0].quoteTokenFree.toNumber())):(Ae=Math.round(J*c.LAMPORTS_PER_SOL),ue.length>0&&(Ae-=ue[0].baseTokenFree.toNumber())),Ae=Math.max(Ae,0)+1e7,me.add(c.SystemProgram.createAccount({fromPubkey:ae,newAccountPubkey:ge.publicKey,lamports:Ae,space:165,programId:v.TOKEN_PROGRAM_ID})),me.add(v.initializeAccount({account:ge.publicKey,mint:v.WRAPPED_SOL_MINT,owner:ae})),he.push(ge)}else throw new Error("Invalid payer account");const Se=this.makePlaceOrderInstruction(B,{owner:N,payer:(se=ge?.publicKey)!==null&&se!==void 0?se:V,side:Q,price:Z,size:J,orderType:L,clientId:l,openOrdersAddressKey:ke,feeDiscountPubkey:pe,selfTradeBehavior:C,maxTs:W,replaceIfExists:G});return me.add(Se),ge&&me.add(v.closeAccount({source:ge.publicKey,destination:ae,owner:ae})),{transaction:me,signers:he,payer:N}}makePlaceOrderInstruction(B,N){var V;const{owner:Q,payer:Z,side:J,price:L,size:l,orderType:b="limit",clientId:E,openOrdersAddressKey:T,openOrdersAccount:C,feeDiscountPubkey:W=null}=N,G=(V=Q.publicKey)!==null&&V!==void 0?V:Q;if(this.baseSizeNumberToLots(l).lte(new a.default(0)))throw new Error("size too small");if(this.priceNumberToLots(L).lte(new a.default(0)))throw new Error("invalid price");return this.usesRequestQueue?s.DexInstructions.newOrder({market:this.address,requestQueue:this._decoded.requestQueue,baseVault:this._decoded.baseVault,quoteVault:this._decoded.quoteVault,openOrders:C?C.publicKey:T,owner:G,payer:Z,side:J,limitPrice:this.priceNumberToLots(L),maxQuantity:this.baseSizeNumberToLots(l),orderType:b,clientId:E,programId:this._programId,feeDiscountPubkey:this.supportsSrmFeeDiscounts?W:null}):this.makeNewOrderV3Instruction(N)}makeNewOrderV3Instruction(B){var N;const{owner:V,payer:Q,side:Z,price:J,size:L,orderType:l="limit",clientId:b,openOrdersAddressKey:E,openOrdersAccount:T,feeDiscountPubkey:C=null,selfTradeBehavior:W="decrementTake",programId:G,maxTs:U,replaceIfExists:m}=B,F=(N=V.publicKey)!==null&&N!==void 0?N:V;return s.DexInstructions.newOrderV3({market:this.address,bids:this._decoded.bids,asks:this._decoded.asks,requestQueue:this._decoded.requestQueue,eventQueue:this._decoded.eventQueue,baseVault:this._decoded.baseVault,quoteVault:this._decoded.quoteVault,openOrders:T?T.publicKey:E,owner:F,payer:Q,side:Z,limitPrice:this.priceNumberToLots(J),maxBaseQuantity:this.baseSizeNumberToLots(L),maxQuoteQuantity:new a.default(this._decoded.quoteLotSize.toNumber()).mul(this.baseSizeNumberToLots(L).mul(this.priceNumberToLots(J))),orderType:l,clientId:b,programId:G??this._programId,selfTradeBehavior:W,feeDiscountPubkey:this.supportsSrmFeeDiscounts?C:null,maxTs:U,replaceIfExists:m})}makeReplaceOrdersByClientIdsInstruction(B,N){var V,Q;const Z=(V=B.owner.publicKey)!==null&&V!==void 0?V:B.owner;return s.DexInstructions.replaceOrdersByClientIds({market:this.address,bids:this._decoded.bids,asks:this._decoded.asks,requestQueue:this._decoded.requestQueue,eventQueue:this._decoded.eventQueue,baseVault:this._decoded.baseVault,quoteVault:this._decoded.quoteVault,openOrders:B.openOrdersAccount?B.openOrdersAccount.publicKey:B.openOrdersAddressKey,owner:Z,payer:B.payer,programId:(Q=B.programId)!==null&&Q!==void 0?Q:this._programId,feeDiscountPubkey:this.supportsSrmFeeDiscounts?B.feeDiscountPubkey:null,orders:N.map(J=>{var L;return{side:J.side,limitPrice:this.priceNumberToLots(J.price),maxBaseQuantity:this.baseSizeNumberToLots(J.size),maxQuoteQuantity:new a.default(this._decoded.quoteLotSize.toNumber()).mul(this.baseSizeNumberToLots(J.size).mul(this.priceNumberToLots(J.price))),orderType:J.orderType,clientId:J.clientId,programId:(L=B.programId)!==null&&L!==void 0?L:this._programId,selfTradeBehavior:J.selfTradeBehavior,maxTs:J.maxTs}})})}async _sendTransaction(B,N,V){const Q=await B.sendTransaction(N,V,{skipPreflight:this._skipPreflight}),{value:Z}=await B.confirmTransaction(Q,this._commitment);if(Z?.err)throw new Error(JSON.stringify(Z.err));return Q}async cancelOrderByClientId(B,N,V,Q){const Z=await this.makeCancelOrderByClientIdTransaction(B,N.publicKey,V,Q);return await this._sendTransaction(B,Z,[N])}async cancelOrdersByClientIds(B,N,V,Q){const Z=await this.makeCancelOrdersByClientIdsTransaction(B,N.publicKey,V,Q);return await this._sendTransaction(B,Z,[N])}async makeCancelOrderByClientIdTransaction(B,N,V,Q){const Z=new c.Transaction;return this.usesRequestQueue?Z.add(s.DexInstructions.cancelOrderByClientId({market:this.address,owner:N,openOrders:V,requestQueue:this._decoded.requestQueue,clientId:Q,programId:this._programId})):Z.add(s.DexInstructions.cancelOrderByClientIdV2({market:this.address,openOrders:V,owner:N,bids:this._decoded.bids,asks:this._decoded.asks,eventQueue:this._decoded.eventQueue,clientId:Q,programId:this._programId})),Z}async makeCancelOrdersByClientIdsTransaction(B,N,V,Q){const Z=new c.Transaction;return Z.add(s.DexInstructions.cancelOrdersByClientIds({market:this.address,openOrders:V,owner:N,bids:this._decoded.bids,asks:this._decoded.asks,eventQueue:this._decoded.eventQueue,clientIds:Q,programId:this._programId})),Z}async cancelOrder(B,N,V){const Q=await this.makeCancelOrderTransaction(B,N.publicKey,V);return await this._sendTransaction(B,Q,[N])}async makeCancelOrderTransaction(B,N,V){const Q=new c.Transaction;return Q.add(this.makeCancelOrderInstruction(B,N,V)),Q}makeCancelOrderInstruction(B,N,V){return this.usesRequestQueue?s.DexInstructions.cancelOrder({market:this.address,owner:N,openOrders:V.openOrdersAddress,requestQueue:this._decoded.requestQueue,side:V.side,orderId:V.orderId,openOrdersSlot:V.openOrdersSlot,programId:this._programId}):s.DexInstructions.cancelOrderV2({market:this.address,owner:N,openOrders:V.openOrdersAddress,bids:this._decoded.bids,asks:this._decoded.asks,eventQueue:this._decoded.eventQueue,side:V.side,orderId:V.orderId,openOrdersSlot:V.openOrdersSlot,programId:this._programId})}makeConsumeEventsInstruction(B,N){return s.DexInstructions.consumeEvents({market:this.address,eventQueue:this._decoded.eventQueue,coinFee:this._decoded.eventQueue,pcFee:this._decoded.eventQueue,openOrdersAccounts:B,limit:N,programId:this._programId})}makeConsumeEventsPermissionedInstruction(B,N){return s.DexInstructions.consumeEventsPermissioned({market:this.address,eventQueue:this._decoded.eventQueue,crankAuthority:this._decoded.consumeEventsAuthority,openOrdersAccounts:B,limit:N,programId:this._programId})}async settleFunds(B,N,V,Q,Z,J=null){if(!V.owner.equals(N.publicKey))throw new Error("Invalid open orders account");if(J&&!this.supportsReferralFees)throw new Error("This program ID does not support referrerQuoteWallet");const{transaction:L,signers:l}=await this.makeSettleFundsTransaction(B,V,Q,Z,J);return await this._sendTransaction(B,L,[N,...l])}async makeSettleFundsTransaction(B,N,V,Q,Z=null){const J=await c.PublicKey.createProgramAddress([this.address.toBuffer(),this._decoded.vaultSignerNonce.toArrayLike(u.Buffer,"le",8)],this._programId),L=new c.Transaction,l=[];let b=null;return(this.baseMintAddress.equals(v.WRAPPED_SOL_MINT)&&V.equals(N.owner)||this.quoteMintAddress.equals(v.WRAPPED_SOL_MINT)&&Q.equals(N.owner))&&(b=new c.Account,L.add(c.SystemProgram.createAccount({fromPubkey:N.owner,newAccountPubkey:b.publicKey,lamports:await B.getMinimumBalanceForRentExemption(165),space:165,programId:v.TOKEN_PROGRAM_ID})),L.add(v.initializeAccount({account:b.publicKey,mint:v.WRAPPED_SOL_MINT,owner:N.owner})),l.push(b)),L.add(s.DexInstructions.settleFunds({market:this.address,openOrders:N.address,owner:N.owner,baseVault:this._decoded.baseVault,quoteVault:this._decoded.quoteVault,baseWallet:V.equals(N.owner)&&b?b.publicKey:V,quoteWallet:Q.equals(N.owner)&&b?b.publicKey:Q,vaultSigner:J,programId:this._programId,referrerQuoteWallet:Z})),b&&L.add(v.closeAccount({source:b.publicKey,destination:N.owner,owner:N.owner})),{transaction:L,signers:l,payer:N.owner}}async matchOrders(B,N,V){const Q=this.makeMatchOrdersTransaction(V);return await this._sendTransaction(B,Q,[N])}makeMatchOrdersTransaction(B){const N=new c.Transaction;return N.add(s.DexInstructions.matchOrders({market:this.address,requestQueue:this._decoded.requestQueue,eventQueue:this._decoded.eventQueue,bids:this._decoded.bids,asks:this._decoded.asks,baseVault:this._decoded.baseVault,quoteVault:this._decoded.quoteVault,limit:B,programId:this._programId})),N}async loadRequestQueue(B){const{data:N}=q(await B.getAccountInfo(this._decoded.requestQueue));return d.decodeRequestQueue(N)}async loadEventQueue(B){const{data:N}=q(await B.getAccountInfo(this._decoded.eventQueue));return d.decodeEventQueue(N)}async loadFills(B,N=100){const{data:V}=q(await B.getAccountInfo(this._decoded.eventQueue));return d.decodeEventQueue(V,N).filter(Z=>Z.eventFlags.fill&&Z.nativeQuantityPaid.gtn(0)).map(this.parseFillEvent.bind(this))}parseFillEvent(B){let N,V,Q,Z;return B.eventFlags.bid?(Q="buy",Z=B.eventFlags.maker?B.nativeQuantityPaid.add(B.nativeFeeOrRebate):B.nativeQuantityPaid.sub(B.nativeFeeOrRebate),V=O(Z.mul(this._baseSplTokenMultiplier),this._quoteSplTokenMultiplier.mul(B.nativeQuantityReleased)),N=O(B.nativeQuantityReleased,this._baseSplTokenMultiplier)):(Q="sell",Z=B.eventFlags.maker?B.nativeQuantityReleased.sub(B.nativeFeeOrRebate):B.nativeQuantityReleased.add(B.nativeFeeOrRebate),V=O(Z.mul(this._baseSplTokenMultiplier),this._quoteSplTokenMultiplier.mul(B.nativeQuantityPaid)),N=O(B.nativeQuantityPaid,this._baseSplTokenMultiplier)),{...B,side:Q,price:V,feeCost:this.quoteSplSizeToNumber(B.nativeFeeOrRebate)*(B.eventFlags.maker?-1:1),size:N}}get _baseSplTokenMultiplier(){return new a.default(10).pow(new a.default(this._baseSplTokenDecimals))}get _quoteSplTokenMultiplier(){return new a.default(10).pow(new a.default(this._quoteSplTokenDecimals))}priceLotsToNumber(B){return O(B.mul(this._decoded.quoteLotSize).mul(this._baseSplTokenMultiplier),this._decoded.baseLotSize.mul(this._quoteSplTokenMultiplier))}priceNumberToLots(B){return new a.default(Math.round(B*Math.pow(10,this._quoteSplTokenDecimals)*this._decoded.baseLotSize.toNumber()/(Math.pow(10,this._baseSplTokenDecimals)*this._decoded.quoteLotSize.toNumber())))}baseSplSizeToNumber(B){return O(B,this._baseSplTokenMultiplier)}quoteSplSizeToNumber(B){return O(B,this._quoteSplTokenMultiplier)}baseSizeLotsToNumber(B){return O(B.mul(this._decoded.baseLotSize),this._baseSplTokenMultiplier)}baseSizeNumberToLots(B){return new a.default(Math.round(B*Math.pow(10,this._baseSplTokenDecimals))).div(this._decoded.baseLotSize)}quoteSizeLotsToNumber(B){return O(B.mul(this._decoded.quoteLotSize),this._quoteSplTokenMultiplier)}quoteSizeNumberToLots(B){return new a.default(Math.round(B*Math.pow(10,this._quoteSplTokenDecimals))).div(this._decoded.quoteLotSize)}get minOrderSize(){return this.baseSizeLotsToNumber(new a.default(1))}get tickSize(){return this.priceLotsToNumber(new a.default(1))}}r.Market=S,r._OPEN_ORDERS_LAYOUT_V1=t.struct([t.blob(5),n.accountFlagsLayout("accountFlags"),n.publicKeyLayout("market"),n.publicKeyLayout("owner"),n.u64("baseTokenFree"),n.u64("baseTokenTotal"),n.u64("quoteTokenFree"),n.u64("quoteTokenTotal"),n.u128("freeSlotBits"),n.u128("isBidBits"),t.seq(n.u128(),128,"orders"),t.seq(n.u64(),128,"clientIds"),t.blob(7)]),r._OPEN_ORDERS_LAYOUT_V2=t.struct([t.blob(5),n.accountFlagsLayout("accountFlags"),n.publicKeyLayout("market"),n.publicKeyLayout("owner"),n.u64("baseTokenFree"),n.u64("baseTokenTotal"),n.u64("quoteTokenFree"),n.u64("quoteTokenTotal"),n.u128("freeSlotBits"),n.u128("isBidBits"),t.seq(n.u128(),128,"orders"),t.seq(n.u64(),128,"clientIds"),n.u64("referrerRebatesAccrued"),t.blob(7)]);class P{constructor(B,N,V){this.address=B,this._programId=V,Object.assign(this,N)}static getLayout(B){return I.getLayoutVersion(B)===1?r._OPEN_ORDERS_LAYOUT_V1:r._OPEN_ORDERS_LAYOUT_V2}static async findForOwner(B,N,V){const Q=[{memcmp:{offset:this.getLayout(V).offsetOf("owner"),bytes:N.toBase58()}},{dataSize:this.getLayout(V).span}];return(await H(B,V,Q)).map(({publicKey:J,accountInfo:L})=>P.fromAccountInfo(J,L,V))}static async findForMarketAndOwner(B,N,V,Q){const Z=[{memcmp:{offset:this.getLayout(Q).offsetOf("market"),bytes:N.toBase58()}},{memcmp:{offset:this.getLayout(Q).offsetOf("owner"),bytes:V.toBase58()}},{dataSize:this.getLayout(Q).span}];return(await H(B,Q,Z)).map(({publicKey:L,accountInfo:l})=>P.fromAccountInfo(L,l,Q))}static async load(B,N,V){const Q=await B.getAccountInfo(N);if(Q===null)throw new Error("Open orders account not found");return P.fromAccountInfo(N,Q,V)}static fromAccountInfo(B,N,V){const{owner:Q,data:Z}=N;if(!Q.equals(V))throw new Error("Address not owned by program");const J=this.getLayout(V).decode(Z);if(!J.accountFlags.initialized||!J.accountFlags.openOrders)throw new Error("Invalid open orders account");return new P(B,J,V)}static async makeCreateAccountTransaction(B,N,V,Q,Z){return c.SystemProgram.createAccount({fromPubkey:V,newAccountPubkey:Q,lamports:await B.getMinimumBalanceForRentExemption(this.getLayout(Z).span),space:this.getLayout(Z).span,programId:Z})}get publicKey(){return this.address}}r.OpenOrders=P,r.ORDERBOOK_LAYOUT=t.struct([t.blob(5),n.accountFlagsLayout("accountFlags"),o.SLAB_LAYOUT.replicate("slab"),t.blob(7)]);class x{constructor(B,N,V){if(!N.initialized||!(N.bids^N.asks))throw new Error("Invalid orderbook");this.market=B,this.isBids=N.bids,this.slab=V}static get LAYOUT(){return r.ORDERBOOK_LAYOUT}static decode(B,N){const{accountFlags:V,slab:Q}=r.ORDERBOOK_LAYOUT.decode(N);return new x(B,V,Q)}getL2(B){const N=this.isBids,V=[];for(const{key:Q,quantity:Z}of this.slab.items(N)){const J=A(Q);if(V.length>0&&V[V.length-1][0].eq(J))V[V.length-1][1]=V[V.length-1][1].add(Z);else{if(V.length===B)break;V.push([J,Z])}}return V.map(([Q,Z])=>[this.market.priceLotsToNumber(Q),this.market.baseSizeLotsToNumber(Z),Q,Z])}[Symbol.iterator](){return this.items(!1)}*items(B=!1){for(const{key:N,ownerSlot:V,owner:Q,quantity:Z,feeTier:J,clientOrderId:L}of this.slab.items(B)){const l=A(N);yield{orderId:N,clientId:L,openOrdersAddress:Q,openOrdersSlot:V,feeTier:J,price:this.market.priceLotsToNumber(l),priceLots:l,size:this.market.baseSizeLotsToNumber(Z),sizeLots:Z,side:this.isBids?"buy":"sell"}}}}r.Orderbook=x;function A(Y){return Y.ushrn(64)}function O(Y,B){const N=Y.div(B).toNumber(),V=Y.umod(B),Q=V.gcd(B);return N+V.div(Q).toNumber()/B.div(Q).toNumber()}const z=t.struct([t.blob(44),t.u8("decimals"),t.blob(37)]);async function M(Y,B){if(B.equals(v.WRAPPED_SOL_MINT))return 9;const{data:N}=q(await Y.getAccountInfo(B),"mint not found"),{decimals:V}=z.decode(N);return V}r.getMintDecimals=M;async function H(Y,B,N){const V=await Y._rpcRequest("getProgramAccounts",[B.toBase58(),{commitment:Y.commitment,filters:N,encoding:"base64"}]);if(V.error)throw new Error(V.error.message);return V.result.map(({pubkey:Q,account:{data:Z,executable:J,owner:L,lamports:l}})=>({publicKey:new c.PublicKey(Q),accountInfo:{data:u.Buffer.from(Z[0],"base64"),executable:J,owner:new c.PublicKey(L),lamports:l}}))}function q(Y,B="account not found"){if(Y===null)throw new Error(B);return Y}})(market);var error={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseInstructionErrorResponse=r.KNOWN_PROGRAMS=r.DexError=void 0;const e=require$$1$1,t=tokens_and_markets,n=tokenInstructions;var o;(function(a){a[a.InvalidMarketFlags=0]="InvalidMarketFlags",a[a.InvalidAskFlags=1]="InvalidAskFlags",a[a.InvalidBidFlags=2]="InvalidBidFlags",a[a.InvalidQueueLength=3]="InvalidQueueLength",a[a.OwnerAccountNotProvided=4]="OwnerAccountNotProvided",a[a.ConsumeEventsQueueFailure=5]="ConsumeEventsQueueFailure",a[a.WrongCoinVault=6]="WrongCoinVault",a[a.WrongPcVault=7]="WrongPcVault",a[a.WrongCoinMint=8]="WrongCoinMint",a[a.WrongPcMint=9]="WrongPcMint",a[a.CoinVaultProgramId=10]="CoinVaultProgramId",a[a.PcVaultProgramId=11]="PcVaultProgramId",a[a.CoinMintProgramId=12]="CoinMintProgramId",a[a.PcMintProgramId=13]="PcMintProgramId",a[a.WrongCoinMintSize=14]="WrongCoinMintSize",a[a.WrongPcMintSize=15]="WrongPcMintSize",a[a.WrongCoinVaultSize=16]="WrongCoinVaultSize",a[a.WrongPcVaultSize=17]="WrongPcVaultSize",a[a.UninitializedVault=18]="UninitializedVault",a[a.UninitializedMint=19]="UninitializedMint",a[a.CoinMintUninitialized=20]="CoinMintUninitialized",a[a.PcMintUninitialized=21]="PcMintUninitialized",a[a.WrongMint=22]="WrongMint",a[a.WrongVaultOwner=23]="WrongVaultOwner",a[a.VaultHasDelegate=24]="VaultHasDelegate",a[a.AlreadyInitialized=25]="AlreadyInitialized",a[a.WrongAccountDataAlignment=26]="WrongAccountDataAlignment",a[a.WrongAccountDataPaddingLength=27]="WrongAccountDataPaddingLength",a[a.WrongAccountHeadPadding=28]="WrongAccountHeadPadding",a[a.WrongAccountTailPadding=29]="WrongAccountTailPadding",a[a.RequestQueueEmpty=30]="RequestQueueEmpty",a[a.EventQueueTooSmall=31]="EventQueueTooSmall",a[a.SlabTooSmall=32]="SlabTooSmall",a[a.BadVaultSignerNonce=33]="BadVaultSignerNonce",a[a.InsufficientFunds=34]="InsufficientFunds",a[a.SplAccountProgramId=35]="SplAccountProgramId",a[a.SplAccountLen=36]="SplAccountLen",a[a.WrongFeeDiscountAccountOwner=37]="WrongFeeDiscountAccountOwner",a[a.WrongFeeDiscountMint=38]="WrongFeeDiscountMint",a[a.CoinPayerProgramId=39]="CoinPayerProgramId",a[a.PcPayerProgramId=40]="PcPayerProgramId",a[a.ClientIdNotFound=41]="ClientIdNotFound",a[a.TooManyOpenOrders=42]="TooManyOpenOrders",a[a.FakeErrorSoWeDontChangeNumbers=43]="FakeErrorSoWeDontChangeNumbers",a[a.BorrowError=44]="BorrowError",a[a.WrongOrdersAccount=45]="WrongOrdersAccount",a[a.WrongBidsAccount=46]="WrongBidsAccount",a[a.WrongAsksAccount=47]="WrongAsksAccount",a[a.WrongRequestQueueAccount=48]="WrongRequestQueueAccount",a[a.WrongEventQueueAccount=49]="WrongEventQueueAccount",a[a.RequestQueueFull=50]="RequestQueueFull",a[a.EventQueueFull=51]="EventQueueFull",a[a.MarketIsDisabled=52]="MarketIsDisabled",a[a.WrongSigner=53]="WrongSigner",a[a.TransferFailed=54]="TransferFailed",a[a.ClientOrderIdIsZero=55]="ClientOrderIdIsZero",a[a.WrongRentSysvarAccount=56]="WrongRentSysvarAccount",a[a.RentNotProvided=57]="RentNotProvided",a[a.OrdersNotRentExempt=58]="OrdersNotRentExempt",a[a.OrderNotFound=59]="OrderNotFound",a[a.OrderNotYours=60]="OrderNotYours",a[a.WouldSelfTrade=61]="WouldSelfTrade",a[a.Unknown=1e3]="Unknown"})(o=r.DexError||(r.DexError={})),r.KNOWN_PROGRAMS={[n.TOKEN_PROGRAM_ID.toString()]:"Token program",[e.SystemProgram.programId.toString()]:"System program"};function s(a,c){const[d,u]=c,y=a.instructions[d];let v;return y.programId.toString()in t.PROGRAM_LAYOUT_VERSIONS?v=o[u.Custom]:y.programId.toString()in r.KNOWN_PROGRAMS?v=`${r.KNOWN_PROGRAMS[y.programId.toString()]} error ${u.Custom}`:v=`Unknown program ${y.programId.toString()} custom error: ${u.Custom}`,{failedInstructionIndex:d,error:v,failedProgram:y.programId.toString()}}r.parseInstructionErrorResponse=s})(error);var marketProxy={},_a;const isBrowser=typeof window<"u"&&!(!((_a=window.process)===null||_a===void 0)&&_a.hasOwnProperty("type"));var define_Buffer_default$d=["buffer","Buffer"];class Provider{constructor(e,t,n){this.connection=e,this.wallet=t,this.opts=n}static defaultOptions(){return{preflightCommitment:"recent",commitment:"recent"}}static local(e,t){t=t??Provider.defaultOptions();const n=new Connection(e??"http://localhost:8899",t.preflightCommitment),o=NodeWallet.local();return new Provider(n,o,t)}static env(){if(isBrowser)return;const t=require("process").env.ANCHOR_PROVIDER_URL;if(t===void 0)throw new Error("ANCHOR_PROVIDER_URL is not defined");const n=Provider.defaultOptions(),o=new Connection(t,n.commitment),s=NodeWallet.local();return new Provider(o,s,n)}async send(e,t,n){t===void 0&&(t=[]),n===void 0&&(n=this.opts),e.feePayer=this.wallet.publicKey,e.recentBlockhash=(await this.connection.getRecentBlockhash(n.preflightCommitment)).blockhash,await this.wallet.signTransaction(e),t.filter(a=>a!==void 0).forEach(a=>{e.partialSign(a)});const o=e.serialize();return await sendAndConfirmRawTransaction(this.connection,o,n)}async sendAll(e,t){t===void 0&&(t=this.opts);const n=await this.connection.getRecentBlockhash(t.preflightCommitment);let o=e.map(c=>{let d=c.tx,u=c.signers;return u===void 0&&(u=[]),d.feePayer=this.wallet.publicKey,d.recentBlockhash=n.blockhash,u.filter(y=>y!==void 0).forEach(y=>{d.partialSign(y)}),d});const s=await this.wallet.signAllTransactions(o),a=[];for(let c=0;c<o.length;c+=1){const u=s[c].serialize();a.push(await sendAndConfirmRawTransaction(this.connection,u,t))}return a}async simulate(e,t,n){var o,s;return t===void 0&&(t=[]),n===void 0&&(n=this.opts),e.feePayer=this.wallet.publicKey,e.recentBlockhash=(await this.connection.getRecentBlockhash((o=n.preflightCommitment)!==null&&o!==void 0?o:this.opts.preflightCommitment)).blockhash,await this.wallet.signTransaction(e),t.filter(a=>a!==void 0).forEach(a=>{e.partialSign(a)}),await simulateTransaction(this.connection,e,(s=n.commitment)!==null&&s!==void 0?s:this.opts.commitment)}}class NodeWallet{constructor(e){this.payer=e}static local(){const e=Keypair.fromSecretKey(define_Buffer_default$d.from(JSON.parse(require("fs").readFileSync(require("os").homedir()+"/.config/solana/id.json",{encoding:"utf-8"}))));return new NodeWallet(e)}async signTransaction(e){return e.partialSign(this.payer),e}async signAllTransactions(e){return e.map(t=>(t.partialSign(this.payer),t))}get publicKey(){return this.payer.publicKey}}async function simulateTransaction(r,e,t){e.recentBlockhash=await r._recentBlockhash(r._disableBlockhashCaching);const n=e.serializeMessage(),c=[e._serialize(n).toString("base64"),{encoding:"base64",commitment:t}],d=await r._rpcRequest("simulateTransaction",c);if(d.error)throw new Error("failed to simulate transaction: "+d.error.message);return d.result}function setProvider(r){_provider=r}function getProvider(){return _provider===null?Provider.local():_provider}let _provider=null;var camelcase={exports:{}};const preserveCamelCase=r=>{let e=!1,t=!1,n=!1;for(let o=0;o<r.length;o++){const s=r[o];e&&/[a-zA-Z]/.test(s)&&s.toUpperCase()===s?(r=r.slice(0,o)+"-"+r.slice(o),e=!1,n=t,t=!0,o++):t&&n&&/[a-zA-Z]/.test(s)&&s.toLowerCase()===s?(r=r.slice(0,o-1)+"-"+r.slice(o-1),n=t,t=!1,e=!0):(e=s.toLowerCase()===s&&s.toUpperCase()!==s,n=t,t=s.toUpperCase()===s&&s.toLowerCase()!==s)}return r},camelCase=(r,e)=>{if(!(typeof r=="string"||Array.isArray(r)))throw new TypeError("Expected the input to be `string | string[]`");e=Object.assign({pascalCase:!1},e);const t=o=>e.pascalCase?o.charAt(0).toUpperCase()+o.slice(1):o;return Array.isArray(r)?r=r.map(o=>o.trim()).filter(o=>o.length).join("-"):r=r.trim(),r.length===0?"":r.length===1?e.pascalCase?r.toUpperCase():r.toLowerCase():(r!==r.toLowerCase()&&(r=preserveCamelCase(r)),r=r.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(o,s)=>s.toUpperCase()).replace(/\d+(\w|$)/g,o=>o.toUpperCase()),t(r))};camelcase.exports=camelCase;camelcase.exports.default=camelCase;var camelcaseExports=camelcase.exports;const camelCase$1=getDefaultExportFromCjs$1(camelcaseExports);var lib={};(function(r){var e=["buffer","Buffer"],t=commonjsGlobal&&commonjsGlobal.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}};Object.defineProperty(r,"__esModule",{value:!0}),r.map=r.array=r.rustEnum=r.str=r.vecU8=r.tagged=r.vec=r.bool=r.option=r.publicKey=r.i128=r.u128=r.i64=r.u64=r.struct=r.f64=r.f32=r.i32=r.u32=r.i16=r.u16=r.i8=r.u8=void 0;const n=Layout$1,o=require$$1$1,s=t(bnExports);var a=Layout$1;Object.defineProperty(r,"u8",{enumerable:!0,get:function(){return a.u8}}),Object.defineProperty(r,"i8",{enumerable:!0,get:function(){return a.s8}}),Object.defineProperty(r,"u16",{enumerable:!0,get:function(){return a.u16}}),Object.defineProperty(r,"i16",{enumerable:!0,get:function(){return a.s16}}),Object.defineProperty(r,"u32",{enumerable:!0,get:function(){return a.u32}}),Object.defineProperty(r,"i32",{enumerable:!0,get:function(){return a.s32}}),Object.defineProperty(r,"f32",{enumerable:!0,get:function(){return a.f32}}),Object.defineProperty(r,"f64",{enumerable:!0,get:function(){return a.f64}}),Object.defineProperty(r,"struct",{enumerable:!0,get:function(){return a.struct}});class c extends n.Layout{constructor(J,L,l){super(J,l),this.blob=n.blob(J),this.signed=L}decode(J,L=0){const l=new s.default(this.blob.decode(J,L),10,"le");return this.signed?l.fromTwos(this.span*8).clone():l}encode(J,L,l=0){return this.signed&&(J=J.toTwos(this.span*8)),this.blob.encode(J.toArrayLike(e,"le",this.span),L,l)}}function d(Z){return new c(8,!1,Z)}r.u64=d;function u(Z){return new c(8,!0,Z)}r.i64=u;function y(Z){return new c(16,!1,Z)}r.u128=y;function v(Z){return new c(16,!0,Z)}r.i128=v;class I extends n.Layout{constructor(J,L,l,b){super(J.span,b),this.layout=J,this.decoder=L,this.encoder=l}decode(J,L){return this.decoder(this.layout.decode(J,L))}encode(J,L,l){return this.layout.encode(this.encoder(J),L,l)}getSpan(J,L){return this.layout.getSpan(J,L)}}function S(Z){return new I(n.blob(32),J=>new o.PublicKey(J),J=>J.toBuffer(),Z)}r.publicKey=S;class P extends n.Layout{constructor(J,L){super(-1,L),this.layout=J,this.discriminator=n.u8()}encode(J,L,l=0){return J==null?this.discriminator.encode(0,L,l):(this.discriminator.encode(1,L,l),this.layout.encode(J,L,l+1)+1)}decode(J,L=0){const l=this.discriminator.decode(J,L);if(l===0)return null;if(l===1)return this.layout.decode(J,L+1);throw new Error("Invalid option "+this.property)}getSpan(J,L=0){const l=this.discriminator.decode(J,L);if(l===0)return 1;if(l===1)return this.layout.getSpan(J,L+1)+1;throw new Error("Invalid option "+this.property)}}function x(Z,J){return new P(Z,J)}r.option=x;function A(Z){return new I(n.u8(),O,z,Z)}r.bool=A;function O(Z){if(Z===0)return!1;if(Z===1)return!0;throw new Error("Invalid bool: "+Z)}function z(Z){return Z?1:0}function M(Z,J){const L=n.u32("length"),l=n.struct([L,n.seq(Z,n.offset(L,-L.span),"values")]);return new I(l,({values:b})=>b,b=>({values:b}),J)}r.vec=M;function H(Z,J,L){const l=n.struct([d("tag"),J.replicate("data")]);function b({tag:E,data:T}){if(!E.eq(Z))throw new Error("Invalid tag, expected: "+Z.toString("hex")+", got: "+E.toString("hex"));return T}return new I(l,b,E=>({tag:Z,data:E}),L)}r.tagged=H;function q(Z){const J=n.u32("length"),L=n.struct([J,n.blob(n.offset(J,-J.span),"data")]);return new I(L,({data:l})=>l,l=>({data:l}),Z)}r.vecU8=q;function Y(Z){return new I(q(),J=>J.toString("utf-8"),J=>e.from(J,"utf-8"),Z)}r.str=Y;function B(Z,J,L){const l=n.union(L??n.u8(),J);return Z.forEach((b,E)=>l.addVariant(E,b,b.property)),l}r.rustEnum=B;function N(Z,J,L){const l=n.struct([n.seq(Z,J,"values")]);return new I(l,({values:b})=>b,b=>({values:b}),L)}r.array=N;class V extends n.Layout{constructor(J,L,l){super(J.span+L.span,l),this.keyLayout=J,this.valueLayout=L}decode(J,L){L=L||0;const l=this.keyLayout.decode(J,L),b=this.valueLayout.decode(J,L+this.keyLayout.getSpan(J,L));return[l,b]}encode(J,L,l){l=l||0;const b=this.keyLayout.encode(J[0],L,l),E=this.valueLayout.encode(J[1],L,l+b);return b+E}getSpan(J,L){return this.keyLayout.getSpan(J,L)+this.valueLayout.getSpan(J,L)}}function Q(Z,J,L){const l=n.u32("length"),b=n.struct([l,n.seq(new V(Z,J),n.offset(l,-l.span),"values")]);return new I(b,({values:E})=>new Map(E),E=>({values:Array.from(E.entries())}),L)}r.map=Q})(lib);var _Buffer=safeBufferExports.Buffer;function base(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var n=0;n<r.length;n++){var o=r.charAt(n),s=o.charCodeAt(0);if(e[s]!==255)throw new TypeError(o+" is ambiguous");e[s]=n}var a=r.length,c=r.charAt(0),d=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function y(S){if((Array.isArray(S)||S instanceof Uint8Array)&&(S=_Buffer.from(S)),!_Buffer.isBuffer(S))throw new TypeError("Expected Buffer");if(S.length===0)return"";for(var P=0,x=0,A=0,O=S.length;A!==O&&S[A]===0;)A++,P++;for(var z=(O-A)*u+1>>>0,M=new Uint8Array(z);A!==O;){for(var H=S[A],q=0,Y=z-1;(H!==0||q<x)&&Y!==-1;Y--,q++)H+=256*M[Y]>>>0,M[Y]=H%a>>>0,H=H/a>>>0;if(H!==0)throw new Error("Non-zero carry");x=q,A++}for(var B=z-x;B!==z&&M[B]===0;)B++;for(var N=c.repeat(P);B<z;++B)N+=r.charAt(M[B]);return N}function v(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return _Buffer.alloc(0);for(var P=0,x=0,A=0;S[P]===c;)x++,P++;for(var O=(S.length-P)*d+1>>>0,z=new Uint8Array(O);P<S.length;){var M=e[S.charCodeAt(P)];if(M===255)return;for(var H=0,q=O-1;(M!==0||H<A)&&q!==-1;q--,H++)M+=a*z[q]>>>0,z[q]=M%256>>>0,M=M/256>>>0;if(M!==0)throw new Error("Non-zero carry");A=H,P++}for(var Y=O-A;Y!==O&&z[Y]===0;)Y++;var B=_Buffer.allocUnsafe(x+(O-Y));B.fill(0,0,x);for(var N=x;Y!==O;)B[N++]=z[Y++];return B}function I(S){var P=v(S);if(P)return P;throw new Error("Non-base"+a+" character")}return{encode:y,decodeUnsafe:v,decode:I}}var src=base,basex=src,ALPHABET="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",bs58$1=basex(ALPHABET);class IdlError extends Error{}class ProgramError extends Error{constructor(e,t,...n){super(...n),this.code=e,this.msg=t}static parse(e,t){let n=e.toString().split("custom program error: ");if(n.length!==2)return null;let o;try{o=parseInt(n[1])}catch{return null}let s=t.get(o);return s!==void 0?new ProgramError(o,s):(s=LangErrorMessage.get(o),s!==void 0?new ProgramError(o,s):null)}toString(){return this.msg}}const LangErrorCode={InstructionMissing:100,InstructionFallbackNotFound:101,InstructionDidNotDeserialize:102,InstructionDidNotSerialize:103,IdlInstructionStub:120,IdlInstructionInvalidProgram:121,ConstraintMut:140,ConstraintHasOne:141,ConstraintSigner:142,ConstraintRaw:143,ConstraintOwner:144,ConstraintRentExempt:145,ConstraintSeeds:146,ConstraintExecutable:147,ConstraintState:148,ConstraintAssociated:149,ConstraintAssociatedInit:150,ConstraintClose:151,ConstraintAddress:152,AccountDiscriminatorAlreadySet:160,AccountDiscriminatorNotFound:161,AccountDiscriminatorMismatch:162,AccountDidNotDeserialize:163,AccountDidNotSerialize:164,AccountNotEnoughKeys:165,AccountNotMutable:166,AccountNotProgramOwned:167,StateInvalidAddress:180,Deprecated:299},LangErrorMessage=new Map([[LangErrorCode.InstructionMissing,"8 byte instruction identifier not provided"],[LangErrorCode.InstructionFallbackNotFound,"Fallback functions are not supported"],[LangErrorCode.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[LangErrorCode.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[LangErrorCode.IdlInstructionStub,"The program was compiled without idl instructions"],[LangErrorCode.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[LangErrorCode.ConstraintMut,"A mut constraint was violated"],[LangErrorCode.ConstraintHasOne,"A has_one constraint was violated"],[LangErrorCode.ConstraintSigner,"A signer constraint was violated"],[LangErrorCode.ConstraintRaw,"A raw constraint as violated"],[LangErrorCode.ConstraintOwner,"An owner constraint was violated"],[LangErrorCode.ConstraintRentExempt,"A rent exempt constraint was violated"],[LangErrorCode.ConstraintSeeds,"A seeds constraint was violated"],[LangErrorCode.ConstraintExecutable,"An executable constraint was violated"],[LangErrorCode.ConstraintState,"A state constraint was violated"],[LangErrorCode.ConstraintAssociated,"An associated constraint was violated"],[LangErrorCode.ConstraintAssociatedInit,"An associated init constraint was violated"],[LangErrorCode.ConstraintClose,"A close constraint was violated"],[LangErrorCode.ConstraintAddress,"An address constraint was violated"],[LangErrorCode.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[LangErrorCode.AccountDiscriminatorNotFound,"No 8 byte discriminator was found on the account"],[LangErrorCode.AccountDiscriminatorMismatch,"8 byte discriminator did not match what was expected"],[LangErrorCode.AccountDidNotDeserialize,"Failed to deserialize the account"],[LangErrorCode.AccountDidNotSerialize,"Failed to serialize the account"],[LangErrorCode.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[LangErrorCode.AccountNotMutable,"The given account is not mutable"],[LangErrorCode.AccountNotProgramOwned,"The given account is not owned by the executing program"],[LangErrorCode.StateInvalidAddress,"The given state account does not have the correct address"],[LangErrorCode.Deprecated,"The API being used is deprecated and should no longer be used"]]);class IdlCoder{static fieldLayout(e,t){const n=e.name!==void 0?camelCase$1(e.name):void 0;switch(e.type){case"bool":return lib.bool(n);case"u8":return lib.u8(n);case"i8":return lib.i8(n);case"u16":return lib.u16(n);case"i16":return lib.i16(n);case"u32":return lib.u32(n);case"i32":return lib.i32(n);case"u64":return lib.u64(n);case"i64":return lib.i64(n);case"u128":return lib.u128(n);case"i128":return lib.i128(n);case"bytes":return lib.vecU8(n);case"string":return lib.str(n);case"publicKey":return lib.publicKey(n);default:{if(e.type.vec)return lib.vec(IdlCoder.fieldLayout({name:void 0,type:e.type.vec},t),n);if(e.type.option)return lib.option(IdlCoder.fieldLayout({name:void 0,type:e.type.option},t),n);if(e.type.defined){if(t===void 0)throw new IdlError("User defined types not provided");const o=t.filter(s=>s.name===e.type.defined);if(o.length!==1)throw new IdlError(`Type not found: ${JSON.stringify(e)}`);return IdlCoder.typeDefLayout(o[0],t,n)}else if(e.type.array){let o=e.type.array[0],s=e.type.array[1],a=IdlCoder.fieldLayout({name:void 0,type:o},t);return lib.array(a,s,n)}else throw new Error(`Not yet implemented: ${e}`)}}}static typeDefLayout(e,t,n){if(e.type.kind==="struct"){const o=e.type.fields.map(s=>IdlCoder.fieldLayout(s,t));return lib.struct(o,n)}else if(e.type.kind==="enum"){let o=e.type.variants.map(s=>{const a=camelCase$1(s.name);if(s.fields===void 0)return lib.struct([],a);const c=s.fields.map(d=>{if(d.name===void 0)throw new Error("Tuple enum variants not yet implemented.");return IdlCoder.fieldLayout(d,t)});return lib.struct(c,a)});return n!==void 0?lib.rustEnum(o).replicate(n):lib.rustEnum(o,n)}else throw new Error(`Unknown type kint: ${e}`)}}var __assign=function(){return __assign=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},__assign.apply(this,arguments)};typeof SuppressedError=="function"&&SuppressedError;function lowerCase(r){return r.toLowerCase()}var DEFAULT_SPLIT_REGEXP=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],DEFAULT_STRIP_REGEXP=/[^A-Z0-9]+/gi;function noCase(r,e){e===void 0&&(e={});for(var t=e.splitRegexp,n=t===void 0?DEFAULT_SPLIT_REGEXP:t,o=e.stripRegexp,s=o===void 0?DEFAULT_STRIP_REGEXP:o,a=e.transform,c=a===void 0?lowerCase:a,d=e.delimiter,u=d===void 0?" ":d,y=replace(replace(r,n,"$1\0$2"),s,"\0"),v=0,I=y.length;y.charAt(v)==="\0";)v++;for(;y.charAt(I-1)==="\0";)I--;return y.slice(v,I).split("\0").map(c).join(u)}function replace(r,e,t){return e instanceof RegExp?r.replace(e,t):e.reduce(function(n,o){return n.replace(o,t)},r)}function dotCase(r,e){return e===void 0&&(e={}),noCase(r,__assign({delimiter:"."},e))}function snakeCase(r,e){return e===void 0&&(e={}),dotCase(r,__assign({delimiter:"_"},e))}var sha256$1={exports:{}};(function(module){var define_global_default={};/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=define_global_default:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(r){return Object.prototype.toString.call(r)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(r){return typeof r=="object"&&r.buffer&&r.buffer.constructor===ArrayBuffer});var createOutputMethod=function(r,e){return function(t){return new Sha256(e,!0).update(t)[r]()}},createMethod=function(r){var e=createOutputMethod("hex",r);NODE_JS&&(e=nodeWrap(e,r)),e.create=function(){return new Sha256(r)},e.update=function(o){return e.create().update(o)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createOutputMethod(n,r)}return e},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(r){if(typeof r=="string")return crypto.createHash(algorithm).update(r,"utf8").digest("hex");if(r==null)throw new Error(ERROR);return r.constructor===ArrayBuffer&&(r=new Uint8Array(r)),Array.isArray(r)||ArrayBuffer.isView(r)||r.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(r)).digest("hex"):method(r)};return nodeMethod},createHmacOutputMethod=function(r,e){return function(t,n){return new HmacSha256(t,e,!0).update(n)[r]()}},createHmacMethod=function(r){var e=createHmacOutputMethod("hex",r);e.create=function(o){return new HmacSha256(o,r)},e.update=function(o,s){return e.create(o).update(s)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createHmacOutputMethod(n,r)}return e};function Sha256(r,e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=r}Sha256.prototype.update=function(r){if(!this.finalized){var e,t=typeof r;if(t!=="string"){if(t==="object"){if(r===null)throw new Error(ERROR);if(ARRAY_BUFFER&&r.constructor===ArrayBuffer)r=new Uint8Array(r);else if(!Array.isArray(r)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(r)))throw new Error(ERROR)}else throw new Error(ERROR);e=!0}for(var n,o=0,s,a=r.length,c=this.blocks;o<a;){if(this.hashed&&(this.hashed=!1,c[0]=this.block,c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),e)for(s=this.start;o<a&&s<64;++o)c[s>>2]|=r[o]<<SHIFT[s++&3];else for(s=this.start;o<a&&s<64;++o)n=r.charCodeAt(o),n<128?c[s>>2]|=n<<SHIFT[s++&3]:n<2048?(c[s>>2]|=(192|n>>6)<<SHIFT[s++&3],c[s>>2]|=(128|n&63)<<SHIFT[s++&3]):n<55296||n>=57344?(c[s>>2]|=(224|n>>12)<<SHIFT[s++&3],c[s>>2]|=(128|n>>6&63)<<SHIFT[s++&3],c[s>>2]|=(128|n&63)<<SHIFT[s++&3]):(n=65536+((n&1023)<<10|r.charCodeAt(++o)&1023),c[s>>2]|=(240|n>>18)<<SHIFT[s++&3],c[s>>2]|=(128|n>>12&63)<<SHIFT[s++&3],c[s>>2]|=(128|n>>6&63)<<SHIFT[s++&3],c[s>>2]|=(128|n&63)<<SHIFT[s++&3]);this.lastByteIndex=s,this.bytes+=s-this.start,s>=64?(this.block=c[16],this.start=s-64,this.hash(),this.hashed=!0):this.start=s}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var r=this.blocks,e=this.lastByteIndex;r[16]=this.block,r[e>>2]|=EXTRA[e&3],this.block=r[16],e>=56&&(this.hashed||this.hash(),r[0]=this.block,r[16]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=r[11]=r[12]=r[13]=r[14]=r[15]=0),r[14]=this.hBytes<<3|this.bytes>>>29,r[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var r=this.h0,e=this.h1,t=this.h2,n=this.h3,o=this.h4,s=this.h5,a=this.h6,c=this.h7,d=this.blocks,u,y,v,I,S,P,x,A,O,z,M;for(u=16;u<64;++u)S=d[u-15],y=(S>>>7|S<<25)^(S>>>18|S<<14)^S>>>3,S=d[u-2],v=(S>>>17|S<<15)^(S>>>19|S<<13)^S>>>10,d[u]=d[u-16]+y+d[u-7]+v<<0;for(M=e&t,u=0;u<64;u+=4)this.first?(this.is224?(A=300032,S=d[0]-1413257819,c=S-150054599<<0,n=S+24177077<<0):(A=704751109,S=d[0]-210244248,c=S-1521486534<<0,n=S+143694565<<0),this.first=!1):(y=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),v=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),A=r&e,I=A^r&t^M,x=o&s^~o&a,S=c+v+x+K[u]+d[u],P=y+I,c=n+S<<0,n=S+P<<0),y=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),v=(c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7),O=n&r,I=O^n&e^A,x=c&o^~c&s,S=a+v+x+K[u+1]+d[u+1],P=y+I,a=t+S<<0,t=S+P<<0,y=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),v=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),z=t&n,I=z^t&r^O,x=a&c^~a&o,S=s+v+x+K[u+2]+d[u+2],P=y+I,s=e+S<<0,e=S+P<<0,y=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),v=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),M=e&t,I=M^e&n^z,x=s&a^~s&c,S=o+v+x+K[u+3]+d[u+3],P=y+I,o=r+S<<0,r=S+P<<0;this.h0=this.h0+r<<0,this.h1=this.h1+e<<0,this.h2=this.h2+t<<0,this.h3=this.h3+n<<0,this.h4=this.h4+o<<0,this.h5=this.h5+s<<0,this.h6=this.h6+a<<0,this.h7=this.h7+c<<0},Sha256.prototype.hex=function(){this.finalize();var r=this.h0,e=this.h1,t=this.h2,n=this.h3,o=this.h4,s=this.h5,a=this.h6,c=this.h7,d=HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[o&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[s&15]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15];return this.is224||(d+=HEX_CHARS[c>>28&15]+HEX_CHARS[c>>24&15]+HEX_CHARS[c>>20&15]+HEX_CHARS[c>>16&15]+HEX_CHARS[c>>12&15]+HEX_CHARS[c>>8&15]+HEX_CHARS[c>>4&15]+HEX_CHARS[c&15]),d},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var r=this.h0,e=this.h1,t=this.h2,n=this.h3,o=this.h4,s=this.h5,a=this.h6,c=this.h7,d=[r>>24&255,r>>16&255,r>>8&255,r&255,e>>24&255,e>>16&255,e>>8&255,e&255,t>>24&255,t>>16&255,t>>8&255,t&255,n>>24&255,n>>16&255,n>>8&255,n&255,o>>24&255,o>>16&255,o>>8&255,o&255,s>>24&255,s>>16&255,s>>8&255,s&255,a>>24&255,a>>16&255,a>>8&255,a&255];return this.is224||d.push(c>>24&255,c>>16&255,c>>8&255,c&255),d},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var r=new ArrayBuffer(this.is224?28:32),e=new DataView(r);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),r};function HmacSha256(r,e,t){var n,o=typeof r;if(o==="string"){var s=[],a=r.length,c=0,d;for(n=0;n<a;++n)d=r.charCodeAt(n),d<128?s[c++]=d:d<2048?(s[c++]=192|d>>6,s[c++]=128|d&63):d<55296||d>=57344?(s[c++]=224|d>>12,s[c++]=128|d>>6&63,s[c++]=128|d&63):(d=65536+((d&1023)<<10|r.charCodeAt(++n)&1023),s[c++]=240|d>>18,s[c++]=128|d>>12&63,s[c++]=128|d>>6&63,s[c++]=128|d&63);r=s}else if(o==="object"){if(r===null)throw new Error(ERROR);if(ARRAY_BUFFER&&r.constructor===ArrayBuffer)r=new Uint8Array(r);else if(!Array.isArray(r)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(r)))throw new Error(ERROR)}else throw new Error(ERROR);r.length>64&&(r=new Sha256(e,!0).update(r).array());var u=[],y=[];for(n=0;n<64;++n){var v=r[n]||0;u[n]=92^v,y[n]=54^v}Sha256.call(this,e,t),this.update(y),this.oKeyPad=u,this.inner=!0,this.sharedMemory=t}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var r=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(r),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224)})()})(sha256$1);var sha256Exports=sha256$1.exports,define_Buffer_default$c=["buffer","Buffer"];function accountSize(r,e){if(e.type.kind==="enum"){let t=e.type.variants.map(n=>n.fields===void 0?0:n.fields.map(o=>{if(o.name===void 0)throw new Error("Tuple enum variants not yet implemented.");return typeSize(r,o.type)}).reduce((o,s)=>o+s));return Math.max(...t)+1}return e.type.fields===void 0?0:e.type.fields.map(t=>typeSize(r,t.type)).reduce((t,n)=>t+n)}function typeSize(r,e){switch(e){case"bool":return 1;case"u8":return 1;case"i8":return 1;case"i16":return 2;case"u16":return 2;case"u32":return 4;case"i32":return 4;case"u64":return 8;case"i64":return 8;case"u128":return 16;case"i128":return 16;case"bytes":return 1;case"string":return 1;case"publicKey":return 32;default:if(e.vec!==void 0)return 1;if(e.option!==void 0)return 1+typeSize(r,e.option);if(e.defined!==void 0){const t=r.types.filter(o=>o.name===e.defined);if(t.length!==1)throw new IdlError(`Type not found: ${JSON.stringify(e)}`);let n=t[0];return accountSize(r,n)}if(e.array!==void 0){let t=e.array[0],n=e.array[1];return typeSize(r,t)*n}throw new Error(`Invalid type ${JSON.stringify(e)}`)}}function sighash(r,e){let t=snakeCase(e),n=`${r}:${t}`;return define_Buffer_default$c.from(sha256Exports.sha256.digest(n)).slice(0,8)}var define_Buffer_default$b=["buffer","Buffer"];const SIGHASH_STATE_NAMESPACE="state",SIGHASH_GLOBAL_NAMESPACE="global";class InstructionCoder{constructor(e){this.idl=e,this.ixLayout=InstructionCoder.parseIxLayout(e);const t=new Map;e.instructions.forEach(n=>{const o=sighash(SIGHASH_GLOBAL_NAMESPACE,n.name);t.set(bs58$1.encode(o),{layout:this.ixLayout.get(n.name),name:n.name})}),e.state&&e.state.methods.map(n=>{const o=sighash(SIGHASH_STATE_NAMESPACE,n.name);t.set(bs58$1.encode(o),{layout:this.ixLayout.get(n.name),name:n.name})}),this.sighashLayouts=t}encode(e,t){return this._encode(SIGHASH_GLOBAL_NAMESPACE,e,t)}encodeState(e,t){return this._encode(SIGHASH_STATE_NAMESPACE,e,t)}_encode(e,t,n){const o=define_Buffer_default$b.alloc(1e3),s=camelCase$1(t),a=this.ixLayout.get(s).encode(n,o),c=o.slice(0,a);return define_Buffer_default$b.concat([sighash(e,t),c])}static parseIxLayout(e){const n=(e.state?e.state.methods:[]).map(o=>{let s=o.args.map(c=>IdlCoder.fieldLayout(c,e.types));const a=camelCase$1(o.name);return[a,lib.struct(s,a)]}).concat(e.instructions.map(o=>{let s=o.args.map(c=>IdlCoder.fieldLayout(c,e.types));const a=camelCase$1(o.name);return[a,lib.struct(s,a)]}));return new Map(n)}decode(e){typeof e=="string"&&(e=bs58$1.decode(e));let t=bs58$1.encode(e.slice(0,8)),n=e.slice(8);const o=this.sighashLayouts.get(t);return o?{data:o.layout.decode(n),name:o.name}:null}format(e,t){return InstructionFormatter.format(e,t,this.idl)}}class InstructionFormatter{static format(e,t,n){const o=n.instructions.filter(d=>e.name===d.name)[0];if(o===void 0)return console.error("Invalid instruction given"),null;const s=o.args.map(d=>({name:d.name,type:InstructionFormatter.formatIdlType(d.type),data:InstructionFormatter.formatIdlData(d,e.data[d.name],n.types)})),a=InstructionFormatter.flattenIdlAccounts(o.accounts),c=t.map((d,u)=>u<a.length?{name:a[u].name,...d}:{name:void 0,...d});return{args:s,accounts:c}}static formatIdlType(e){if(typeof e=="string")return e;if(e.vec)return`Vec<${this.formatIdlType(e.vec)}>`;if(e.option)return`Option<${this.formatIdlType(e.option)}>`;if(e.defined)return e.defined}static formatIdlData(e,t,n){if(typeof e.type=="string")return t.toString();if(e.type.vec)return"["+t.map(o=>this.formatIdlData({name:"",type:e.type.vec},o)).join(", ")+"]";if(e.type.option)return t===null?"null":this.formatIdlData({name:"",type:e.type.option},t);if(e.type.defined){if(n===void 0)throw new Error("User defined types not provided");const o=n.filter(s=>s.name===e.type.defined);if(o.length!==1)throw new Error(`Type not found: ${e.type.defined}`);return InstructionFormatter.formatIdlDataDefined(o[0],t,n)}return"unknown"}static formatIdlDataDefined(e,t,n){if(e.type.kind==="struct")return"{ "+Object.keys(t).map(s=>{const a=e.type.fields.filter(c=>c.name===s)[0];if(a===void 0)throw new Error("Unable to find type");return s+": "+InstructionFormatter.formatIdlData(a,t[s],n)}).join(", ")+" }";if(e.type.variants.length===0)return"{}";if(e.type.variants[0].name){const o=Object.keys(t)[0],s=t[o],a=Object.keys(s).map(d=>{var u;const y=s[d],v=(u=e.type.variants[o])===null||u===void 0?void 0:u.filter(I=>I.name===d)[0];if(v===void 0)throw new Error("Unable to find variant");return d+": "+InstructionFormatter.formatIdlData(v,y,n)}).join(", "),c=camelCase$1(o,{pascalCase:!0});return a.length===0?c:`${c} { ${a} }`}else return"Tuple formatting not yet implemented"}static flattenIdlAccounts(e,t){return e.map(n=>{const o=sentenceCase(n.name);if(n.accounts){const s=t?`${t} > ${o}`:o;return InstructionFormatter.flattenIdlAccounts(n.accounts,s)}else return{...n,name:t?`${t} > ${o}`:o}}).flat()}}function sentenceCase(r){const e=r.replace(/([A-Z])/g," $1");return e.charAt(0).toUpperCase()+e.slice(1)}var define_Buffer_default$a=["buffer","Buffer"];const ACCOUNT_DISCRIMINATOR_SIZE=8;class AccountsCoder{constructor(e){if(e.accounts===void 0){this.accountLayouts=new Map;return}const t=e.accounts.map(n=>[n.name,IdlCoder.typeDefLayout(n,e.types)]);this.accountLayouts=new Map(t)}async encode(e,t){const n=define_Buffer_default$a.alloc(1e3),s=this.accountLayouts.get(e).encode(t,n);let a=n.slice(0,s),c=await accountDiscriminator(e);return define_Buffer_default$a.concat([c,a])}decode(e,t){const n=t.slice(8);return this.accountLayouts.get(e).decode(n)}}async function accountDiscriminator(r){return define_Buffer_default$a.from(sha256Exports.sha256.digest(`account:${r}`)).slice(0,8)}var define_Buffer_default$9=["buffer","Buffer"];class TypesCoder{constructor(e){if(e.types===void 0){this.layouts=new Map;return}const t=e.types.map(n=>[n.name,IdlCoder.typeDefLayout(n,e.types)]);this.layouts=new Map(t)}encode(e,t){const n=define_Buffer_default$9.alloc(1e3),s=this.layouts.get(e).encode(t,n);return n.slice(0,s)}decode(e,t){return this.layouts.get(e).decode(t)}}var define_Buffer_default$8=["buffer","Buffer"];class EventCoder{constructor(e){if(e.events===void 0){this.layouts=new Map;return}const t=e.events.map(n=>{let o={name:n.name,type:{kind:"struct",fields:n.fields.map(s=>({name:s.name,type:s.type}))}};return[n.name,IdlCoder.typeDefLayout(o,e.types)]});this.layouts=new Map(t),this.discriminators=new Map(e.events===void 0?[]:e.events.map(n=>[fromByteArray_1(eventDiscriminator(n.name)),n.name]))}decode(e){let t;try{t=define_Buffer_default$8.from(toByteArray_1(e))}catch{return null}const n=fromByteArray_1(t.slice(0,8)),o=this.discriminators.get(n);return o===void 0?null:{data:this.layouts.get(o).decode(t.slice(8)),name:o}}}function eventDiscriminator(r){return define_Buffer_default$8.from(sha256Exports.sha256.digest(`event:${r}`)).slice(0,8)}const _AVAILABLE_FEATURES=new Set(["anchor-deprecated-state"]),_FEATURES=new Map;function set(r){if(!_AVAILABLE_FEATURES.has(r))throw new Error("Invalid feature");_FEATURES.set(r,!0)}function isSet(r){return _FEATURES.get(r)!==void 0}const features=Object.freeze(Object.defineProperty({__proto__:null,isSet,set},Symbol.toStringTag,{value:"Module"}));var define_Buffer_default$7=["buffer","Buffer"];class StateCoder{constructor(e){if(e.state===void 0)throw new Error("Idl state not defined.");this.layout=IdlCoder.typeDefLayout(e.state.struct,e.types)}async encode(e,t){const n=define_Buffer_default$7.alloc(1e3),o=this.layout.encode(t,n),s=await stateDiscriminator(e),a=n.slice(0,o);return define_Buffer_default$7.concat([s,a])}decode(e){const t=e.slice(8);return this.layout.decode(t)}}async function stateDiscriminator(r){let e=isSet("anchor-deprecated-state")?"account":"state";return define_Buffer_default$7.from(sha256Exports.sha256.digest(`${e}:${r}`)).slice(0,8)}class Coder{constructor(e){this.instruction=new InstructionCoder(e),this.accounts=new AccountsCoder(e),this.types=new TypesCoder(e),this.events=new EventCoder(e),e.state&&(this.state=new StateCoder(e))}sighash(e,t){return sighash(e,t)}}var parser$1=function(){function r(n,o){function s(){this.constructor=n}s.prototype=o.prototype,n.prototype=new s}function e(n,o,s,a,c,d){this.message=n,this.expected=o,this.found=s,this.offset=a,this.line=c,this.column=d,this.name="SyntaxError"}r(e,Error);function t(n){var o=arguments.length>1?arguments[1]:{},s={},a={start:pr},c=pr,d=function(){return Cr},u=s,y="#",v={type:"literal",value:"#",description:'"#"'},I=void 0,S={type:"any",description:"any character"},P="[",x={type:"literal",value:"[",description:'"["'},A="]",O={type:"literal",value:"]",description:'"]"'},z=function(h){ar(ct("ObjectPath",h,ot,at))},M=function(h){ar(ct("ArrayPath",h,ot,at))},H=function(h,w){return h.concat(w)},q=function(h){return[h]},Y=function(h){return h},B=".",N={type:"literal",value:".",description:'"."'},V="=",Q={type:"literal",value:"=",description:'"="'},Z=function(h,w){ar(ct("Assign",w,ot,at,h))},J=function(h){return h.join("")},L=function(h){return h.value},l='"""',b={type:"literal",value:'"""',description:'"\\"\\"\\""'},E=null,T=function(h){return ct("String",h.join(""),ot,at)},C='"',W={type:"literal",value:'"',description:'"\\""'},G="'''",U={type:"literal",value:"'''",description:`"'''"`},m="'",F={type:"literal",value:"'",description:`"'"`},se=function(h){return h},ae=function(h){return h},ue="\\",me={type:"literal",value:"\\",description:'"\\\\"'},he=function(){return""},pe="e",ke={type:"literal",value:"e",description:'"e"'},ge="E",Se={type:"literal",value:"E",description:'"E"'},Ae=function(h,w){return ct("Float",parseFloat(h+"e"+w),ot,at)},ve=function(h){return ct("Float",parseFloat(h),ot,at)},Te="+",gt={type:"literal",value:"+",description:'"+"'},Pe=function(h){return h.join("")},Re="-",ft={type:"literal",value:"-",description:'"-"'},Ue=function(h){return"-"+h.join("")},Be=function(h){return ct("Integer",parseInt(h,10),ot,at)},nt="true",Ce={type:"literal",value:"true",description:'"true"'},Oe=function(){return ct("Boolean",!0,ot,at)},st="false",Me={type:"literal",value:"false",description:'"false"'},R=function(){return ct("Boolean",!1,ot,at)},g=function(){return ct("Array",[],ot,at)},_=function(h){return ct("Array",h?[h]:[],ot,at)},$=function(h){return ct("Array",h,ot,at)},X=function(h,w){return ct("Array",h.concat(w),ot,at)},ee=function(h){return h},re=",",Ee={type:"literal",value:",",description:'","'},we="{",be={type:"literal",value:"{",description:'"{"'},Ne="}",ye={type:"literal",value:"}",description:'"}"'},ze=function(h){return ct("InlineTable",h,ot,at)},kt=function(h,w){return ct("InlineTableValue",w,ot,at,h)},Ke=function(h){return"."+h},Ve=function(h){return h.join("")},mt=":",$e={type:"literal",value:":",description:'":"'},De=function(h){return h.join("")},Rt="T",Fe={type:"literal",value:"T",description:'"T"'},Ze="Z",jt={type:"literal",value:"Z",description:'"Z"'},je=function(h,w){return ct("Date",new Date(h+"T"+w+"Z"),ot,at)},Ge=function(h,w){return ct("Date",new Date(h+"T"+w),ot,at)},Gt=/^[ \t]/,qe={type:"class",value:"[ \\t]",description:"[ \\t]"},He=`
`,Bt={type:"literal",value:`
`,description:'"\\n"'},Ye="\r",Qe={type:"literal",value:"\r",description:'"\\r"'},qt=/^[0-9a-f]/i,Xe={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},Je=/^[0-9]/,Yt={type:"class",value:"[0-9]",description:"[0-9]"},et="_",tt={type:"literal",value:"_",description:'"_"'},Lt=function(){return""},Pt=/^[A-Za-z0-9_\-]/,Ut={type:"class",value:"[A-Za-z0-9_\\-]",description:"[A-Za-z0-9_\\-]"},Ct=function(h){return h.join("")},_t='\\"',xt={type:"literal",value:'\\"',description:'"\\\\\\""'},Ot=function(){return'"'},wt="\\\\",Mt={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},Nt=function(){return"\\"},St="\\b",$t={type:"literal",value:"\\b",description:'"\\\\b"'},Dt=function(){return"\b"},Et="\\t",Ft={type:"literal",value:"\\t",description:'"\\\\t"'},Ht=function(){return"	"},vt="\\n",Wt={type:"literal",value:"\\n",description:'"\\\\n"'},zt=function(){return`
`},ur="\\f",Or={type:"literal",value:"\\f",description:'"\\\\f"'},Mr=function(){return"\f"},lr="\\r",Nr={type:"literal",value:"\\r",description:'"\\\\r"'},$r=function(){return"\r"},dr="\\U",Dr={type:"literal",value:"\\U",description:'"\\\\U"'},fr=function(h){return an(h.join(""))},hr="\\u",Fr={type:"literal",value:"\\u",description:'"\\\\u"'},p=0,fe=0,Kt=0,rr={line:1,column:1,seenCR:!1},Qt=0,nr=[],ie=0,oe={},Xt;if("startRule"in o){if(!(o.startRule in a))throw new Error(`Can't start parsing from rule "`+o.startRule+'".');c=a[o.startRule]}function ot(){return ir(fe).line}function at(){return ir(fe).column}function ir(h){function w(k,D,j){var te,ne;for(te=D;te<j;te++)ne=n.charAt(te),ne===`
`?(k.seenCR||k.line++,k.column=1,k.seenCR=!1):ne==="\r"||ne==="\u2028"||ne==="\u2029"?(k.line++,k.column=1,k.seenCR=!0):(k.column++,k.seenCR=!1)}return Kt!==h&&(Kt>h&&(Kt=0,rr={line:1,column:1,seenCR:!1}),w(rr,Kt,h),Kt=h),rr}function ce(h){p<Qt||(p>Qt&&(Qt=p,nr=[]),nr.push(h))}function Hr(h,w,k){function D(le){var _e=1;for(le.sort(function(xe,Ie){return xe.description<Ie.description?-1:xe.description>Ie.description?1:0});_e<le.length;)le[_e-1]===le[_e]?le.splice(_e,1):_e++}function j(le,_e){function xe(Tt){function bt(dt){return dt.charCodeAt(0).toString(16).toUpperCase()}return Tt.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(dt){return"\\x0"+bt(dt)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(dt){return"\\x"+bt(dt)}).replace(/[\u0180-\u0FFF]/g,function(dt){return"\\u0"+bt(dt)}).replace(/[\u1080-\uFFFF]/g,function(dt){return"\\u"+bt(dt)})}var Ie=new Array(le.length),We,rt,lt;for(lt=0;lt<le.length;lt++)Ie[lt]=le[lt].description;return We=le.length>1?Ie.slice(0,-1).join(", ")+" or "+Ie[le.length-1]:Ie[0],rt=_e?'"'+xe(_e)+'"':"end of input","Expected "+We+" but "+rt+" found."}var te=ir(k),ne=k<n.length?n.charAt(k):null;return w!==null&&D(w),new e(j(w,ne),w,ne,k,te.line,te.column)}function pr(){var h,w,k,D=p*49+0,j=oe[D];if(j)return p=j.nextPos,j.result;for(h=p,w=[],k=yr();k!==s;)w.push(k),k=yr();return w!==s&&(fe=h,w=d()),h=w,oe[D]={nextPos:p,result:h},h}function yr(){var h,w,k,D,j,te,ne,le=p*49+1,_e=oe[le];if(_e)return p=_e.nextPos,_e.result;for(h=p,w=[],k=de();k!==s;)w.push(k),k=de();if(w!==s)if(k=Wr(),k!==s){for(D=[],j=de();j!==s;)D.push(j),j=de();if(D!==s){for(j=[],te=Jt();te!==s;)j.push(te),te=Jt();if(j!==s){if(te=[],ne=pt(),ne!==s)for(;ne!==s;)te.push(ne),ne=pt();else te=u;te===s&&(te=tr()),te!==s?(w=[w,k,D,j,te],h=w):(p=h,h=u)}else p=h,h=u}else p=h,h=u}else p=h,h=u;else p=h,h=u;if(h===s){if(h=p,w=[],k=de(),k!==s)for(;k!==s;)w.push(k),k=de();else w=u;if(w!==s){if(k=[],D=pt(),D!==s)for(;D!==s;)k.push(D),D=pt();else k=u;k===s&&(k=tr()),k!==s?(w=[w,k],h=w):(p=h,h=u)}else p=h,h=u;h===s&&(h=pt())}return oe[le]={nextPos:p,result:h},h}function Wr(){var h,w=p*49+2,k=oe[w];return k?(p=k.nextPos,k.result):(h=Jt(),h===s&&(h=zr(),h===s&&(h=Kr(),h===s&&(h=Vr()))),oe[w]={nextPos:p,result:h},h)}function Jt(){var h,w,k,D,j,te,ne=p*49+3,le=oe[ne];if(le)return p=le.nextPos,le.result;if(h=p,n.charCodeAt(p)===35?(w=y,p++):(w=s,ie===0&&ce(v)),w!==s){for(k=[],D=p,j=p,ie++,te=pt(),te===s&&(te=tr()),ie--,te===s?j=I:(p=j,j=u),j!==s?(n.length>p?(te=n.charAt(p),p++):(te=s,ie===0&&ce(S)),te!==s?(j=[j,te],D=j):(p=D,D=u)):(p=D,D=u);D!==s;)k.push(D),D=p,j=p,ie++,te=pt(),te===s&&(te=tr()),ie--,te===s?j=I:(p=j,j=u),j!==s?(n.length>p?(te=n.charAt(p),p++):(te=s,ie===0&&ce(S)),te!==s?(j=[j,te],D=j):(p=D,D=u)):(p=D,D=u);k!==s?(w=[w,k],h=w):(p=h,h=u)}else p=h,h=u;return oe[ne]={nextPos:p,result:h},h}function zr(){var h,w,k,D,j,te,ne=p*49+4,le=oe[ne];if(le)return p=le.nextPos,le.result;if(h=p,n.charCodeAt(p)===91?(w=P,p++):(w=s,ie===0&&ce(x)),w!==s){for(k=[],D=de();D!==s;)k.push(D),D=de();if(k!==s)if(D=gr(),D!==s){for(j=[],te=de();te!==s;)j.push(te),te=de();j!==s?(n.charCodeAt(p)===93?(te=A,p++):(te=s,ie===0&&ce(O)),te!==s?(fe=h,w=z(D),h=w):(p=h,h=u)):(p=h,h=u)}else p=h,h=u;else p=h,h=u}else p=h,h=u;return oe[ne]={nextPos:p,result:h},h}function Kr(){var h,w,k,D,j,te,ne,le,_e=p*49+5,xe=oe[_e];if(xe)return p=xe.nextPos,xe.result;if(h=p,n.charCodeAt(p)===91?(w=P,p++):(w=s,ie===0&&ce(x)),w!==s)if(n.charCodeAt(p)===91?(k=P,p++):(k=s,ie===0&&ce(x)),k!==s){for(D=[],j=de();j!==s;)D.push(j),j=de();if(D!==s)if(j=gr(),j!==s){for(te=[],ne=de();ne!==s;)te.push(ne),ne=de();te!==s?(n.charCodeAt(p)===93?(ne=A,p++):(ne=s,ie===0&&ce(O)),ne!==s?(n.charCodeAt(p)===93?(le=A,p++):(le=s,ie===0&&ce(O)),le!==s?(fe=h,w=M(j),h=w):(p=h,h=u)):(p=h,h=u)):(p=h,h=u)}else p=h,h=u;else p=h,h=u}else p=h,h=u;else p=h,h=u;return oe[_e]={nextPos:p,result:h},h}function gr(){var h,w,k,D=p*49+6,j=oe[D];if(j)return p=j.nextPos,j.result;if(h=p,w=[],k=br(),k!==s)for(;k!==s;)w.push(k),k=br();else w=u;return w!==s?(k=mr(),k!==s?(fe=h,w=H(w,k),h=w):(p=h,h=u)):(p=h,h=u),h===s&&(h=p,w=mr(),w!==s&&(fe=h,w=q(w)),h=w),oe[D]={nextPos:p,result:h},h}function mr(){var h,w,k,D,j,te=p*49+7,ne=oe[te];if(ne)return p=ne.nextPos,ne.result;for(h=p,w=[],k=de();k!==s;)w.push(k),k=de();if(w!==s)if(k=Vt(),k!==s){for(D=[],j=de();j!==s;)D.push(j),j=de();D!==s?(fe=h,w=Y(k),h=w):(p=h,h=u)}else p=h,h=u;else p=h,h=u;if(h===s){for(h=p,w=[],k=de();k!==s;)w.push(k),k=de();if(w!==s)if(k=sr(),k!==s){for(D=[],j=de();j!==s;)D.push(j),j=de();D!==s?(fe=h,w=Y(k),h=w):(p=h,h=u)}else p=h,h=u;else p=h,h=u}return oe[te]={nextPos:p,result:h},h}function br(){var h,w,k,D,j,te,ne,le=p*49+8,_e=oe[le];if(_e)return p=_e.nextPos,_e.result;for(h=p,w=[],k=de();k!==s;)w.push(k),k=de();if(w!==s)if(k=Vt(),k!==s){for(D=[],j=de();j!==s;)D.push(j),j=de();if(D!==s)if(n.charCodeAt(p)===46?(j=B,p++):(j=s,ie===0&&ce(N)),j!==s){for(te=[],ne=de();ne!==s;)te.push(ne),ne=de();te!==s?(fe=h,w=Y(k),h=w):(p=h,h=u)}else p=h,h=u;else p=h,h=u}else p=h,h=u;else p=h,h=u;if(h===s){for(h=p,w=[],k=de();k!==s;)w.push(k),k=de();if(w!==s)if(k=sr(),k!==s){for(D=[],j=de();j!==s;)D.push(j),j=de();if(D!==s)if(n.charCodeAt(p)===46?(j=B,p++):(j=s,ie===0&&ce(N)),j!==s){for(te=[],ne=de();ne!==s;)te.push(ne),ne=de();te!==s?(fe=h,w=Y(k),h=w):(p=h,h=u)}else p=h,h=u;else p=h,h=u}else p=h,h=u;else p=h,h=u}return oe[le]={nextPos:p,result:h},h}function Vr(){var h,w,k,D,j,te,ne=p*49+9,le=oe[ne];if(le)return p=le.nextPos,le.result;if(h=p,w=Vt(),w!==s){for(k=[],D=de();D!==s;)k.push(D),D=de();if(k!==s)if(n.charCodeAt(p)===61?(D=V,p++):(D=s,ie===0&&ce(Q)),D!==s){for(j=[],te=de();te!==s;)j.push(te),te=de();j!==s?(te=At(),te!==s?(fe=h,w=Z(w,te),h=w):(p=h,h=u)):(p=h,h=u)}else p=h,h=u;else p=h,h=u}else p=h,h=u;if(h===s)if(h=p,w=sr(),w!==s){for(k=[],D=de();D!==s;)k.push(D),D=de();if(k!==s)if(n.charCodeAt(p)===61?(D=V,p++):(D=s,ie===0&&ce(Q)),D!==s){for(j=[],te=de();te!==s;)j.push(te),te=de();j!==s?(te=At(),te!==s?(fe=h,w=Z(w,te),h=w):(p=h,h=u)):(p=h,h=u)}else p=h,h=u;else p=h,h=u}else p=h,h=u;return oe[ne]={nextPos:p,result:h},h}function Vt(){var h,w,k,D=p*49+10,j=oe[D];if(j)return p=j.nextPos,j.result;if(h=p,w=[],k=Pr(),k!==s)for(;k!==s;)w.push(k),k=Pr();else w=u;return w!==s&&(fe=h,w=J(w)),h=w,oe[D]={nextPos:p,result:h},h}function sr(){var h,w,k=p*49+11,D=oe[k];return D?(p=D.nextPos,D.result):(h=p,w=_r(),w!==s&&(fe=h,w=L(w)),h=w,h===s&&(h=p,w=wr(),w!==s&&(fe=h,w=L(w)),h=w),oe[k]={nextPos:p,result:h},h)}function At(){var h,w=p*49+12,k=oe[w];return k?(p=k.nextPos,k.result):(h=Zr(),h===s&&(h=nn(),h===s&&(h=Yr(),h===s&&(h=Qr(),h===s&&(h=Xr(),h===s&&(h=Jr(),h===s&&(h=en())))))),oe[w]={nextPos:p,result:h},h)}function Zr(){var h,w=p*49+13,k=oe[w];return k?(p=k.nextPos,k.result):(h=jr(),h===s&&(h=_r(),h===s&&(h=Gr(),h===s&&(h=wr()))),oe[w]={nextPos:p,result:h},h)}function jr(){var h,w,k,D,j,te=p*49+14,ne=oe[te];if(ne)return p=ne.nextPos,ne.result;if(h=p,n.substr(p,3)===l?(w=l,p+=3):(w=s,ie===0&&ce(b)),w!==s)if(k=pt(),k===s&&(k=E),k!==s){for(D=[],j=vr();j!==s;)D.push(j),j=vr();D!==s?(n.substr(p,3)===l?(j=l,p+=3):(j=s,ie===0&&ce(b)),j!==s?(fe=h,w=T(D),h=w):(p=h,h=u)):(p=h,h=u)}else p=h,h=u;else p=h,h=u;return oe[te]={nextPos:p,result:h},h}function _r(){var h,w,k,D,j=p*49+15,te=oe[j];if(te)return p=te.nextPos,te.result;if(h=p,n.charCodeAt(p)===34?(w=C,p++):(w=s,ie===0&&ce(W)),w!==s){for(k=[],D=Sr();D!==s;)k.push(D),D=Sr();k!==s?(n.charCodeAt(p)===34?(D=C,p++):(D=s,ie===0&&ce(W)),D!==s?(fe=h,w=T(k),h=w):(p=h,h=u)):(p=h,h=u)}else p=h,h=u;return oe[j]={nextPos:p,result:h},h}function Gr(){var h,w,k,D,j,te=p*49+16,ne=oe[te];if(ne)return p=ne.nextPos,ne.result;if(h=p,n.substr(p,3)===G?(w=G,p+=3):(w=s,ie===0&&ce(U)),w!==s)if(k=pt(),k===s&&(k=E),k!==s){for(D=[],j=Ar();j!==s;)D.push(j),j=Ar();D!==s?(n.substr(p,3)===G?(j=G,p+=3):(j=s,ie===0&&ce(U)),j!==s?(fe=h,w=T(D),h=w):(p=h,h=u)):(p=h,h=u)}else p=h,h=u;else p=h,h=u;return oe[te]={nextPos:p,result:h},h}function wr(){var h,w,k,D,j=p*49+17,te=oe[j];if(te)return p=te.nextPos,te.result;if(h=p,n.charCodeAt(p)===39?(w=m,p++):(w=s,ie===0&&ce(F)),w!==s){for(k=[],D=Er();D!==s;)k.push(D),D=Er();k!==s?(n.charCodeAt(p)===39?(D=m,p++):(D=s,ie===0&&ce(F)),D!==s?(fe=h,w=T(k),h=w):(p=h,h=u)):(p=h,h=u)}else p=h,h=u;return oe[j]={nextPos:p,result:h},h}function Sr(){var h,w,k,D=p*49+18,j=oe[D];return j?(p=j.nextPos,j.result):(h=Ur(),h===s&&(h=p,w=p,ie++,n.charCodeAt(p)===34?(k=C,p++):(k=s,ie===0&&ce(W)),ie--,k===s?w=I:(p=w,w=u),w!==s?(n.length>p?(k=n.charAt(p),p++):(k=s,ie===0&&ce(S)),k!==s?(fe=h,w=se(k),h=w):(p=h,h=u)):(p=h,h=u)),oe[D]={nextPos:p,result:h},h)}function Er(){var h,w,k,D=p*49+19,j=oe[D];return j?(p=j.nextPos,j.result):(h=p,w=p,ie++,n.charCodeAt(p)===39?(k=m,p++):(k=s,ie===0&&ce(F)),ie--,k===s?w=I:(p=w,w=u),w!==s?(n.length>p?(k=n.charAt(p),p++):(k=s,ie===0&&ce(S)),k!==s?(fe=h,w=se(k),h=w):(p=h,h=u)):(p=h,h=u),oe[D]={nextPos:p,result:h},h)}function vr(){var h,w,k,D=p*49+20,j=oe[D];return j?(p=j.nextPos,j.result):(h=Ur(),h===s&&(h=qr(),h===s&&(h=p,w=p,ie++,n.substr(p,3)===l?(k=l,p+=3):(k=s,ie===0&&ce(b)),ie--,k===s?w=I:(p=w,w=u),w!==s?(n.length>p?(k=n.charAt(p),p++):(k=s,ie===0&&ce(S)),k!==s?(fe=h,w=ae(k),h=w):(p=h,h=u)):(p=h,h=u))),oe[D]={nextPos:p,result:h},h)}function qr(){var h,w,k,D,j,te=p*49+21,ne=oe[te];if(ne)return p=ne.nextPos,ne.result;if(h=p,n.charCodeAt(p)===92?(w=ue,p++):(w=s,ie===0&&ce(me)),w!==s)if(k=pt(),k!==s){for(D=[],j=Lr();j!==s;)D.push(j),j=Lr();D!==s?(fe=h,w=he(),h=w):(p=h,h=u)}else p=h,h=u;else p=h,h=u;return oe[te]={nextPos:p,result:h},h}function Ar(){var h,w,k,D=p*49+22,j=oe[D];return j?(p=j.nextPos,j.result):(h=p,w=p,ie++,n.substr(p,3)===G?(k=G,p+=3):(k=s,ie===0&&ce(U)),ie--,k===s?w=I:(p=w,w=u),w!==s?(n.length>p?(k=n.charAt(p),p++):(k=s,ie===0&&ce(S)),k!==s?(fe=h,w=se(k),h=w):(p=h,h=u)):(p=h,h=u),oe[D]={nextPos:p,result:h},h)}function Yr(){var h,w,k,D,j=p*49+23,te=oe[j];return te?(p=te.nextPos,te.result):(h=p,w=Tr(),w===s&&(w=or()),w!==s?(n.charCodeAt(p)===101?(k=pe,p++):(k=s,ie===0&&ce(ke)),k===s&&(n.charCodeAt(p)===69?(k=ge,p++):(k=s,ie===0&&ce(Se))),k!==s?(D=or(),D!==s?(fe=h,w=Ae(w,D),h=w):(p=h,h=u)):(p=h,h=u)):(p=h,h=u),h===s&&(h=p,w=Tr(),w!==s&&(fe=h,w=ve(w)),h=w),oe[j]={nextPos:p,result:h},h)}function Tr(){var h,w,k,D,j,te,ne=p*49+24,le=oe[ne];return le?(p=le.nextPos,le.result):(h=p,n.charCodeAt(p)===43?(w=Te,p++):(w=s,ie===0&&ce(gt)),w===s&&(w=E),w!==s?(k=p,D=Zt(),D!==s?(n.charCodeAt(p)===46?(j=B,p++):(j=s,ie===0&&ce(N)),j!==s?(te=Zt(),te!==s?(D=[D,j,te],k=D):(p=k,k=u)):(p=k,k=u)):(p=k,k=u),k!==s?(fe=h,w=Pe(k),h=w):(p=h,h=u)):(p=h,h=u),h===s&&(h=p,n.charCodeAt(p)===45?(w=Re,p++):(w=s,ie===0&&ce(ft)),w!==s?(k=p,D=Zt(),D!==s?(n.charCodeAt(p)===46?(j=B,p++):(j=s,ie===0&&ce(N)),j!==s?(te=Zt(),te!==s?(D=[D,j,te],k=D):(p=k,k=u)):(p=k,k=u)):(p=k,k=u),k!==s?(fe=h,w=Ue(k),h=w):(p=h,h=u)):(p=h,h=u)),oe[ne]={nextPos:p,result:h},h)}function Qr(){var h,w,k=p*49+25,D=oe[k];return D?(p=D.nextPos,D.result):(h=p,w=or(),w!==s&&(fe=h,w=Be(w)),h=w,oe[k]={nextPos:p,result:h},h)}function or(){var h,w,k,D,j,te=p*49+26,ne=oe[te];if(ne)return p=ne.nextPos,ne.result;if(h=p,n.charCodeAt(p)===43?(w=Te,p++):(w=s,ie===0&&ce(gt)),w===s&&(w=E),w!==s){if(k=[],D=Le(),D!==s)for(;D!==s;)k.push(D),D=Le();else k=u;k!==s?(D=p,ie++,n.charCodeAt(p)===46?(j=B,p++):(j=s,ie===0&&ce(N)),ie--,j===s?D=I:(p=D,D=u),D!==s?(fe=h,w=Pe(k),h=w):(p=h,h=u)):(p=h,h=u)}else p=h,h=u;if(h===s)if(h=p,n.charCodeAt(p)===45?(w=Re,p++):(w=s,ie===0&&ce(ft)),w!==s){if(k=[],D=Le(),D!==s)for(;D!==s;)k.push(D),D=Le();else k=u;k!==s?(D=p,ie++,n.charCodeAt(p)===46?(j=B,p++):(j=s,ie===0&&ce(N)),ie--,j===s?D=I:(p=D,D=u),D!==s?(fe=h,w=Ue(k),h=w):(p=h,h=u)):(p=h,h=u)}else p=h,h=u;return oe[te]={nextPos:p,result:h},h}function Xr(){var h,w,k=p*49+27,D=oe[k];return D?(p=D.nextPos,D.result):(h=p,n.substr(p,4)===nt?(w=nt,p+=4):(w=s,ie===0&&ce(Ce)),w!==s&&(fe=h,w=Oe()),h=w,h===s&&(h=p,n.substr(p,5)===st?(w=st,p+=5):(w=s,ie===0&&ce(Me)),w!==s&&(fe=h,w=R()),h=w),oe[k]={nextPos:p,result:h},h)}function Jr(){var h,w,k,D,j,te=p*49+28,ne=oe[te];if(ne)return p=ne.nextPos,ne.result;if(h=p,n.charCodeAt(p)===91?(w=P,p++):(w=s,ie===0&&ce(x)),w!==s){for(k=[],D=ht();D!==s;)k.push(D),D=ht();k!==s?(n.charCodeAt(p)===93?(D=A,p++):(D=s,ie===0&&ce(O)),D!==s?(fe=h,w=g(),h=w):(p=h,h=u)):(p=h,h=u)}else p=h,h=u;if(h===s&&(h=p,n.charCodeAt(p)===91?(w=P,p++):(w=s,ie===0&&ce(x)),w!==s?(k=Ir(),k===s&&(k=E),k!==s?(n.charCodeAt(p)===93?(D=A,p++):(D=s,ie===0&&ce(O)),D!==s?(fe=h,w=_(k),h=w):(p=h,h=u)):(p=h,h=u)):(p=h,h=u),h===s)){if(h=p,n.charCodeAt(p)===91?(w=P,p++):(w=s,ie===0&&ce(x)),w!==s){if(k=[],D=er(),D!==s)for(;D!==s;)k.push(D),D=er();else k=u;k!==s?(n.charCodeAt(p)===93?(D=A,p++):(D=s,ie===0&&ce(O)),D!==s?(fe=h,w=$(k),h=w):(p=h,h=u)):(p=h,h=u)}else p=h,h=u;if(h===s)if(h=p,n.charCodeAt(p)===91?(w=P,p++):(w=s,ie===0&&ce(x)),w!==s){if(k=[],D=er(),D!==s)for(;D!==s;)k.push(D),D=er();else k=u;k!==s?(D=Ir(),D!==s?(n.charCodeAt(p)===93?(j=A,p++):(j=s,ie===0&&ce(O)),j!==s?(fe=h,w=X(k,D),h=w):(p=h,h=u)):(p=h,h=u)):(p=h,h=u)}else p=h,h=u}return oe[te]={nextPos:p,result:h},h}function Ir(){var h,w,k,D,j,te=p*49+29,ne=oe[te];if(ne)return p=ne.nextPos,ne.result;for(h=p,w=[],k=ht();k!==s;)w.push(k),k=ht();if(w!==s)if(k=At(),k!==s){for(D=[],j=ht();j!==s;)D.push(j),j=ht();D!==s?(fe=h,w=ee(k),h=w):(p=h,h=u)}else p=h,h=u;else p=h,h=u;return oe[te]={nextPos:p,result:h},h}function er(){var h,w,k,D,j,te,ne,le=p*49+30,_e=oe[le];if(_e)return p=_e.nextPos,_e.result;for(h=p,w=[],k=ht();k!==s;)w.push(k),k=ht();if(w!==s)if(k=At(),k!==s){for(D=[],j=ht();j!==s;)D.push(j),j=ht();if(D!==s)if(n.charCodeAt(p)===44?(j=re,p++):(j=s,ie===0&&ce(Ee)),j!==s){for(te=[],ne=ht();ne!==s;)te.push(ne),ne=ht();te!==s?(fe=h,w=ee(k),h=w):(p=h,h=u)}else p=h,h=u;else p=h,h=u}else p=h,h=u;else p=h,h=u;return oe[le]={nextPos:p,result:h},h}function ht(){var h,w=p*49+31,k=oe[w];return k?(p=k.nextPos,k.result):(h=de(),h===s&&(h=pt(),h===s&&(h=Jt())),oe[w]={nextPos:p,result:h},h)}function en(){var h,w,k,D,j,te,ne=p*49+32,le=oe[ne];if(le)return p=le.nextPos,le.result;if(h=p,n.charCodeAt(p)===123?(w=we,p++):(w=s,ie===0&&ce(be)),w!==s){for(k=[],D=de();D!==s;)k.push(D),D=de();if(k!==s){for(D=[],j=kr();j!==s;)D.push(j),j=kr();if(D!==s){for(j=[],te=de();te!==s;)j.push(te),te=de();j!==s?(n.charCodeAt(p)===125?(te=Ne,p++):(te=s,ie===0&&ce(ye)),te!==s?(fe=h,w=ze(D),h=w):(p=h,h=u)):(p=h,h=u)}else p=h,h=u}else p=h,h=u}else p=h,h=u;return oe[ne]={nextPos:p,result:h},h}function kr(){var h,w,k,D,j,te,ne,le,_e,xe,Ie,We=p*49+33,rt=oe[We];if(rt)return p=rt.nextPos,rt.result;for(h=p,w=[],k=de();k!==s;)w.push(k),k=de();if(w!==s)if(k=Vt(),k!==s){for(D=[],j=de();j!==s;)D.push(j),j=de();if(D!==s)if(n.charCodeAt(p)===61?(j=V,p++):(j=s,ie===0&&ce(Q)),j!==s){for(te=[],ne=de();ne!==s;)te.push(ne),ne=de();if(te!==s)if(ne=At(),ne!==s){for(le=[],_e=de();_e!==s;)le.push(_e),_e=de();if(le!==s)if(n.charCodeAt(p)===44?(_e=re,p++):(_e=s,ie===0&&ce(Ee)),_e!==s){for(xe=[],Ie=de();Ie!==s;)xe.push(Ie),Ie=de();xe!==s?(fe=h,w=kt(k,ne),h=w):(p=h,h=u)}else p=h,h=u;else p=h,h=u}else p=h,h=u;else p=h,h=u}else p=h,h=u;else p=h,h=u}else p=h,h=u;else p=h,h=u;if(h===s){for(h=p,w=[],k=de();k!==s;)w.push(k),k=de();if(w!==s)if(k=Vt(),k!==s){for(D=[],j=de();j!==s;)D.push(j),j=de();if(D!==s)if(n.charCodeAt(p)===61?(j=V,p++):(j=s,ie===0&&ce(Q)),j!==s){for(te=[],ne=de();ne!==s;)te.push(ne),ne=de();te!==s?(ne=At(),ne!==s?(fe=h,w=kt(k,ne),h=w):(p=h,h=u)):(p=h,h=u)}else p=h,h=u;else p=h,h=u}else p=h,h=u;else p=h,h=u}return oe[We]={nextPos:p,result:h},h}function Rr(){var h,w,k,D=p*49+34,j=oe[D];return j?(p=j.nextPos,j.result):(h=p,n.charCodeAt(p)===46?(w=B,p++):(w=s,ie===0&&ce(N)),w!==s?(k=Zt(),k!==s?(fe=h,w=Ke(k),h=w):(p=h,h=u)):(p=h,h=u),oe[D]={nextPos:p,result:h},h)}function Br(){var h,w,k,D,j,te,ne,le,_e,xe,Ie,We,rt=p*49+35,lt=oe[rt];return lt?(p=lt.nextPos,lt.result):(h=p,w=p,k=Le(),k!==s?(D=Le(),D!==s?(j=Le(),j!==s?(te=Le(),te!==s?(n.charCodeAt(p)===45?(ne=Re,p++):(ne=s,ie===0&&ce(ft)),ne!==s?(le=Le(),le!==s?(_e=Le(),_e!==s?(n.charCodeAt(p)===45?(xe=Re,p++):(xe=s,ie===0&&ce(ft)),xe!==s?(Ie=Le(),Ie!==s?(We=Le(),We!==s?(k=[k,D,j,te,ne,le,_e,xe,Ie,We],w=k):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u),w!==s&&(fe=h,w=Ve(w)),h=w,oe[rt]={nextPos:p,result:h},h)}function tn(){var h,w,k,D,j,te,ne,le,_e,xe,Ie,We=p*49+36,rt=oe[We];return rt?(p=rt.nextPos,rt.result):(h=p,w=p,k=Le(),k!==s?(D=Le(),D!==s?(n.charCodeAt(p)===58?(j=mt,p++):(j=s,ie===0&&ce($e)),j!==s?(te=Le(),te!==s?(ne=Le(),ne!==s?(n.charCodeAt(p)===58?(le=mt,p++):(le=s,ie===0&&ce($e)),le!==s?(_e=Le(),_e!==s?(xe=Le(),xe!==s?(Ie=Rr(),Ie===s&&(Ie=E),Ie!==s?(k=[k,D,j,te,ne,le,_e,xe,Ie],w=k):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u),w!==s&&(fe=h,w=De(w)),h=w,oe[We]={nextPos:p,result:h},h)}function rn(){var h,w,k,D,j,te,ne,le,_e,xe,Ie,We,rt,lt,Tt,bt,dt,xr=p*49+37,cr=oe[xr];return cr?(p=cr.nextPos,cr.result):(h=p,w=p,k=Le(),k!==s?(D=Le(),D!==s?(n.charCodeAt(p)===58?(j=mt,p++):(j=s,ie===0&&ce($e)),j!==s?(te=Le(),te!==s?(ne=Le(),ne!==s?(n.charCodeAt(p)===58?(le=mt,p++):(le=s,ie===0&&ce($e)),le!==s?(_e=Le(),_e!==s?(xe=Le(),xe!==s?(Ie=Rr(),Ie===s&&(Ie=E),Ie!==s?(n.charCodeAt(p)===45?(We=Re,p++):(We=s,ie===0&&ce(ft)),We===s&&(n.charCodeAt(p)===43?(We=Te,p++):(We=s,ie===0&&ce(gt))),We!==s?(rt=Le(),rt!==s?(lt=Le(),lt!==s?(n.charCodeAt(p)===58?(Tt=mt,p++):(Tt=s,ie===0&&ce($e)),Tt!==s?(bt=Le(),bt!==s?(dt=Le(),dt!==s?(k=[k,D,j,te,ne,le,_e,xe,Ie,We,rt,lt,Tt,bt,dt],w=k):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u)):(p=w,w=u),w!==s&&(fe=h,w=De(w)),h=w,oe[xr]={nextPos:p,result:h},h)}function nn(){var h,w,k,D,j,te=p*49+38,ne=oe[te];return ne?(p=ne.nextPos,ne.result):(h=p,w=Br(),w!==s?(n.charCodeAt(p)===84?(k=Rt,p++):(k=s,ie===0&&ce(Fe)),k!==s?(D=tn(),D!==s?(n.charCodeAt(p)===90?(j=Ze,p++):(j=s,ie===0&&ce(jt)),j!==s?(fe=h,w=je(w,D),h=w):(p=h,h=u)):(p=h,h=u)):(p=h,h=u)):(p=h,h=u),h===s&&(h=p,w=Br(),w!==s?(n.charCodeAt(p)===84?(k=Rt,p++):(k=s,ie===0&&ce(Fe)),k!==s?(D=rn(),D!==s?(fe=h,w=Ge(w,D),h=w):(p=h,h=u)):(p=h,h=u)):(p=h,h=u)),oe[te]={nextPos:p,result:h},h)}function de(){var h,w=p*49+39,k=oe[w];return k?(p=k.nextPos,k.result):(Gt.test(n.charAt(p))?(h=n.charAt(p),p++):(h=s,ie===0&&ce(qe)),oe[w]={nextPos:p,result:h},h)}function pt(){var h,w,k,D=p*49+40,j=oe[D];return j?(p=j.nextPos,j.result):(n.charCodeAt(p)===10?(h=He,p++):(h=s,ie===0&&ce(Bt)),h===s&&(h=p,n.charCodeAt(p)===13?(w=Ye,p++):(w=s,ie===0&&ce(Qe)),w!==s?(n.charCodeAt(p)===10?(k=He,p++):(k=s,ie===0&&ce(Bt)),k!==s?(w=[w,k],h=w):(p=h,h=u)):(p=h,h=u)),oe[D]={nextPos:p,result:h},h)}function Lr(){var h,w=p*49+41,k=oe[w];return k?(p=k.nextPos,k.result):(h=pt(),h===s&&(h=de()),oe[w]={nextPos:p,result:h},h)}function tr(){var h,w,k=p*49+42,D=oe[k];return D?(p=D.nextPos,D.result):(h=p,ie++,n.length>p?(w=n.charAt(p),p++):(w=s,ie===0&&ce(S)),ie--,w===s?h=I:(p=h,h=u),oe[k]={nextPos:p,result:h},h)}function yt(){var h,w=p*49+43,k=oe[w];return k?(p=k.nextPos,k.result):(qt.test(n.charAt(p))?(h=n.charAt(p),p++):(h=s,ie===0&&ce(Xe)),oe[w]={nextPos:p,result:h},h)}function Le(){var h,w,k=p*49+44,D=oe[k];return D?(p=D.nextPos,D.result):(Je.test(n.charAt(p))?(h=n.charAt(p),p++):(h=s,ie===0&&ce(Yt)),h===s&&(h=p,n.charCodeAt(p)===95?(w=et,p++):(w=s,ie===0&&ce(tt)),w!==s&&(fe=h,w=Lt()),h=w),oe[k]={nextPos:p,result:h},h)}function Pr(){var h,w=p*49+45,k=oe[w];return k?(p=k.nextPos,k.result):(Pt.test(n.charAt(p))?(h=n.charAt(p),p++):(h=s,ie===0&&ce(Ut)),oe[w]={nextPos:p,result:h},h)}function Zt(){var h,w,k,D=p*49+46,j=oe[D];if(j)return p=j.nextPos,j.result;if(h=p,w=[],k=Le(),k!==s)for(;k!==s;)w.push(k),k=Le();else w=u;return w!==s&&(fe=h,w=Ct(w)),h=w,oe[D]={nextPos:p,result:h},h}function Ur(){var h,w,k=p*49+47,D=oe[k];return D?(p=D.nextPos,D.result):(h=p,n.substr(p,2)===_t?(w=_t,p+=2):(w=s,ie===0&&ce(xt)),w!==s&&(fe=h,w=Ot()),h=w,h===s&&(h=p,n.substr(p,2)===wt?(w=wt,p+=2):(w=s,ie===0&&ce(Mt)),w!==s&&(fe=h,w=Nt()),h=w,h===s&&(h=p,n.substr(p,2)===St?(w=St,p+=2):(w=s,ie===0&&ce($t)),w!==s&&(fe=h,w=Dt()),h=w,h===s&&(h=p,n.substr(p,2)===Et?(w=Et,p+=2):(w=s,ie===0&&ce(Ft)),w!==s&&(fe=h,w=Ht()),h=w,h===s&&(h=p,n.substr(p,2)===vt?(w=vt,p+=2):(w=s,ie===0&&ce(Wt)),w!==s&&(fe=h,w=zt()),h=w,h===s&&(h=p,n.substr(p,2)===ur?(w=ur,p+=2):(w=s,ie===0&&ce(Or)),w!==s&&(fe=h,w=Mr()),h=w,h===s&&(h=p,n.substr(p,2)===lr?(w=lr,p+=2):(w=s,ie===0&&ce(Nr)),w!==s&&(fe=h,w=$r()),h=w,h===s&&(h=sn()))))))),oe[k]={nextPos:p,result:h},h)}function sn(){var h,w,k,D,j,te,ne,le,_e,xe,Ie,We=p*49+48,rt=oe[We];return rt?(p=rt.nextPos,rt.result):(h=p,n.substr(p,2)===dr?(w=dr,p+=2):(w=s,ie===0&&ce(Dr)),w!==s?(k=p,D=yt(),D!==s?(j=yt(),j!==s?(te=yt(),te!==s?(ne=yt(),ne!==s?(le=yt(),le!==s?(_e=yt(),_e!==s?(xe=yt(),xe!==s?(Ie=yt(),Ie!==s?(D=[D,j,te,ne,le,_e,xe,Ie],k=D):(p=k,k=u)):(p=k,k=u)):(p=k,k=u)):(p=k,k=u)):(p=k,k=u)):(p=k,k=u)):(p=k,k=u)):(p=k,k=u),k!==s?(fe=h,w=fr(k),h=w):(p=h,h=u)):(p=h,h=u),h===s&&(h=p,n.substr(p,2)===hr?(w=hr,p+=2):(w=s,ie===0&&ce(Fr)),w!==s?(k=p,D=yt(),D!==s?(j=yt(),j!==s?(te=yt(),te!==s?(ne=yt(),ne!==s?(D=[D,j,te,ne],k=D):(p=k,k=u)):(p=k,k=u)):(p=k,k=u)):(p=k,k=u),k!==s?(fe=h,w=fr(k),h=w):(p=h,h=u)):(p=h,h=u)),oe[We]={nextPos:p,result:h},h)}var Cr=[];function on(h,w,k){var D=new Error(h);throw D.line=w,D.column=k,D}function ar(h){Cr.push(h)}function ct(h,w,k,D,j){var te={type:h,value:w,line:k(),column:D()};return j&&(te.key=j),te}function an(h,w,k){var D=parseInt("0x"+h);if(!isFinite(D)||Math.floor(D)!=D||D<0||D>1114111||D>55295&&D<57344)on("Invalid Unicode escape code: "+h,w,k);else return cn(D)}function cn(){var h=16384,w=[],k,D,j=-1,te=arguments.length;if(!te)return"";for(var ne="";++j<te;){var le=Number(arguments[j]);le<=65535?w.push(le):(le-=65536,k=(le>>10)+55296,D=le%1024+56320,w.push(k,D)),(j+1==te||w.length>h)&&(ne+=String.fromCharCode.apply(null,w),w.length=0)}return ne}if(Xt=c(),Xt!==s&&p===n.length)return Xt;throw Xt!==s&&p<n.length&&ce({type:"end",description:"end of input"}),Hr(null,nr,Qt)}return{SyntaxError:e,parse:t}}();function compile(r){var e=[],t=[],n="",o=Object.create(null),s=o;return a(r);function a(O){for(var z,M=0;M<O.length;M++)switch(z=O[M],z.type){case"Assign":d(z);break;case"ObjectPath":I(z);break;case"ArrayPath":S(z);break}return o}function c(O,z,M){var H=new Error(O);throw H.line=z,H.column=M,H}function d(O){var z=O.key,M=O.value,H=O.line,q=O.column,Y;n?Y=n+"."+z:Y=z,typeof s[z]<"u"&&c("Cannot redefine existing key '"+Y+"'.",H,q),s[z]=y(M),u(Y)||(e.push(Y),t.push(Y))}function u(O){return e.indexOf(O)!==-1}function y(O){return O.type==="Array"?x(O.value):O.type==="InlineTable"?v(O.value):O.value}function v(O){for(var z=Object.create(null),M=0;M<O.length;M++){var H=O[M];H.value.type==="InlineTable"?z[H.key]=v(H.value.value):H.type==="InlineTableValue"&&(z[H.key]=y(H.value))}return z}function I(O){var z=O.value,M=z.map(A).join("."),H=O.line,q=O.column;u(M)&&c("Cannot redefine existing key '"+z+"'.",H,q),e.push(M),s=P(o,z,Object.create(null),H,q),n=z}function S(O){var z=O.value,M=z.map(A).join("."),H=O.line,q=O.column;if(u(M)||e.push(M),e=e.filter(function(B){return B.indexOf(M)!==0}),e.push(M),s=P(o,z,[],H,q),n=M,s instanceof Array){var Y=Object.create(null);s.push(Y),s=Y}else c("Cannot redefine existing key '"+z+"'.",H,q)}function P(O,z,M,H,q){var Y=[],B="";z.join(".");for(var N=O,V=0;V<z.length;V++){var Q=z[V];Y.push(Q),B=Y.join("."),typeof N[Q]>"u"?V===z.length-1?N[Q]=M:N[Q]=Object.create(null):V!==z.length-1&&t.indexOf(B)>-1&&c("Cannot redefine existing key '"+B+"'.",H,q),N=N[Q],N instanceof Array&&N.length&&V<z.length-1&&(N=N[N.length-1])}return N}function x(O){for(var z=null,M=0;M<O.length;M++){var H=O[M];z===null?z=H.type:H.type!==z&&c("Cannot add value of type "+H.type+" to array of type "+z+".",H.line,H.column)}return O.map(y)}function A(O){return O.indexOf(".")>-1?'"'+O+'"':O}}var compiler$1={compile},parser=parser$1,compiler=compiler$1,toml={parse:function(r){var e=parser.parse(r.toString());return compiler.compile(e)}};/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1(r){let e=r.length;for(;--e>=0;)r[e]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(r,e,t,n,o){this.static_tree=r,this.extra_bits=e,this.extra_base=t,this.elems=n,this.max_length=o,this.has_stree=r&&r.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(r,e){this.dyn_tree=r,this.max_code=0,this.stat_desc=e}const d_code=r=>r<256?_dist_code[r]:_dist_code[256+(r>>>7)],put_short=(r,e)=>{r.pending_buf[r.pending++]=e&255,r.pending_buf[r.pending++]=e>>>8&255},send_bits=(r,e,t)=>{r.bi_valid>Buf_size-t?(r.bi_buf|=e<<r.bi_valid&65535,put_short(r,r.bi_buf),r.bi_buf=e>>Buf_size-r.bi_valid,r.bi_valid+=t-Buf_size):(r.bi_buf|=e<<r.bi_valid&65535,r.bi_valid+=t)},send_code=(r,e,t)=>{send_bits(r,t[e*2],t[e*2+1])},bi_reverse=(r,e)=>{let t=0;do t|=r&1,r>>>=1,t<<=1;while(--e>0);return t>>>1},bi_flush=r=>{r.bi_valid===16?(put_short(r,r.bi_buf),r.bi_buf=0,r.bi_valid=0):r.bi_valid>=8&&(r.pending_buf[r.pending++]=r.bi_buf&255,r.bi_buf>>=8,r.bi_valid-=8)},gen_bitlen=(r,e)=>{const t=e.dyn_tree,n=e.max_code,o=e.stat_desc.static_tree,s=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,c=e.stat_desc.extra_base,d=e.stat_desc.max_length;let u,y,v,I,S,P,x=0;for(I=0;I<=MAX_BITS$1;I++)r.bl_count[I]=0;for(t[r.heap[r.heap_max]*2+1]=0,u=r.heap_max+1;u<HEAP_SIZE$1;u++)y=r.heap[u],I=t[t[y*2+1]*2+1]+1,I>d&&(I=d,x++),t[y*2+1]=I,!(y>n)&&(r.bl_count[I]++,S=0,y>=c&&(S=a[y-c]),P=t[y*2],r.opt_len+=P*(I+S),s&&(r.static_len+=P*(o[y*2+1]+S)));if(x!==0){do{for(I=d-1;r.bl_count[I]===0;)I--;r.bl_count[I]--,r.bl_count[I+1]+=2,r.bl_count[d]--,x-=2}while(x>0);for(I=d;I!==0;I--)for(y=r.bl_count[I];y!==0;)v=r.heap[--u],!(v>n)&&(t[v*2+1]!==I&&(r.opt_len+=(I-t[v*2+1])*t[v*2],t[v*2+1]=I),y--)}},gen_codes=(r,e,t)=>{const n=new Array(MAX_BITS$1+1);let o=0,s,a;for(s=1;s<=MAX_BITS$1;s++)o=o+t[s-1]<<1,n[s]=o;for(a=0;a<=e;a++){let c=r[a*2+1];c!==0&&(r[a*2]=bi_reverse(n[c]++,c))}},tr_static_init=()=>{let r,e,t,n,o;const s=new Array(MAX_BITS$1+1);for(t=0,n=0;n<LENGTH_CODES$1-1;n++)for(base_length[n]=t,r=0;r<1<<extra_lbits[n];r++)_length_code[t++]=n;for(_length_code[t-1]=n,o=0,n=0;n<16;n++)for(base_dist[n]=o,r=0;r<1<<extra_dbits[n];r++)_dist_code[o++]=n;for(o>>=7;n<D_CODES$1;n++)for(base_dist[n]=o<<7,r=0;r<1<<extra_dbits[n]-7;r++)_dist_code[256+o++]=n;for(e=0;e<=MAX_BITS$1;e++)s[e]=0;for(r=0;r<=143;)static_ltree[r*2+1]=8,r++,s[8]++;for(;r<=255;)static_ltree[r*2+1]=9,r++,s[9]++;for(;r<=279;)static_ltree[r*2+1]=7,r++,s[7]++;for(;r<=287;)static_ltree[r*2+1]=8,r++,s[8]++;for(gen_codes(static_ltree,L_CODES$1+1,s),r=0;r<D_CODES$1;r++)static_dtree[r*2+1]=5,static_dtree[r*2]=bi_reverse(r,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=r=>{let e;for(e=0;e<L_CODES$1;e++)r.dyn_ltree[e*2]=0;for(e=0;e<D_CODES$1;e++)r.dyn_dtree[e*2]=0;for(e=0;e<BL_CODES$1;e++)r.bl_tree[e*2]=0;r.dyn_ltree[END_BLOCK*2]=1,r.opt_len=r.static_len=0,r.sym_next=r.matches=0},bi_windup=r=>{r.bi_valid>8?put_short(r,r.bi_buf):r.bi_valid>0&&(r.pending_buf[r.pending++]=r.bi_buf),r.bi_buf=0,r.bi_valid=0},smaller=(r,e,t,n)=>{const o=e*2,s=t*2;return r[o]<r[s]||r[o]===r[s]&&n[e]<=n[t]},pqdownheap=(r,e,t)=>{const n=r.heap[t];let o=t<<1;for(;o<=r.heap_len&&(o<r.heap_len&&smaller(e,r.heap[o+1],r.heap[o],r.depth)&&o++,!smaller(e,n,r.heap[o],r.depth));)r.heap[t]=r.heap[o],t=o,o<<=1;r.heap[t]=n},compress_block=(r,e,t)=>{let n,o,s=0,a,c;if(r.sym_next!==0)do n=r.pending_buf[r.sym_buf+s++]&255,n+=(r.pending_buf[r.sym_buf+s++]&255)<<8,o=r.pending_buf[r.sym_buf+s++],n===0?send_code(r,o,e):(a=_length_code[o],send_code(r,a+LITERALS$1+1,e),c=extra_lbits[a],c!==0&&(o-=base_length[a],send_bits(r,o,c)),n--,a=d_code(n),send_code(r,a,t),c=extra_dbits[a],c!==0&&(n-=base_dist[a],send_bits(r,n,c)));while(s<r.sym_next);send_code(r,END_BLOCK,e)},build_tree=(r,e)=>{const t=e.dyn_tree,n=e.stat_desc.static_tree,o=e.stat_desc.has_stree,s=e.stat_desc.elems;let a,c,d=-1,u;for(r.heap_len=0,r.heap_max=HEAP_SIZE$1,a=0;a<s;a++)t[a*2]!==0?(r.heap[++r.heap_len]=d=a,r.depth[a]=0):t[a*2+1]=0;for(;r.heap_len<2;)u=r.heap[++r.heap_len]=d<2?++d:0,t[u*2]=1,r.depth[u]=0,r.opt_len--,o&&(r.static_len-=n[u*2+1]);for(e.max_code=d,a=r.heap_len>>1;a>=1;a--)pqdownheap(r,t,a);u=s;do a=r.heap[1],r.heap[1]=r.heap[r.heap_len--],pqdownheap(r,t,1),c=r.heap[1],r.heap[--r.heap_max]=a,r.heap[--r.heap_max]=c,t[u*2]=t[a*2]+t[c*2],r.depth[u]=(r.depth[a]>=r.depth[c]?r.depth[a]:r.depth[c])+1,t[a*2+1]=t[c*2+1]=u,r.heap[1]=u++,pqdownheap(r,t,1);while(r.heap_len>=2);r.heap[--r.heap_max]=r.heap[1],gen_bitlen(r,e),gen_codes(t,d,r.bl_count)},scan_tree=(r,e,t)=>{let n,o=-1,s,a=e[0*2+1],c=0,d=7,u=4;for(a===0&&(d=138,u=3),e[(t+1)*2+1]=65535,n=0;n<=t;n++)s=a,a=e[(n+1)*2+1],!(++c<d&&s===a)&&(c<u?r.bl_tree[s*2]+=c:s!==0?(s!==o&&r.bl_tree[s*2]++,r.bl_tree[REP_3_6*2]++):c<=10?r.bl_tree[REPZ_3_10*2]++:r.bl_tree[REPZ_11_138*2]++,c=0,o=s,a===0?(d=138,u=3):s===a?(d=6,u=3):(d=7,u=4))},send_tree=(r,e,t)=>{let n,o=-1,s,a=e[0*2+1],c=0,d=7,u=4;for(a===0&&(d=138,u=3),n=0;n<=t;n++)if(s=a,a=e[(n+1)*2+1],!(++c<d&&s===a)){if(c<u)do send_code(r,s,r.bl_tree);while(--c!==0);else s!==0?(s!==o&&(send_code(r,s,r.bl_tree),c--),send_code(r,REP_3_6,r.bl_tree),send_bits(r,c-3,2)):c<=10?(send_code(r,REPZ_3_10,r.bl_tree),send_bits(r,c-3,3)):(send_code(r,REPZ_11_138,r.bl_tree),send_bits(r,c-11,7));c=0,o=s,a===0?(d=138,u=3):s===a?(d=6,u=3):(d=7,u=4)}},build_bl_tree=r=>{let e;for(scan_tree(r,r.dyn_ltree,r.l_desc.max_code),scan_tree(r,r.dyn_dtree,r.d_desc.max_code),build_tree(r,r.bl_desc),e=BL_CODES$1-1;e>=3&&r.bl_tree[bl_order[e]*2+1]===0;e--);return r.opt_len+=3*(e+1)+5+5+4,e},send_all_trees=(r,e,t,n)=>{let o;for(send_bits(r,e-257,5),send_bits(r,t-1,5),send_bits(r,n-4,4),o=0;o<n;o++)send_bits(r,r.bl_tree[bl_order[o]*2+1],3);send_tree(r,r.dyn_ltree,e-1),send_tree(r,r.dyn_dtree,t-1)},detect_data_type=r=>{let e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&r.dyn_ltree[t*2]!==0)return Z_BINARY;if(r.dyn_ltree[9*2]!==0||r.dyn_ltree[10*2]!==0||r.dyn_ltree[13*2]!==0)return Z_TEXT;for(t=32;t<LITERALS$1;t++)if(r.dyn_ltree[t*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=r=>{static_init_done||(tr_static_init(),static_init_done=!0),r.l_desc=new TreeDesc(r.dyn_ltree,static_l_desc),r.d_desc=new TreeDesc(r.dyn_dtree,static_d_desc),r.bl_desc=new TreeDesc(r.bl_tree,static_bl_desc),r.bi_buf=0,r.bi_valid=0,init_block(r)},_tr_stored_block$1=(r,e,t,n)=>{send_bits(r,(STORED_BLOCK<<1)+(n?1:0),3),bi_windup(r),put_short(r,t),put_short(r,~t),t&&r.pending_buf.set(r.window.subarray(e,e+t),r.pending),r.pending+=t},_tr_align$1=r=>{send_bits(r,STATIC_TREES<<1,3),send_code(r,END_BLOCK,static_ltree),bi_flush(r)},_tr_flush_block$1=(r,e,t,n)=>{let o,s,a=0;r.level>0?(r.strm.data_type===Z_UNKNOWN$1&&(r.strm.data_type=detect_data_type(r)),build_tree(r,r.l_desc),build_tree(r,r.d_desc),a=build_bl_tree(r),o=r.opt_len+3+7>>>3,s=r.static_len+3+7>>>3,s<=o&&(o=s)):o=s=t+5,t+4<=o&&e!==-1?_tr_stored_block$1(r,e,t,n):r.strategy===Z_FIXED$1||s===o?(send_bits(r,(STATIC_TREES<<1)+(n?1:0),3),compress_block(r,static_ltree,static_dtree)):(send_bits(r,(DYN_TREES<<1)+(n?1:0),3),send_all_trees(r,r.l_desc.max_code+1,r.d_desc.max_code+1,a+1),compress_block(r,r.dyn_ltree,r.dyn_dtree)),init_block(r),n&&bi_windup(r)},_tr_tally$1=(r,e,t)=>(r.pending_buf[r.sym_buf+r.sym_next++]=e,r.pending_buf[r.sym_buf+r.sym_next++]=e>>8,r.pending_buf[r.sym_buf+r.sym_next++]=t,e===0?r.dyn_ltree[t*2]++:(r.matches++,e--,r.dyn_ltree[(_length_code[t]+LITERALS$1+1)*2]++,r.dyn_dtree[d_code(e)*2]++),r.sym_next===r.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(r,e,t,n)=>{let o=r&65535|0,s=r>>>16&65535|0,a=0;for(;t!==0;){a=t>2e3?2e3:t,t-=a;do o=o+e[n++]|0,s=s+o|0;while(--a);o%=65521,s%=65521}return o|s<<16|0};var adler32_1=adler32;const makeTable=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},crcTable=new Uint32Array(makeTable()),crc32=(r,e,t,n)=>{const o=crcTable,s=n+t;r^=-1;for(let a=n;a<s;a++)r=r>>>8^o[(r^e[a])&255];return r^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(r,e)=>(r.msg=messages[e],e),rank=r=>r*2-(r>4?9:0),zero=r=>{let e=r.length;for(;--e>=0;)r[e]=0},slide_hash=r=>{let e,t,n,o=r.w_size;e=r.hash_size,n=e;do t=r.head[--n],r.head[n]=t>=o?t-o:0;while(--e);e=o,n=e;do t=r.prev[--n],r.prev[n]=t>=o?t-o:0;while(--e)};let HASH_ZLIB=(r,e,t)=>(e<<r.hash_shift^t)&r.hash_mask,HASH=HASH_ZLIB;const flush_pending=r=>{const e=r.state;let t=e.pending;t>r.avail_out&&(t=r.avail_out),t!==0&&(r.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),r.next_out),r.next_out+=t,e.pending_out+=t,r.total_out+=t,r.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},flush_block_only=(r,e)=>{_tr_flush_block(r,r.block_start>=0?r.block_start:-1,r.strstart-r.block_start,e),r.block_start=r.strstart,flush_pending(r.strm)},put_byte=(r,e)=>{r.pending_buf[r.pending++]=e},putShortMSB=(r,e)=>{r.pending_buf[r.pending++]=e>>>8&255,r.pending_buf[r.pending++]=e&255},read_buf=(r,e,t,n)=>{let o=r.avail_in;return o>n&&(o=n),o===0?0:(r.avail_in-=o,e.set(r.input.subarray(r.next_in,r.next_in+o),t),r.state.wrap===1?r.adler=adler32_1(r.adler,e,o,t):r.state.wrap===2&&(r.adler=crc32_1(r.adler,e,o,t)),r.next_in+=o,r.total_in+=o,o)},longest_match=(r,e)=>{let t=r.max_chain_length,n=r.strstart,o,s,a=r.prev_length,c=r.nice_match;const d=r.strstart>r.w_size-MIN_LOOKAHEAD?r.strstart-(r.w_size-MIN_LOOKAHEAD):0,u=r.window,y=r.w_mask,v=r.prev,I=r.strstart+MAX_MATCH;let S=u[n+a-1],P=u[n+a];r.prev_length>=r.good_match&&(t>>=2),c>r.lookahead&&(c=r.lookahead);do if(o=e,!(u[o+a]!==P||u[o+a-1]!==S||u[o]!==u[n]||u[++o]!==u[n+1])){n+=2,o++;do;while(u[++n]===u[++o]&&u[++n]===u[++o]&&u[++n]===u[++o]&&u[++n]===u[++o]&&u[++n]===u[++o]&&u[++n]===u[++o]&&u[++n]===u[++o]&&u[++n]===u[++o]&&n<I);if(s=MAX_MATCH-(I-n),n=I-MAX_MATCH,s>a){if(r.match_start=e,a=s,s>=c)break;S=u[n+a-1],P=u[n+a]}}while((e=v[e&y])>d&&--t!==0);return a<=r.lookahead?a:r.lookahead},fill_window=r=>{const e=r.w_size;let t,n,o;do{if(n=r.window_size-r.lookahead-r.strstart,r.strstart>=e+(e-MIN_LOOKAHEAD)&&(r.window.set(r.window.subarray(e,e+e-n),0),r.match_start-=e,r.strstart-=e,r.block_start-=e,r.insert>r.strstart&&(r.insert=r.strstart),slide_hash(r),n+=e),r.strm.avail_in===0)break;if(t=read_buf(r.strm,r.window,r.strstart+r.lookahead,n),r.lookahead+=t,r.lookahead+r.insert>=MIN_MATCH)for(o=r.strstart-r.insert,r.ins_h=r.window[o],r.ins_h=HASH(r,r.ins_h,r.window[o+1]);r.insert&&(r.ins_h=HASH(r,r.ins_h,r.window[o+MIN_MATCH-1]),r.prev[o&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=o,o++,r.insert--,!(r.lookahead+r.insert<MIN_MATCH)););}while(r.lookahead<MIN_LOOKAHEAD&&r.strm.avail_in!==0)},deflate_stored=(r,e)=>{let t=r.pending_buf_size-5>r.w_size?r.w_size:r.pending_buf_size-5,n,o,s,a=0,c=r.strm.avail_in;do{if(n=65535,s=r.bi_valid+42>>3,r.strm.avail_out<s||(s=r.strm.avail_out-s,o=r.strstart-r.block_start,n>o+r.strm.avail_in&&(n=o+r.strm.avail_in),n>s&&(n=s),n<t&&(n===0&&e!==Z_FINISH$3||e===Z_NO_FLUSH$2||n!==o+r.strm.avail_in)))break;a=e===Z_FINISH$3&&n===o+r.strm.avail_in?1:0,_tr_stored_block(r,0,0,a),r.pending_buf[r.pending-4]=n,r.pending_buf[r.pending-3]=n>>8,r.pending_buf[r.pending-2]=~n,r.pending_buf[r.pending-1]=~n>>8,flush_pending(r.strm),o&&(o>n&&(o=n),r.strm.output.set(r.window.subarray(r.block_start,r.block_start+o),r.strm.next_out),r.strm.next_out+=o,r.strm.avail_out-=o,r.strm.total_out+=o,r.block_start+=o,n-=o),n&&(read_buf(r.strm,r.strm.output,r.strm.next_out,n),r.strm.next_out+=n,r.strm.avail_out-=n,r.strm.total_out+=n)}while(a===0);return c-=r.strm.avail_in,c&&(c>=r.w_size?(r.matches=2,r.window.set(r.strm.input.subarray(r.strm.next_in-r.w_size,r.strm.next_in),0),r.strstart=r.w_size,r.insert=r.strstart):(r.window_size-r.strstart<=c&&(r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,r.insert>r.strstart&&(r.insert=r.strstart)),r.window.set(r.strm.input.subarray(r.strm.next_in-c,r.strm.next_in),r.strstart),r.strstart+=c,r.insert+=c>r.w_size-r.insert?r.w_size-r.insert:c),r.block_start=r.strstart),r.high_water<r.strstart&&(r.high_water=r.strstart),a?BS_FINISH_DONE:e!==Z_NO_FLUSH$2&&e!==Z_FINISH$3&&r.strm.avail_in===0&&r.strstart===r.block_start?BS_BLOCK_DONE:(s=r.window_size-r.strstart,r.strm.avail_in>s&&r.block_start>=r.w_size&&(r.block_start-=r.w_size,r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,s+=r.w_size,r.insert>r.strstart&&(r.insert=r.strstart)),s>r.strm.avail_in&&(s=r.strm.avail_in),s&&(read_buf(r.strm,r.window,r.strstart,s),r.strstart+=s,r.insert+=s>r.w_size-r.insert?r.w_size-r.insert:s),r.high_water<r.strstart&&(r.high_water=r.strstart),s=r.bi_valid+42>>3,s=r.pending_buf_size-s>65535?65535:r.pending_buf_size-s,t=s>r.w_size?r.w_size:s,o=r.strstart-r.block_start,(o>=t||(o||e===Z_FINISH$3)&&e!==Z_NO_FLUSH$2&&r.strm.avail_in===0&&o<=s)&&(n=o>s?s:o,a=e===Z_FINISH$3&&r.strm.avail_in===0&&n===o?1:0,_tr_stored_block(r,r.block_start,n,a),r.block_start+=n,flush_pending(r.strm)),a?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(r,e)=>{let t,n;for(;;){if(r.lookahead<MIN_LOOKAHEAD){if(fill_window(r),r.lookahead<MIN_LOOKAHEAD&&e===Z_NO_FLUSH$2)return BS_NEED_MORE;if(r.lookahead===0)break}if(t=0,r.lookahead>=MIN_MATCH&&(r.ins_h=HASH(r,r.ins_h,r.window[r.strstart+MIN_MATCH-1]),t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),t!==0&&r.strstart-t<=r.w_size-MIN_LOOKAHEAD&&(r.match_length=longest_match(r,t)),r.match_length>=MIN_MATCH)if(n=_tr_tally(r,r.strstart-r.match_start,r.match_length-MIN_MATCH),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=MIN_MATCH){r.match_length--;do r.strstart++,r.ins_h=HASH(r,r.ins_h,r.window[r.strstart+MIN_MATCH-1]),t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart;while(--r.match_length!==0);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=HASH(r,r.ins_h,r.window[r.strstart+1]);else n=_tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(n&&(flush_block_only(r,!1),r.strm.avail_out===0))return BS_NEED_MORE}return r.insert=r.strstart<MIN_MATCH-1?r.strstart:MIN_MATCH-1,e===Z_FINISH$3?(flush_block_only(r,!0),r.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):r.sym_next&&(flush_block_only(r,!1),r.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(r,e)=>{let t,n,o;for(;;){if(r.lookahead<MIN_LOOKAHEAD){if(fill_window(r),r.lookahead<MIN_LOOKAHEAD&&e===Z_NO_FLUSH$2)return BS_NEED_MORE;if(r.lookahead===0)break}if(t=0,r.lookahead>=MIN_MATCH&&(r.ins_h=HASH(r,r.ins_h,r.window[r.strstart+MIN_MATCH-1]),t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=MIN_MATCH-1,t!==0&&r.prev_length<r.max_lazy_match&&r.strstart-t<=r.w_size-MIN_LOOKAHEAD&&(r.match_length=longest_match(r,t),r.match_length<=5&&(r.strategy===Z_FILTERED||r.match_length===MIN_MATCH&&r.strstart-r.match_start>4096)&&(r.match_length=MIN_MATCH-1)),r.prev_length>=MIN_MATCH&&r.match_length<=r.prev_length){o=r.strstart+r.lookahead-MIN_MATCH,n=_tr_tally(r,r.strstart-1-r.prev_match,r.prev_length-MIN_MATCH),r.lookahead-=r.prev_length-1,r.prev_length-=2;do++r.strstart<=o&&(r.ins_h=HASH(r,r.ins_h,r.window[r.strstart+MIN_MATCH-1]),t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart);while(--r.prev_length!==0);if(r.match_available=0,r.match_length=MIN_MATCH-1,r.strstart++,n&&(flush_block_only(r,!1),r.strm.avail_out===0))return BS_NEED_MORE}else if(r.match_available){if(n=_tr_tally(r,0,r.window[r.strstart-1]),n&&flush_block_only(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return BS_NEED_MORE}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(n=_tr_tally(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<MIN_MATCH-1?r.strstart:MIN_MATCH-1,e===Z_FINISH$3?(flush_block_only(r,!0),r.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):r.sym_next&&(flush_block_only(r,!1),r.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(r,e)=>{let t,n,o,s;const a=r.window;for(;;){if(r.lookahead<=MAX_MATCH){if(fill_window(r),r.lookahead<=MAX_MATCH&&e===Z_NO_FLUSH$2)return BS_NEED_MORE;if(r.lookahead===0)break}if(r.match_length=0,r.lookahead>=MIN_MATCH&&r.strstart>0&&(o=r.strstart-1,n=a[o],n===a[++o]&&n===a[++o]&&n===a[++o])){s=r.strstart+MAX_MATCH;do;while(n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&o<s);r.match_length=MAX_MATCH-(s-o),r.match_length>r.lookahead&&(r.match_length=r.lookahead)}if(r.match_length>=MIN_MATCH?(t=_tr_tally(r,1,r.match_length-MIN_MATCH),r.lookahead-=r.match_length,r.strstart+=r.match_length,r.match_length=0):(t=_tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++),t&&(flush_block_only(r,!1),r.strm.avail_out===0))return BS_NEED_MORE}return r.insert=0,e===Z_FINISH$3?(flush_block_only(r,!0),r.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):r.sym_next&&(flush_block_only(r,!1),r.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(r,e)=>{let t;for(;;){if(r.lookahead===0&&(fill_window(r),r.lookahead===0)){if(e===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(r.match_length=0,t=_tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++,t&&(flush_block_only(r,!1),r.strm.avail_out===0))return BS_NEED_MORE}return r.insert=0,e===Z_FINISH$3?(flush_block_only(r,!0),r.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):r.sym_next&&(flush_block_only(r,!1),r.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(r,e,t,n,o){this.good_length=r,this.max_lazy=e,this.nice_length=t,this.max_chain=n,this.func=o}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=r=>{r.window_size=2*r.w_size,zero(r.head),r.max_lazy_match=configuration_table[r.level].max_lazy,r.good_match=configuration_table[r.level].good_length,r.nice_match=configuration_table[r.level].nice_length,r.max_chain_length=configuration_table[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=MIN_MATCH-1,r.match_available=0,r.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE*2),this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.status!==INIT_STATE&&e.status!==GZIP_STATE&&e.status!==EXTRA_STATE&&e.status!==NAME_STATE&&e.status!==COMMENT_STATE&&e.status!==HCRC_STATE&&e.status!==BUSY_STATE&&e.status!==FINISH_STATE?1:0},deflateResetKeep=r=>{if(deflateStateCheck(r))return err(r,Z_STREAM_ERROR$2);r.total_in=r.total_out=0,r.data_type=Z_UNKNOWN;const e=r.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?GZIP_STATE:e.wrap?INIT_STATE:BUSY_STATE,r.adler=e.wrap===2?0:1,e.last_flush=-2,_tr_init(e),Z_OK$3},deflateReset=r=>{const e=deflateResetKeep(r);return e===Z_OK$3&&lm_init(r.state),e},deflateSetHeader=(r,e)=>deflateStateCheck(r)||r.state.wrap!==2?Z_STREAM_ERROR$2:(r.state.gzhead=e,Z_OK$3),deflateInit2=(r,e,t,n,o,s)=>{if(!r)return Z_STREAM_ERROR$2;let a=1;if(e===Z_DEFAULT_COMPRESSION$1&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),o<1||o>MAX_MEM_LEVEL||t!==Z_DEFLATED$2||n<8||n>15||e<0||e>9||s<0||s>Z_FIXED||n===8&&a!==1)return err(r,Z_STREAM_ERROR$2);n===8&&(n=9);const c=new DeflateState;return r.state=c,c.strm=r,c.status=INIT_STATE,c.wrap=a,c.gzhead=null,c.w_bits=n,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=o+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+MIN_MATCH-1)/MIN_MATCH),c.window=new Uint8Array(c.w_size*2),c.head=new Uint16Array(c.hash_size),c.prev=new Uint16Array(c.w_size),c.lit_bufsize=1<<o+6,c.pending_buf_size=c.lit_bufsize*4,c.pending_buf=new Uint8Array(c.pending_buf_size),c.sym_buf=c.lit_bufsize,c.sym_end=(c.lit_bufsize-1)*3,c.level=e,c.strategy=s,c.method=t,deflateReset(r)},deflateInit=(r,e)=>deflateInit2(r,e,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(r,e)=>{if(deflateStateCheck(r)||e>Z_BLOCK$1||e<0)return r?err(r,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const t=r.state;if(!r.output||r.avail_in!==0&&!r.input||t.status===FINISH_STATE&&e!==Z_FINISH$3)return err(r,r.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const n=t.last_flush;if(t.last_flush=e,t.pending!==0){if(flush_pending(r),r.avail_out===0)return t.last_flush=-1,Z_OK$3}else if(r.avail_in===0&&rank(e)<=rank(n)&&e!==Z_FINISH$3)return err(r,Z_BUF_ERROR$1);if(t.status===FINISH_STATE&&r.avail_in!==0)return err(r,Z_BUF_ERROR$1);if(t.status===INIT_STATE&&t.wrap===0&&(t.status=BUSY_STATE),t.status===INIT_STATE){let o=Z_DEFLATED$2+(t.w_bits-8<<4)<<8,s=-1;if(t.strategy>=Z_HUFFMAN_ONLY||t.level<2?s=0:t.level<6?s=1:t.level===6?s=2:s=3,o|=s<<6,t.strstart!==0&&(o|=PRESET_DICT),o+=31-o%31,putShortMSB(t,o),t.strstart!==0&&(putShortMSB(t,r.adler>>>16),putShortMSB(t,r.adler&65535)),r.adler=1,t.status=BUSY_STATE,flush_pending(r),t.pending!==0)return t.last_flush=-1,Z_OK$3}if(t.status===GZIP_STATE){if(r.adler=0,put_byte(t,31),put_byte(t,139),put_byte(t,8),t.gzhead)put_byte(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),put_byte(t,t.gzhead.time&255),put_byte(t,t.gzhead.time>>8&255),put_byte(t,t.gzhead.time>>16&255),put_byte(t,t.gzhead.time>>24&255),put_byte(t,t.level===9?2:t.strategy>=Z_HUFFMAN_ONLY||t.level<2?4:0),put_byte(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(put_byte(t,t.gzhead.extra.length&255),put_byte(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(r.adler=crc32_1(r.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=EXTRA_STATE;else if(put_byte(t,0),put_byte(t,0),put_byte(t,0),put_byte(t,0),put_byte(t,0),put_byte(t,t.level===9?2:t.strategy>=Z_HUFFMAN_ONLY||t.level<2?4:0),put_byte(t,OS_CODE),t.status=BUSY_STATE,flush_pending(r),t.pending!==0)return t.last_flush=-1,Z_OK$3}if(t.status===EXTRA_STATE){if(t.gzhead.extra){let o=t.pending,s=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+s>t.pending_buf_size;){let c=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+c),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>o&&(r.adler=crc32_1(r.adler,t.pending_buf,t.pending-o,o)),t.gzindex+=c,flush_pending(r),t.pending!==0)return t.last_flush=-1,Z_OK$3;o=0,s-=c}let a=new Uint8Array(t.gzhead.extra);t.pending_buf.set(a.subarray(t.gzindex,t.gzindex+s),t.pending),t.pending+=s,t.gzhead.hcrc&&t.pending>o&&(r.adler=crc32_1(r.adler,t.pending_buf,t.pending-o,o)),t.gzindex=0}t.status=NAME_STATE}if(t.status===NAME_STATE){if(t.gzhead.name){let o=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>o&&(r.adler=crc32_1(r.adler,t.pending_buf,t.pending-o,o)),flush_pending(r),t.pending!==0)return t.last_flush=-1,Z_OK$3;o=0}t.gzindex<t.gzhead.name.length?s=t.gzhead.name.charCodeAt(t.gzindex++)&255:s=0,put_byte(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>o&&(r.adler=crc32_1(r.adler,t.pending_buf,t.pending-o,o)),t.gzindex=0}t.status=COMMENT_STATE}if(t.status===COMMENT_STATE){if(t.gzhead.comment){let o=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>o&&(r.adler=crc32_1(r.adler,t.pending_buf,t.pending-o,o)),flush_pending(r),t.pending!==0)return t.last_flush=-1,Z_OK$3;o=0}t.gzindex<t.gzhead.comment.length?s=t.gzhead.comment.charCodeAt(t.gzindex++)&255:s=0,put_byte(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>o&&(r.adler=crc32_1(r.adler,t.pending_buf,t.pending-o,o))}t.status=HCRC_STATE}if(t.status===HCRC_STATE){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(flush_pending(r),t.pending!==0))return t.last_flush=-1,Z_OK$3;put_byte(t,r.adler&255),put_byte(t,r.adler>>8&255),r.adler=0}if(t.status=BUSY_STATE,flush_pending(r),t.pending!==0)return t.last_flush=-1,Z_OK$3}if(r.avail_in!==0||t.lookahead!==0||e!==Z_NO_FLUSH$2&&t.status!==FINISH_STATE){let o=t.level===0?deflate_stored(t,e):t.strategy===Z_HUFFMAN_ONLY?deflate_huff(t,e):t.strategy===Z_RLE?deflate_rle(t,e):configuration_table[t.level].func(t,e);if((o===BS_FINISH_STARTED||o===BS_FINISH_DONE)&&(t.status=FINISH_STATE),o===BS_NEED_MORE||o===BS_FINISH_STARTED)return r.avail_out===0&&(t.last_flush=-1),Z_OK$3;if(o===BS_BLOCK_DONE&&(e===Z_PARTIAL_FLUSH?_tr_align(t):e!==Z_BLOCK$1&&(_tr_stored_block(t,0,0,!1),e===Z_FULL_FLUSH$1&&(zero(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),flush_pending(r),r.avail_out===0))return t.last_flush=-1,Z_OK$3}return e!==Z_FINISH$3?Z_OK$3:t.wrap<=0?Z_STREAM_END$3:(t.wrap===2?(put_byte(t,r.adler&255),put_byte(t,r.adler>>8&255),put_byte(t,r.adler>>16&255),put_byte(t,r.adler>>24&255),put_byte(t,r.total_in&255),put_byte(t,r.total_in>>8&255),put_byte(t,r.total_in>>16&255),put_byte(t,r.total_in>>24&255)):(putShortMSB(t,r.adler>>>16),putShortMSB(t,r.adler&65535)),flush_pending(r),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?Z_OK$3:Z_STREAM_END$3)},deflateEnd=r=>{if(deflateStateCheck(r))return Z_STREAM_ERROR$2;const e=r.state.status;return r.state=null,e===BUSY_STATE?err(r,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(r,e)=>{let t=e.length;if(deflateStateCheck(r))return Z_STREAM_ERROR$2;const n=r.state,o=n.wrap;if(o===2||o===1&&n.status!==INIT_STATE||n.lookahead)return Z_STREAM_ERROR$2;if(o===1&&(r.adler=adler32_1(r.adler,e,t,0)),n.wrap=0,t>=n.w_size){o===0&&(zero(n.head),n.strstart=0,n.block_start=0,n.insert=0);let d=new Uint8Array(n.w_size);d.set(e.subarray(t-n.w_size,t),0),e=d,t=n.w_size}const s=r.avail_in,a=r.next_in,c=r.input;for(r.avail_in=t,r.next_in=0,r.input=e,fill_window(n);n.lookahead>=MIN_MATCH;){let d=n.strstart,u=n.lookahead-(MIN_MATCH-1);do n.ins_h=HASH(n,n.ins_h,n.window[d+MIN_MATCH-1]),n.prev[d&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=d,d++;while(--u);n.strstart=d,n.lookahead=MIN_MATCH-1,fill_window(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=MIN_MATCH-1,n.match_available=0,r.next_in=a,r.input=c,r.avail_in=s,n.wrap=o,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var assign=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)_has(t,n)&&(r[n]=t[n])}}return r},flattenChunks=r=>{let e=0;for(let n=0,o=r.length;n<o;n++)e+=r[n].length;const t=new Uint8Array(e);for(let n=0,o=0,s=r.length;n<s;n++){let a=r[n];t.set(a,o),o+=a.length}return t},common={assign,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(r){STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let r=0;r<256;r++)_utf8len[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,n,o,s,a=r.length,c=0;for(o=0;o<a;o++)t=r.charCodeAt(o),(t&64512)===55296&&o+1<a&&(n=r.charCodeAt(o+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),o++)),c+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(c),s=0,o=0;s<c;o++)t=r.charCodeAt(o),(t&64512)===55296&&o+1<a&&(n=r.charCodeAt(o+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),o++)),t<128?e[s++]=t:t<2048?(e[s++]=192|t>>>6,e[s++]=128|t&63):t<65536?(e[s++]=224|t>>>12,e[s++]=128|t>>>6&63,e[s++]=128|t&63):(e[s++]=240|t>>>18,e[s++]=128|t>>>12&63,e[s++]=128|t>>>6&63,e[s++]=128|t&63);return e};const buf2binstring=(r,e)=>{if(e<65534&&r.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(r[n]);return t};var buf2string=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let n,o;const s=new Array(t*2);for(o=0,n=0;n<t;){let a=r[n++];if(a<128){s[o++]=a;continue}let c=_utf8len[a];if(c>4){s[o++]=65533,n+=c-1;continue}for(a&=c===2?31:c===3?15:7;c>1&&n<t;)a=a<<6|r[n++]&63,c--;if(c>1){s[o++]=65533;continue}a<65536?s[o++]=a:(a-=65536,s[o++]=55296|a>>10&1023,s[o++]=56320|a&1023)}return buf2binstring(s,o)},utf8border=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+_utf8len[r[t]]>e?t:e},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(r){this.options=common.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},r||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let t=deflate_1$2.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==Z_OK$2)throw new Error(messages[t]);if(e.header&&deflate_1$2.deflateSetHeader(this.strm,e.header),e.dictionary){let n;if(typeof e.dictionary=="string"?n=strings.string2buf(e.dictionary):toString$1.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,t=deflate_1$2.deflateSetDictionary(this.strm,n),t!==Z_OK$2)throw new Error(messages[t]);this._dict_set=!0}}Deflate$1.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize;let o,s;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?Z_FINISH$2:Z_NO_FLUSH$1,typeof r=="string"?t.input=strings.string2buf(r):toString$1.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),(s===Z_SYNC_FLUSH||s===Z_FULL_FLUSH)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(o=deflate_1$2.deflate(t,s),o===Z_STREAM_END$2)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),o=deflate_1$2.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===Z_OK$2;if(t.avail_out===0){this.onData(t.output);continue}if(s>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};Deflate$1.prototype.onData=function(r){this.chunks.push(r)};Deflate$1.prototype.onEnd=function(r){r===Z_OK$2&&(this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};const BAD$1=16209,TYPE$1=16191;var inffast=function r(e,t){let n,o,s,a,c,d,u,y,v,I,S,P,x,A,O,z,M,H,q,Y,B,N,V,Q;const Z=e.state;n=e.next_in,V=e.input,o=n+(e.avail_in-5),s=e.next_out,Q=e.output,a=s-(t-e.avail_out),c=s+(e.avail_out-257),d=Z.dmax,u=Z.wsize,y=Z.whave,v=Z.wnext,I=Z.window,S=Z.hold,P=Z.bits,x=Z.lencode,A=Z.distcode,O=(1<<Z.lenbits)-1,z=(1<<Z.distbits)-1;e:do{P<15&&(S+=V[n++]<<P,P+=8,S+=V[n++]<<P,P+=8),M=x[S&O];t:for(;;){if(H=M>>>24,S>>>=H,P-=H,H=M>>>16&255,H===0)Q[s++]=M&65535;else if(H&16){q=M&65535,H&=15,H&&(P<H&&(S+=V[n++]<<P,P+=8),q+=S&(1<<H)-1,S>>>=H,P-=H),P<15&&(S+=V[n++]<<P,P+=8,S+=V[n++]<<P,P+=8),M=A[S&z];r:for(;;){if(H=M>>>24,S>>>=H,P-=H,H=M>>>16&255,H&16){if(Y=M&65535,H&=15,P<H&&(S+=V[n++]<<P,P+=8,P<H&&(S+=V[n++]<<P,P+=8)),Y+=S&(1<<H)-1,Y>d){e.msg="invalid distance too far back",Z.mode=BAD$1;break e}if(S>>>=H,P-=H,H=s-a,Y>H){if(H=Y-H,H>y&&Z.sane){e.msg="invalid distance too far back",Z.mode=BAD$1;break e}if(B=0,N=I,v===0){if(B+=u-H,H<q){q-=H;do Q[s++]=I[B++];while(--H);B=s-Y,N=Q}}else if(v<H){if(B+=u+v-H,H-=v,H<q){q-=H;do Q[s++]=I[B++];while(--H);if(B=0,v<q){H=v,q-=H;do Q[s++]=I[B++];while(--H);B=s-Y,N=Q}}}else if(B+=v-H,H<q){q-=H;do Q[s++]=I[B++];while(--H);B=s-Y,N=Q}for(;q>2;)Q[s++]=N[B++],Q[s++]=N[B++],Q[s++]=N[B++],q-=3;q&&(Q[s++]=N[B++],q>1&&(Q[s++]=N[B++]))}else{B=s-Y;do Q[s++]=Q[B++],Q[s++]=Q[B++],Q[s++]=Q[B++],q-=3;while(q>2);q&&(Q[s++]=Q[B++],q>1&&(Q[s++]=Q[B++]))}}else if(H&64){e.msg="invalid distance code",Z.mode=BAD$1;break e}else{M=A[(M&65535)+(S&(1<<H)-1)];continue r}break}}else if(H&64)if(H&32){Z.mode=TYPE$1;break e}else{e.msg="invalid literal/length code",Z.mode=BAD$1;break e}else{M=x[(M&65535)+(S&(1<<H)-1)];continue t}break}}while(n<o&&s<c);q=P>>3,n-=q,P-=q<<3,S&=(1<<P)-1,e.next_in=n,e.next_out=s,e.avail_in=n<o?5+(o-n):5-(n-o),e.avail_out=s<c?257+(c-s):257-(s-c),Z.hold=S,Z.bits=P};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(r,e,t,n,o,s,a,c)=>{const d=c.bits;let u=0,y=0,v=0,I=0,S=0,P=0,x=0,A=0,O=0,z=0,M,H,q,Y,B,N=null,V;const Q=new Uint16Array(MAXBITS+1),Z=new Uint16Array(MAXBITS+1);let J=null,L,l,b;for(u=0;u<=MAXBITS;u++)Q[u]=0;for(y=0;y<n;y++)Q[e[t+y]]++;for(S=d,I=MAXBITS;I>=1&&Q[I]===0;I--);if(S>I&&(S=I),I===0)return o[s++]=1<<24|64<<16|0,o[s++]=1<<24|64<<16|0,c.bits=1,0;for(v=1;v<I&&Q[v]===0;v++);for(S<v&&(S=v),A=1,u=1;u<=MAXBITS;u++)if(A<<=1,A-=Q[u],A<0)return-1;if(A>0&&(r===CODES$1||I!==1))return-1;for(Z[1]=0,u=1;u<MAXBITS;u++)Z[u+1]=Z[u]+Q[u];for(y=0;y<n;y++)e[t+y]!==0&&(a[Z[e[t+y]]++]=y);if(r===CODES$1?(N=J=a,V=20):r===LENS$1?(N=lbase,J=lext,V=257):(N=dbase,J=dext,V=0),z=0,y=0,u=v,B=s,P=S,x=0,q=-1,O=1<<S,Y=O-1,r===LENS$1&&O>ENOUGH_LENS$1||r===DISTS$1&&O>ENOUGH_DISTS$1)return 1;for(;;){L=u-x,a[y]+1<V?(l=0,b=a[y]):a[y]>=V?(l=J[a[y]-V],b=N[a[y]-V]):(l=96,b=0),M=1<<u-x,H=1<<P,v=H;do H-=M,o[B+(z>>x)+H]=L<<24|l<<16|b|0;while(H!==0);for(M=1<<u-1;z&M;)M>>=1;if(M!==0?(z&=M-1,z+=M):z=0,y++,--Q[u]===0){if(u===I)break;u=e[t+a[y]]}if(u>S&&(z&Y)!==q){for(x===0&&(x=S),B+=v,P=u-x,A=1<<P;P+x<I&&(A-=Q[P+x],!(A<=0));)P++,A<<=1;if(O+=1<<P,r===LENS$1&&O>ENOUGH_LENS$1||r===DISTS$1&&O>ENOUGH_DISTS$1)return 1;q=z&Y,o[q]=S<<24|P<<16|B-s|0}}return z!==0&&(o[B+z]=u-x<<24|64<<16|0),c.bits=S,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<HEAD||e.mode>SYNC?1:0},inflateResetKeep=r=>{if(inflateStateCheck(r))return Z_STREAM_ERROR$1;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=HEAD,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(ENOUGH_LENS),e.distcode=e.distdyn=new Int32Array(ENOUGH_DISTS),e.sane=1,e.back=-1,Z_OK$1},inflateReset=r=>{if(inflateStateCheck(r))return Z_STREAM_ERROR$1;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,inflateResetKeep(r)},inflateReset2=(r,e)=>{let t;if(inflateStateCheck(r))return Z_STREAM_ERROR$1;const n=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Z_STREAM_ERROR$1:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,inflateReset(r))},inflateInit2=(r,e)=>{if(!r)return Z_STREAM_ERROR$1;const t=new InflateState;r.state=t,t.strm=r,t.window=null,t.mode=HEAD;const n=inflateReset2(r,e);return n!==Z_OK$1&&(r.state=null),n},inflateInit=r=>inflateInit2(r,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=r=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(inftrees(LENS,r.lens,0,288,lenfix,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;inftrees(DISTS,r.lens,0,32,distfix,0,r.work,{bits:5}),virgin=!1}r.lencode=lenfix,r.lenbits=9,r.distcode=distfix,r.distbits=5},updatewindow=(r,e,t,n)=>{let o;const s=r.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(o=s.wsize-s.wnext,o>n&&(o=n),s.window.set(e.subarray(t-n,t-n+o),s.wnext),n-=o,n?(s.window.set(e.subarray(t-n,t),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0},inflate$2=(r,e)=>{let t,n,o,s,a,c,d,u,y,v,I,S,P,x,A=0,O,z,M,H,q,Y,B,N;const V=new Uint8Array(4);let Q,Z;const J=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(r)||!r.output||!r.input&&r.avail_in!==0)return Z_STREAM_ERROR$1;t=r.state,t.mode===TYPE&&(t.mode=TYPEDO),a=r.next_out,o=r.output,d=r.avail_out,s=r.next_in,n=r.input,c=r.avail_in,u=t.hold,y=t.bits,v=c,I=d,N=Z_OK$1;e:for(;;)switch(t.mode){case HEAD:if(t.wrap===0){t.mode=TYPEDO;break}for(;y<16;){if(c===0)break e;c--,u+=n[s++]<<y,y+=8}if(t.wrap&2&&u===35615){t.wbits===0&&(t.wbits=15),t.check=0,V[0]=u&255,V[1]=u>>>8&255,t.check=crc32_1(t.check,V,2,0),u=0,y=0,t.mode=FLAGS;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((u&255)<<8)+(u>>8))%31){r.msg="incorrect header check",t.mode=BAD;break}if((u&15)!==Z_DEFLATED){r.msg="unknown compression method",t.mode=BAD;break}if(u>>>=4,y-=4,B=(u&15)+8,t.wbits===0&&(t.wbits=B),B>15||B>t.wbits){r.msg="invalid window size",t.mode=BAD;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=u&512?DICTID:TYPE,u=0,y=0;break;case FLAGS:for(;y<16;){if(c===0)break e;c--,u+=n[s++]<<y,y+=8}if(t.flags=u,(t.flags&255)!==Z_DEFLATED){r.msg="unknown compression method",t.mode=BAD;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=BAD;break}t.head&&(t.head.text=u>>8&1),t.flags&512&&t.wrap&4&&(V[0]=u&255,V[1]=u>>>8&255,t.check=crc32_1(t.check,V,2,0)),u=0,y=0,t.mode=TIME;case TIME:for(;y<32;){if(c===0)break e;c--,u+=n[s++]<<y,y+=8}t.head&&(t.head.time=u),t.flags&512&&t.wrap&4&&(V[0]=u&255,V[1]=u>>>8&255,V[2]=u>>>16&255,V[3]=u>>>24&255,t.check=crc32_1(t.check,V,4,0)),u=0,y=0,t.mode=OS;case OS:for(;y<16;){if(c===0)break e;c--,u+=n[s++]<<y,y+=8}t.head&&(t.head.xflags=u&255,t.head.os=u>>8),t.flags&512&&t.wrap&4&&(V[0]=u&255,V[1]=u>>>8&255,t.check=crc32_1(t.check,V,2,0)),u=0,y=0,t.mode=EXLEN;case EXLEN:if(t.flags&1024){for(;y<16;){if(c===0)break e;c--,u+=n[s++]<<y,y+=8}t.length=u,t.head&&(t.head.extra_len=u),t.flags&512&&t.wrap&4&&(V[0]=u&255,V[1]=u>>>8&255,t.check=crc32_1(t.check,V,2,0)),u=0,y=0}else t.head&&(t.head.extra=null);t.mode=EXTRA;case EXTRA:if(t.flags&1024&&(S=t.length,S>c&&(S=c),S&&(t.head&&(B=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(s,s+S),B)),t.flags&512&&t.wrap&4&&(t.check=crc32_1(t.check,n,S,s)),c-=S,s+=S,t.length-=S),t.length))break e;t.length=0,t.mode=NAME;case NAME:if(t.flags&2048){if(c===0)break e;S=0;do B=n[s+S++],t.head&&B&&t.length<65536&&(t.head.name+=String.fromCharCode(B));while(B&&S<c);if(t.flags&512&&t.wrap&4&&(t.check=crc32_1(t.check,n,S,s)),c-=S,s+=S,B)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=COMMENT;case COMMENT:if(t.flags&4096){if(c===0)break e;S=0;do B=n[s+S++],t.head&&B&&t.length<65536&&(t.head.comment+=String.fromCharCode(B));while(B&&S<c);if(t.flags&512&&t.wrap&4&&(t.check=crc32_1(t.check,n,S,s)),c-=S,s+=S,B)break e}else t.head&&(t.head.comment=null);t.mode=HCRC;case HCRC:if(t.flags&512){for(;y<16;){if(c===0)break e;c--,u+=n[s++]<<y,y+=8}if(t.wrap&4&&u!==(t.check&65535)){r.msg="header crc mismatch",t.mode=BAD;break}u=0,y=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=TYPE;break;case DICTID:for(;y<32;){if(c===0)break e;c--,u+=n[s++]<<y,y+=8}r.adler=t.check=zswap32(u),u=0,y=0,t.mode=DICT;case DICT:if(t.havedict===0)return r.next_out=a,r.avail_out=d,r.next_in=s,r.avail_in=c,t.hold=u,t.bits=y,Z_NEED_DICT$1;r.adler=t.check=1,t.mode=TYPE;case TYPE:if(e===Z_BLOCK||e===Z_TREES)break e;case TYPEDO:if(t.last){u>>>=y&7,y-=y&7,t.mode=CHECK;break}for(;y<3;){if(c===0)break e;c--,u+=n[s++]<<y,y+=8}switch(t.last=u&1,u>>>=1,y-=1,u&3){case 0:t.mode=STORED;break;case 1:if(fixedtables(t),t.mode=LEN_,e===Z_TREES){u>>>=2,y-=2;break e}break;case 2:t.mode=TABLE;break;case 3:r.msg="invalid block type",t.mode=BAD}u>>>=2,y-=2;break;case STORED:for(u>>>=y&7,y-=y&7;y<32;){if(c===0)break e;c--,u+=n[s++]<<y,y+=8}if((u&65535)!==(u>>>16^65535)){r.msg="invalid stored block lengths",t.mode=BAD;break}if(t.length=u&65535,u=0,y=0,t.mode=COPY_,e===Z_TREES)break e;case COPY_:t.mode=COPY;case COPY:if(S=t.length,S){if(S>c&&(S=c),S>d&&(S=d),S===0)break e;o.set(n.subarray(s,s+S),a),c-=S,s+=S,d-=S,a+=S,t.length-=S;break}t.mode=TYPE;break;case TABLE:for(;y<14;){if(c===0)break e;c--,u+=n[s++]<<y,y+=8}if(t.nlen=(u&31)+257,u>>>=5,y-=5,t.ndist=(u&31)+1,u>>>=5,y-=5,t.ncode=(u&15)+4,u>>>=4,y-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=BAD;break}t.have=0,t.mode=LENLENS;case LENLENS:for(;t.have<t.ncode;){for(;y<3;){if(c===0)break e;c--,u+=n[s++]<<y,y+=8}t.lens[J[t.have++]]=u&7,u>>>=3,y-=3}for(;t.have<19;)t.lens[J[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,Q={bits:t.lenbits},N=inftrees(CODES,t.lens,0,19,t.lencode,0,t.work,Q),t.lenbits=Q.bits,N){r.msg="invalid code lengths set",t.mode=BAD;break}t.have=0,t.mode=CODELENS;case CODELENS:for(;t.have<t.nlen+t.ndist;){for(;A=t.lencode[u&(1<<t.lenbits)-1],O=A>>>24,z=A>>>16&255,M=A&65535,!(O<=y);){if(c===0)break e;c--,u+=n[s++]<<y,y+=8}if(M<16)u>>>=O,y-=O,t.lens[t.have++]=M;else{if(M===16){for(Z=O+2;y<Z;){if(c===0)break e;c--,u+=n[s++]<<y,y+=8}if(u>>>=O,y-=O,t.have===0){r.msg="invalid bit length repeat",t.mode=BAD;break}B=t.lens[t.have-1],S=3+(u&3),u>>>=2,y-=2}else if(M===17){for(Z=O+3;y<Z;){if(c===0)break e;c--,u+=n[s++]<<y,y+=8}u>>>=O,y-=O,B=0,S=3+(u&7),u>>>=3,y-=3}else{for(Z=O+7;y<Z;){if(c===0)break e;c--,u+=n[s++]<<y,y+=8}u>>>=O,y-=O,B=0,S=11+(u&127),u>>>=7,y-=7}if(t.have+S>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=BAD;break}for(;S--;)t.lens[t.have++]=B}}if(t.mode===BAD)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=BAD;break}if(t.lenbits=9,Q={bits:t.lenbits},N=inftrees(LENS,t.lens,0,t.nlen,t.lencode,0,t.work,Q),t.lenbits=Q.bits,N){r.msg="invalid literal/lengths set",t.mode=BAD;break}if(t.distbits=6,t.distcode=t.distdyn,Q={bits:t.distbits},N=inftrees(DISTS,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,Q),t.distbits=Q.bits,N){r.msg="invalid distances set",t.mode=BAD;break}if(t.mode=LEN_,e===Z_TREES)break e;case LEN_:t.mode=LEN;case LEN:if(c>=6&&d>=258){r.next_out=a,r.avail_out=d,r.next_in=s,r.avail_in=c,t.hold=u,t.bits=y,inffast(r,I),a=r.next_out,o=r.output,d=r.avail_out,s=r.next_in,n=r.input,c=r.avail_in,u=t.hold,y=t.bits,t.mode===TYPE&&(t.back=-1);break}for(t.back=0;A=t.lencode[u&(1<<t.lenbits)-1],O=A>>>24,z=A>>>16&255,M=A&65535,!(O<=y);){if(c===0)break e;c--,u+=n[s++]<<y,y+=8}if(z&&!(z&240)){for(H=O,q=z,Y=M;A=t.lencode[Y+((u&(1<<H+q)-1)>>H)],O=A>>>24,z=A>>>16&255,M=A&65535,!(H+O<=y);){if(c===0)break e;c--,u+=n[s++]<<y,y+=8}u>>>=H,y-=H,t.back+=H}if(u>>>=O,y-=O,t.back+=O,t.length=M,z===0){t.mode=LIT;break}if(z&32){t.back=-1,t.mode=TYPE;break}if(z&64){r.msg="invalid literal/length code",t.mode=BAD;break}t.extra=z&15,t.mode=LENEXT;case LENEXT:if(t.extra){for(Z=t.extra;y<Z;){if(c===0)break e;c--,u+=n[s++]<<y,y+=8}t.length+=u&(1<<t.extra)-1,u>>>=t.extra,y-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=DIST;case DIST:for(;A=t.distcode[u&(1<<t.distbits)-1],O=A>>>24,z=A>>>16&255,M=A&65535,!(O<=y);){if(c===0)break e;c--,u+=n[s++]<<y,y+=8}if(!(z&240)){for(H=O,q=z,Y=M;A=t.distcode[Y+((u&(1<<H+q)-1)>>H)],O=A>>>24,z=A>>>16&255,M=A&65535,!(H+O<=y);){if(c===0)break e;c--,u+=n[s++]<<y,y+=8}u>>>=H,y-=H,t.back+=H}if(u>>>=O,y-=O,t.back+=O,z&64){r.msg="invalid distance code",t.mode=BAD;break}t.offset=M,t.extra=z&15,t.mode=DISTEXT;case DISTEXT:if(t.extra){for(Z=t.extra;y<Z;){if(c===0)break e;c--,u+=n[s++]<<y,y+=8}t.offset+=u&(1<<t.extra)-1,u>>>=t.extra,y-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=BAD;break}t.mode=MATCH;case MATCH:if(d===0)break e;if(S=I-d,t.offset>S){if(S=t.offset-S,S>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=BAD;break}S>t.wnext?(S-=t.wnext,P=t.wsize-S):P=t.wnext-S,S>t.length&&(S=t.length),x=t.window}else x=o,P=a-t.offset,S=t.length;S>d&&(S=d),d-=S,t.length-=S;do o[a++]=x[P++];while(--S);t.length===0&&(t.mode=LEN);break;case LIT:if(d===0)break e;o[a++]=t.length,d--,t.mode=LEN;break;case CHECK:if(t.wrap){for(;y<32;){if(c===0)break e;c--,u|=n[s++]<<y,y+=8}if(I-=d,r.total_out+=I,t.total+=I,t.wrap&4&&I&&(r.adler=t.check=t.flags?crc32_1(t.check,o,I,a-I):adler32_1(t.check,o,I,a-I)),I=d,t.wrap&4&&(t.flags?u:zswap32(u))!==t.check){r.msg="incorrect data check",t.mode=BAD;break}u=0,y=0}t.mode=LENGTH;case LENGTH:if(t.wrap&&t.flags){for(;y<32;){if(c===0)break e;c--,u+=n[s++]<<y,y+=8}if(t.wrap&4&&u!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=BAD;break}u=0,y=0}t.mode=DONE;case DONE:N=Z_STREAM_END$1;break e;case BAD:N=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return r.next_out=a,r.avail_out=d,r.next_in=s,r.avail_in=c,t.hold=u,t.bits=y,(t.wsize||I!==r.avail_out&&t.mode<BAD&&(t.mode<CHECK||e!==Z_FINISH$1))&&updatewindow(r,r.output,r.next_out,I-r.avail_out),v-=r.avail_in,I-=r.avail_out,r.total_in+=v,r.total_out+=I,t.total+=I,t.wrap&4&&I&&(r.adler=t.check=t.flags?crc32_1(t.check,o,I,r.next_out-I):adler32_1(t.check,o,I,r.next_out-I)),r.data_type=t.bits+(t.last?64:0)+(t.mode===TYPE?128:0)+(t.mode===LEN_||t.mode===COPY_?256:0),(v===0&&I===0||e===Z_FINISH$1)&&N===Z_OK$1&&(N=Z_BUF_ERROR),N},inflateEnd=r=>{if(inflateStateCheck(r))return Z_STREAM_ERROR$1;let e=r.state;return e.window&&(e.window=null),r.state=null,Z_OK$1},inflateGetHeader=(r,e)=>{if(inflateStateCheck(r))return Z_STREAM_ERROR$1;const t=r.state;return t.wrap&2?(t.head=e,e.done=!1,Z_OK$1):Z_STREAM_ERROR$1},inflateSetDictionary=(r,e)=>{const t=e.length;let n,o,s;return inflateStateCheck(r)||(n=r.state,n.wrap!==0&&n.mode!==DICT)?Z_STREAM_ERROR$1:n.mode===DICT&&(o=1,o=adler32_1(o,e,t,0),o!==n.check)?Z_DATA_ERROR$1:(s=updatewindow(r,e,t,t),s?(n.mode=MEM,Z_MEM_ERROR$1):(n.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(r){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let t=inflate_1$2.inflateInit2(this.strm,e.windowBits);if(t!==Z_OK)throw new Error(messages[t]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=strings.string2buf(e.dictionary):toString.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=inflate_1$2.inflateSetDictionary(this.strm,e.dictionary),t!==Z_OK)))throw new Error(messages[t])}Inflate$1.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize,o=this.options.dictionary;let s,a,c;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?Z_FINISH:Z_NO_FLUSH,toString.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),s=inflate_1$2.inflate(t,a),s===Z_NEED_DICT&&o&&(s=inflate_1$2.inflateSetDictionary(t,o),s===Z_OK?s=inflate_1$2.inflate(t,a):s===Z_DATA_ERROR&&(s=Z_NEED_DICT));t.avail_in>0&&s===Z_STREAM_END&&t.state.wrap>0&&r[t.next_in]!==0;)inflate_1$2.inflateReset(t),s=inflate_1$2.inflate(t,a);switch(s){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(s),this.ended=!0,!1}if(c=t.avail_out,t.next_out&&(t.avail_out===0||s===Z_STREAM_END))if(this.options.to==="string"){let d=strings.utf8border(t.output,t.next_out),u=t.next_out-d,y=strings.buf2string(t.output,d);t.next_out=u,t.avail_out=n-u,u&&t.output.set(t.output.subarray(d,d+u),0),this.onData(y)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===Z_OK&&c===0)){if(s===Z_STREAM_END)return s=inflate_1$2.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(r){this.chunks.push(r)};Inflate$1.prototype.onEnd=function(r){r===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function inflate$1(r,e){const t=new Inflate$1(e);if(t.push(r),t.err)throw t.msg||messages[t.err];return t.result}function inflateRaw$1(r,e){return e=e||{},e.raw=!0,inflate$1(r,e)}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflateRaw_1$1=inflateRaw$1,ungzip$1=inflate$1,constants=constants$2,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1,constants};const{Inflate,inflate,inflateRaw,ungzip}=inflate_1$1;var inflate_1=inflate;async function idlAddress(r){const e=(await PublicKey$1.findProgramAddress([],r))[0];return await PublicKey$1.createWithSeed(e,seed(),r)}function seed(){return"anchor:idl"}const IDL_ACCOUNT_LAYOUT=lib.struct([lib.publicKey("authority"),lib.vecU8("data")]);function decodeIdlAccount(r){return IDL_ACCOUNT_LAYOUT.decode(r)}var eventemitter3={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function o(d,u,y){this.fn=d,this.context=u,this.once=y||!1}function s(d,u,y,v,I){if(typeof y!="function")throw new TypeError("The listener must be a function");var S=new o(y,v||d,I),P=t?t+u:u;return d._events[P]?d._events[P].fn?d._events[P]=[d._events[P],S]:d._events[P].push(S):(d._events[P]=S,d._eventsCount++),d}function a(d,u){--d._eventsCount===0?d._events=new n:delete d._events[u]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var u=[],y,v;if(this._eventsCount===0)return u;for(v in y=this._events)e.call(y,v)&&u.push(t?v.slice(1):v);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(y)):u},c.prototype.listeners=function(u){var y=t?t+u:u,v=this._events[y];if(!v)return[];if(v.fn)return[v.fn];for(var I=0,S=v.length,P=new Array(S);I<S;I++)P[I]=v[I].fn;return P},c.prototype.listenerCount=function(u){var y=t?t+u:u,v=this._events[y];return v?v.fn?1:v.length:0},c.prototype.emit=function(u,y,v,I,S,P){var x=t?t+u:u;if(!this._events[x])return!1;var A=this._events[x],O=arguments.length,z,M;if(A.fn){switch(A.once&&this.removeListener(u,A.fn,void 0,!0),O){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,y),!0;case 3:return A.fn.call(A.context,y,v),!0;case 4:return A.fn.call(A.context,y,v,I),!0;case 5:return A.fn.call(A.context,y,v,I,S),!0;case 6:return A.fn.call(A.context,y,v,I,S,P),!0}for(M=1,z=new Array(O-1);M<O;M++)z[M-1]=arguments[M];A.fn.apply(A.context,z)}else{var H=A.length,q;for(M=0;M<H;M++)switch(A[M].once&&this.removeListener(u,A[M].fn,void 0,!0),O){case 1:A[M].fn.call(A[M].context);break;case 2:A[M].fn.call(A[M].context,y);break;case 3:A[M].fn.call(A[M].context,y,v);break;case 4:A[M].fn.call(A[M].context,y,v,I);break;default:if(!z)for(q=1,z=new Array(O-1);q<O;q++)z[q-1]=arguments[q];A[M].fn.apply(A[M].context,z)}}return!0},c.prototype.on=function(u,y,v){return s(this,u,y,v,!1)},c.prototype.once=function(u,y,v){return s(this,u,y,v,!0)},c.prototype.removeListener=function(u,y,v,I){var S=t?t+u:u;if(!this._events[S])return this;if(!y)return a(this,S),this;var P=this._events[S];if(P.fn)P.fn===y&&(!I||P.once)&&(!v||P.context===v)&&a(this,S);else{for(var x=0,A=[],O=P.length;x<O;x++)(P[x].fn!==y||I&&!P[x].once||v&&P[x].context!==v)&&A.push(P[x]);A.length?this._events[S]=A.length===1?A[0]:A:a(this,S)}return this},c.prototype.removeAllListeners=function(u){var y;return u?(y=t?t+u:u,this._events[y]&&a(this,y)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,r.exports=c})(eventemitter3);var eventemitter3Exports=eventemitter3.exports;const EventEmitter=getDefaultExportFromCjs$1(eventemitter3Exports);function parseIdlErrors(r){const e=new Map;return r.errors&&r.errors.forEach(t=>{var n;let o=(n=t.msg)!==null&&n!==void 0?n:t.name;e.set(t.code,o)}),e}function toInstruction(r,...e){if(r.args.length!=e.length)throw new Error("Invalid argument length");const t={};let n=0;return r.args.forEach(o=>{t[o.name]=e[n],n+=1}),t}function validateAccounts(r,e){r.forEach(t=>{if(t.accounts!==void 0)validateAccounts(t.accounts,e[t.name]);else if(e[t.name]===void 0)throw new Error(`Invalid arguments: ${t.name} not provided.`)})}function translateAddress(r){return typeof r=="string"?new PublicKey$1(r):r}var define_Buffer_default$6=["buffer","Buffer"];function createWithSeedSync(r,e,t){const n=define_Buffer_default$6.concat([r.toBuffer(),define_Buffer_default$6.from(e),t.toBuffer()]),o=sha256Exports.sha256.digest(n);return new PublicKey$1(define_Buffer_default$6.from(o))}function createProgramAddressSync(r,e){let n=define_Buffer_default$6.alloc(0);r.forEach(function(a){if(a.length>32)throw new TypeError("Max seed length exceeded");n=define_Buffer_default$6.concat([n,toBuffer(a)])}),n=define_Buffer_default$6.concat([n,e.toBuffer(),define_Buffer_default$6.from("ProgramDerivedAddress")]);let o=sha256Exports.sha256(new Uint8Array(n)),s=new BN(o,16).toArray(void 0,32);if(PublicKey$1.isOnCurve(new Uint8Array(s)))throw new Error("Invalid seeds, address must fall off the curve");return new PublicKey$1(s)}function findProgramAddressSync(r,e){let t=255,n;for(;t!=0;){try{const o=r.concat(define_Buffer_default$6.from([t]));n=createProgramAddressSync(o,e)}catch(o){if(o instanceof TypeError)throw o;t--;continue}return[n,t]}throw new Error("Unable to find a viable program address nonce")}const toBuffer=r=>r instanceof define_Buffer_default$6?r:r instanceof Uint8Array?define_Buffer_default$6.from(r.buffer,r.byteOffset,r.byteLength):define_Buffer_default$6.from(r);async function associated(r,...e){let t=[define_Buffer_default$6.from([97,110,99,104,111,114])];e.forEach(o=>{t.push(o.buffer!==void 0?o:translateAddress(o).toBuffer())});const[n]=await PublicKey$1.findProgramAddress(t,translateAddress(r));return n}const pubkey=Object.freeze(Object.defineProperty({__proto__:null,associated,createProgramAddressSync,createWithSeedSync,findProgramAddressSync},Symbol.toStringTag,{value:"Module"}));function splitArgsAndCtx(r,e){let t={};const n=r.args?r.args.length:0;if(e.length>n){if(e.length!==n+1)throw new Error("provided too many arguments ${args}");t=e.pop()}return[e,t]}class InstructionNamespaceFactory{static build(e,t,n){if(e.name==="_inner")throw new IdlError("the _inner name is reserved");const o=(...s)=>{const[a,c]=splitArgsAndCtx(e,[...s]);validateAccounts(e.accounts,c.accounts),validateInstruction(e,...s);const d=o.accounts(c.accounts);return c.remainingAccounts!==void 0&&d.push(...c.remainingAccounts),c.__private&&c.__private.logAccounts&&console.log("Outgoing account metas:",d),new TransactionInstruction({keys:d,programId:n,data:t(e.name,toInstruction(e,...a))})};return o.accounts=s=>InstructionNamespaceFactory.accountsArray(s,e.accounts),o}static accountsArray(e,t){return t.map(n=>{const o=n.accounts;if(o!==void 0){const s=e[n.name];return InstructionNamespaceFactory.accountsArray(s,o).flat()}else{const s=n;return{pubkey:translateAddress(e[n.name]),isWritable:s.isMut,isSigner:s.isSigner}}}).flat()}}function validateInstruction(r,...e){}class RpcFactory{static build(e,t,n,o){return async(...a)=>{const c=t(...a),[,d]=splitArgsAndCtx(e,[...a]);try{return await o.send(c,d.signers,d.options)}catch(u){console.log("Translating error",u);let y=ProgramError.parse(u,n);throw y===null?u:y}}}}class TransactionFactory{static build(e,t){return(...o)=>{const[,s]=splitArgsAndCtx(e,[...o]),a=new Transaction;return s.instructions!==void 0&&a.add(...s.instructions),a.add(t(...o)),a}}}class StateFactory{static build(e,t,n,o){if(e.state!==void 0)return new StateClient(e,n,o,t)}}class StateClient{constructor(e,t,n,o){this._idl=e,this._programId=t,this._address=programStateAddress(t),this._provider=n??getProvider(),this._coder=o??new Coder(e),this._sub=null;const[s,a,c]=(()=>{let d={},u={},y={};return e.state.methods.forEach(v=>{const I=InstructionNamespaceFactory.build(v,(A,O)=>o.instruction.encodeState(A,O),t);I.accounts=A=>stateInstructionKeys(t,n,v,A).concat(InstructionNamespaceFactory.accountsArray(A,v.accounts));const S=TransactionFactory.build(v,I),P=RpcFactory.build(v,S,parseIdlErrors(e),n),x=camelCase$1(v.name);d[x]=I,u[x]=S,y[x]=P}),[d,u,y]})();this.instruction=s,this.transaction=a,this.rpc=c}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}async fetch(){const e=this.address(),t=await this.provider.connection.getAccountInfo(e);if(t===null)throw new Error(`Account does not exist ${e.toString()}`);if((await stateDiscriminator(this._idl.state.struct.name)).compare(t.data.slice(0,8)))throw new Error("Invalid account discriminator");return this.coder.state.decode(t.data)}address(){return this._address}subscribe(e){if(this._sub!==null)return this._sub.ee;const t=new EventEmitter,n=this.provider.connection.onAccountChange(this.address(),o=>{const s=this.coder.state.decode(o.data);t.emit("change",s)},e);return this._sub={ee:t,listener:n},t}unsubscribe(){this._sub!==null&&this.provider.connection.removeAccountChangeListener(this._sub.listener).then(async()=>{this._sub=null}).catch(console.error)}}function programStateAddress(r){let[e]=findProgramAddressSync([],r);return createWithSeedSync(e,"unversioned",r)}function stateInstructionKeys(r,e,t,n){if(t.name==="new"){const[o]=findProgramAddressSync([],r);return[{pubkey:e.wallet.publicKey,isWritable:!1,isSigner:!0},{pubkey:programStateAddress(r),isWritable:!0,isSigner:!1},{pubkey:o,isWritable:!1,isSigner:!1},{pubkey:SystemProgram.programId,isWritable:!1,isSigner:!1},{pubkey:r,isWritable:!1,isSigner:!1},{pubkey:SYSVAR_RENT_PUBKEY,isWritable:!1,isSigner:!1}]}else return validateAccounts(t.accounts,n),[{pubkey:programStateAddress(r),isWritable:!0,isSigner:!1}]}var define_Buffer_default$5=["buffer","Buffer"];class AccountFactory{static build(e,t,n,o){const s={};return e.accounts.forEach(a=>{const c=camelCase$1(a.name);s[c]=new AccountClient(e,a,n,o,t)}),s}}class AccountClient{constructor(e,t,n,o,s){this._idlAccount=t,this._programId=n,this._provider=o??getProvider(),this._coder=s??new Coder(e),this._size=ACCOUNT_DISCRIMINATOR_SIZE+accountSize(e,t)}get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}async fetch(e){const t=await this._provider.connection.getAccountInfo(translateAddress(e));if(t===null)throw new Error(`Account does not exist ${e.toString()}`);if((await accountDiscriminator(this._idlAccount.name)).compare(t.data.slice(0,8)))throw new Error("Invalid account discriminator");return this._coder.accounts.decode(this._idlAccount.name,t.data)}async all(e){let t=await accountDiscriminator(this._idlAccount.name);return e!==void 0&&(t=define_Buffer_default$5.concat([t,e])),(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[{memcmp:{offset:0,bytes:bs58$1.encode(t)}}]})).map(({pubkey:o,account:s})=>({publicKey:o,account:this._coder.accounts.decode(this._idlAccount.name,s.data)}))}subscribe(e,t){if(subscriptions.get(e.toString()))return subscriptions.get(e.toString()).ee;const n=new EventEmitter;e=translateAddress(e);const o=this._provider.connection.onAccountChange(e,s=>{const a=this._coder.accounts.decode(this._idlAccount.name,s.data);n.emit("change",a)},t);return subscriptions.set(e.toString(),{ee:n,listener:o}),n}unsubscribe(e){let t=subscriptions.get(e.toString());if(!t){console.warn("Address is not subscribed");return}subscriptions&&this._provider.connection.removeAccountChangeListener(t.listener).then(()=>{subscriptions.delete(e.toString())}).catch(console.error)}async createInstruction(e,t){const n=this.size;return SystemProgram.createAccount({fromPubkey:this._provider.wallet.publicKey,newAccountPubkey:e.publicKey,space:t??n,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(t??n),programId:this._programId})}async associated(...e){const t=await this.associatedAddress(...e);return await this.fetch(t)}async associatedAddress(...e){return await associated(this._programId,...e)}}const subscriptions=new Map,assert={},LOG_START_INDEX=13;class EventParser{constructor(e,t){this.coder=e,this.programId=t}parseLogs(e,t){const n=new LogScanner(e),o=new ExecutionContext(n.next());let s=n.next();for(;s!==null;){let[a,c,d]=this.handleLog(o,s);a&&t(a),c&&o.push(c),d&&o.pop(),s=n.next()}}handleLog(e,t){return e.program()===this.programId.toString()?this.handleProgramLog(t):[null,...this.handleSystemLog(t)]}handleProgramLog(e){if(e.startsWith("Program log:")){const t=e.slice(LOG_START_INDEX);return[this.coder.events.decode(t),null,!1]}else return[null,...this.handleSystemLog(e)]}handleSystemLog(e){const t=e.split(":")[0];return t.match(/^Program (.*) success/g)!==null?[null,!0]:t.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:t.includes("invoke")?["cpi",!1]:[null,!1]}}class ExecutionContext{constructor(e){const t=/^Program (.*) invoke.*$/g.exec(e)[1];this.stack=[t]}program(){return(void 0)(this.stack.length>0),this.stack[this.stack.length-1]}push(e){this.stack.push(e)}pop(){(void 0)(this.stack.length>0),this.stack.pop()}}class LogScanner{constructor(e){this.logs=e}next(){if(this.logs.length===0)return null;let e=this.logs[0];return this.logs=this.logs.slice(1),e}}class SimulateFactory{static build(e,t,n,o,s,a,c){return async(...u)=>{const y=t(...u),[,v]=splitArgsAndCtx(e,[...u]);let I;try{I=await o.simulate(y,v.signers,v.options)}catch(x){console.log("Translating error",x);let A=ProgramError.parse(x,n);throw A===null?x:A}if(I===void 0)throw new Error("Unable to simulate transaction");if(I.value.err)throw new Error(`Simulate error: ${I.value.err.toString()}`);const S=I.value.logs;if(!S)throw new Error("Simulated logs not found");const P=[];return c.events&&new EventParser(s,a).parseLogs(S,A=>{P.push(A)}),{events:P,raw:S}}}}class NamespaceFactory{static build(e,t,n,o){const s={},a={},c={},d={},u=parseIdlErrors(e),y=StateFactory.build(e,t,n,o);e.instructions.forEach(I=>{const S=InstructionNamespaceFactory.build(I,(z,M)=>t.instruction.encode(z,M),n),P=TransactionFactory.build(I,S),x=RpcFactory.build(I,P,u,o),A=SimulateFactory.build(I,P,u,o,t,n,e),O=camelCase$1(I.name);a[O]=S,c[O]=P,s[O]=x,d[O]=A});const v=e.accounts?AccountFactory.build(e,t,n,o):{};return[s,a,c,v,d,y]}}var define_Buffer_default$4=["buffer","Buffer"];function encode$3(r){return r.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"0x")}function decode$3(r){r.indexOf("0x")===0&&(r=r.substr(2)),r.length%2===1&&(r="0"+r);let e=r.match(/.{2}/g);return e===null?define_Buffer_default$4.from([]):define_Buffer_default$4.from(e.map(t=>parseInt(t,16)))}const hex=Object.freeze(Object.defineProperty({__proto__:null,decode:decode$3,encode:encode$3},Symbol.toStringTag,{value:"Module"}));function decode$2(r){return(typeof TextDecoder>"u"?new(require("util")).TextDecoder("utf-8"):new TextDecoder("utf-8")).decode(r)}function encode$2(r){return(typeof TextEncoder>"u"?new(require("util")).TextEncoder("utf-8"):new TextEncoder).encode(r)}const utf8=Object.freeze(Object.defineProperty({__proto__:null,decode:decode$2,encode:encode$2},Symbol.toStringTag,{value:"Module"}));function encode$1(r){return bs58$1.encode(r)}function decode$1(r){return bs58$1.decode(r)}const bs58=Object.freeze(Object.defineProperty({__proto__:null,decode:decode$1,encode:encode$1},Symbol.toStringTag,{value:"Module"}));var define_Buffer_default$3=["buffer","Buffer"];function encode(r){return fromByteArray_1(r)}function decode(r){return define_Buffer_default$3.from(toByteArray_1(r))}const base64=Object.freeze(Object.defineProperty({__proto__:null,decode,encode},Symbol.toStringTag,{value:"Module"})),index$1=Object.freeze(Object.defineProperty({__proto__:null,base64,bs58,hex,utf8},Symbol.toStringTag,{value:"Module"}));class Program{constructor(e,t,n){t=translateAddress(t),this._idl=e,this._programId=t,this._provider=n??getProvider(),this._coder=new Coder(e);const[o,s,a,c,d,u]=NamespaceFactory.build(e,this._coder,t,this._provider);this.rpc=o,this.instruction=s,this.transaction=a,this.account=c,this.simulate=d,this.state=u}get programId(){return this._programId}get idl(){return this._idl}get coder(){return this._coder}get provider(){return this._provider}static async at(e,t){const n=translateAddress(e),o=await Program.fetchIdl(n,t);return new Program(o,n,t)}static async fetchIdl(e,t){t=t??getProvider();const n=translateAddress(e),o=await idlAddress(n),s=await t.connection.getAccountInfo(o);let a=decodeIdlAccount(s.data.slice(8));const c=inflate_1(a.data);return JSON.parse(decode$2(c))}addEventListener(e,t){const n=new EventParser(this._coder,this._programId);return this._provider.connection.onLogs(this._programId,(o,s)=>{if(o.err){console.error(o);return}n.parseLogs(o.logs,a=>{a.name===e&&t(a.data,s.slot)})})}async removeEventListener(e){return this._provider.connection.removeOnLogsListener(e)}}let _populatedWorkspace=!1;const workspace=new Proxy({},{get(r,e){if(isBrowser){console.log("Workspaces aren't available in the browser");return}const t=require("fs"),n=require("process");if(!_populatedWorkspace){const o=require("path");let s=n.cwd();for(;!t.existsSync(o.join(s,"Anchor.toml"));){const y=o.dirname(s);y===s&&(s=void 0),s=y}if(s===void 0)throw new Error("Could not find workspace root.");const a=`${s}/target/idl`;if(!t.existsSync(a))throw new Error(`${a} doesn't exist. Did you use "anchor build"?`);const c=new Map;t.readdirSync(a).forEach(y=>{const v=`${a}/${y}`,I=t.readFileSync(v),S=JSON.parse(I);c.set(S.name,S);const P=camelCase$1(S.name,{pascalCase:!0});S.metadata&&S.metadata.address&&(r[P]=new Program(S,new PublicKey$1(S.metadata.address)))});const d=toml.parse(t.readFileSync(o.join(s,"Anchor.toml"),"utf-8")),u=d.provider.cluster;d.clusters&&d.clusters[u]&&attachWorkspaceOverride(r,d.clusters[u],c),_populatedWorkspace=!0}return r[e]}});function attachWorkspaceOverride(r,e,t){Object.keys(e).forEach(n=>{const o=camelCase$1(n,{pascalCase:!0}),s=e[n],a=new PublicKey$1(typeof s=="string"?s:s.address);let c=t.get(n);typeof s!="string"&&s.idl&&(c=JSON.parse(require("fs").readFileSync(s.idl,"utf-8"))),r[o]=new Program(c,a)})}function hash(r){return sha256Exports.sha256(r)}const sha256=Object.freeze(Object.defineProperty({__proto__:null,hash},Symbol.toStringTag,{value:"Module"}));var define_Buffer_default$2=["buffer","Buffer"];async function invoke(r,e,t,n){r=translateAddress(r),n||(n=getProvider());const o=new Transaction;return o.add(new TransactionInstruction({programId:r,keys:e??[],data:t})),await n.send(o)}async function getMultipleAccounts(r,e){const t=[e.map(s=>s.toBase58()),{commitment:"recent"}],n=await r._rpcRequest("getMultipleAccounts",t);if(n.error)throw new Error("failed to get info about accounts "+e.map(s=>s.toBase58()).join(", ")+": "+n.error.message);assert(typeof n.result<"u");const o=[];for(const s of n.result.value){let a=null;if(s===null){o.push(null);continue}if(n.result.value){const{executable:c,owner:d,lamports:u,data:y}=s;assert(y[1]==="base64"),a={executable:c,owner:new PublicKey$1(d),lamports:u,data:define_Buffer_default$2.from(y[0],"base64")}}if(a===null)throw new Error("Invalid response");o.push(a)}return o.map((s,a)=>s===null?null:{publicKey:e[a],account:s})}const rpc=Object.freeze(Object.defineProperty({__proto__:null,getMultipleAccounts,invoke},Symbol.toStringTag,{value:"Module"})),TOKEN_PROGRAM_ID=new PublicKey$1("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),ASSOCIATED_PROGRAM_ID=new PublicKey$1("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");async function associatedAddress({mint:r,owner:e}){return(await PublicKey$1.findProgramAddress([e.toBuffer(),TOKEN_PROGRAM_ID.toBuffer(),r.toBuffer()],ASSOCIATED_PROGRAM_ID))[0]}const token=Object.freeze(Object.defineProperty({__proto__:null,associatedAddress},Symbol.toStringTag,{value:"Module"})),index=Object.freeze(Object.defineProperty({__proto__:null,bytes:index$1,features,publicKey:pubkey,rpc,sha256,token},Symbol.toStringTag,{value:"Module"})),esm=Object.freeze(Object.defineProperty({__proto__:null,AccountClient,AccountsCoder,BN,Coder,EventCoder,InstructionCoder,Program,Provider,StateClient,StateCoder,TypesCoder,Wallet:NodeWallet,getProvider,setProvider,utils:index,web3:index_browser_esm,workspace},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(esm);var define_Buffer_default$1=["buffer","Buffer"];Object.defineProperty(marketProxy,"__esModule",{value:!0});marketProxy.MarketProxyBuilder=marketProxy.MarketProxyInstruction=marketProxy.MarketProxy=void 0;const anchor_1$1=require$$0,market_1=market,instructions_1=instructions;class MarketProxy{constructor(e,t){this._market=e,this._instruction=t}get market(){return this._market}get instruction(){return this._instruction}get dexProgramId(){return this._market.programId}get proxyProgramId(){return this._instruction.proxyProgramId}}marketProxy.MarketProxy=MarketProxy;class MarketProxyInstruction{constructor(e,t,n,o){this._proxyProgramId=e,this._dexProgramId=t,this._market=n,this._middlewares=o}get proxyProgramId(){return this._proxyProgramId}newOrderV3(e){const t=this._market.makeNewOrderV3Instruction({...e,programId:this._proxyProgramId});return this._middlewares.forEach(n=>n.newOrderV3(t)),this.proxy(t)}initOpenOrders(e,t,n,o){const s=instructions_1.DexInstructions.initOpenOrders({market:t,openOrders:n,owner:e,programId:this._proxyProgramId,marketAuthority:o});return this._middlewares.forEach(a=>a.initOpenOrders(s)),this.proxy(s)}cancelOrder(e,t){const n=instructions_1.DexInstructions.cancelOrderV2({market:this._market.address,owner:e,openOrders:t.openOrdersAddress,bids:this._market.decoded.bids,asks:this._market.decoded.asks,eventQueue:this._market.decoded.eventQueue,side:t.side,orderId:t.orderId,openOrdersSlot:t.openOrdersSlot,programId:this._proxyProgramId});return this._middlewares.forEach(o=>o.cancelOrderV2(n)),this.proxy(n)}cancelOrderByClientId(e,t,n){const o=instructions_1.DexInstructions.cancelOrderByClientIdV2({market:this._market.address,openOrders:t,owner:e,bids:this._market.decoded.bids,asks:this._market.decoded.asks,eventQueue:this._market.decoded.eventQueue,clientId:n,programId:this._proxyProgramId});return this._middlewares.forEach(s=>s.cancelOrderByClientIdV2(o)),this.proxy(o)}settleFunds(e,t,n,o,s){const a=instructions_1.DexInstructions.settleFunds({market:this._market.address,openOrders:e,owner:t,baseVault:this._market.decoded.baseVault,quoteVault:this._market.decoded.quoteVault,baseWallet:n,quoteWallet:o,vaultSigner:anchor_1$1.utils.publicKey.createProgramAddressSync([this._market.address.toBuffer(),this._market.decoded.vaultSignerNonce.toArrayLike(define_Buffer_default$1,"le",8)],this._dexProgramId),programId:this._proxyProgramId,referrerQuoteWallet:s});return this._middlewares.forEach(c=>c.settleFunds(a)),this.proxy(a)}closeOpenOrders(e,t,n){const o=instructions_1.DexInstructions.closeOpenOrders({market:this._market.address,openOrders:e,owner:t,solWallet:n,programId:this._proxyProgramId});return this._middlewares.forEach(s=>s.closeOpenOrders(o)),this.proxy(o)}prune(e,t,n){n||(n=65535);const o=instructions_1.DexInstructions.prune({market:this._market.address,bids:this._market.decoded.bids,asks:this._market.decoded.asks,eventQueue:this._market.decoded.eventQueue,pruneAuthority:this._market.decoded.pruneAuthority,openOrders:e,openOrdersOwner:t,programId:this._proxyProgramId,limit:n});return this._middlewares.forEach(s=>s.prune(o)),this.proxy(o)}consumeEvents(e,t){const n=instructions_1.DexInstructions.consumeEvents({market:this._market.address,eventQueue:this._market.decoded.eventQueue,coinFee:this._market.decoded.eventQueue,pcFee:this._market.decoded.eventQueue,openOrdersAccounts:e,limit:t,programId:this._proxyProgramId});return this._middlewares.forEach(o=>o.consumeEvents(n)),this.proxy(n)}consumeEventsPermissioned(e,t){const n=instructions_1.DexInstructions.consumeEventsPermissioned({market:this._market.address,eventQueue:this._market.decoded.eventQueue,crankAuthority:this._market.decoded.consumeEventsAuthority,openOrdersAccounts:e,limit:t,programId:this._proxyProgramId});return this._middlewares.forEach(o=>o.consumeEventsPermissioned(n)),this.proxy(n)}proxy(e){return e.keys=[{pubkey:this._dexProgramId,isWritable:!1,isSigner:!1},...e.keys],e}}marketProxy.MarketProxyInstruction=MarketProxyInstruction;class MarketProxyBuilder{constructor(){this._middlewares=[]}middleware(e){return this._middlewares.push(e),this}async load({connection:e,market:t,options:n={},dexProgramId:o,proxyProgramId:s}){const a=await market_1.Market.load(e,t,n,o,market_1.MARKET_STATE_LAYOUT_V3),c=new MarketProxyInstruction(s,o,a,this._middlewares);return new MarketProxy(a,c)}}marketProxy.MarketProxyBuilder=MarketProxyBuilder;var middleware={},define_Buffer_default=["buffer","Buffer"];Object.defineProperty(middleware,"__esModule",{value:!0});middleware.Logger=middleware.PermissionedCrank=middleware.ReferralFees=middleware.OpenOrdersPda=void 0;const anchor_1=require$$0,web3_js_1=require$$1$1;class OpenOrdersPda{constructor({proxyProgramId:e,dexProgramId:t}){this._proxyProgramId=e,this._dexProgramId=t}static async marketAuthority(e,t,n){const o=define_Buffer_default.from([111,112,101,110,45,111,114,100,101,114,115,45,105,110,105,116]),[s]=await web3_js_1.PublicKey.findProgramAddress([o,t.toBuffer(),e.toBuffer()],n);return s}static async openOrdersAddress(e,t,n,o){const s=define_Buffer_default.from([111,112,101,110,45,111,114,100,101,114,115]),[a]=await web3_js_1.PublicKey.findProgramAddress([s,n.toBuffer(),e.toBuffer(),t.toBuffer()],o);return a}initOpenOrders(e){const t=e.keys[2].pubkey,n=e.keys[1].pubkey,o=define_Buffer_default.from([111,112,101,110,45,111,114,100,101,114,115]),s=define_Buffer_default.from([111,112,101,110,45,111,114,100,101,114,115,45,105,110,105,116]),[a,c]=anchor_1.utils.publicKey.findProgramAddressSync([o,this._dexProgramId.toBuffer(),t.toBuffer(),n.toBuffer()],this._proxyProgramId),[d,u]=anchor_1.utils.publicKey.findProgramAddressSync([s,this._dexProgramId.toBuffer(),t.toBuffer()],this._proxyProgramId);e.keys[0].pubkey=a,e.keys[4].pubkey=d,e.keys[1].isWritable=!0,e.keys=[{pubkey:this._dexProgramId,isSigner:!1,isWritable:!1},{pubkey:web3_js_1.SystemProgram.programId,isSigner:!1,isWritable:!1},...e.keys],e.data=define_Buffer_default.concat([define_Buffer_default.from([0,c,u]),e.data])}newOrderV3(e){e.data=define_Buffer_default.concat([define_Buffer_default.from([1]),e.data])}cancelOrderV2(e){e.data=define_Buffer_default.concat([define_Buffer_default.from([2]),e.data])}cancelOrderByClientIdV2(e){e.data=define_Buffer_default.concat([define_Buffer_default.from([3]),e.data])}settleFunds(e){e.data=define_Buffer_default.concat([define_Buffer_default.from([4]),e.data])}closeOpenOrders(e){e.data=define_Buffer_default.concat([define_Buffer_default.from([5]),e.data])}prune(e){e.data=define_Buffer_default.concat([define_Buffer_default.from([6]),e.data])}consumeEvents(e){e.data=define_Buffer_default.concat([define_Buffer_default.from([7]),e.data])}consumeEventsPermissioned(e){e.data=define_Buffer_default.concat([define_Buffer_default.from([8]),e.data])}}middleware.OpenOrdersPda=OpenOrdersPda;class ReferralFees{initOpenOrders(e){}newOrderV3(e){}cancelOrderV2(e){}cancelOrderByClientIdV2(e){}settleFunds(e){}closeOpenOrders(e){}prune(e){}consumeEvents(e){}consumeEventsPermissioned(e){}}middleware.ReferralFees=ReferralFees;class PermissionedCrank{initOpenOrders(e){}newOrderV3(e){}cancelOrderV2(e){}cancelOrderByClientIdV2(e){}settleFunds(e){}closeOpenOrders(e){}prune(e){}consumeEvents(e){}consumeEventsPermissioned(e){e.keys[e.keys.length-1].isSigner=!1}}middleware.PermissionedCrank=PermissionedCrank;class Logger{initOpenOrders(e){console.log("Proxying initOpenOrders",this.ixToDisplay(e))}newOrderV3(e){console.log("Proxying newOrderV3",this.ixToDisplay(e))}cancelOrderV2(e){console.log("Proxying cancelOrderV2",this.ixToDisplay(e))}cancelOrderByClientIdV2(e){console.log("Proxying cancelOrderByClientIdV2",this.ixToDisplay(e))}settleFunds(e){console.log("Proxying settleFunds",this.ixToDisplay(e))}closeOpenOrders(e){console.log("Proxying closeOpenOrders",this.ixToDisplay(e))}prune(e){console.log("Proxying prune",this.ixToDisplay(e))}consumeEvents(e){console.log("Proxying consumeEvents",this.ixToDisplay(e))}consumeEventsPermissioned(e){console.log("Proxying consumeEventsPermissioned",this.ixToDisplay(e))}ixToDisplay(e){const t=e.keys.map(s=>({...s,pubkey:s.pubkey.toString()})),n=e.programId.toString(),o=new Uint8Array(e.data);return{keys:t,programId:n,data:o}}}middleware.Logger=Logger;(function(r){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(I,S,P,x){x===void 0&&(x=P),Object.defineProperty(I,x,{enumerable:!0,get:function(){return S[P]}})}:function(I,S,P,x){x===void 0&&(x=P),I[x]=S[P]}),t=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(I,S){Object.defineProperty(I,"default",{enumerable:!0,value:S})}:function(I,S){I.default=S}),n=commonjsGlobal&&commonjsGlobal.__importStar||function(I){if(I&&I.__esModule)return I;var S={};if(I!=null)for(var P in I)P!=="default"&&Object.prototype.hasOwnProperty.call(I,P)&&e(S,I,P);return t(S,I),S},o=commonjsGlobal&&commonjsGlobal.__exportStar||function(I,S){for(var P in I)P!=="default"&&!Object.prototype.hasOwnProperty.call(S,P)&&e(S,I,P)};Object.defineProperty(r,"__esModule",{value:!0}),r.Logger=r.PermissionedCrank=r.ReferralFees=r.OpenOrdersPda=r.MarketProxyBuilder=r.MarketProxy=r.TokenInstructions=r.EVENT_QUEUE_LAYOUT=r.REQUEST_QUEUE_LAYOUT=r.decodeRequestQueue=r.decodeEventQueue=r.getLayoutVersion=r.MARKETS=r.TOKEN_MINTS=r.supportsSrmFeeDiscounts=r.getFeeRates=r.getFeeTier=r.NEW_ORDER_V3_OWNER_INDEX=r.NEW_ORDER_V3_OPEN_ORDERS_INDEX=r.NEW_ORDER_OWNER_INDEX=r.NEW_ORDER_OPEN_ORDERS_INDEX=r.SETTLE_FUNDS_QUOTE_WALLET_INDEX=r.SETTLE_FUNDS_BASE_WALLET_INDEX=r.decodeInstructionV2=r.decodeInstruction=r.DexInstructions=r.MARKET_STATE_LAYOUT_V2=r.MARKET_STATE_LAYOUT_V3=r.OpenOrders=r.Orderbook=r.Market=void 0;var s=market;Object.defineProperty(r,"Market",{enumerable:!0,get:function(){return s.Market}}),Object.defineProperty(r,"Orderbook",{enumerable:!0,get:function(){return s.Orderbook}}),Object.defineProperty(r,"OpenOrders",{enumerable:!0,get:function(){return s.OpenOrders}}),Object.defineProperty(r,"MARKET_STATE_LAYOUT_V3",{enumerable:!0,get:function(){return s.MARKET_STATE_LAYOUT_V3}}),Object.defineProperty(r,"MARKET_STATE_LAYOUT_V2",{enumerable:!0,get:function(){return s.MARKET_STATE_LAYOUT_V2}});var a=instructions;Object.defineProperty(r,"DexInstructions",{enumerable:!0,get:function(){return a.DexInstructions}}),Object.defineProperty(r,"decodeInstruction",{enumerable:!0,get:function(){return a.decodeInstruction}}),Object.defineProperty(r,"decodeInstructionV2",{enumerable:!0,get:function(){return a.decodeInstructionV2}}),Object.defineProperty(r,"SETTLE_FUNDS_BASE_WALLET_INDEX",{enumerable:!0,get:function(){return a.SETTLE_FUNDS_BASE_WALLET_INDEX}}),Object.defineProperty(r,"SETTLE_FUNDS_QUOTE_WALLET_INDEX",{enumerable:!0,get:function(){return a.SETTLE_FUNDS_QUOTE_WALLET_INDEX}}),Object.defineProperty(r,"NEW_ORDER_OPEN_ORDERS_INDEX",{enumerable:!0,get:function(){return a.NEW_ORDER_OPEN_ORDERS_INDEX}}),Object.defineProperty(r,"NEW_ORDER_OWNER_INDEX",{enumerable:!0,get:function(){return a.NEW_ORDER_OWNER_INDEX}}),Object.defineProperty(r,"NEW_ORDER_V3_OPEN_ORDERS_INDEX",{enumerable:!0,get:function(){return a.NEW_ORDER_V3_OPEN_ORDERS_INDEX}}),Object.defineProperty(r,"NEW_ORDER_V3_OWNER_INDEX",{enumerable:!0,get:function(){return a.NEW_ORDER_V3_OWNER_INDEX}});var c=fees;Object.defineProperty(r,"getFeeTier",{enumerable:!0,get:function(){return c.getFeeTier}}),Object.defineProperty(r,"getFeeRates",{enumerable:!0,get:function(){return c.getFeeRates}}),Object.defineProperty(r,"supportsSrmFeeDiscounts",{enumerable:!0,get:function(){return c.supportsSrmFeeDiscounts}});var d=tokens_and_markets;Object.defineProperty(r,"TOKEN_MINTS",{enumerable:!0,get:function(){return d.TOKEN_MINTS}}),Object.defineProperty(r,"MARKETS",{enumerable:!0,get:function(){return d.MARKETS}}),Object.defineProperty(r,"getLayoutVersion",{enumerable:!0,get:function(){return d.getLayoutVersion}});var u=queue;Object.defineProperty(r,"decodeEventQueue",{enumerable:!0,get:function(){return u.decodeEventQueue}}),Object.defineProperty(r,"decodeRequestQueue",{enumerable:!0,get:function(){return u.decodeRequestQueue}}),Object.defineProperty(r,"REQUEST_QUEUE_LAYOUT",{enumerable:!0,get:function(){return u.REQUEST_QUEUE_LAYOUT}}),Object.defineProperty(r,"EVENT_QUEUE_LAYOUT",{enumerable:!0,get:function(){return u.EVENT_QUEUE_LAYOUT}}),r.TokenInstructions=n(tokenInstructions),o(error,r);var y=marketProxy;Object.defineProperty(r,"MarketProxy",{enumerable:!0,get:function(){return y.MarketProxy}}),Object.defineProperty(r,"MarketProxyBuilder",{enumerable:!0,get:function(){return y.MarketProxyBuilder}});var v=middleware;Object.defineProperty(r,"OpenOrdersPda",{enumerable:!0,get:function(){return v.OpenOrdersPda}}),Object.defineProperty(r,"ReferralFees",{enumerable:!0,get:function(){return v.ReferralFees}}),Object.defineProperty(r,"PermissionedCrank",{enumerable:!0,get:function(){return v.PermissionedCrank}}),Object.defineProperty(r,"Logger",{enumerable:!0,get:function(){return v.Logger}})})(lib$1);class PoolService{constructor(){this.pools=new Map,this.isInitialized=!1}async initialize(){try{const e=connectionService.getConnection();return await this.loadPools(e),this.isInitialized=!0,!0}catch(e){throw logger.error("Failed to initialize pool service:",e),e}}async loadPools(e){try{(await lib$1.Market.loadMultiple(e,[],{},new PublicKey("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"))).forEach(n=>{n&&this.pools.set(n.address.toString(),n)}),logger.info(`Loaded ${this.pools.size} pools`)}catch(t){throw logger.error("Failed to load pools:",t),t}}getPools(){return Array.from(this.pools.values())}}const poolService=new PoolService;class OpportunityService{constructor(){this.isInitialized=!1,this.isRunning=!1}async initialize(){try{return this.minProfitThreshold=CONFIG.TRADING.MIN_PROFIT_THRESHOLD,this.maxSlippage=CONFIG.TRADING.MAX_SLIPPAGE,this.isInitialized=!0,logger.info("Opportunity service initialized"),!0}catch(e){throw logger.error("Failed to initialize opportunity service:",e),e}}async start(){if(!this.isInitialized)throw new Error("Service not initialized");this.isRunning=!0,this.setupEventListeners(),logger.info("Opportunity service started")}async stop(){this.isRunning=!1,logger.info("Opportunity service stopped")}setupEventListeners(){eventEmitter.on("pool:update",this.analyzeOpportunity.bind(this))}async analyzeOpportunity(e){if(this.isRunning)try{return null}catch(t){return logger.error("Opportunity analysis failed:",t),null}}}const opportunityService=new OpportunityService;class MonitoringService{constructor(){this.isInitialized=!1,this.isRunning=!1,this.metrics=new Map}async initialize(){try{return this.setupMetrics(),this.isInitialized=!0,logger.info("Monitoring service initialized"),!0}catch(e){throw logger.error("Failed to initialize monitoring service:",e),e}}setupMetrics(){this.metrics.set("trades",0),this.metrics.set("profit",0),this.metrics.set("errors",0)}async start(){if(!this.isInitialized)throw new Error("Service not initialized");this.isRunning=!0,this.startMetricsEmitter(),logger.info("Monitoring service started")}async stop(){this.isRunning=!1,logger.info("Monitoring service stopped")}startMetricsEmitter(){setInterval(()=>{this.isRunning&&eventEmitter.emit("metrics:update",this.getMetrics())},CONFIG.MONITORING.METRICS_INTERVAL)}getMetrics(){return Object.fromEntries(this.metrics)}}const monitoringService=new MonitoringService;class Engine{constructor(){this.services={connection:connectionService,pool:poolService,opportunity:opportunityService,monitoring:monitoringService},this.isInitialized=!1,this.setupEventListeners()}setupEventListeners(){eventEmitter.on("connection:lost",this.handleConnectionLost.bind(this)),eventEmitter.on("connection:established",this.handleConnectionRestored.bind(this)),eventEmitter.on("error",this.handleError.bind(this))}async handleError(e){logger.error("Engine error:",e),await this.pauseServices()}async handleConnectionLost(){logger.warn("Connection lost, pausing services..."),await this.pauseServices()}async handleConnectionRestored(){logger.info("Connection restored, resuming services..."),await this.resumeServices()}async initialize(){try{return logger.info("Initializing trading engine..."),await this.initializeService("connection"),await this.initializeService("monitoring"),await this.initializeService("pool"),await this.initializeService("opportunity"),this.isInitialized=!0,logger.info("Trading engine initialized successfully"),!0}catch(e){throw logger.error("Failed to initialize trading engine:",e),e}}async initializeService(e){try{logger.info(`Initializing ${e} service...`),await this.services[e].initialize(),logger.info(`${e} service initialized successfully`)}catch(t){throw logger.error(`Failed to initialize ${e} service:`,t),t}}async start(){try{return this.isInitialized||await this.initialize(),await this.startService("monitoring"),await this.startService("opportunity"),logger.info("Trading engine started successfully"),!0}catch(e){throw logger.error("Failed to start trading engine:",e),e}}async startService(e){try{logger.info(`Starting ${e} service...`),await this.services[e].start(),logger.info(`${e} service started successfully`)}catch(t){throw logger.error(`Failed to start ${e} service:`,t),t}}async pauseServices(){try{await this.services.opportunity.stop(),logger.info("Services paused")}catch(e){logger.error("Error pausing services:",e)}}async resumeServices(){try{await this.services.opportunity.start(),logger.info("Services resumed")}catch(e){logger.error("Error resuming services:",e)}}async stop(){try{await Promise.all([this.services.opportunity.stop(),this.services.monitoring.stop(),this.services.connection.stop()]),logger.info("Trading engine stopped")}catch(e){logger.error("Error stopping trading engine:",e)}}}async function main(){const r=document.getElementById("status"),e=new Engine;try{r.textContent="Initializing connection...",await e.initialize(),r.textContent="Starting trading engine...",await e.start(),r.textContent="🚀 Trading bot active",logger.info("🚀 Trading bot started successfully")}catch(t){r.textContent=`Error: ${t.message}`,r.classList.add("error"),logger.error("Failed to start trading bot:",t)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",main):main();
